if (self.CavalryLogger) { CavalryLogger.start_js(["DqxSI"]); }

__d("CameraFileBugButton.react",["ix","fbt","AsyncDialog","AsyncRequest","Image.react","React","ReactMenu","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("ReactMenu").Item,j="/ajax/bugs/report",k="342047509524458";function a(){var a=function(){b("AsyncDialog").send(new(b("AsyncRequest"))().setData({product_category_id:k}).setURI(j))};return b("React").createElement(i,{onClick:a,key:"bug"},b("React").createElement(b("Image.react"),{src:g("112874")}),h._("Quelque chose ne fonctionne pas"))}e.exports=a}),null);
__d("CameraPostDirectMarkSeenMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1644150182303893"};c.getQueryID=function(){"use strict";return"171816796723339"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostLoggingEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={SEND_REPLY_ATTEMPT:"send_direct_reply_attempted",SEND_REPLY_SUCCESS:"send_direct_reply_success",SEND_REPLY_FAILURE:"send_direct_reply_failure",THREAD_VIEWED:"view",THREAD_MARK_SEEN_ATTEMPT:"mark_thread_seen_attempted",THREAD_MARK_SEEN_SUCCESS:"mark_thread_seen_success",THREAD_MARK_SEEN_FAILURE:"mark_thread_seen_failure",DIRECT_VIEWER_CLICKOUT:"clickout"}}),null);
__d("CameraPostQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1990716690969667"};c.getQueryID=function(){"use strict";return"437127270058559"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostRepliesQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1494166853955273"};c.getQueryID=function(){"use strict";return"1468697053209427"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostReplyMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1459763854077111"};c.getQueryID=function(){"use strict";return"1849675045338105"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostUserQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1652248708148952"};c.getQueryID=function(){"use strict";return"143159039576179"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("DirectMessagingTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAccountstatus=function(a){this.$1.accountstatus=a;return this};a.prototype.setActionSource=function(a){this.$1.action_source=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setBackstagePostID=function(a){this.$1.backstage_post_id=a;return this};a.prototype.setBackstageThreadID=function(a){this.$1.backstage_thread_id=a;return this};a.prototype.setBadgingNumber=function(a){this.$1.badging_number=a;return this};a.prototype.setBlacklistedIds=function(a){this.$1.blacklisted_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setBlacklistedStoriesUsersCount=function(a){this.$1.blacklisted_stories_users_count=a;return this};a.prototype.setCameraPostType=function(a){this.$1.camera_post_type=a;return this};a.prototype.setCameraStoryPromotionID=function(a){this.$1.camera_story_promotion_id=a;return this};a.prototype.setCardID=function(a){this.$1.card_id=a;return this};a.prototype.setClientCameraPostTrackingKey=function(a){this.$1.client_camera_post_tracking_key=a;return this};a.prototype.setClientIsReplay=function(a){this.$1.client_is_replay=a;return this};a.prototype.setClientMediaContentID=function(a){this.$1.client_media_content_id=a;return this};a.prototype.setClientMediaID=function(a){this.$1.client_media_id=a;return this};a.prototype.setClientMediaIdsStrings=function(a){this.$1.client_media_ids_strings=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setClientSessionID=function(a){this.$1.client_session_id=a;return this};a.prototype.setClientSessionTime=function(a){this.$1.client_session_time=a;return this};a.prototype.setClientShareSheetID=function(a){this.$1.client_share_sheet_id=a;return this};a.prototype.setClientViewerSessionID=function(a){this.$1.client_viewer_session_id=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContainermodule=function(a){this.$1.containermodule=a;return this};a.prototype.setCount=function(a){this.$1.count=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setDeviceid=function(a){this.$1.deviceid=a;return this};a.prototype.setDirectDataSessionID=function(a){this.$1.direct_data_session_id=a;return this};a.prototype.setDirectGroup=function(a){this.$1.direct_group=a;return this};a.prototype.setDirectRecipients=function(a){this.$1.direct_recipients=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setDirectRecipientsSize=function(a){this.$1.direct_recipients_size=a;return this};a.prototype.setDirectSessionID=function(a){this.$1.direct_session_id=a;return this};a.prototype.setDirectSpaces=function(a){this.$1.direct_spaces=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setEventStoriesInTray=function(a){this.$1.event_stories_in_tray=a;return this};a.prototype.setEventname=function(a){this.$1.eventname=a;return this};a.prototype.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};a.prototype.setFirstView=function(a){this.$1.first_view=a;return this};a.prototype.setFolloweeStoriesInTray=function(a){this.$1.followee_stories_in_tray=a;return this};a.prototype.setFriendStoriesInTray=function(a){this.$1.friend_stories_in_tray=a;return this};a.prototype.setGesture=function(a){this.$1.gesture=a;return this};a.prototype.setGroupRecipients=function(a){this.$1.group_recipients=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setGroupRecipientsSize=function(a){this.$1.group_recipients_size=a;return this};a.prototype.setGroupStoriesInTray=function(a){this.$1.group_stories_in_tray=a;return this};a.prototype.setHasMyStory=function(a){this.$1.has_my_story=a;return this};a.prototype.setHasNewContent=function(a){this.$1.has_new_content=a;return this};a.prototype.setHasNewReactions=function(a){this.$1.has_new_reactions=a;return this};a.prototype.setHasNewViews=function(a){this.$1.has_new_views=a;return this};a.prototype.setHasNuxStory=function(a){this.$1.has_nux_story=a;return this};a.prototype.setInspirationGroupSession=function(a){this.$1.inspiration_group_session=a;return this};a.prototype.setInstagramMediaID=function(a){this.$1.instagram_media_id=a;return this};a.prototype.setInstagramUserID=function(a){this.$1.instagram_user_id=a;return this};a.prototype.setInterface=function(a){this.$1["interface"]=a;return this};a.prototype.setIsCamera=function(a){this.$1.is_camera=a;return this};a.prototype.setIsFromStory=function(a){this.$1.is_from_story=a;return this};a.prototype.setIsStory=function(a){this.$1.is_story=a;return this};a.prototype.setIsemployee=function(a){this.$1.isemployee=a;return this};a.prototype.setLiveStoriesInTray=function(a){this.$1.live_stories_in_tray=a;return this};a.prototype.setLiveVideoID=function(a){this.$1.live_video_id=a;return this};a.prototype.setMediaIndex=function(a){this.$1.media_index=a;return this};a.prototype.setMediaOwner=function(a){this.$1.media_owner=a;return this};a.prototype.setMediaOwnerTypeString=function(a){this.$1.media_owner_type_string=a;return this};a.prototype.setMediaType=function(a){this.$1.media_type=a;return this};a.prototype.setMessageID=function(a){this.$1.message_id=a;return this};a.prototype.setMessageLength=function(a){this.$1.message_length=a;return this};a.prototype.setMessageType=function(a){this.$1.message_type=a;return this};a.prototype.setMobileNetworkType=function(a){this.$1.mobile_network_type=a;return this};a.prototype.setMontageMessageID=function(a){this.$1.montage_message_id=a;return this};a.prototype.setMutationID=function(a){this.$1.mutation_id=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setNumParticipants=function(a){this.$1.num_participants=a;return this};a.prototype.setNumberBadges=function(a){this.$1.number_badges=a;return this};a.prototype.setNumberLiveStories=function(a){this.$1.number_live_stories=a;return this};a.prototype.setNumberMedia=function(a){this.$1.number_media=a;return this};a.prototype.setNumberNewRows=function(a){this.$1.number_new_rows=a;return this};a.prototype.setNumberNewStories=function(a){this.$1.number_new_stories=a;return this};a.prototype.setNumberReactions=function(a){this.$1.number_reactions=a;return this};a.prototype.setNumberRows=function(a){this.$1.number_rows=a;return this};a.prototype.setNumberStories=function(a){this.$1.number_stories=a;return this};a.prototype.setNumberViewers=function(a){this.$1.number_viewers=a;return this};a.prototype.setOtherParticipant=function(a){this.$1.other_participant=a;return this};a.prototype.setOverlayTypesUsed=function(a){this.$1.overlay_types_used=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setPageStoriesInTray=function(a){this.$1.page_stories_in_tray=a;return this};a.prototype.setPrivacyMode=function(a){this.$1.privacy_mode=a;return this};a.prototype.setProductMediaType=function(a){this.$1.product_media_type=a;return this};a.prototype.setProductSurface=function(a){this.$1.product_surface=a;return this};a.prototype.setPromotionStoriesInTray=function(a){this.$1.promotion_stories_in_tray=a;return this};a.prototype.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};a.prototype.setReactionID=function(a){this.$1.reaction_id=a;return this};a.prototype.setReactionType=function(a){this.$1.reaction_type=a;return this};a.prototype.setReadStories=function(a){this.$1.read_stories=a;return this};a.prototype.setReason=function(a){this.$1.reason=a;return this};a.prototype.setReplaysLeft=function(a){this.$1.replays_left=a;return this};a.prototype.setReplyCount=function(a){this.$1.reply_count=a;return this};a.prototype.setReplyType=function(a){this.$1.reply_type=a;return this};a.prototype.setRowIndex=function(a){this.$1.row_index=a;return this};a.prototype.setRowStatus=function(a){this.$1.row_status=a;return this};a.prototype.setSendKey=function(a){this.$1.send_key=a;return this};a.prototype.setServerPostSource=function(a){this.$1.server_post_source=a;return this};a.prototype.setServertime=function(a){this.$1.servertime=a;return this};a.prototype.setSoftDeletedStoryThreadIds=function(a){this.$1.soft_deleted_story_thread_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setSource=function(a){this.$1.source=a;return this};a.prototype.setSourceThreadID=function(a){this.$1.source_thread_id=a;return this};a.prototype.setStoryIndex=function(a){this.$1.story_index=a;return this};a.prototype.setStoryMediaIds=function(a){this.$1.story_media_ids=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setStoryOwner=function(a){this.$1.story_owner=a;return this};a.prototype.setStoryOwnerFbids=function(a){this.$1.story_owner_fbids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setStoryOwnerType=function(a){this.$1.story_owner_type=a;return this};a.prototype.setStoryRankingScores=function(a){this.$1.story_ranking_scores=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setStoryThreadIds=function(a){this.$1.story_thread_ids=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setTargetID=function(a){this.$1.target_id=a;return this};a.prototype.setThreadCount=function(a){this.$1.thread_count=a;return this};a.prototype.setThreadViewIdentifier=function(a){this.$1.thread_view_identifier=a;return this};a.prototype.setTrackingString=function(a){this.$1.tracking_string=a;return this};a.prototype.setTraySessionID=function(a){this.$1.tray_session_id=a;return this};a.prototype.setTriggerSource=function(a){this.$1.trigger_source=a;return this};a.prototype.setTruePromptID=function(a){this.$1.true_prompt_id=a;return this};a.prototype.setUnifiedPrivacyMode=function(a){this.$1.unified_privacy_mode=a;return this};a.prototype.setUnreadStories=function(a){this.$1.unread_stories=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWhitelistedIds=function(a){this.$1.whitelisted_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setWhitelistedStoriesUsersCount=function(a){this.$1.whitelisted_stories_users_count=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={accountstatus:!0,action_source:!0,appid:!0,appversion:!0,backstage_post_id:!0,backstage_thread_id:!0,badging_number:!0,blacklisted_ids:!0,blacklisted_stories_users_count:!0,camera_post_type:!0,camera_story_promotion_id:!0,card_id:!0,client_camera_post_tracking_key:!0,client_is_replay:!0,client_media_content_id:!0,client_media_id:!0,client_media_ids_strings:!0,client_session_id:!0,client_session_time:!0,client_share_sheet_id:!0,client_viewer_session_id:!0,clienttime:!0,containermodule:!0,count:!0,country:!0,deviceid:!0,direct_data_session_id:!0,direct_group:!0,direct_recipients:!0,direct_recipients_size:!0,direct_session_id:!0,direct_spaces:!0,event_stories_in_tray:!0,eventname:!0,extra_client_data:!0,first_view:!0,followee_stories_in_tray:!0,friend_stories_in_tray:!0,gesture:!0,group_recipients:!0,group_recipients_size:!0,group_stories_in_tray:!0,has_my_story:!0,has_new_content:!0,has_new_reactions:!0,has_new_views:!0,has_nux_story:!0,inspiration_group_session:!0,instagram_media_id:!0,instagram_user_id:!0,"interface":!0,is_camera:!0,is_from_story:!0,is_story:!0,isemployee:!0,live_stories_in_tray:!0,live_video_id:!0,media_index:!0,media_owner:!0,media_owner_type_string:!0,media_type:!0,message_id:!0,message_length:!0,message_type:!0,mobile_network_type:!0,montage_message_id:!0,mutation_id:!0,name:!0,num_participants:!0,number_badges:!0,number_live_stories:!0,number_media:!0,number_new_rows:!0,number_new_stories:!0,number_reactions:!0,number_rows:!0,number_stories:!0,number_viewers:!0,other_participant:!0,overlay_types_used:!0,page_stories_in_tray:!0,privacy_mode:!0,product_media_type:!0,product_surface:!0,promotion_stories_in_tray:!0,rawclienttime:!0,reaction_id:!0,reaction_type:!0,read_stories:!0,reason:!0,replays_left:!0,reply_count:!0,reply_type:!0,row_index:!0,row_status:!0,send_key:!0,server_post_source:!0,servertime:!0,soft_deleted_story_thread_ids:!0,source:!0,source_thread_id:!0,story_index:!0,story_media_ids:!0,story_owner:!0,story_owner_fbids:!0,story_owner_type:!0,story_ranking_scores:!0,story_thread_ids:!0,target_id:!0,thread_count:!0,thread_view_identifier:!0,tracking_string:!0,tray_session_id:!0,trigger_source:!0,true_prompt_id:!0,unified_privacy_mode:!0,unread_stories:!0,vc:!0,whitelisted_ids:!0,whitelisted_stories_users_count:!0};e.exports=a}),null);
__d("FBStoriesLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={EVENT_STORY:"event",FOLLOWEE_STORY:"followee",FRIEND_STORY:"friend",GROUP_STORY:"group",MISSING_STORY_DATA:"missingStoryData",PAGE_STORY:"page",SELF_STORY:"self",STORY_PROMOTION:"promotion",ACTION_OPEN_MEDIA:"open_media",ACTION_DELETE_MEDIA:"delete_media_attempted",ACTION_SEND_REPLY_ATTEMPT:"attempt_to_send_reply",ACTION_SEND_REPLY_SUCCESS:"mark_reply_sent",ACTION_SEND_REPLY_FAILURE:"reply_sent_failure",ACTION_SEND_STICKER_ATTEMPT:"attempt_to_send_sticker",ACTION_SEND_STICKER_SUCCESS:"mark_sticker_sent",ACTION_SEND_STICKER_FAILURE:"sticker_sent_failure",ACTION_SEND_GIF_ATTEMPT:"attempt_to_send_gif",ACTION_SEND_GIF_SUCCESS:"mark_gif_sent",ACTION_SEND_GIF_FAILURE:"gif_sent_failure",ACTION_OPEN_SEEN_SUMMARY:"open_seen_summary",ACTION_OPEN_STORY:"open_story",ACTION_CLOSE_STORY:"close_story",ACTION_TRAY_LOAD:"story_tray_load",SOURCE_OPEN_FROM_STORY_HEAD:"openFromStoryHead",SOURCE_OPEN_FROM_PRIOR_STORY:"openFromPriorStory",SOURCE_CLOSE_FROM_MODAL:"closeFromClickingOnModal",SOURCE_CLOSE_FROM_MODAL_CLOSE_BUTTON:"closeFromClickingOnModalCloseButton",SOURCE_CLOSE_FROM_LAST_STORY_FINISHING:"closeFromLastStoryFinishing",INTERACTIONS:{CATEGORY_KEY:"fb_stories_tray",TOTAL_INIT:"init_agg",DATA_LOADING:"graphql_data_loading",TRAY_RENDER:"react_story_tray_render",VIEWER_OPEN:"viewer_open"}};e.exports=a}),null);
__d("CameraPostGraphQLAPI",["CameraPostDirectMarkSeenMutationWebGraphQLMutation","CameraPostLoggingEvents","CameraPostQueryWebGraphQLQuery","CameraPostRepliesQueryWebGraphQLQuery","CameraPostReplyMutationWebGraphQLMutation","CameraPostUserQueryWebGraphQLQuery","DirectMessagingTypedLogger","FBStoriesLoggingConstants","WebGraphQL","Banzai","idx","uniqueID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,c,d,e,f,g){__p&&__p();var h=new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(e).setCardID(a.toString());if(d.message){var i=d.message.length;h.setMessageLength(i)}d.sticker_id&&h.addToExtraData("sticker_id",d.sticker_id);d.gif_url&&h.addToExtraData("gif_url",d.gif_url);h.log();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:e,thread_id:String(a)});return b("WebGraphQL").exec(new(b("CameraPostReplyMutationWebGraphQLMutation"))({input:d})).then(function(d){new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(f).setCardID(a.toString()).log();return d},function(d){new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(g).setCardID(a.toString()).log();return d})};e.exports={sendDirectMessageReply:function(a,c,d,e,f){var h=b("uniqueID")();h={client_mutation_id:h,actor_id:a,thread_id:c,message:d};a=void 0;d=void 0;void 0;f?(a=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT,d=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_SUCCESS,f=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_FAILURE):(a=b("CameraPostLoggingEvents").SEND_REPLY_ATTEMPT,d=b("CameraPostLoggingEvents").SEND_REPLY_SUCCESS,f=b("CameraPostLoggingEvents").SEND_REPLY_FAILURE);return g(c,e,h,a,d,f)},sendDirectStickerReply:function(a,c,d,e){var f=b("uniqueID")();f={client_mutation_id:f,actor_id:a,thread_id:c,sticker_id:e};return g(c,d,f,b("FBStoriesLoggingConstants").ACTION_SEND_STICKER_ATTEMPT,b("FBStoriesLoggingConstants").ACTION_SEND_STICKER_SUCCESS,b("FBStoriesLoggingConstants").ACTION_SEND_STICKER_FAILURE)},sendDirectGifReply:function(a,c,d,e){var f=b("uniqueID")();f={client_mutation_id:f,actor_id:a,thread_id:c,gif_url:e};return g(c,d,f,b("FBStoriesLoggingConstants").ACTION_SEND_GIF_ATTEMPT,b("FBStoriesLoggingConstants").ACTION_SEND_GIF_SUCCESS,b("FBStoriesLoggingConstants").ACTION_SEND_GIF_FAILURE)},loadThreadFullInformation:function(a,c){return b("WebGraphQL").exec(new(b("CameraPostQueryWebGraphQLQuery"))({thread_id:c})).then(function(a){var d,e;d=(d=a)!=null?(d=d.node)!=null?d.camera_post_type:d:d;e=(e=a)!=null?(e=e.node)!=null?e.viewer_replays_left:e:e;new(b("DirectMessagingTypedLogger"))().setCameraPostType(d).setName(b("CameraPostLoggingEvents").THREAD_VIEWED).setProductSurface("www").setReplaysLeft(e).setCardID(c.toString()).log();return a},function(a){!1;return a})},loadUserInfo:function(){return b("WebGraphQL").exec(new(b("CameraPostUserQueryWebGraphQLQuery"))())},loadRepliesForThread:function(a){return b("WebGraphQL").exec(new(b("CameraPostRepliesQueryWebGraphQLQuery"))({thread_id:a}))},markThreadSeen:function(a,c,d,e,f){a={client_mutation_id:b("uniqueID")(),actor_id:a,thread_id:c,last_message_seen_id:d};d=new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_ATTEMPT).setProductSurface("www").setCardID(c.toString());f&&(d=d.setReplaysLeft(f));d.log();return b("WebGraphQL").exec(new(b("CameraPostDirectMarkSeenMutationWebGraphQLMutation"))({input:a})).then(function(a){new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setProductSurface("www").setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_SUCCESS).setReplaysLeft(f).setCardID(c.toString()).log();return a},function(a){new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setProductSurface("www").setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_FAILURE).setReplaysLeft(f).setCardID(c.toString()).log();return a})},_getLogger:function(){return new(b("DirectMessagingTypedLogger"))()}}}),null);
__d("CameraPostBucketOwnerHelper",["idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getName:function(a){return((a=a)!=null?a.name:a)||""},getGender:function(a){return!a?"":a.gender?a.gender:""},isEventHost:function(a){return!a?!1:a.is_viewer_host?!!a.is_viewer_host:!1},isViewerFriend:function(a){return!a?!1:a.is_viewer_friend?!!a.is_viewer_friend:!1},isEmployee:function(a){return!a?!1:a.is_employee?!!a.is_employee:!1},getProfilePictureUri:function(a){return!a||!a.profile_picture?"":a.profile_picture.uri||""},getCoverPhotoUri:function(a){return!a||!a.cover_photo?"":((a=a)!=null?(a=a.cover_photo)!=null?(a=a.photo)!=null?(a=a.image)!=null?a.uri:a:a:a:a)||""},isViewerPageContentAdmin:function(a){a=g._getViewerProfilePermissions(a);return a&&a.includes("EDIT_PROFILE")||!1},isViewerGroupModerator:function(a){a=g._getViewerAdminType(a);return a==="MODERATOR"},isViewerGroupAdmin:function(a){a=g._getViewerAdminType(a);return a==="ADMIN"},_getViewerProfilePermissions:function(a){return!a||!a.viewer_profile_permissions?null:((a=a)!=null?a.viewer_profile_permissions:a)||null},_getViewerAdminType:function(a){return!a||!a.viewer_admin_type?null:((a=a)!=null?a.viewer_admin_type:a)||null},requiresAdminApproval:function(a){return!a?!1:a.story_approval_required&&!!a.story_approval_required||(a.stories_admin_approval_required_setting?a.stories_admin_approval_required_setting==="ON":!1)}};e.exports=g}),null);
__d("CameraPostMediaHelper",["idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getWidth:function(a){if(!a)return 0;if(a.width)return a.width;return a.image?a.image.width||0:0},getHeight:function(a){if(!a)return 0;if(a.height)return a.height;return a.image?a.image.height||0:0},getType:function(a){return((a=a)!=null?a.__typename:a)||""},getImageUri:function(a){return!a?null:a.image?a.image.uri:null},getBlurImageUri:function(a){return!a?null:a.image_blurred?a.image_blurred.uri:null},isImage:function(a){return g.getType(a)==="Photo"},isVideo:function(a){return g.getType(a)==="Video"},getPreviewImage:function(a){return!a?null:a.preview_image?a.preview_image.uri:null},makeOptimisticPhotoMedia:function(a){return{id:null,__typename:"Photo",preview_image:{uri:a,width:null,height:null},image:{uri:a,width:null,height:null},image_blurred:{uri:a,width:null,height:null}}}};e.exports=g}),null);
__d("CameraPostThreadOwnerHelper",["idx"],(function(a,b,c,d,e,f){"use strict";a={getId:function(a){return(a=a)!=null?a.id:a},getName:function(a){return((a=a)!=null?a.name:a)||""},getIsViewerFriend:function(a){return!!((a=a)!=null?a.is_viewer_friend:a)},getProfilePictureUri:function(a){return((a=a)!=null?(a=a.profile_picture)!=null?a.uri:a:a)||""}};e.exports=a}),null);
__d("CameraPostTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DIRECT:"DIRECT",GROUP_DIRECT:"GROUP_DIRECT",DIRECT_NUX:"DIRECT_NUX",STORY:"STORY",STORY_NUX:"STORY_NUX",PAGE_STORY:"PAGE_STORY",EVENT_STORY:"EVENT_STORY",BIRTHDAY_STORY:"BIRTHDAY_STORY",GROUP_STORY:"GROUP_STORY",TOPIC_STORY:"TOPIC_STORY",LIVE_STORY:"LIVE_STORY",PROMOTION_STORY:"PROMOTION_STORY",NULL_HEADS:"NULL_HEADS"})}),null);
__d("CameraPostTypesHelper",["CameraPostTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isEventStory:function(a){return a===b("CameraPostTypes").EVENT_STORY},isGroupStory:function(a){return a===b("CameraPostTypes").GROUP_STORY},isMultiAuthor:function(a){return g.isEventStory(a)||g.isGroupStory(a)},isPageStory:function(a){return a===b("CameraPostTypes").PAGE_STORY},isPromotionStory:function(a){return a===b("CameraPostTypes").PROMOTION_STORY},isStory:function(a){return a===b("CameraPostTypes").STORY},isStoryNux:function(a){return a===b("CameraPostTypes").STORY_NUX}};e.exports=g}),null);
__d("FBStoriesAudienceModeMutationCallMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1883080631763254"};c.getQueryID=function(){"use strict";return"196508534442477"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("FBStoriesBucketsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1891768334221590"};c.getQueryID=function(){"use strict";return"1942071406123031"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("FBStoriesDeleteMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1340045906066120"};c.getQueryID=function(){"use strict";return"967072946766012"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("FBStoriesMuteMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1524574307634402"};c.getQueryID=function(){"use strict";return"1944151819168048"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("FBStoriesMutedBucketOwnersQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1891920954170361"};c.getQueryID=function(){"use strict";return"294951511028390"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("FBStoriesPrivacyChangeSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1698650280180657",queryID:"358127274690781"})}),null);
__d("FBStoriesPrivacyChangeSubscription",["BaseGraphQLSubscription","FBStoriesPrivacyChangeSubscriptionWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){a=babelHelpers["extends"]({},b("BaseGraphQLSubscription"),{_getTopic:function(a){return"gqls/unified_stories_privacy_change_subscribe/owner_id_"+a},_getQueryID:function(){return b("FBStoriesPrivacyChangeSubscriptionWebGraphQLSubscription").getDocID()},_getQueryParameters:function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),owner_id:a})}},_getSubscriptionCallName:function(){return"unified_stories_privacy_change_subscribe"}});e.exports=a}),null);
__d("FBStoriesPrivacySettingsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1636640369763506"};c.getQueryID=function(){"use strict";return"153291488685319"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("FBStoriesSeenRecieptsLastSeenTimeUpdateMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1386522808128715"};c.getQueryID=function(){"use strict";return"1384057201673076"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("FBStoriesTraySubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1640742042710316",queryID:"940295029485842"})}),null);
__d("FBStoriesTraySubscription",["BaseGraphQLSubscription","FBStoriesTraySubscriptionWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){a=babelHelpers["extends"]({},b("BaseGraphQLSubscription"),{_getTopic:function(a){return"gqls/stories_tray_subscribe/user_id_"+a},_getQueryID:function(){return b("FBStoriesTraySubscriptionWebGraphQLSubscription").getDocID()},_getQueryParameters:function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),user_id:a})}},_getSubscriptionCallName:function(){return"stories_tray_subscribe"}});e.exports=a}),null);
__d("FBStoriesViewerBucketViewersQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1947206885297176"};c.getQueryID=function(){"use strict";return"306146936556058"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("FBStoriesVotePollMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1942364135805651"};c.getQueryID=function(){"use strict";return"1772533953042568"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("ReportStoryCardToAdminWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1435403036581993"};c.getQueryID=function(){"use strict";return"909342722558820"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("FBStoriesGraphQLAPI",["CurrentUser","FBStoriesAudienceModeMutationCallMutationWebGraphQLMutation","FBStoriesBucketsQueryWebGraphQLQuery","FBStoriesDeleteMutationWebGraphQLMutation","FBStoriesMutedBucketOwnersQueryWebGraphQLQuery","FBStoriesMuteMutationWebGraphQLMutation","FBStoriesPrivacyChangeSubscription","FBStoriesPrivacySettingsQueryWebGraphQLQuery","FBStoriesVotePollMutationWebGraphQLMutation","FBStoriesSeenRecieptsLastSeenTimeUpdateMutationWebGraphQLMutation","FBStoriesTraySubscription","FBStoriesViewerBucketViewersQueryWebGraphQLQuery","ReportStoryCardToAdminWebGraphQLMutation","WebGraphQL","uniqueID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={load:function(){return b("WebGraphQL").exec(new(b("FBStoriesBucketsQueryWebGraphQLQuery"))())},loadPrivacySettings:function(){return b("WebGraphQL").exec(new(b("FBStoriesPrivacySettingsQueryWebGraphQLQuery"))({}))},loadViewerListForThread:function(a){return b("WebGraphQL").exec(new(b("FBStoriesViewerBucketViewersQueryWebGraphQLQuery"))({threadId:a}))},subscribeToPrivacyChanges:function(a){return b("FBStoriesPrivacyChangeSubscription").subscribe(b("CurrentUser").getID(),a)},subscribeToTrayChanges:function(a){return b("FBStoriesTraySubscription").subscribe(b("CurrentUser").getID(),a)},unsubscribeFromTrayChanges:function(a){a.unsubscribe()},updateThreadSeenReciept:function(a){a={client_mutation_id:b("uniqueID")(),actor_id:b("CurrentUser").getID(),thread_id:a};return b("WebGraphQL").exec(new(b("FBStoriesSeenRecieptsLastSeenTimeUpdateMutationWebGraphQLMutation"))({input:a}))},deleteStory:function(a,c){return b("WebGraphQL").exec(new(b("FBStoriesDeleteMutationWebGraphQLMutation"))({input:{client_mutation_id:b("uniqueID")(),actor_id:a,story_thread_ids:[c]}}))},muteBucketOwner:function(a,c,d){return b("WebGraphQL").exec(new(b("FBStoriesMuteMutationWebGraphQLMutation"))({input:{client_mutation_id:b("uniqueID")(),actor_id:a,user_id:c,should_unfollow_user_story:d}}))},loadMutedBucketOwnersList:function(){return b("WebGraphQL").exec(new(b("FBStoriesMutedBucketOwnersQueryWebGraphQLQuery"))({}))},pollVote:function(a,c){return b("WebGraphQL").exec(new(b("FBStoriesVotePollMutationWebGraphQLMutation"))({input:{client_mutation_id:b("uniqueID")(),story_card_poll_id:a,option:c,actor_id:b("CurrentUser").getID()}}))},reportThreadToAdmin:function(a,c){return b("WebGraphQL").exec(new(b("ReportStoryCardToAdminWebGraphQLMutation"))({input:{client_mutation_id:b("uniqueID")(),actor_id:a,report_to_admin_action:"REPORT",story_card_id:c}}))},changeAudienceMode:function(a,c){return b("WebGraphQL").exec(new(b("FBStoriesAudienceModeMutationCallMutationWebGraphQLMutation"))({input:{client_mutation_id:b("uniqueID")(),actor_id:a,audience_mode:c}}))}}}),null);
__d("FBStoriesComposerDialogViewer",["Arbiter","Bootloader","DOM","FeedComposerIDStore","LitestandComposer","React","ReactComposerStoriesConfig","ReactDOM","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="fb_stories_composer_dialog";function a(){__p&&__p();this.close=function(){if(!this.$1)return;this.$1=!1;b("ReactDOM").unmountComponentAtNode(this.$2)}.bind(this);this.$1=!1;this.$2=b("DOM").create("div",{id:g});document.body&&document.body.appendChild(this.$2);var a=b("ReactComposerStoriesConfig").contextConfig.composerID,c=b("FeedComposerIDStore").get();c&&(b("LitestandComposer").initComposer(c),this.$3=new(b("SubscriptionsHandler"))(),this.$3.addSubscriptions(b("Arbiter").subscribe("LitestandComposer/publish",function(d,e){e.composer_id===a&&(e.composer_id=c,b("Arbiter").inform("LitestandComposer/publish",e))}),b("Arbiter").subscribe("LitestandComposer/publishTemp",function(d,e){e.composer_id===a&&(e.composer_id=c,b("Arbiter").inform("LitestandComposer/publishTemp",e))})));b("Run").onLeave(function(){this.$3&&this.$3.release()}.bind(this))}a.prototype.open=function(){if(this.$1)return;this.$1=!0;b("Bootloader").loadModules(["FBStoriesComposerDialog.react"],function(a){b("ReactDOM").render(b("React").createElement(a,{onClose:this.close}),this.$2)}.bind(this),"FBStoriesComposerDialogViewer")};e.exports=new a()}),null);
__d("FBStoriesProductionActions",["FBStoriesComposerDialogViewer"],(function(a,b,c,d,e,f){"use strict";a={openProductionDialog:function(){return b("FBStoriesComposerDialogViewer").open()}};e.exports=a}),null);
__d("FBStoriesThreadHelper",["CameraPostMediaHelper","CameraPostThreadOwnerHelper","CameraPostTypes","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getCameraPostType:function(a){return((a=a)!=null?a.camera_post_type:a)||b("CameraPostTypes").STORY},getCameraPostSource:function(a){return((a=a)!=null?a.post_source:a)||"CAMERA_SYSTEM"},isSeenByViewer:function(a){return!!((a=a)!=null?a.is_seen_by_viewer:a)},notSeenByViewer:function(a){return!g.isSeenByViewer(a)},setIsSeenByViewer:function(a,b){if(!a)return;a.is_seen_by_viewer=b},getLatestMessageID:function(a){return(a=a)!=null?(a=a.latest_message)!=null?a.id:a:a},getStatus:function(a){return(a=a)!=null?a.thread_status:a},isReviewStatusPending:function(a){a=g._getReviewStatus(a);return a==="PENDING"||a==="DENIED"},_getReviewStatus:function(a){return(a=a)!=null?a.thread_review_status:a},getTime:function(a){return((a=a)!=null?a.time:a)||0},getExpiryTime:function(a){return((a=a)!=null?a.thread_expiry_time:a)||0},isExpired:function(a){a=g.getExpiryTime(a);return!a?!1:a<Date.now()/1e3},isUploading:function(a){return g.getStatus(a)==="UPLOADING"},getNonFriendsSeenCount:function(a){return((a=a)!=null?a.non_friends_seen_count:a)||0},setNonFriendsSeenCount:function(a,b){if(!a)return;a.non_friends_seen_count=b},getFriendsSeenCount:function(a){return((a=a)!=null?a.friends_seen_count:a)||0},setFriendsSeenCount:function(a,b){if(!a)return;a.friends_seen_count=b},getSeenReceiptsLastSeenTime:function(a){return((a=a)!=null?a.seen_receipts_last_seen_time:a)||0},setSeenReceiptsLastSeenTime:function(a,b){if(!a)return;a.seen_receipts_last_seen_time=b},getSeenReceiptsUnseenCount:function(a){return((a=a)!=null?a.seen_receipts_unseen_count:a)||0},doesThreadHasUnseenViewers:function(a){return!a?!1:g.getSeenReceiptsUnseenCount(a)>0||g.getSeenReceiptsFollowersUnseenCount(a)>0},getSeenReceiptsFollowersUnseenCount:function(a){return((a=a)!=null?a.seen_receipts_followers_unseen_count:a)||0},setSeenReceiptsUnseenCount:function(a,b){if(!a)return;a.seen_receipts_unseen_count=b},setSeenReceiptsFollowersUnseenCount:function(a,b){if(!a)return;a.seen_receipts_followers_unseen_count=b},getOwner:function(a){return(a=a)!=null?a.camera_post_thread_owner:a},getOwnerId:function(a){return b("CameraPostThreadOwnerHelper").getId(g.getOwner(a))},isViewerFriendOfOwner:function(a){return b("CameraPostThreadOwnerHelper").getIsViewerFriend(g.getOwner(a))},getViewers:function(a){return((a=a)!=null?(a=a.story_thread_viewers)!=null?a.edges:a:a)||[]},setViewers:function(a,b){if(!a)return;a.story_thread_viewers={edges:b}},getRootMessage:function(a){return(a=a)!=null?a.root_message:a},getStoryOverlays:function(a){return!a?[]:((a=g.getRootMessage(a))!=null?a.story_overlays:a)||[]},getPoll:function(a){a=this.getStoryOverlays(a).find(function(a){return a.__typename==="StoryOverlayPollSticker"});return!a?null:(a=a)!=null?a.poll:a},getPollVoters:function(a){a=this.getPoll(a);return!a?{}:(a.poll_options||[]).reduce(function(a,b){var c;c=(c=b)!=null?(c=c.voters)!=null?c.nodes:c:c;if(!c||c.length===0)return a;c.forEach(function(c){return a[c.id]=b.index});return a},{})},getMedia:function(a){return(a=g.getRootMessage(a))!=null?a.message_media:a},getMediaId:function(a){return b("CameraPostMediaHelper").getId(g.getMedia(a))},getMediaType:function(a){return b("CameraPostMediaHelper").getType(g.getMedia(a))},getMediaPreviewImage:function(a){return b("CameraPostMediaHelper").getPreviewImage(g.getMedia(a))},getWWWTextFormatMetadata:function(a){return((a=g.getRootMessage(a))!=null?a.www_text_format_metadata:a)||null},getIsPlainText:function(a){return((a=g.getRootMessage(a))!=null?a.is_plain_text:a)||!1},getTextFormatMetadata:function(a){return((a=g.getRootMessage(a))!=null?a.text_format_metadata:a)||null},getBackdropImage:function(a){return((a=g.getRootMessage(a))!=null?a.backdrop_image:a)||null},getMessageText:function(a){return((a=g.getRootMessage(a))!=null?a.message_text:a)||""},getActivityDescription:function(a){return!a?null:a.activity_description||null},getWithTags:function(a){return!a?null:a.with_tags||null},getInstagramProfileURL:function(a){return((a=a)!=null?a.instagram_profile_url:a)||null},getOriginalPostStoryAttribution:function(a){return!a?null:((a=g.getRootMessage(a))!=null?a.original_post_story_attribution:a)||null},getStoryViewerId:function(a){return(a=a)!=null?(a=a.node)!=null?a.id:a:a},getStoryViewerSeenTime:function(a){return((a=a)!=null?a.seen_time:a)||0},makeOptimisticPhotoThread:function(a){var c=this._getDefaultThread();a=b("CameraPostMediaHelper").makeOptimisticPhotoMedia(a);return babelHelpers["extends"]({},c,{is_seen_by_viewer:!1,root_message:{message_media:a},thread_expiry_time:Math.floor(Date.now()/1e3+24*60*60),thread_status:"UPLOADING",time:Math.floor(Date.now()/1e3)})},_getDefaultThread:function(){return{id:null,camera_post_type:null,post_source:null,time:null,thread_expiry_time:null,seen_receipts_last_seen_time:null,seen_receipts_unseen_count:null,seen_receipts_followers_unseen_count:null,thread_status:null,thread_review_status:null,root_message:{message_media:null},latest_message:{id:null},is_seen_by_viewer:null,is_user_story_thread_viewer:null,camera_post_thread_owner:null,friends_seen_count:null,non_friends_seen_count:null,story_thread_viewers:{edges:null},activity_description:null}}};e.exports=g}),null);
__d("FBStoriesBucketHelper",["CameraPostBucketOwnerHelper","CameraPostTypes","CameraPostTypesHelper","CurrentUser","FBStoriesLoggingConstants","FBStoriesThreadHelper","QE2Logger","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getUnseenThread:function(a){var b=h.getThreads(a);return b[Math.max(0,h.getUnseenThreadIndex(a))]}},h={isUserBucket:function(a){return h.getOwnerId(a)===b("CurrentUser").getID()},getLiveVideo:function(a){return(a=a)!=null?a.live_video:a},getMediaIDForLiveBucket:function(a){return(a=a)!=null?(a=a.live_video)!=null?a.id:a:a},isLive:function(a){return!!((a=h.getLiveVideo(a))!=null?a.id:a)},setLiveVideo:function(a,b){if(!a)return;a.live_video=b},hasData:function(a){return!a?!1:this.isLive(a)||h.getThreads(a).length>0},getThreads:function(a){a=((a=a)!=null?(a=a.threads)!=null?a.nodes:a:a)||[];return a.filter(function(a){return(b("FBStoriesThreadHelper").getStatus(a)==="PUBLISHED"||b("FBStoriesThreadHelper").getStatus(a)==="UPLOADING")&&b("FBStoriesThreadHelper").getMedia(a)!==null&&!b("FBStoriesThreadHelper").isExpired(a)})},getThreadIDs:function(a){a=h.getThreads(a);return a.map(function(a){return((a=a)!=null?a.id:a)||""})},setThreads:function(a,b){if(!a)return;a.threads={nodes:b}},getUnseenThreadIndex:function(a){var c=h.getThreads(a);a=h.isUserBucket(a);return a?c.findIndex(b("FBStoriesThreadHelper").doesThreadHasUnseenViewers):c.findIndex(b("FBStoriesThreadHelper").notSeenByViewer)},hasNewViewers:function(a){if(!a)return!1;a=this.getThreads(a);a=a.filter(b("FBStoriesThreadHelper").doesThreadHasUnseenViewers);return a.length>0},hasUnseenThreads:function(a){return this.getThreads(a).findIndex(b("FBStoriesThreadHelper").notSeenByViewer)>=0},getPreviewImage:function(a){a=g.getUnseenThread(a);return b("FBStoriesThreadHelper").getMediaPreviewImage(a)},shouldEnablePageStoryReply:function(a){var c=b("CameraPostTypesHelper").isPageStory(h.getCameraPostType(a));if(c){c=b("CurrentUser").getID();b("QE2Logger").logExposureForUser("page_story_reply_www",c);c=h.getOwner(a);return c.is_eligible_for_story_reply==undefined?!1:c.is_eligible_for_story_reply}return!1},getId:function(a){return((a=a)!=null?a.id:a)||""},getCameraPostType:function(a){return((a=a)!=null?a.camera_post_type:a)||b("CameraPostTypes").STORY},getUnseenCount:function(a){return((a=a)!=null?a.unseen_count:a)||0},setUnseenCount:function(a,b){if(!a)return;a.unseen_count=b},hasLiveVideoEnded:function(a){return!!((a=a)!=null?a.has_live_video_ended:a)},setHasLiveVideoEnded:function(a,b){if(!a)return;a.has_live_video_ended=b},getOwner:function(a){return((a=a)!=null?a.camera_post_bucket_owner:a)||{id:null,name:null,short_name:null,gender:null,is_viewer_friend:!1,profile_picture:null}},getOwnerId:function(a){return b("CameraPostBucketOwnerHelper").getId(h.getOwner(a))},getOwnerGender:function(a){return b("CameraPostBucketOwnerHelper").getGender(h.getOwner(a))},isOwnerEmployee:function(a){return b("CameraPostBucketOwnerHelper").isEmployee(h.getOwner(a))},isViewerEventHost:function(a){return b("CameraPostBucketOwnerHelper").isEventHost(h.getOwner(a))},isViewerPageContentAdmin:function(a){return b("CameraPostBucketOwnerHelper").isViewerPageContentAdmin(h.getOwner(a))},isViewerGroupAdmin:function(a){return b("CameraPostBucketOwnerHelper").isViewerGroupAdmin(h.getOwner(a))},isViewerGroupModerator:function(a){return b("CameraPostBucketOwnerHelper").isViewerGroupModerator(h.getOwner(a))},isViewerFriendOfOwner:function(a){return b("CameraPostBucketOwnerHelper").isViewerFriend(h.getOwner(a))},getOwnerProfilePictureUri:function(a){return b("CameraPostBucketOwnerHelper").getProfilePictureUri(h.getOwner(a))},getOwnerCoverPhotoUri:function(a){return b("CameraPostBucketOwnerHelper").getCoverPhotoUri(h.getOwner(a))},getOwnerName:function(a){var c=arguments.length<=1||arguments[1]===undefined?!1:arguments[1],d=h.getCameraPostType(a),e=h.getOwner(a);if(!c&&b("CameraPostTypesHelper").isStory(d)&&e.short_name)return e.short_name;else return e.name},getLatestThreadCreationTime:function(a){return!a?null:(a=a)!=null?a.latest_thread_creation_time:a},getLoggingType:function(a){__p&&__p();if(!a)return b("FBStoriesLoggingConstants").MISSING_STORY_DATA;if(h.isUserBucket(a))return b("FBStoriesLoggingConstants").SELF_STORY;var c=h.getCameraPostType(a);if(b("CameraPostTypesHelper").isPageStory(c))return b("FBStoriesLoggingConstants").PAGE_STORY;if(b("CameraPostTypesHelper").isGroupStory(c))return b("FBStoriesLoggingConstants").GROUP_STORY;if(b("CameraPostTypesHelper").isEventStory(c))return b("FBStoriesLoggingConstants").EVENT_STORY;if(b("CameraPostTypesHelper").isPromotionStory(c))return b("FBStoriesLoggingConstants").STORY_PROMOTION;return!h.isViewerFriendOfOwner(a)?b("FBStoriesLoggingConstants").FOLLOWEE_STORY:b("FBStoriesLoggingConstants").FRIEND_STORY},addThreadToBucket:function(a,b){var c=h.getThreads(a);h.setThreads(a,c.concat(b))},getDefaultBucket:function(){return{id:null,camera_post_type:null,unseen_count:0,ranking:null,live_video:null,camera_post_bucket_owner:null,threads:null,latest_thread_creation_time:null}},isUploading:function(a){a=h.getThreads(a);a=a.filter(function(a){return b("FBStoriesThreadHelper").isUploading(a)});return a.length>0}};e.exports=h}),null);
__d("BackstageMediaType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LIVE:"live",PHOTO:"photo",VIDEO:"video",WAS_LIVE:"was_live",UNKNOWN:"unknown"})}),null);
__d("FBStoriesActionTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({LOAD:"FB_STORIES.LOAD",LOADING:"FB_STORIES.LOADING",LOADED:"FB_STORIES.LOADED",LOADED_ERROR:"FB_STORIES.LOADED_ERROR",VIEWER_LIST_LOADED_FOR_THREAD:"FB_STORIES.VIEWER_LIST_LOADED_FOR_THREAD",RESET_LOCAL_SEEN_HISTORY:"FB_STORIES.RESET_LOCAL_SEEN_HISTORY",SELECTED_BUCKET_IDX_CHANGED:"FB_STORIES.SELECTED_BUCKET_IDX_CHANGED",SET_ALL_BUCKETS_VIEWED:"FB_STORIES.SET_ALL_BUCKETS_VIEWED",SET_UNSEEN_MODE:"FB_STORIES.SET_UNSEEN_MODE",SELECTED_THREAD_IDX_CHANGED:"FB_STORIES.SELECTED_THREAD_IDX_CHANGED",SELECTED_THREAD_PERCENT_DONE:"FB_STORIES.SELECTED_THREAD_PERCENT_DONE",SUBSCRIPTION_BUCKET_UPDATE:"FB_STORIES.SUBSCRIPTION_BUCKET_UPDATE",UPDATE_THREAD_SEEN_OPTIMISTIC:"FB_STORIES.UPDATE_THREAD_SEEN_OPTIMISTIC",UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC:"FB_STORIES.UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC",DELETE_THREAD_FROM_BUCKET:"FB_STORIES.DELETE_THREAD_FROM_BUCKET",REMOVE_BUCKET:"FB_STORIES.REMOVE_BUCKET",SET_SATP_NATIVE_RENDER:"FB_STORIES.SET_SATP_NATIVE_RENDER",REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET:"FB_STORIES.REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET",SET_IS_COMMERCIAL_BREAK_RUNNING:"FB_STORIES.SET_IS_COMMERCIAL_BREAK_RUNNING",UNSELECT_BUCKET:"FBSTORIES.UNSELECT_BUCKET",SET_VIEWER_OPEN:"FB_STORIES.SET_VIEWER_OPEN",OPTIMISTIC_CREATE_PHOTO_STORY:"FB_STORIES.OPTIMISTIC_CREATE_PHOTO_STORY",RESET_STATE:"FB_STORIES.RESET_STATE",SET_SUBSCRIPTION_TOKEN:"FB_STORIES.SET_SUBSCRIPTION_TOKEN",OPTIMISTIC_POLL_VOTE:"FB_STORIES.OPTIMISTIC_POLL_VOTE",SET_SHOW_BUCKET_NAVIGATION:"FB_STORIES.SET_SHOW_BUCKET_NAVIGATION"});e.exports=a}),null);
__d("FBStoriesDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("friendsBucketSorter",["CameraPostTypesHelper","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return function(b,c){var d=b.live_video&&b.live_video.id,e=c.live_video&&c.live_video.id;if(d!==e)return d?-1:1;if(g(b,c))return i(b)?-1:1;if(h(b,c))return j(b)?-1:1;return k(b,c,a)?l(b,a)?-1:1:n(b)>=n(c)?-1:1}}function g(a,b){return m(a,b,i)}function h(a,b){return m(a,b,j)}function i(a){return a.unseen_count>0}function j(a){return b("CameraPostTypesHelper").isEventStory(a.camera_post_type)}function k(a,b,c){return l(a,c)!==l(b,c)}function l(a,b){a=((a=a)!=null?(a=a.threads)!=null?a.nodes:a:a)||[];for(var c=0;c<a.length;c++){var d;d=(d=a[c])!=null?(d=d.camera_post_thread_owner)!=null?d.id:d:d;if(d===b)return!0}return!1}function m(a,b,c){a=c(a);c=c(b);return a!=c}function n(a){return((a=a)!=null?(a=a.ranking)!=null?a.score:a:a)||0}e.exports=a}),null);
__d("FBStoriesDataHelper",["CameraPostTypesHelper","emptyFunction","FBStoriesActionTypes","FBStoriesBucketHelper","FBStoriesDispatcher","FBStoriesGraphQLAPI","friendsBucketSorter","gkx","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getBucketsDataFromLoadedObject:function(a){__p&&__p();var c=g.getUserDataNodesFromLoadedObject(a);c=c[0];var d=g.getUserInfoFromLoadedObject(a);a=g.getFriendsBucketDataFromLoadedObject(a);a=a.reduce(function(a,c){__p&&__p();var d=b("FBStoriesBucketHelper").getThreads(c);d=d&&d.length>0;var e=b("FBStoriesBucketHelper").getCameraPostType(c),f=b("CameraPostTypesHelper").isStoryNux(e),g=b("CameraPostTypesHelper").isStory(e),h=b("CameraPostTypesHelper").isEventStory(e),i=b("CameraPostTypesHelper").isPageStory(e);e=b("CameraPostTypesHelper").isGroupStory(e);var j=b("gkx")("AT7HjiDwnMVL3AIA8BSudVOFxA-IzyrieUd8NdxFJOoIjXI3kpzXujbNr99ZiCMNBY0PFFBmtxsMTVC_JOHwUWMQ_JsNoMIejCjR_HtHsnVnTA");if(j&&b("FBStoriesBucketHelper").isOwnerEmployee(c))return a;if(f)return a;if(!d)return b("FBStoriesBucketHelper").isLive(c)?a.concat([c]):a;return g||i||h||e?a.concat([c]):a},[]);a.sort(b("friendsBucketSorter")(d.userID));return{userInfo:d,userBucketData:c,friendsBucketData:a}},getFriendsBucketDataFromLoadedObject:function(a){return((a=a)!=null?(a=a.me)!=null?(a=a.friends_stories_buckets)!=null?a.nodes:a:a:a)||[]},getUserDataNodesFromLoadedObject:function(a){return((a=a)!=null?(a=a.me)!=null?(a=a.story_bucket)!=null?a.nodes:a:a:a)||[]},getUserInfoFromLoadedObject:function(a){var b;return{userName:(b=a)!=null?(b=b.me)!=null?b.name:b:b,userID:(b=a)!=null?(b=b.me)!=null?b.id:b:b,userGender:(b=a)!=null?(b=b.me)!=null?b.gender:b:b,userProfilePic:(b=a)!=null?(b=b.me)!=null?b.profile_picture:b:b}},getFriendsDataWithEndedLiveBucket:function(a,c,d){__p&&__p();if(!c||d||!b("FBStoriesBucketHelper").isLive(c))return a;var e=b("FBStoriesBucketHelper").getId(c);d=!1;a=a.reduce(function(a,f){if(b("FBStoriesBucketHelper").getId(f)===e){d=!0;var g=!b("FBStoriesBucketHelper").isLive(f);c&&g&&(b("FBStoriesBucketHelper").setLiveVideo(f,c.live_video),b("FBStoriesBucketHelper").setHasLiveVideoEnded(f,!0))}a.push(f);return a},[]);d||(b("FBStoriesBucketHelper").setHasLiveVideoEnded(c,!0),a=[c].concat(a));return a},getMutedBucketOwnersFromLoadedQuery:function(a){a=((a=a)!=null?(a=a.me)!=null?(a=a.unfollowees_for_camera_post_story)!=null?a.edges:a:a:a)||[];return a.map(function(a){var b,c,d;a=a.node;b=(b=a)!=null?b.id:b;c=(c=a)!=null?c.name:c;d=(d=a)!=null?(d=d.profile_picture)!=null?d.uri:d:d;a=(a=a)!=null?(a=a.cover_photo)!=null?(a=a.photo)!=null?(a=a.image)!=null?a.uri:a:a:a:a;return{id:b,name:c,profilePictureUri:a?a:d,muted:!0}})},loadData:function(){b("FBStoriesGraphQLAPI").load().done(function(a){a=g.getBucketsDataFromLoadedObject(a);b("FBStoriesDispatcher").dispatch({type:b("FBStoriesActionTypes").LOADED,data:a})},function(a){return b("emptyFunction")})}};e.exports=g}),null);
__d("FBStoriesLiveVideoActionTypes",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({SET_UI_COMPONENTS:null,REMOVE_UI_COMPONENTS:null,LIVE_BUCKET_LOADED:null,LOAD_UI_COMPONENTS_FAILED:null});e.exports=a}),null);
__d("FBStoriesMutedBucketOwnerHelper",["idx"],(function(a,b,c,d,e,f){"use strict";a={getId:function(a){return((a=a)!=null?a.id:a)||""},getName:function(a){return((a=a)!=null?a.name:a)||""},getProfilePictureUri:function(a){return((a=a)!=null?a.profilePictureUri:a)||""},getMuted:function(a){return!!((a=a)!=null?a.muted:a)},setMuted:function(a,b){a.muted=b}};e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersActionTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({LOADING:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADING",LOADED:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADED",LOADED_ERROR:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADED_ERROR",SET_IS_CURRENTLY_MUTING:"FB_STORIES_MUTED_BUCKET_OWNERS.SET_IS_CURRENTLY_MUTING",UPDATE_MUTED_OPTIMISTIC:"FB_STORIES_MUTED_BUCKET_OWNERS.UPDATE_MUTED_OPTIMISTIC"});e.exports=a}),null);
__d("fbStoriesMutedBucketOwnersSelectors",[],(function(a,b,c,d,e,f){"use strict";var g={isLoading:function(a){return a.data.isLoading()},getMutedBucketOwners:function(a){a=a.data;return a.hasValue()?a.getValueEnforcing():[]},getCurrentlyMutingBucketOwners:function(a){return a.currentlyMutingBucketOwners},isCurrentlyMutingBucketOwners:function(a){return g.getCurrentlyMutingBucketOwners(a).length!==0},canReload:function(a){return!this.isCurrentlyMutingBucketOwners(a)&&!this.isLoading(a)}};e.exports=g}),null);
__d("fbStoriesMutedBucketOwnersReducer",["FBStoriesMutedBucketOwnerHelper","FBStoriesMutedBucketOwnersActionTypes","LoadObject","fbStoriesMutedBucketOwnersSelectors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();switch(c.type){case b("FBStoriesMutedBucketOwnersActionTypes").LOADING:return babelHelpers["extends"]({},a,{data:b("LoadObject").loading()});case b("FBStoriesMutedBucketOwnersActionTypes").LOADED:return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue(c.data),currentlyMutingBucketOwners:[]});case b("FBStoriesMutedBucketOwnersActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},a,{data:b("LoadObject").withError(new Error(c.error.errorSummary))});case b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING:var d=a.currentlyMutingBucketOwners,e=a.currentlyMutingBucketOwners.indexOf(c.ownerID);c.value&&e===-1?(d=d.slice(),d.push(c.ownerID)):!c.value&&e!==-1&&(d=d.slice(),d.splice(e,1));return babelHelpers["extends"]({},a,{currentlyMutingBucketOwners:d});case b("FBStoriesMutedBucketOwnersActionTypes").UPDATE_MUTED_OPTIMISTIC:e=function(){__p&&__p();var d=b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(a),e=c.value,f=!1,g=d.map(function(a){if(b("FBStoriesMutedBucketOwnerHelper").getId(a)===c.ownerID){var d=babelHelpers["extends"]({},a);f=!0;b("FBStoriesMutedBucketOwnerHelper").setMuted(d,e);return d}else return a});f||(g=d.concat({id:c.ownerID,name:c.ownerName,profilePictureUri:c.ownerProfilePictureUri,muted:e}));return{v:babelHelpers["extends"]({},a,{data:b("LoadObject").withValue(g)})}}();if(typeof e==="object")return e.v;default:return a}}e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersStore",["fbStoriesMutedBucketOwnersReducer","FBStoriesDispatcher","FluxReduceStore","LoadObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxReduceStore"));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.__moduleID=e.id,b}a.prototype.getInitialState=function(){return{data:b("LoadObject").empty(),currentlyMutingBucketOwners:[]}};a.prototype.reduce=function(a,c){return b("fbStoriesMutedBucketOwnersReducer")(a,c)};e.exports=new a(b("FBStoriesDispatcher"))}),null);
/**
 * License: https://www.facebook.com/legal/license/bSBdTQIIPXc/
 */
__d("reselect",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();f.__esModule=!0;f.defaultMemoize=i;f.createSelectorCreator=a;f.createStructuredSelector=b;function g(a,b){return a===b}function h(a,b,c){if(b===null||c===null||b.length!==c.length)return!1;var d=b.length;for(var e=0;e<d;e++)if(!a(b[e],c[e]))return!1;return!0}function i(a){var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:g,c=null,d=null;return function(){h(b,c,arguments)||(d=a.apply(null,arguments));c=arguments;return d}}function j(a){a=Array.isArray(a[0])?a[0]:a;if(!a.every(function(a){return typeof a==="function"})){var b=a.map(function(a){return typeof a}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+b+"]"))}return a}function a(a){__p&&__p();for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return function(){__p&&__p();for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];var f=0,g=d.pop(),h=j(d),k=a.apply(undefined,[function(){f++;return g.apply(null,arguments)}].concat(c)),l=i(function(){var a=[],b=h.length;for(var c=0;c<b;c++)a.push(h[c].apply(null,arguments));return k.apply(null,a)});l.resultFunc=g;l.recomputations=function(){return f};l.resetRecomputations=function(){return f=0};return l}}var k=f.createSelector=a(i);function b(a){__p&&__p();var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:k;if(typeof a!=="object")throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof a);var c=Object.keys(a);return b(c.map(function(b){return a[b]}),function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];return b.reduce(function(a,b,d){a[c[d]]=b;return a},{})})}}),null);
__d("fbStoriesRootSelectors",["FBStoriesBucketHelper","reselect","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("reselect").createSelector;var g=function(a,b,c){return c===0?a:(a=b)!=null?a[c-1]:a};c=function(a){return a.data};d=a([c],function(a){return a.hasValue()?a.getValueEnforcing():{friendsBucketData:[],userBucketData:b("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{userName:"",userID:"",userGender:"",userProfilePic:{uri:""}}}});f=a(c,function(a){return a.isLoading()});c=a([d],function(a){return a.userBucketData||{}});var h=a([c],function(a){return a&&a.id}),i=a([d],function(a){return a.friendsBucketData||[]}),j=a([i],function(a){return a.map(function(a){return a.id?a.id:""})});h=a([j,h],function(b,a){return[a].concat(b)});d=a([d],function(a){return a.userInfo||{}});var k=function(a){return a.selectedBucketIndex};k=a([k,c,i],function(b,c,a){return g(c,a,b)});var l=a([k],function(a){return a&&a.id}),m=a(c,function(a){return b("FBStoriesBucketHelper").isUploading(a)});a=a([i,c],function(a,c){c=[c].concat(a);return c.reduce(function(a,c){if(!c||!c.id)return a;if(!b("FBStoriesBucketHelper").hasData(c))return a;c={bucketID:b("FBStoriesBucketHelper").getId(c),cameraPostType:b("FBStoriesBucketHelper").getCameraPostType(c),owner:b("FBStoriesBucketHelper").getOwner(c),previewImageUri:b("FBStoriesBucketHelper").getPreviewImage(c),profileImageUri:b("FBStoriesBucketHelper").getOwnerProfilePictureUri(c),hasUnseenThreads:b("FBStoriesBucketHelper").hasUnseenThreads(c),hasNewViewers:b("FBStoriesBucketHelper").hasNewViewers(c),ownedByViewer:b("FBStoriesBucketHelper").isUserBucket(c),isLive:b("FBStoriesBucketHelper").isLive(c),latestThreadCreationTime:b("FBStoriesBucketHelper").getLatestThreadCreationTime(c),actorName:b("FBStoriesBucketHelper").getOwnerName(c,!0),actorShortName:b("FBStoriesBucketHelper").getOwnerName(c),actorGender:b("FBStoriesBucketHelper").getOwnerGender(c)};return a.concat([c])},[])});e.exports={bucketDescriptors:a,loading:f,userBucketData:c,friendsBucketData:i,friendsBucketIds:j,userInfo:d,bucketIds:h,selectedBucket:k,selectedBucketId:l,uploading:m}}),null);
__d("fbStoriesStateSelectors",["FBStoriesBucketHelper","fbStoriesRootSelectors","idx"],(function(a,b,c,d,e,f){"use strict";var g=b("fbStoriesRootSelectors").userBucketData,h=b("fbStoriesRootSelectors").friendsBucketData,i=b("fbStoriesRootSelectors").bucketIds,j=b("fbStoriesRootSelectors").selectedBucketId,k={bucketByBucketId:function(a,b){b=k.bucketIndexByBucketId(a,b);return k.bucketByIndex(a,b)},bucketByIndex:function(a,b){return b===0?g(a):(a=h(a))!=null?a[b-1]:a},bucketIndexByBucketId:function(a,b){a=i(a);return a.indexOf(b)},isOwnBucket:function(a,c){return(c!=undefined?c:j(a))===b("FBStoriesBucketHelper").getId(g(a))}};e.exports=k}),null);
__d("FBStoriesStore",["BackstageMediaType","CameraPostMediaHelper","CameraPostTypes","FBStoriesActionTypes","FBStoriesBucketHelper","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesLiveVideoActionTypes","FBStoriesMutedBucketOwnersStore","FBStoriesThreadHelper","FluxReduceStore","LoadObject","fbStoriesMutedBucketOwnersSelectors","fbStoriesRootSelectors","fbStoriesStateSelectors","friendsBucketSorter","gkx","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxReduceStore"));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.__moduleID=e.id,b}a.prototype.getInitialState=function(){return{data:b("LoadObject").empty(),selectedBucketIndex:-1,currentThreadIndex:-1,currentThreadPercentDone:0,unseenMode:!1,allBucketsViewed:!1,lastViewedThreadIndexForBucket:new Map(),shouldShowBucketNavigation:!1,showSATPNativeRender:b("gkx")("AT705K1zR1ms8hGNFIEY-5xZFo3oe6AEakAwqCsnWaMfjePNPEuShEq-b3haaDXIGbdPoo1uQn5S6wWL0kjmUL5i"),isCommercialBreakRunning:new Map(),isViewerOpen:!1,subscriptionToken:null,viewerEntrypoint:null}};a.prototype.reduce=function(a,c){__p&&__p();var d=this;switch(c.type){case b("FBStoriesActionTypes").LOADING:return babelHelpers["extends"]({},a,{data:b("LoadObject").loading()});case b("FBStoriesActionTypes").LOADED:var e=c.data,f=e.userInfo,g=e.userBucketData;e=e.friendsBucketData;e=b("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(e,this.$FBStoriesStore1(),this.isOwnBucket(this.getSelectedBucketId()));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userInfo:f,userBucketData:g,friendsBucketData:e})});case b("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD:f=function(){__p&&__p();var f=c.data.node,e=babelHelpers["extends"]({},d.getUserBucketData(),{threads:{nodes:d.$FBStoriesStore2().map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){var d=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setFriendsSeenCount(d,b("FBStoriesThreadHelper").getFriendsSeenCount(f));b("FBStoriesThreadHelper").setNonFriendsSeenCount(d,b("FBStoriesThreadHelper").getNonFriendsSeenCount(f));b("FBStoriesThreadHelper").setViewers(d,b("FBStoriesThreadHelper").getViewers(f));return d}return a})}});return{v:babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,userInfo:d.getUserInfo(),friendsBucketData:d.getFriendsBucketData()})})}}();if(typeof f==="object")return f.v;case b("FBStoriesActionTypes").SUBSCRIPTION_BUCKET_UPDATE:g=function(){__p&&__p();var e=c.bucketData,f=b("FBStoriesBucketHelper").getOwnerId(e);if(d.isMutedBucketOwner(f))return{v:a};f=b("FBStoriesBucketHelper").getThreads(e);var g=f.length>0||d.$FBStoriesStore3(e),h=b("FBStoriesBucketHelper").getId(e);f=b("fbStoriesRootSelectors").friendsBucketData(a);var i=!1,j=f.reduce(function(a,c){b("FBStoriesBucketHelper").getId(c)===h?(i=!0,g&&a.push(e)):a.push(c);return a},[]);!i&&g&&(j=[e].concat(f));j=b("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(j,b("fbStoriesRootSelectors").selectedBucket(a),b("fbStoriesStateSelectors").isOwnBucket(a,b("fbStoriesRootSelectors").selectedBucketId(a)));j.sort(b("friendsBucketSorter")(b("fbStoriesRootSelectors").userInfo(a).userID));return{v:babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:b("fbStoriesRootSelectors").userBucketData(a),userInfo:b("fbStoriesRootSelectors").userInfo(a),friendsBucketData:j})})}}();if(typeof g==="object")return g.v;case b("FBStoriesActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},a,{data:b("LoadObject").withError(new Error(c.error.errorSummary))});case b("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY:return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:new Map()});case b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED:e=c.bucketIndex;return e<0||e>=this.getBucketCount()?a:babelHelpers["extends"]({},a,{selectedBucketIndex:e});case b("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED:f=this.getThreadCountForSelectedBucket();if(!this.isSelectedBucketLive()&&(c.index<0||c.index>=f))return a;g=new Map(a.lastViewedThreadIndexForBucket);g.set(this.getSelectedBucketIndex(),c.index);return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:g,currentThreadIndex:c.index});case b("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE:e=Math.min(100,Math.max(c.percentDone,0));return babelHelpers["extends"]({},a,{currentThreadPercentDone:e});case b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED:f=c.value;return f===a.allBucketsViewed?a:babelHelpers["extends"]({},a,{allBucketsViewed:f,unseenMode:a.unseenMode&&f?!1:a.unseenMode});case b("FBStoriesActionTypes").SET_UNSEEN_MODE:return babelHelpers["extends"]({},a,{unseenMode:c.value});case b("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC:g=function(){__p&&__p();var f=d.getSelectedBucketId(),g=function(a){__p&&__p();var d,e=this;if(b("FBStoriesBucketHelper").getId(a)===f){var d=function(){__p&&__p();var d=b("FBStoriesBucketHelper").getUnseenCount(a),f=e.$FBStoriesStore4(a).map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){b("FBStoriesThreadHelper").isSeenByViewer(a)||(d=Math.max(d-1,0));var e=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setIsSeenByViewer(e,!0);return e}else return a}),g=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setUnseenCount(g,d);b("FBStoriesBucketHelper").setThreads(g,f);return{v:g}}();if(typeof d==="object")return d.v}else return a}.bind(d),e=d.isOwnBucket()?g(d.getUserBucketData()):d.getUserBucketData();g=d.isOwnBucket()?d.getFriendsBucketData():d.getFriendsBucketData().map(g);return{v:babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,friendsBucketData:g,userInfo:d.getUserInfo()})})}}();if(typeof g==="object")return g.v;case b("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC:e=babelHelpers["extends"]({},this.getUserBucketData(),{threads:{nodes:this.$FBStoriesStore2().map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){var d=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setSeenReceiptsLastSeenTime(d,Date.now());b("FBStoriesThreadHelper").setSeenReceiptsUnseenCount(d,0);b("FBStoriesThreadHelper").setSeenReceiptsFollowersUnseenCount(d,0);return d}else return a})}});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,userInfo:this.getUserInfo(),friendsBucketData:this.getFriendsBucketData()})});case b("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET:f=function(){__p&&__p();var f=c.threadID,g=c.bucketID;if(!d.isUserManagedThread(f,g))return{v:a};var e=d.getUserBucketData(),h=null;g===b("FBStoriesBucketHelper").getId(e)?(b("FBStoriesBucketHelper").setThreads(e,d.$FBStoriesStore4(e).filter(function(a){return b("FBStoriesThreadHelper").getId(a)!==f})),h=d.getFriendsBucketData()):h=d.getFriendsBucketData().map(function(a){if(b("FBStoriesBucketHelper").getId(a)===g){var c=this.$FBStoriesStore4(a).filter(function(a){return b("FBStoriesThreadHelper").getId(a)!==f}),d=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setThreads(d,c);return d}else return a}.bind(d)).filter(function(a){return this.$FBStoriesStore4(a).length>0}.bind(d));var i=a.lastViewedThreadIndexForBucket;f===d.getCurrentThreadIDForSelectedBucket()&&(i=new Map(i),i.set(d.getSelectedBucketIndex(),undefined));return{v:babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:i,data:b("LoadObject").withValue({userBucketData:e,friendsBucketData:h,userInfo:d.getUserInfo()})})}}();if(typeof f==="object")return f.v;case b("FBStoriesActionTypes").REMOVE_BUCKET:g=function(){var e=c.bucketID,f=d.getFriendsBucketData().filter(function(a){return b("FBStoriesBucketHelper").getId(a)!==e});return{v:babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:d.getUserBucketData(),friendsBucketData:f,userInfo:d.getUserInfo()})})}}();if(typeof g==="object")return g.v;case b("FBStoriesActionTypes").SET_SATP_NATIVE_RENDER:return babelHelpers["extends"]({},a,{showSATPNativeRender:c.value});case b("FBStoriesLiveVideoActionTypes").LIVE_BUCKET_LOADED:e=c.data;f=b("FBStoriesDataHelper").getFriendsBucketDataFromLoadedObject(e);g=[].concat(this.getFriendsBucketData());e=f.reduce(function(a,c){this.$FBStoriesStore3(c)&&this.getBucketIndexByBucketId(b("FBStoriesBucketHelper").getId(c))===-1&&a.push(c);return a}.bind(this),g);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),userInfo:this.getUserInfo(),friendsBucketData:e})});case b("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET:f=function(){var e=c.bucketID,f=d.getFriendsBucketData().map(function(a){b("FBStoriesBucketHelper").getId(a)===e&&(b("FBStoriesBucketHelper").setLiveVideo(a,null),b("FBStoriesBucketHelper").setHasLiveVideoEnded(a,!1));return a});return{v:babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:d.getUserBucketData(),friendsBucketData:f,userInfo:d.getUserInfo()})})}}();if(typeof f==="object")return f.v;case b("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING:g=new Map(this.getState().isCommercialBreakRunning);return babelHelpers["extends"]({},a,{isCommercialBreakRunning:g.set(c.videoID,c.isCommercialBreakRunning)});case b("FBStoriesActionTypes").UNSELECT_BUCKET:return babelHelpers["extends"]({},a,{selectedBucketIndex:-1,currentThreadIndex:-1});case b("FBStoriesActionTypes").SET_VIEWER_OPEN:return babelHelpers["extends"]({},a,{isViewerOpen:c.value,viewerEntrypoint:c.entrypoint});case b("FBStoriesActionTypes").OPTIMISTIC_CREATE_PHOTO_STORY:e=b("FBStoriesThreadHelper").makeOptimisticPhotoThread(c.imageURL);f=babelHelpers["extends"]({},this.getUserBucketData());b("FBStoriesBucketHelper").addThreadToBucket(f,e);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:f,friendsBucketData:this.getFriendsBucketData(),userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").RESET_STATE:return babelHelpers["extends"]({},this.getInitialState());case b("FBStoriesActionTypes").SET_SUBSCRIPTION_TOKEN:return babelHelpers["extends"]({},a,{subscriptionToken:c.token});case b("FBStoriesActionTypes").OPTIMISTIC_POLL_VOTE:g=function(){__p&&__p();var f=c.index,g=d.getSelectedBucketId(),h=function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===g){var c=this.$FBStoriesStore4(a).map(function(a){__p&&__p();if(b("FBStoriesThreadHelper").getId(a)===this.getCurrentThreadIDForSelectedBucket()){var c,d=babelHelpers["extends"]({},a);(((c=d)!=null?(c=c.root_message)!=null?c.story_overlays:c:c)||[]).map(function(a){if(a.__typename==="StoryOverlayPollSticker"){var b=a.poll,c=babelHelpers["extends"]({},b);c.viewer_vote_index=f;c.poll_options=[].concat(b.poll_options);b=c.poll_options[f];b!==undefined&&(b.vote_count+=1);a.poll=c}return a});return d}else return a}.bind(this)),d=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setThreads(d,c);return d}else return a}.bind(d),e=d.isOwnBucket()?h(d.getUserBucketData()):d.getUserBucketData();h=d.isOwnBucket()?d.getFriendsBucketData():d.getFriendsBucketData().map(h);return{v:babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,friendsBucketData:h,userInfo:d.getUserInfo()})})}}();if(typeof g==="object")return g.v;case b("FBStoriesActionTypes").SET_SHOW_BUCKET_NAVIGATION:return babelHelpers["extends"]({},a,{shouldShowBucketNavigation:c.value});default:return a}};a.prototype.$FBStoriesStore5=function(){var a=this.getState().data;return a.hasValue()?a.getValueEnforcing():{friendsBucketData:[],userBucketData:b("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{userName:"",userID:"",userGender:"",userProfilePic:{uri:""}}}};a.prototype.getUserBucketData=function(){return this.$FBStoriesStore5().userBucketData||{}};a.prototype.getUserInfo=function(){return this.$FBStoriesStore5().userInfo||{}};a.prototype.getFriendsBucketData=function(){return this.$FBStoriesStore5().friendsBucketData||[]};a.prototype.isMutedBucketOwner=function(a){var c=b("FBStoriesMutedBucketOwnersStore").getState();c=b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(c);return c.find(function(b){return b.id===a})!==undefined};a.prototype.isLoading=function(){return this.getState().data.isLoading()};a.prototype.getBucketIds=function(){var a=this.getFriendsBucketData().map(function(a){return a.id?a.id:""}),b=this.getUserBucketData().id||"";return[b].concat(a)};a.prototype.getSelectedBucketIndex=function(){return this.getState().selectedBucketIndex};a.prototype.shouldShowBucketNavigation=function(){return this.getState().shouldShowBucketNavigation};a.prototype.getSelectedBucketId=function(){return this.getBucketIds()[this.getSelectedBucketIndex()]};a.prototype.areAllBucketsViewed=function(){return this.getState().allBucketsViewed};a.prototype.getCameraPostTypeForBucketId=function(a){return b("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore6(a))};a.prototype.doesBucketContainThreadId=function(a,c){a=this.$FBStoriesStore6(a);a=b("FBStoriesBucketHelper").getThreads(a);return a.find(function(a){return b("FBStoriesThreadHelper").getId(a)===c})!==undefined};a.prototype.$FBStoriesStore6=function(a){return this.getBucketByIndex(this.getBucketIndexByBucketId(a))};a.prototype.getBucketIndexByBucketId=function(a){return this.getBucketIds().indexOf(a)};a.prototype.getSelectedBucketCameraPostType=function(){return b("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore1())};a.prototype.getSelectedBucketOwner=function(){return b("FBStoriesBucketHelper").getOwner(this.$FBStoriesStore1())};a.prototype.getSelectedBucketOwnerID=function(){return b("FBStoriesBucketHelper").getOwnerId(this.$FBStoriesStore1())};a.prototype.getSelectedBucketUnseenCount=function(){return b("FBStoriesBucketHelper").getUnseenCount(this.$FBStoriesStore1())};a.prototype.getThreadsForSelectedBucket=function(){return this.$FBStoriesStore4(this.$FBStoriesStore1())};a.prototype.getCurrentThreadIndexForSelectedBucket=function(){return this.getState().currentThreadIndex};a.prototype.getCurrentThreadIDForSelectedBucket=function(){return b("FBStoriesThreadHelper").getId(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadStatusForSelectedBucket=function(){return b("FBStoriesThreadHelper").getStatus(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadCameraPostTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?b("CameraPostTypes").STORY:b("FBStoriesThreadHelper").getCameraPostType(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadMediaTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?b("BackstageMediaType").LIVE:b("FBStoriesThreadHelper").getMediaType(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadMediaIDForSelectedBucket=function(){if(this.isSelectedBucketLive()){var a=this.getThreadDataForSelectedLiveBucket();return a&&a.media.id}return b("FBStoriesThreadHelper").getMediaId(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadMediaViewerCountForSelectedBucket=function(){var a=this.getCurrentThreadForSelectedBucket();return b("FBStoriesThreadHelper").getNonFriendsSeenCount(a)+b("FBStoriesThreadHelper").getFriendsSeenCount(a)};a.prototype.getCurrentThreadForSelectedBucket=function(){return this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()]};a.prototype.getCurrentThreadData=function(){return this.isSelectedBucketLive()?this.getThreadDataForSelectedLiveBucket():this.$FBStoriesStore7(this.getState().currentThreadIndex)};a.prototype.shouldDisableReply=function(){var a=b("FBStoriesBucketHelper").shouldEnablePageStoryReply(this.$FBStoriesStore1());if(a==!0)return!1;a=this.isOwnThread();var c=b("FBStoriesBucketHelper").isViewerFriendOfOwner(this.$FBStoriesStore1()),d=b("FBStoriesThreadHelper").isViewerFriendOfOwner(this.getCurrentThreadForSelectedBucket());return a||!c&&!d||this.isSelectedBucketLive()};a.prototype.getNonFriendsSeenCount=function(){return b("FBStoriesThreadHelper").getNonFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};a.prototype.getFriendsSeenCount=function(){return b("FBStoriesThreadHelper").getFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};a.prototype.isOwnBucket=function(a){return(a!=undefined?a:this.getSelectedBucketId())===b("FBStoriesBucketHelper").getId(this.getUserBucketData())};a.prototype.isOwnThread=function(){if(this.isOwnBucket())return!0;var a=this.getCurrentThreadForSelectedBucket();a=b("FBStoriesThreadHelper").getOwnerId(a);return a===this.getUserInfo().userID};a.prototype.isBucketViewerEventHost=function(){var a=this.$FBStoriesStore1();return b("FBStoriesBucketHelper").isViewerEventHost(a)};a.prototype.isCurrentThreadUserManaged=function(){return this.isUserManagedThread(this.getCurrentThreadIDForSelectedBucket()||"",this.getSelectedBucketId())};a.prototype.isCurrentBucketUserManaged=function(){return this.isUserManagedBucket(this.getSelectedBucketId())};a.prototype.isUserManagedThread=function(a,c){var d=this.$FBStoriesStore6(c);if(!d)return!1;a=this.$FBStoriesStore8(a,d);d=b("FBStoriesThreadHelper").getOwnerId(a);return a&&d===this.getUserInfo().userID||this.isUserManagedBucket(c)};a.prototype.isUserManagedBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").getId(a)===b("FBStoriesBucketHelper").getId(this.getUserBucketData())||b("FBStoriesBucketHelper").isViewerEventHost(a)||b("FBStoriesBucketHelper").isViewerPageContentAdmin(a)||b("FBStoriesBucketHelper").isViewerGroupModerator(a)||b("FBStoriesBucketHelper").isViewerGroupAdmin(a)};a.prototype.isCurrentBucketGroupAdmin=function(){return this.isGroupAdminBucket(this.getSelectedBucketId())};a.prototype.isGroupAdminBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").isViewerGroupModerator(a)||b("FBStoriesBucketHelper").isViewerGroupAdmin(a)};a.prototype.isCurrentThreadReviewStatusPending=function(){var a=this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()];return b("FBStoriesThreadHelper").isReviewStatusPending(a)};a.prototype.getBucketCount=function(){return this.getFriendsBucketData().length+1};a.prototype.hasDataInSelectedBucket=function(){return b("FBStoriesBucketHelper").hasData(this.$FBStoriesStore1())};a.prototype.hasOwnBucketViewers=function(){return this.userBucketIsLive()?!1:b("FBStoriesBucketHelper").hasNewViewers(this.getUserBucketData())};a.prototype.hasOwnBucketUpdates=function(){return this.userBucketIsLive()?!1:b("FBStoriesBucketHelper").hasUnseenThreads(this.getUserBucketData())};a.prototype.hasOwnBucketContent=function(){return this.$FBStoriesStore2().length>0||this.userBucketIsLive()};a.prototype.getCurrentThreadPercentDone=function(){return this.getState().currentThreadPercentDone};a.prototype.getThreadCountForSelectedBucket=function(){return this.getThreadsForSelectedBucket().length};a.prototype.userBucketIsLive=function(){return this.$FBStoriesStore3(this.getUserBucketData())};a.prototype.isSelectedBucketLive=function(){return this.$FBStoriesStore3(this.$FBStoriesStore1())};a.prototype.getSelectedBucketOwnerType=function(){return b("FBStoriesBucketHelper").getLoggingType(this.$FBStoriesStore1())};a.prototype.$FBStoriesStore3=function(a){return b("FBStoriesBucketHelper").isLive(a)};a.prototype.getCurrentThreadViewers=function(){__p&&__p();var a={hasNewViewers:!1,hasNewFriendViewers:!1,hasNewConnectionsViewers:!1,friends:[],connections:[],totalCount:0,totalNew:0,nonFriendsCount:0};if(!this.isOwnThread())return a;var c=this.getCurrentThreadForSelectedBucket(),d=b("FBStoriesThreadHelper").getViewers(c),e=this.getUserInfo().userID,f=b("FBStoriesThreadHelper").getPollVoters(c);a=d.reduce(function(a,d){__p&&__p();var g=b("FBStoriesThreadHelper").getStoryViewerId(d);if(!g)return a;if(g!==e){var h;h=((h=d)!=null?(h=h.node)!=null?h.is_viewer_friend:h:h)||!1;var i=h?"friends":"connections",j=b("FBStoriesThreadHelper").getStoryViewerSeenTime(d),k=j>=b("FBStoriesThreadHelper").getSeenReceiptsLastSeenTime(c);a[i].push(babelHelpers["extends"]({},d.node,{seenTime:j,isNewViewer:k,votedPollOptionIndex:f[g]}));a.totalNew+=k?1:0;a.hasNewViewers=a.hasNewViewers||k;a.hasNewFriendViewers=a.hasNewFriendViewers||k&&h;a.hasNewConnectionsViewers=a.hasNewViewers||k&&!h}return a},a);var g=this.getNonFriendsSeenCount();return Object.assign(a,{totalCount:g+d.length,nonFriendsCount:g})};a.prototype.isUnseenMode=function(){return this.getState().unseenMode};a.prototype.getThreadCount=function(a){__p&&__p();var b=this.getBucketByIndex(a);if(this.$FBStoriesStore3(b))return 0;if(a===0){var c=this.$FBStoriesStore4(this.getUserBucketData());return c.length}if(a>0){c=this.$FBStoriesStore4(b);return c.length}return-1};a.prototype.getUnseenThreadIndex=function(a){return b("FBStoriesBucketHelper").getUnseenThreadIndex(this.getBucketByIndex(a))};a.prototype.getAllowedNavigationType=function(){var a=this.getSelectedBucketIndex(),c=a===0||a==1&&!b("FBStoriesBucketHelper").hasData(this.getUserBucketData());a=a===this.getBucketCount()-1;c=c&&this.getCurrentThreadIndexForSelectedBucket()==0;a=a&&this.getCurrentThreadIndexForSelectedBucket()===this.getThreadsForSelectedBucket().length-1;if(c)return"NEXT_ONLY";return a?"PREV_ONLY":"BOTH"};a.prototype.hasSeenBucketInCurrentSession=function(a){var b=this.getState().lastViewedThreadIndexForBucket;return b.get(a)!==undefined};a.prototype.getLastSeenThreadIndexForBucket=function(a){var b=this.getState().lastViewedThreadIndexForBucket;b=b.get(a);return b==undefined?0:b};a.prototype.$FBStoriesStore2=function(){return this.$FBStoriesStore4(this.getUserBucketData())};a.prototype.$FBStoriesStore1=function(){return this.getBucketByIndex(this.getSelectedBucketIndex())};a.prototype.getBucketByIndex=function(a){var b;return a===0?this.getUserBucketData():(b=this.getFriendsBucketData())!=null?b[a-1]:b};a.prototype.$FBStoriesStore8=function(a,b){b=this.$FBStoriesStore4(b);b=b.filter(function(b){return b.id===a});return b.length>0?b[0]:null};a.prototype.$FBStoriesStore4=function(a){return b("FBStoriesBucketHelper").getThreads(a)};a.prototype.$FBStoriesStore7=function(a){var c=this.getSelectedBucketOwner();a=this.getThreadsForSelectedBucket()[a];if(!a)return null;var d=b("FBStoriesThreadHelper").getMedia(a),e=b("FBStoriesThreadHelper").getWWWTextFormatMetadata(a),f=b("FBStoriesThreadHelper").getTextFormatMetadata(a),g=b("FBStoriesThreadHelper").getBackdropImage(a),h=b("FBStoriesThreadHelper").getMessageText(a),i=b("FBStoriesThreadHelper").getIsPlainText(a),j=b("FBStoriesThreadHelper").getInstagramProfileURL(a),k=b("FBStoriesThreadHelper").getOriginalPostStoryAttribution(a);return{isLive:!1,media:d,bucketOwner:c,threadOwner:b("FBStoriesThreadHelper").getOwner(a)||{name:null,id:null,is_viewer_friend:!1,profile_picture:null},participants:[],isSeen:b("FBStoriesThreadHelper").isSeenByViewer(a),latestMessageID:b("FBStoriesThreadHelper").getLatestMessageID(a),time:b("FBStoriesThreadHelper").getTime(a),threadID:b("FBStoriesThreadHelper").getId(a),cameraPostType:b("FBStoriesThreadHelper").getCameraPostType(a),cameraPostSource:b("FBStoriesThreadHelper").getCameraPostSource(a),wwwTextFormatMetadata:e,messageText:h,textFormatMetadata:f,backdropImage:g,instagramProfileURL:j,isPlainText:i,originalPostStoryAttribution:k,activityDescription:b("FBStoriesThreadHelper").getActivityDescription(a),withTags:b("FBStoriesThreadHelper").getWithTags(a)}};a.prototype.getThreadDataForSelectedLiveBucket=function(){var a=this.$FBStoriesStore1();return this.$FBStoriesStore9(a)};a.prototype.$FBStoriesStore9=function(a){if(!a)return null;var c=b("FBStoriesBucketHelper").getLiveVideo(a);if(!c||!this.$FBStoriesStore3(a))return null;var d=this.getSelectedBucketOwner();return{isLive:!0,media:c,bucketOwner:d,isSeen:!1,cameraPostType:b("FBStoriesBucketHelper").getCameraPostType(a)}};a.prototype.isSelectedBucketLiveAndEnded=function(){return this.isSelectedBucketLive()&&b("FBStoriesBucketHelper").hasLiveVideoEnded(this.$FBStoriesStore1())};a.prototype.getSATPNativeRender=function(){return this.getState().showSATPNativeRender};a.prototype.getIsCommercialBreakRunning=function(a){return!!this.getState().isCommercialBreakRunning.get(a)};a.prototype.getVideoMediaIdForBucketIndexAndThreadIndex=function(a,c){__p&&__p();a=this.getBucketByIndex(a);if(!a)return null;if(this.$FBStoriesStore3(a)){var d=this.$FBStoriesStore9(a);return(d=d)!=null?(d=d.media)!=null?d.id:d:d}d=this.$FBStoriesStore4(a);if(c<0||c>=d.length)return null;a=b("FBStoriesThreadHelper").getMedia(d[c]);if(!a)return null;return!b("CameraPostMediaHelper").isVideo(a)?null:a.id};a.prototype.isViewerOpen=function(){return this.getState().isViewerOpen};a.prototype.getCurrentViewerEntrypoint=function(){return this.getState().viewerEntrypoint};a.prototype.getCurrentThreadOverlays=function(){return b("FBStoriesThreadHelper").getStoryOverlays(this.getCurrentThreadForSelectedBucket())};e.exports=new a(b("FBStoriesDispatcher"))}),null);
__d("FBStoriesPog.react",["ix","cx","fbt","React","CameraPostTypesHelper","Image.react","asset","XUISpinner.react","CameraPostTypes"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){var a=!!this.props.profileImageUri,c=a?b("React").createElement(b("Image.react"),{src:this.props.profileImageUri,className:"_26w6"}):null,d=this.$1(),e="_26w4"+(this.props.highlighted?" _26w9":"")+(this.props.live?" _26wp":"")+(a?" _26wu":"")+(this.props.size==="small"?" size-small":"")+(this.props.size==="small-48"?" size-small-48":"")+(this.props.borderOption==="hide-and-expand"?" no-border":"")+(this.props.borderOption==="hide"?" hide-border":""),f=b("React").createElement("div",{className:"_26wv"}),h=b("React").createElement("div",{className:"_26wx"},b("React").createElement(b("Image.react"),{alt:i._("EN DIRECT"),src:g("404364")}));return b("React").createElement("div",{className:e},c,this.props.showBadge?f:null,d,b("React").createElement(b("XUISpinner.react"),{size:"large",background:a?"light":"dark",className:"_26ww"}),this.props.live?h:null)};a.prototype.$1=function(){var a=b("CameraPostTypesHelper").isEventStory(this.props.cameraPostType),c=b("CameraPostTypesHelper").isGroupStory(this.props.cameraPostType);return!a&&!c?null:b("React").createElement("div",{className:"_26ws"},b("React").createElement("div",{className:(a?"_26wz":"")+(c?" _26w-":"")}))};function a(){j.apply(this,arguments)}a.defaultProps={highlighted:!1,showBadge:!1,live:!1,size:"normal",cameraPostType:b("CameraPostTypes").STORY,borderOption:"show"};e.exports=a}),null);
__d("FBStoriesPlusPog.react",["ix","cx","React","Image.react","asset","XUISpinner.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=b("React").createElement("div",{className:"_66a_"},b("React").createElement(b("Image.react"),{src:g("424422")})),c="_26w4 no-border"+(this.props.size==="small"?" size-small":"")+(this.props.size==="small-48"?" size-small-48":"");return b("React").createElement("div",{className:c},a,b("React").createElement(b("XUISpinner.react"),{size:"large",background:"light",className:"_26ww"}))};function a(){i.apply(this,arguments)}a.defaultProps={size:"normal"};e.exports=a}),null);
__d("FBStoriesTrayFullAddItem.react",["cx","fbt","FBStoriesPlusPog.react","FBStoriesPog.react","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=a.profileImageUri?b("React").createElement(b("FBStoriesPog.react"),{borderOption:"hide",profileImageUri:a.profileImageUri,size:"small-48"}):b("React").createElement(b("FBStoriesPlusPog.react"),{size:"small-48"});return b("React").createElement(b("ShimButton.react"),{className:"_1zp8"+(a.profileImageUri?" _2grz":""),onClick:a.onClick},c,b("React").createElement("div",{className:"_mx9 _mxa verbose"},b("React").createElement("span",{className:"_mxb _64xb _4u-0"},h._("Compl\u00e9ter votre story")),b("React").createElement("div",{className:"_31yn"},b("React").createElement("span",null,h._("T\u00e9l\u00e9charger une photo ou une vid\u00e9o")))))}e.exports=a}),null);
__d("FBStoriesTrayUploadingAnimation.react",["cssVar","cx","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=48,j=58,k=76,l=2,m=i/2,n=j/2,o=k/2,p=m-2,q=n-2,r=o-2;a=function(a){__p&&__p();var c=void 0,d=void 0,e=void 0;switch(a.size){case"small":c=i;d=m;e=p;break;case"medium":c=j;d=n;e=q;break;case"large":default:c=k;d=o;e=r;break}return b("React").createElement("svg",{className:"_65xu"+(a.size==="small"?" size-small":"")+(a.size==="medium"?" size-medium":""),height:c,width:c},b("React").createElement("g",{className:"_65xv"},b("React").createElement("circle",{className:"_4kq4",cx:d,cy:d,fill:"none",r:e,stroke:"#4080ff",strokeWidth:l})))};e.exports=a}),null);
__d("FBStoriesTrayFullItem.react",["cx","FBStoriesTrayUploadingAnimation.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){!this.props.disabled&&!this.props.loading&&this.props.onSelect(this.props.bucketID)}.bind(this),b}a.prototype.render=function(){if(!this.props.bucketID)return null;var a=this.props.uploading&&b("React").createElement(b("FBStoriesTrayUploadingAnimation.react"),{size:"medium"});return b("React").createElement("div",{tabIndex:0,role:"button",onClick:this.$1,onKeyPress:this.$1,className:"_1zp8"},a,this.props.children)};e.exports=a}),null);
__d("FBStoriesTrayItemTitle.react",["cx","fbt","React","Timestamp.react","formatDate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.$1(),c=this.$2();return b("React").createElement("div",{className:"_mx9"+(this.props.ownBucket?" _mxa":"")+(this.props.verbose?" verbose":"")},a,c)};a.prototype.$1=function(){return this.props.ownBucket?b("React").createElement("div",{className:"_mxb"},b("React").createElement("span",{className:"_nbt"},h._("Votre story"))):this.props.actorName?b("React").createElement("div",{dir:"auto",className:"_mxb"},b("React").createElement("span",{className:"_nbt"},this.props.actorName)):null};a.prototype.$2=function(){return this.props.verbose&&this.props.lastUpdateTime?b("React").createElement("div",{className:"_mxc"},b("React").createElement(b("Timestamp.react"),{key:"timestamp",autoUpdate:!0,time:this.props.lastUpdateTime,text:b("formatDate")(this.props.lastUpdateTime,"M j, Y",{utc:!0})})):null};function a(){i.apply(this,arguments)}a.defaultProps={ownBucket:!1,verbose:!1,lastUpdateTime:undefined};e.exports=a}),null);
__d("FBStoriesVerticalLayout.react",["cx","fbt","Arbiter","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=3;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={seeMore:this.props.seeMore},this.$1=function(){return this.setState({seeMore:!0},function(){return b("Arbiter").inform("netego_loaded")})}.bind(this),c}a.prototype.render=function(){var a=this.props.children,c=b("React").Children.count(a);c=!this.state.seeMore&&c>j;a=b("React").createElement("div",{key:"list",className:"_1fvt vertical-48"+(this.state.seeMore?" seeMore":"")},a);c=c&&b("React").createElement("a",{key:"link",className:"_31yr",href:"#",onClick:this.$1},b("React").createElement("span",{className:"_jyz"}),h._("Afficher plus"));return[a,c]};e.exports=a}),null);
__d("FBStoriesTray.react",["cx","FBStoriesPog.react","FBStoriesTrayFullAddItem.react","FBStoriesTrayFullItem.react","FBStoriesTrayItemTitle.react","FBStoriesVerticalLayout.react","React","emptyFunction","FBStoriesBucketHelper","FBStoriesThreadHelper"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.friendsData;a=a.userBucketHasContent;c=!c||c.length===0;if(c&&!a)return null;c=[];this.props.showProduction&&c.push(this.$1());this.props.userBucketHasContent&&c.push(this.$2());c=c.concat([].concat(this.$3()));return b("React").createElement(b("FBStoriesVerticalLayout.react"),{seeMore:!!this.props.isSeeMoreMode},c)};a.prototype.$4=function(a){return b("React").createElement("div",{key:a,className:"_1fvw"},b("React").createElement("div",{className:"_rqg"}))};a.prototype.$1=function(){b("FBStoriesBucketHelper").getOwnerProfilePictureUri(this.props.userBucket);return b("React").createElement(b("FBStoriesTrayFullAddItem.react"),{key:"production",onClick:this.props.onAddStoryItemSelect})};a.prototype.$2=function(){var a=this.props,c=a.userBucket,d=a.userBucketHasUpdates,e=a.userBucketHasNewViewers;a=a.userBucketIsLive;var f=b("FBStoriesBucketHelper").getCameraPostType(c),g=b("FBStoriesBucketHelper").isUploading(c),h=b("FBStoriesBucketHelper").getLatestThreadCreationTime(c);b("FBStoriesBucketHelper").getMediaIDForLiveBucket(c);var i=b("FBStoriesBucketHelper").getId(c);c=b("FBStoriesBucketHelper").getOwnerProfilePictureUri(c);return b("React").createElement(b("FBStoriesTrayFullItem.react"),{key:i,bucketID:i,uploading:g,loading:this.props.loadingBucketID===i,onSelect:this.props.onItemSelect},b("React").createElement(b("FBStoriesPog.react"),{cameraPostType:f,live:a,showLoadingAnim:g,highlighted:!g&&d,showBadge:!g&&e,profileImageUri:c,size:"small-48",borderOption:g?"hide":"show"}),b("React").createElement(b("FBStoriesTrayItemTitle.react"),{verbose:!0,ownBucket:!0,lastUpdateTime:h}))};a.prototype.$3=function(){__p&&__p();return this.props.friendsData.map(function(a,c){__p&&__p();c=b("FBStoriesBucketHelper").getId(a);if(!c)return null;var d=b("FBStoriesBucketHelper").getCameraPostType(a),e=b("FBStoriesBucketHelper").getOwnerId(a),f=b("FBStoriesBucketHelper").getOwnerName(a,!0);if(!e||!f)return null;e=b("FBStoriesBucketHelper").isLive(a);var g=b("FBStoriesBucketHelper").getOwnerProfilePictureUri(a),h=b("FBStoriesBucketHelper").getThreads(a);h=h.filter(function(a){return!b("FBStoriesThreadHelper").isSeenByViewer(a)}).length>0;a=b("FBStoriesBucketHelper").getLatestThreadCreationTime(a);return b("React").createElement(b("FBStoriesTrayFullItem.react"),{key:c,bucketID:c,loading:this.props.loadingBucketID===c,onSelect:this.props.onItemSelect},b("React").createElement(b("FBStoriesPog.react"),{cameraPostType:d,live:e,showLoadingAnim:!1,highlighted:h,showBadge:!1,profileImageUri:g,size:"small-48",borderOption:"show"}),b("React").createElement(b("FBStoriesTrayItemTitle.react"),{verbose:!0,ownBucket:!1,actorName:f,lastUpdateTime:a}))}.bind(this))};function a(){h.apply(this,arguments)}a.defaultProps={onAddStoryItemSelect:b("emptyFunction"),onItemHover:b("emptyFunction"),onItemHoverOut:b("emptyFunction"),loadingBucketID:null,showProduction:!1,isSeeMoreMode:!1};e.exports=a}),null);
__d("FBStoriesViewerEntrypoint",[],(function(a,b,c,d,e,f){"use strict";e.exports={HOMEPAGE_TRAY:"HOMEPAGE_TRAY",GROUP_MALL:"GROUP_MALL",GROUP_PENDING_STORIES_TAB:"GROUP_PENDING_STORIES_TAB",PAGES_SURFACE:"PAGES_SURFACE"}}),null);
__d("FBStoriesTrayContainer.react",["cx","Bootloader","FBStoriesBucketHelper","FBStoriesLoggingConstants","FBStoriesProductionActions","FBStoriesStore","FBStoriesTray.react","FBStoriesTrayConfig","FBStoriesTrayHeader.react","FBStoriesViewerEntrypoint","FluxContainer","React","range"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={friendsData:[],userBucket:b("FBStoriesBucketHelper").getDefaultBucket(),userBucketHasUpdates:!1,userBucketHasNewViewers:!1,userBucketHasContent:!1,loading:!0,bucketIdBeingLoaded:null,userBucketIsLive:!1},this.$3=function(a){this.setState({bucketIdBeingLoaded:a}),b("Bootloader").loadModules(["FBStoriesActions","FBStoriesLoggingHelper"],function(c,d){c.userSelectedBucket(a)&&(c.toggleViewer(!0,b("FBStoriesViewerEntrypoint").HOMEPAGE_TRAY),d.storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY,b("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_STORY_HEAD)),this.setState({bucketIdBeingLoaded:null})}.bind(this),"FBStoriesTrayContainer.react")}.bind(this),c}a.getStores=function(){return[b("FBStoriesStore")]};a.calculateState=function(a){return{friendsData:b("FBStoriesStore").getFriendsBucketData(),userBucket:b("FBStoriesStore").getUserBucketData(),userBucketHasUpdates:b("FBStoriesStore").hasOwnBucketUpdates(),userBucketHasNewViewers:b("FBStoriesStore").hasOwnBucketViewers(),userBucketHasContent:b("FBStoriesStore").hasOwnBucketContent(),loading:b("FBStoriesStore").isLoading(),bucketIdBeingLoaded:a?a.bucketIdBeingLoaded:null,userBucketIsLive:b("FBStoriesStore").userBucketIsLive()}};a.prototype.render=function(){var a="_60kg";if(this.state.loading)return b("React").createElement("div",{className:a},b("React").createElement(b("FBStoriesTrayHeader.react"),null),b("React").createElement(i,null));return this.$1()?b("React").createElement("div",{className:a}):b("React").createElement("div",{className:a},b("React").createElement(b("FBStoriesTrayHeader.react"),null),b("React").createElement(b("FBStoriesTray.react"),{atCenterColumn:this.props.atCenterColumn,isSeeMoreMode:this.props.isSeeMoreMode,showProduction:this.props.showProduction,friendsData:this.state.friendsData,userBucket:this.state.userBucket,userBucketHasContent:this.state.userBucketHasContent,userBucketHasNewViewers:this.state.userBucketHasNewViewers,userBucketHasUpdates:this.state.userBucketHasUpdates,loading:this.state.loading,loadingBucketID:this.state.bucketIdBeingLoaded,userBucketIsLive:this.state.userBucketIsLive,onAddStoryItemSelect:this.$2,onItemSelect:this.$3}))};a.prototype.$2=function(){b("FBStoriesProductionActions").openProductionDialog()};a.prototype.$1=function(){var a=this.state,c=a.friendsData,d=a.userBucket;a=a.loading;d=!b("FBStoriesBucketHelper").hasData(d);c=!c||c.length===0;d=d&&c;return!a&&d};a.defaultProps={showProduction:!1,atCenterColumn:!1,isSeeMoreMode:!1};var i=function(a){a=function(a){return b("React").createElement("div",{className:"_19l4",key:a},b("React").createElement("div",{className:"_19la"},b("React").createElement("div",{className:"_19lc"})),b("React").createElement("div",{className:"_19ld"}),b("React").createElement("div",{className:"_19li"}),b("React").createElement("div",{className:"_19lj"}),b("React").createElement("div",{className:"_19lk"}),b("React").createElement("div",{className:"_19ll"}),b("React").createElement("div",{className:"_19lm"}),b("React").createElement("div",{className:"_19mw"}))};return b("React").createElement("div",{className:"_19m_"+(b("FBStoriesTrayConfig").trayLayout==="vertical_48"?" vertical_48":"")},b("React").createElement("div",{className:"_19n0"},b("range")(0,3).map(a)))};e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesTrayHeader.react",["ix","cx","fbt","CameraFileBugButton.react","ContextualLayerAutoFlip","FBStoriesMutedBucketOwnersViewer","PopoverMenu.react","React","ReactMenu","ReactXUIMenu","Image.react","TooltipLink.react","asset","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactMenu").Item;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.$1=function(){b("FBStoriesMutedBucketOwnersViewer").getInstance().open()};a.prototype.render=function(){var a=[];a.push(b("React").createElement(k,{key:"muted_stories",onClick:this.$1},b("React").createElement(b("Image.react"),{src:g("113417")}),i._("Stories que vous avez mises en sourdine")));a.push(b("CameraFileBugButton.react")());a=b("React").createElement(b("ReactXUIMenu"),{className:"_2sh1"},a);return b("React").createElement("div",{className:"_42rg"},b("React").createElement(b("TooltipLink.react"),{tooltip:i._("Les stories sont des photos et des vid\u00e9os qui ne sont visibles que durant 24 heures. Les contributions \u00e0 une story seront visibles ici.")},b("React").createElement("span",{className:"_2ms2"},i._("Stories"))),b("React").createElement("div",{className:"_2sh5"},b("React").createElement(b("PopoverMenu.react"),{alignv:"bottom",alignh:"left","aria-label":i._("Plus"),layerBehaviors:[b("ContextualLayerAutoFlip")],menu:a,position:"below"},b("React").createElement(b("TooltipLink.react"),{href:"#",tooltip:i._("Plus")},b("React").createElement(b("Image.react"),{src:g("348130")})))))};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesActionsHelper",["FBStoriesStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={checkAllBucketsViewed:function(a){var c=b("FBStoriesStore").getBucketCount();return a>=c||a<0},getNextBucketAndThreadIndex:function(a,c){__p&&__p();var d=c?a+1:a-1,e=0;if(b("FBStoriesStore").isUnseenMode()){var f=!1;while(f===!1&&!g.checkAllBucketsViewed(d))e=b("FBStoriesStore").getUnseenThreadIndex(d),f=e>=0,f||(d=c?d+1:d-1);if(!f&&!c){d=a-1;e=b("FBStoriesStore").getLastSeenThreadIndexForBucket(d);while(!b("FBStoriesStore").hasSeenBucketInCurrentSession(d)&&d>=0)d-=1,e=b("FBStoriesStore").getLastSeenThreadIndexForBucket(d)}}else c||(e=b("FBStoriesStore").getLastSeenThreadIndexForBucket(d));return{nextBucketIndex:d,nextThreadIndex:e}}};e.exports=g}),null);
__d("FBStoriesWWWPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEventTotalTime=function(a){this.$1.event_total_time=a;return this};a.prototype.setEventType=function(a){this.$1.event_type=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={event_total_time:!0,event_type:!0,vc:!0};e.exports=a}),null);
__d("FBStoriesLoggingHelper",["BackstageMediaType","DirectMessagingTypedLogger","FBLogger","FBStoriesBucketHelper","FBStoriesLoggingConstants","FBStoriesStore","FBStoriesWWWPerfTypedLogger","Banzai","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_eventStartTimes:{},logStoryTrayLoad:function(a){__p&&__p();var c=a.userBucketData;a=a.friendsBucketData;var d=b("FBStoriesBucketHelper").hasData(c),e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=new Map();b("FBStoriesBucketHelper").isLive(c)&&g++;a.forEach(function(a){__p&&__p();e++;b("FBStoriesBucketHelper").getUnseenCount(a)>0&&f++;b("FBStoriesBucketHelper").isLive(a)&&g++;var c=b("FBStoriesBucketHelper").getLoggingType(a);switch(c){case b("FBStoriesLoggingConstants").PAGE_STORY:h++;break;case b("FBStoriesLoggingConstants").EVENT_STORY:i++;break;case b("FBStoriesLoggingConstants").GROUP_STORY:j++;break;case b("FBStoriesLoggingConstants").STORY_PROMOTION:k++;break;case b("FBStoriesLoggingConstants").FOLLOWEE_STORY:l++;break;case b("FBStoriesLoggingConstants").FRIEND_STORY:m++;break;default:b("FBLogger")("fbstories").mustfix("storyOwnerType not found: %s",c)}c=b("FBStoriesBucketHelper").getOwnerId(a);var d=b("FBStoriesBucketHelper").getThreadIDs(a);if(b("FBStoriesBucketHelper").isLive(a)){a=(a=b("FBStoriesBucketHelper").getLiveVideo(a))!=null?a.id:a;a&&d.push(a)}n.set(c,d)});this._getLogger().setName(b("FBStoriesLoggingConstants").ACTION_TRAY_LOAD).setHasMyStory(d).setNumberStories(e).setNumberNewStories(f).setNumberLiveStories(g).setLiveStoriesInTray(g).setPageStoriesInTray(h).setGroupStoriesInTray(j).setEventStoriesInTray(i).setFolloweeStoriesInTray(l).setFriendStoriesInTray(m).setPromotionStoriesInTray(k).setStoryThreadIds(n).log()},storyLog:function(a,c){var d=b("FBStoriesStore").getSelectedBucketCameraPostType(),e=b("FBStoriesStore").getSelectedBucketOwnerID(),f=b("FBStoriesStore").getSelectedBucketOwnerType(),g=b("FBStoriesStore").getThreadCountForSelectedBucket(),h=b("FBStoriesStore").getSelectedBucketUnseenCount()>0,i=b("FBStoriesStore").getSelectedBucketIndex();this._getLogger().setCameraPostType(d).setName(a).setActionSource(c).setStoryOwner(e).setStoryOwnerType(f).setThreadCount(g).setHasNewContent(h).setStoryIndex(i).log();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:a,source:c,story_owner:String(e),number_media:String(g)})},mediaLog:function(a){var c=b("FBStoriesStore").getCurrentThreadCameraPostTypeForSelectedBucket(),d=b("FBStoriesStore").getSelectedBucketOwnerID(),e=b("FBStoriesStore").getSelectedBucketOwnerType(),f=b("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket(),g=b("FBStoriesStore").getCurrentThreadMediaTypeForSelectedBucket(),h=b("FBStoriesStore").getCurrentThreadMediaViewerCountForSelectedBucket(),i=b("FBStoriesStore").getSelectedBucketIndex(),j=b("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),k=b("BackstageMediaType").UNKNOWN;g==="Photo"?k=b("BackstageMediaType").PHOTO:g==="Video"?k=b("BackstageMediaType").VIDEO:g===b("BackstageMediaType").LIVE&&(k=b("BackstageMediaType").LIVE);g="";j&&(g=j.toString());this._getLogger().setCameraPostType(c).setName(a).setStoryOwner(d).setStoryOwnerType(e).setMediaType(k).setClientMediaID(f).setNumberViewers(h).setCardID(g).setStoryIndex(i).log()},logEventStart:function(a){if(Object.prototype.hasOwnProperty.call(this._eventStartTimes,a)){!1;return}this._eventStartTimes[a]=Date.now();this._getPerfLogger().setEventType(a).setEventTotalTime(0).log()},logEventEnd:function(a){if(Object.prototype.hasOwnProperty.call(this._eventStartTimes,a)===!1){!1;return}var b=Object.prototype.hasOwnProperty.call(this._eventStartTimes,a)?Date.now()-this._eventStartTimes[a]:-1;this._getPerfLogger().setEventType(a).setEventTotalTime(b).log();delete this._eventStartTimes[a]},_getLogger:function(){return new(b("DirectMessagingTypedLogger"))()},_getPerfLogger:function(){return new(b("FBStoriesWWWPerfTypedLogger"))()},openMediaLog:function(){b("Banzai").post("stories_www_vpv_banzai",{media_id:b("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket()}),g.mediaLog(b("FBStoriesLoggingConstants").ACTION_OPEN_MEDIA)},deleteMediaLog:function(){g.mediaLog(b("FBStoriesLoggingConstants").ACTION_DELETE_MEDIA)},openSeenSummaryLog:function(){g.mediaLog(b("FBStoriesLoggingConstants").ACTION_OPEN_SEEN_SUMMARY)}};e.exports=g}),null);
__d("FBStoriesMutedBucketOwnersActions",["FBStoriesDispatcher","CurrentUser","FBStoriesDataHelper","FBStoriesGraphQLAPI","FBStoriesMutedBucketOwnersActionTypes","FBStoriesMutedBucketOwnersStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBStoriesDispatcher").dispatch;function a(){b("FBStoriesDispatcher").explicitlyRegisterStores([b("FBStoriesMutedBucketOwnersStore")])}a.prototype.loadMutedOwners=function(){g({type:b("FBStoriesMutedBucketOwnersActionTypes").LOADING}),b("FBStoriesGraphQLAPI").loadMutedBucketOwnersList().done(function(a){g({type:b("FBStoriesMutedBucketOwnersActionTypes").LOADED,data:b("FBStoriesDataHelper").getMutedBucketOwnersFromLoadedQuery(a)})})};a.prototype.setBucketOwnerMuted=function(a,c,d,e){b("FBStoriesGraphQLAPI").muteBucketOwner(b("CurrentUser").getID(),a,e).done(function(){g({type:b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING,ownerID:a,value:!1})}),g({type:b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING,ownerID:a,value:!0}),g({type:b("FBStoriesMutedBucketOwnersActionTypes").UPDATE_MUTED_OPTIMISTIC,ownerID:a,ownerName:c,ownerProfilePictureUri:d,value:e})};e.exports=new a()}),null);
__d("FBStoriesPrefetcher",["Bootloader","FBStoriesActionsHelper","FBStoriesStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={prefetchForCurrentThreadAndBucket:function(){this.prefetch(b("FBStoriesStore").getSelectedBucketIndex(),b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())},prefetch:function(a,b){this._prefetchVideos(a,b)},_prefetchVideos:function(a,b){this._prefetchThreadVideo(a,b),this._prefetchForwardVideo(a,b),this._prefetchBackwardsVideo(a,b)},_prefetchForwardVideo:function(a,b){this._prefetchVideo(!0,a,b)},_prefetchBackwardsVideo:function(a,b){this._prefetchVideo(!1,a,b)},_prefetchVideo:function(a,c,d){__p&&__p();var e=b("FBStoriesStore").getThreadCount(c);d=a?d+1:d-1;while(d>=0&&d<e){if(this._prefetchThreadVideo(c,d))return!0;d=a?d+1:d-1}d=c;while(!b("FBStoriesActionsHelper").checkAllBucketsViewed(d)){e=b("FBStoriesActionsHelper").getNextBucketAndThreadIndex(d,a);c=e.nextBucketIndex;e=e.nextThreadIndex;if(this._prefetchThreadVideo(c,e))return!0;d=c}return!1},_prefetchThreadVideo:function(a,c){var d=b("FBStoriesStore").getVideoMediaIdForBucketIndexAndThreadIndex(a,c);if(!d)return!1;b("Bootloader").loadModules(["VideoPlayerMetaData"],function(a){a.genVideoData(d,{allowDashPrefetch:!0,forceHD:!0})},"FBStoriesPrefetcher");return!0}};e.exports=a}),null);
__d("FBStoriesActions",["FBStoriesActionTypes","CameraPostBucketOwnerHelper","CameraPostGraphQLAPI","FBStoriesDispatcher","FBStoriesActionsHelper","FBStoriesGraphQLAPI","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesMutedBucketOwnersActions","FBStoriesPrefetcher","FBStoriesStore","JSResource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBStoriesDispatcher").dispatch,h={resetStore:function(){g({type:b("FBStoriesActionTypes").RESET_STATE})},loadData:function(a,c,d,e,f){g({type:b("FBStoriesActionTypes").LOADED,data:{userInfo:{userName:a,userID:c,userGender:null,userProfilePic:{uri:d}},userBucketData:null,friendsBucketData:f}})},nextThread:function(a){var c=b("FBStoriesStore").isSelectedBucketLive();if(c){h.nextBucket();return}c=b("FBStoriesStore").getThreadsForSelectedBucket();var d=b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket();a=a!==undefined?a:d+1;c.length===0?h.nextBucket():a<=c.length-1?h.currentThreadIndexChanged(a):h.nextBucket()},prevThread:function(a){var c=b("FBStoriesStore").isSelectedBucketLive();if(c){h.prevBucket();return}c=b("FBStoriesStore").getThreadsForSelectedBucket();var d=b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket();a=a!==undefined?a:d-1;c.length===0?h.prevBucket():a>=0?h.currentThreadIndexChanged(a,!0):h.prevBucket()},nextBucket:function(){return h._transitionBucket(!0)},prevBucket:function(){return h._transitionBucket(!1)},setShowBucketNavigation:function(a){g({type:b("FBStoriesActionTypes").SET_SHOW_BUCKET_NAVIGATION,value:a})},userSelectedBucket:function(a){__p&&__p();var c=b("FBStoriesStore").getBucketIndexByBucketId(a);if(c===-1)return!1;var d=b("FBStoriesStore").getUnseenThreadIndex(c),e=Math.max(0,d);a=b("FBStoriesStore").isOwnBucket(a);g({type:b("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY});g({type:b("FBStoriesActionTypes").SET_UNSEEN_MODE,value:!a&&d>=0});g({type:b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:!1});g({type:b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:c});h.currentThreadIndexChanged(e);return!0},updateCurrentThreadPercentDone:function(a){g({type:b("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE,percentDone:a})},currentThreadIndexChanged:function(a){var c=arguments.length<=1||arguments[1]===undefined?!1:arguments[1],d=b("FBStoriesStore").getCurrentThreadData(),e=b("FBStoriesStore").isOwnBucket();e&&d&&!d.isLive&&h.markThreadViewersSeen(d.threadID);g({type:b("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED,index:a});h.updateCurrentThreadPercentDone(0);var f=b("FBStoriesStore").getCurrentThreadData();f?(e&&!f.isLive&&function(){var a=f.threadID;b("FBStoriesGraphQLAPI").loadViewerListForThread(a).done(function(c){return g({type:b("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD,threadID:a,data:c})})}(),h.markCurrentThreadAsSeen(),b("FBStoriesPrefetcher").prefetchForCurrentThreadAndBucket()):c?h.prevThread():h.nextThread()},markCurrentThreadAsSeen:function(){var a=b("FBStoriesStore").getUserInfo().userID,c=b("FBStoriesStore").getCurrentThreadData();if(!c||c.isLive)return;var d=c.latestMessageID,e=c.cameraPostType;c=c.threadID;g({type:b("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC,threadID:c});b("CameraPostGraphQLAPI").markThreadSeen(a,c,d,e)},markThreadViewersSeen:function(a){g({type:b("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC,threadID:a}),b("FBStoriesGraphQLAPI").updateThreadSeenReciept(a)},_transitionBucket:function(a,c){__p&&__p();var d=b("FBStoriesStore").getCurrentThreadData(),e=b("FBStoriesStore").isOwnBucket();e&&d&&!d.isLive&&h.markThreadViewersSeen(d.threadID);c=c!==undefined?c:b("FBStoriesStore").getSelectedBucketIndex();c=b("FBStoriesActionsHelper").getNextBucketAndThreadIndex(c,a);var f=c.nextBucketIndex;c=c.nextThreadIndex;var i=b("FBStoriesActionsHelper").checkAllBucketsViewed(f);g({type:b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:i});if(i)return e&&d&&!d.isLive?h.markThreadViewersSeen(d.threadID):undefined;h.removeEndedLiveVideo();g({type:b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:f});if(!b("FBStoriesStore").hasDataInSelectedBucket()&&!b("FBStoriesStore").isSelectedBucketLive())return a?h.nextBucket():h.prevBucket();h.currentThreadIndexChanged(c);b("FBStoriesLoggingHelper").storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY,b("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_PRIOR_STORY);return undefined},deleteThreadFromBucket:function(a,c){if(!b("FBStoriesStore").isUserManagedThread(a,c))return;b("FBStoriesGraphQLAPI").deleteStory(b("FBStoriesStore").getUserInfo().userID,a);g({type:b("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET,threadID:a,bucketID:c});h.nextThread(b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())},muteBucketOwner:function(a,c){b("FBStoriesMutedBucketOwnersActions").setBucketOwnerMuted(b("CameraPostBucketOwnerHelper").getId(a),b("CameraPostBucketOwnerHelper").getName(a),b("CameraPostBucketOwnerHelper").getProfilePictureUri(a),!0);if(!c)return;g({type:b("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:c});h._transitionBucket(!0,b("FBStoriesStore").getSelectedBucketIndex()-1)},reportThreadToAdmin:function(a){b("FBStoriesGraphQLAPI").reportThreadToAdmin(b("FBStoriesStore").getUserInfo().userID,a)},removeEndedLiveVideo:function(){if(!b("FBStoriesStore").isSelectedBucketLiveAndEnded())return;var a=b("FBStoriesStore").getSelectedBucketId();b("FBStoriesStore").getThreadsForSelectedBucket().length>0?g({type:b("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET,bucketID:a}):g({type:b("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:a})},setIsCommercialBreakRunning:function(a,c){g({type:b("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING,isCommercialBreakRunning:c,videoID:a})},toggleViewer:function(a,c){g({type:b("FBStoriesActionTypes").SET_VIEWER_OPEN,value:a,entrypoint:c});return b("JSResource")("FBStoriesViewer").__setRef("FBStoriesActions").load().then(function(b){return b.getInstance().toggle(a)})},unselectBucket:function(){g({type:b("FBStoriesActionTypes").UNSELECT_BUCKET})},optimisticCreateStoryPhoto:function(a){if(!a)return;g({type:b("FBStoriesActionTypes").OPTIMISTIC_CREATE_PHOTO_STORY,imageURL:a})},onPollOptionVoted:function(a,c){g({type:b("FBStoriesActionTypes").OPTIMISTIC_POLL_VOTE,index:c}),b("FBStoriesGraphQLAPI").pollVote(a,c)}};e.exports=h}),null);
__d("FBStoriesCameraDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("FBStoriesProductionTypes",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c={CAMERA_ERROR:"CAMERA_ERROR",FILE_SIZE_EXCEED:"FILE_SIZE_EXCEED",LEAVING:"LEAVING"};g=babelHelpers.inherits(a,b("immutable").Record({hasImage:undefined,hasMediaStream:undefined,isCameraMediaOpen:undefined,imageSource:undefined,mediaNode:undefined,mediaStream:undefined,privacySettingsCustomParticipants:undefined,privacySettingsMode:undefined,videoSource:undefined}));g&&g.prototype;function a(){g.apply(this,arguments)}d={CAMERA_1:"CAMERA_1",CAMERA_2:"CAMERA_2",NULL_STATE:"NULL_STATE",UPLOAD_1:"UPLOAD_1"};f={UNSET:"UNSET",PUBLIC:"PUBLIC",FRIENDS_AND_CONNECTIONS:"FRIENDS_AND_CONNECTIONS",FRIENDS:"FRIENDS",CUSTOM:"CUSTOM"};e.exports={FBStoriesCameraPopupDialogTypes:c,FBStoriesCameraState:a,FBStoriesProductionFlowStageTypes:d,UnifiedStoriesAudienceModeTypes:f}}),null);
__d("FBStoriesCameraActionTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SET_HAS_IMAGE:"SET_HAS_IMAGE",SET_HAS_MEDIASTREAM:"SET_HAS_MEDIASTREAM",SET_IMAGESOURCE:"SET_IMAGESOURCE",SET_IS_CAMERA_MEDIA_OPEN:"SET_IS_CAMERA_MEDIA_OPEN",SET_MEDIA_NODE:"SET_MEDIA_NODE",SET_MEDIASTREAM:"SET_MEDIASTREAM",SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS:"SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS",SET_PRIVACY_SETTINGS_MODE:"SET_PRIVACY_SETTINGS_MODE",SET_VIDEOSOURCE:"SET_VIDEOSOURCE"});e.exports=a}),null);
__d("fbStoriesCameraReducer",["FBStoriesCameraActionTypes","FBStoriesProductionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("FBStoriesProductionTypes").FBStoriesCameraState;function a(a,c){__p&&__p();switch(c.type){case b("FBStoriesCameraActionTypes").SET_HAS_IMAGE:return a.set("hasImage",c.hasImage);case b("FBStoriesCameraActionTypes").SET_HAS_MEDIASTREAM:return a.set("hasMediaStream",c.hasMediaStream);case b("FBStoriesCameraActionTypes").SET_IMAGESOURCE:return a.set("imageSource",c.imageSource);case b("FBStoriesCameraActionTypes").SET_IS_CAMERA_MEDIA_OPEN:return a.set("isCameraMediaOpen",c.isCameraMediaOpen);case b("FBStoriesCameraActionTypes").SET_MEDIA_NODE:return a.set("mediaNode",c.mediaNode);case b("FBStoriesCameraActionTypes").SET_MEDIASTREAM:return a.set("mediaStream",c.mediaStream);case b("FBStoriesCameraActionTypes").SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS:return a.set("privacySettingsCustomParticipants",c.privacySettingsCustomParticipants);case b("FBStoriesCameraActionTypes").SET_PRIVACY_SETTINGS_MODE:return a.set("privacySettingsMode",c.privacySettingsMode);case b("FBStoriesCameraActionTypes").SET_VIDEOSOURCE:return a.set("videoSource",c.videoSource);default:return a}}e.exports=a}),null);
__d("FBStoriesCameraStore",["fbStoriesCameraReducer","FBStoriesCameraDispatcher","FluxReduceStore","FBStoriesProductionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("FBStoriesProductionTypes").FBStoriesCameraState;c=babelHelpers.inherits(a,b("FluxReduceStore"));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.__moduleID=e.id,b}a.prototype.getInitialState=function(){return new h()};a.prototype.reduce=function(a,c){return b("fbStoriesCameraReducer")(a,c)};e.exports=new a(b("FBStoriesCameraDispatcher"))}),null);
__d("FBStoriesVisibilityHelper",["FBStoriesDataHelper","FBStoriesStore","Visibility","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=60;a={_visibilitySubscription:null,addListenerToReloadDataOnVisible:function(a){if(this._visibilitySubscription)return;a===undefined&&(a=this._defaultDataLoad.bind(this));this._visibilitySubscription=b("Visibility").addListener(b("Visibility").VISIBLE,b("throttle").withBlocking(function(){b("FBStoriesStore").isLoading()===!1&&b("FBStoriesStore").isViewerOpen()===!1&&(a!==undefined&&a())},g*1e3))},removeListener:function(){if(!this._visibilitySubscription)return;this._visibilitySubscription.remove();this._visibilitySubscription=null},_defaultDataLoad:function(){b("FBStoriesDataHelper").loadData()}};e.exports=a}),null);
__d("FBStoriesTrayInit",["csx","regeneratorRuntime","Promise","CSS","DOMQuery","FBStoriesActions","FBStoriesActionTypes","FBStoriesCameraStore","FBStoriesCenterColumnTrayContainer.react","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesGraphQLAPI","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesPrefetcher","FBStoriesStore","FBStoriesTrayConfig","FBStoriesTrayContainer.react","FBStoriesViewerEntrypoint","FBStoriesVisibilityHelper","React","ReactDOM","ge","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBStoriesLoggingConstants").INTERACTIONS;e.exports={_shouldLoadData:!1,_loadDataPromise:undefined,_reactTrayRendered:!1,_listenersInitialized:!1,loadData:function(){__p&&__p();var a=arguments.length<=0||arguments[0]===undefined?!1:arguments[0];return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:(!this._loadDataPromise||a)&&(this._loadDataPromise=new(b("Promise"))(function(a,c){__p&&__p();var d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:b("FBStoriesLoggingHelper").logEventStart(h.DATA_LOADING);d=b("FBStoriesDispatcher").dispatch;d({type:b("FBStoriesActionTypes").LOADING});g.prev=3;g.next=6;return b("regeneratorRuntime").awrap(b("FBStoriesGraphQLAPI").load());case 6:e=g.sent;if(this._shouldLoadData){g.next=9;break}return g.abrupt("return");case 9:f=b("FBStoriesDataHelper").getBucketsDataFromLoadedObject(e);b("FBStoriesLoggingHelper").logStoryTrayLoad(f);d({type:b("FBStoriesActionTypes").LOADED,data:f});this._initTrayListeners();b("FBStoriesLoggingHelper").logEventEnd(h.DATA_LOADING);a(e);g.next=22;break;case 17:g.prev=17,g.t0=g["catch"](3),d({type:b("FBStoriesActionTypes").LOADED_ERROR,error:g.t0}),b("FBStoriesLoggingHelper").logEventEnd(h.DATA_LOADING),c(g.t0);case 22:case"end":return g.stop()}},null,this,[[3,17]])}.bind(this)));return c.abrupt("return",this._loadDataPromise);case 2:case"end":return c.stop()}},null,this)},userSelectedBucket:function(a){b("FBStoriesActions").userSelectedBucket(a)},registerStores:function(){b("FBStoriesDispatcher").explicitlyRegisterStores([b("FBStoriesStore"),b("FBStoriesCameraStore")])},openViewer:function(){b("FBStoriesLoggingHelper").logEventStart(h.VIEWER_OPEN);b("FBStoriesLoggingHelper").storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY,b("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_STORY_HEAD);return b("FBStoriesActions").toggleViewer(!0,b("FBStoriesViewerEntrypoint").HOMEPAGE_TRAY).then(function(){return b("FBStoriesLoggingHelper").logEventEnd(h.VIEWER_OPEN)})},renderReactTray:function(){__p&&__p();if(this._reactTrayRendered)return;b("FBStoriesLoggingHelper").logEventStart(h.TRAY_RENDER);var a=b("FBStoriesTrayConfig").showProduction,c=b("FBStoriesTrayConfig").atCenterColumn;b("FBStoriesPrefetcher").prefetchForCurrentThreadAndBucket();if(c){var d=b("DOMQuery").scry(b("ge")("stories_pagelet_below_composer"),"._4-u2");if(!d||d.length===0)return;d=d[0];if(!d)return;b("ReactDOM").render(b("React").createElement(b("FBStoriesCenterColumnTrayContainer.react"),null),d)}else{d=b("DOMQuery").scry(b("ge")("stories_pagelet_rhc"),"._4-u2");if(!d||d.length===0)return;d=d[0];if(!d)return;var e="._1fvt";e=e?b("DOMQuery").find(d,e):undefined;e=e?b("CSS").hasClass(e,"seeMore"):!1;b("ReactDOM").render(b("React").createElement(b("FBStoriesTrayContainer.react"),{showProduction:a,atCenterColumn:c,isSeeMoreMode:e}),d)}b("FBStoriesLoggingHelper").logEventEnd(h.TRAY_RENDER);this._reactTrayRendered=!0},_initTrayListeners:function(){if(this._listenersInitialized)return;var a=b("FBStoriesDispatcher").dispatch,c=b("FBStoriesGraphQLAPI").subscribeToTrayChanges(function(c){this.renderReactTray();a({type:b("FBStoriesActionTypes").SUBSCRIPTION_BUCKET_UPDATE,bucketData:(c=c)!=null?(c=c.stories_tray_subscribe)!=null?c.bucket:c:c})}.bind(this));c&&a({type:b("FBStoriesActionTypes").SET_SUBSCRIPTION_TOKEN,token:c});b("FBStoriesVisibilityHelper").addListenerToReloadDataOnVisible(function(){return this.loadData(!0)}.bind(this));this._listenersInitialized=!0},initializeOnEnter:function(){this._shouldLoadData=!0,this.registerStores()},resetOnExit:function(){this._shouldLoadData=!1;this._loadDataPromise=null;var a=b("FBStoriesStore").getState().subscriptionToken;a&&(b("FBStoriesGraphQLAPI").unsubscribeFromTrayChanges(a),b("FBStoriesDispatcher").dispatch({type:b("FBStoriesActionTypes").SET_SUBSCRIPTION_TOKEN,token:null}));b("FBStoriesActions").resetStore();b("FBStoriesVisibilityHelper").removeListener();this._listenersInitialized=!1;this._reactTrayRendered=!1}}}),null);
__d("FBStoriesMutedBucketOwner.react",["cx","fbt","Image.react","ProfileLink.react","React","XUIButton.react","XUISpinner.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=h._("Sourdine"),c=h._("R\u00e9activer");return b("React").createElement("div",{className:"_33zl"},b("React").createElement(b("ProfileLink.react"),{uid:this.props.id,target:"_blank"},b("React").createElement(b("Image.react"),{src:this.props.profilePictureUri,className:"_33zr"})),b("React").createElement("span",{className:"_33zo"},b("React").createElement(b("ProfileLink.react"),{uid:this.props.id,target:"_blank"},this.props.name)),b("React").createElement("span",{className:"_33zn"},this.props.mutingInProgress?b("React").createElement(b("XUISpinner.react"),{size:"large"}):b("React").createElement(b("XUIButton.react"),{label:this.props.isMuted?c:a,onClick:function(){this.props.onMuteChanged(this.props.id,this.props.name,this.props.profilePictureUri,!this.props.isMuted)}.bind(this)})))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesMutedBucketOwners.react",["cx","fbt","FBStoriesMutedBucketOwner.react","FBStoriesMutedBucketOwnerHelper","FBStoriesMutedBucketOwnersActions","React","ScrollableArea.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props.mutedBucketOwners.length===0?b("React").createElement("div",{className:"_33zk"},h._("Vous n\u2019avez encore mis aucune story en sourdine. Quand vous le ferez, elles appara\u00eetront ici.")):this.props.mutedBucketOwners.map(function(a){var c=b("FBStoriesMutedBucketOwnerHelper").getId(a),d=this.props.currentlyMutingBucketOwners.indexOf(c)!==-1,e=b("FBStoriesMutedBucketOwnerHelper").getMuted(a);return b("React").createElement(b("FBStoriesMutedBucketOwner.react"),{key:c,id:c,name:b("FBStoriesMutedBucketOwnerHelper").getName(a),profilePictureUri:b("FBStoriesMutedBucketOwnerHelper").getProfilePictureUri(a),isMuted:e,mutingInProgress:d,onMuteChanged:b("FBStoriesMutedBucketOwnersActions").setBucketOwnerMuted})}.bind(this));return b("React").createElement(b("ScrollableArea.react"),{maxHeight:this.props.maxHeight,width:this.props.width},b("React").createElement("div",{className:"_33zj"},a))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersDialog.react",["fbt","FBStoriesMutedBucketOwners.react","LayerRemoveOnHide","LoadingDialog.react","React","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=445,j=100,k=310;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={showLoadingDialogWhileMuting:!1},this.$2=function(){this.$1()&&this.props.onClose()}.bind(this),b}a.prototype.componentDidMount=function(){this.setState({showLoadingDialogWhileMuting:this.props.isCurrentlyMutingBucketOwners})};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.state.showLoadingDialogWhileMuting&&this.props.isCurrentlyMutingBucketOwners&&!a.isCurrentlyMutingBucketOwners&&this.setState({showLoadingDialogWhileMuting:!1})};a.prototype.$1=function(){return this.props.isLoading||this.state.showLoadingDialogWhileMuting&&this.props.isCurrentlyMutingBucketOwners};a.prototype.render=function(){return this.$1()?b("React").createElement(b("LoadingDialog.react"),{onToggle:this.$2}):b("React").createElement(b("XUIDialog.react"),{width:i,height:j,shown:!0,onToggle:this.props.onClose,behaviors:{LayerRemoveOnHide:b("LayerRemoveOnHide")}},b("React").createElement(b("XUIDialogTitle.react"),null,g._("Stories que vous avez mises en sourdine")),b("React").createElement(b("XUIDialogBody.react"),{useCustomPadding:!0},b("React").createElement(b("FBStoriesMutedBucketOwners.react"),{maxHeight:k,width:i,mutedBucketOwners:this.props.mutedBucketOwners,currentlyMutingBucketOwners:this.props.currentlyMutingBucketOwners})))};e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersDialogContainer.react",["regeneratorRuntime","FBStoriesTrayInit","fbStoriesMutedBucketOwnersSelectors","FBStoriesMutedBucketOwnersDialog.react","FBStoriesMutedBucketOwnersStore","FluxContainer","React","shallowArrayEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.$2=[],b}a.getStores=function(){return[b("FBStoriesMutedBucketOwnersStore")]};a.calculateState=function(a){a=b("FBStoriesMutedBucketOwnersStore").getState();return{mutedBucketOwners:b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(a),currentlyMutingBucketOwners:b("fbStoriesMutedBucketOwnersSelectors").getCurrentlyMutingBucketOwners(a),isLoading:b("fbStoriesMutedBucketOwnersSelectors").isLoading(a),isCurrentlyMutingBucketOwners:b("fbStoriesMutedBucketOwnersSelectors").isCurrentlyMutingBucketOwners(a)}};a.prototype.UNSAFE_componentWillUpdate=function(a,b){this.$1||(this.$2=this.$3(b),this.$1=!0)};a.prototype.componentWillUnmount=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(b("shallowArrayEqual")(this.$2,this.$3(this.state))){a.next=4;break}a.next=3;return b("regeneratorRuntime").awrap(b("FBStoriesTrayInit").loadData(!0));case 3:b("FBStoriesTrayInit").renderReactTray();case 4:case"end":return a.stop()}},null,this)};a.prototype.$3=function(a){return a.mutedBucketOwners.map(function(a){return a.muted})};a.prototype.render=function(){return b("React").createElement(b("FBStoriesMutedBucketOwnersDialog.react"),{onClose:this.props.onClose,mutedBucketOwners:this.state.mutedBucketOwners,currentlyMutingBucketOwners:this.state.currentlyMutingBucketOwners,isLoading:this.state.isLoading,isCurrentlyMutingBucketOwners:this.state.isCurrentlyMutingBucketOwners})};e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesMutedBucketOwnersViewer",["fbStoriesMutedBucketOwnersSelectors","DOM","ReactDOM","React","FBStoriesDispatcher","FBStoriesMutedBucketOwnersActions","FBStoriesMutedBucketOwnersDialogContainer.react","FBStoriesMutedBucketOwnersStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="fb_stories_muted_bucket_owners";h.openInstance=function(){h.getInstance().open()};h.getInstance=function(){this.$3||(h.$3=new h());return h.$3};function h(){this.close=function(){b("ReactDOM").unmountComponentAtNode(this.$1)}.bind(this),this.$1=b("DOM").create("div",{id:g}),document.body&&document.body.appendChild(this.$1)}h.prototype.open=function(){b("fbStoriesMutedBucketOwnersSelectors").canReload(b("FBStoriesMutedBucketOwnersStore").getState())&&b("FBStoriesMutedBucketOwnersActions").loadMutedOwners(),b("ReactDOM").render(b("React").createElement(b("FBStoriesMutedBucketOwnersDialogContainer.react"),{onClose:this.close}),this.$1)};e.exports=h}),null);
__d("FBStoriesPreviewPog.react",["ix","cx","fbt","React","CameraPostTypesHelper","Image.react","asset","XUISpinner.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){var a=!!this.props.profileImageUri,c=!!this.props.previewImageUri,d=c?b("React").createElement(b("Image.react"),{src:this.props.previewImageUri,className:"_26w6"}):null;a=a?b("React").createElement(b("Image.react"),{src:this.props.profileImageUri,className:"_1hw0"}):null;var e=this.$1(),f="_26w4"+(this.props.highlighted?" _26w9":"")+(this.props.live?" _26wp":"")+(c?" _26wu":"")+(this.props.size==="small"?" size-small":"")+(this.props.borderOption==="hide-and-expand"?" no-border":"")+(this.props.borderOption==="hide"?" hide-border":""),h=this.props.showBadge?b("React").createElement("div",{className:"_26wv"}):null,j=this.props.live?b("React").createElement("div",{className:"_26wx"},b("React").createElement(b("Image.react"),{alt:i._("EN DIRECT"),src:g("404364")})):null;return b("React").createElement("div",{className:f},d,h,e,b("React").createElement(b("XUISpinner.react"),{size:"large",background:c?"light":"dark",className:"_26ww"}),j,a)};a.prototype.$1=function(){var a=b("CameraPostTypesHelper").isEventStory(this.props.cameraPostType),c=b("CameraPostTypesHelper").isGroupStory(this.props.cameraPostType);return!a&&!c?null:b("React").createElement("div",{className:"_26ws"},b("React").createElement("div",{className:(a?"_26wz":"")+(c?" _26w-":"")}))};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesTrayInlineAddItem.react",["cx","fbt","FBStoriesPlusPog.react","FBStoriesPog.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=void 0;a.profileImageUri?c=b("React").createElement(b("FBStoriesPog.react"),{profileImageUri:a.profileImageUri,borderOption:"hide"}):c=b("React").createElement(b("FBStoriesPlusPog.react"),null);return b("React").createElement("div",{tabIndex:"0",role:"button",className:"_46z0"+(a.profileImageUri?" _nc3":""),onKeyPress:a.onClick,onClick:a.onClick},c,b("React").createElement("div",{className:"_mx9 _mxa"},b("React").createElement("div",{className:"_mxb"},b("React").createElement("span",{className:"_nbt"},h._("Ajouter")))))}e.exports=a}),null);
__d("FBStoriesTrayInlineItem.react",["cx","fbt","FBStoriesTrayUploadingAnimation.react","IntlVariations","React","ShimButton.react","Tooltip.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=function(){!this.props.disabled&&!this.props.loading&&this.props.onSelect(this.props.bucketID)}.bind(this),b}a.prototype.render=function(){if(!this.props.bucketID)return null;var a=b("IntlVariations").GENDER_UNKNOWN;this.props.actorGender==="MALE"?a=b("IntlVariations").GENDER_MALE:this.props.actorGender==="FEMALE"&&(a=b("IntlVariations").GENDER_FEMALE);a=this.props.ownBucket?h._("Regarder votre story"):h._({"*":"Regardez la story de {actor name}"},[h._param("actor name",this.props.actorName,[1,a])]);var c=this.props.uploading,d=this.props.ownBucket||this.props.actorName,e=c&&b("React").createElement(b("FBStoriesTrayUploadingAnimation.react"),null);return b("React").createElement(b("ShimButton.react"),{tabIndex:"0",className:"_46z0"+(c?" own-bucket-uploading":""),onClick:this.$1,onKeyPress:this.$1},b("React").createElement("div",{className:"_46z1"},d?b("React").createElement(b("Tooltip.react"),{tooltip:a,alignH:"center",className:"_46z2"},e,this.props.children):b("React").createElement(b("React").Fragment,null,e,this.props.children)))};a.defaultProps={disabled:!1,loading:!1,uploading:!0};e.exports=a}),null);
__d("FBStoriesTrayShimmerLoader.react",["cx","React","range"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){return a.layout==="list"?b("React").createElement(i,a):b("React").createElement(h,a)}function h(a){a=a.numItems;a=a?a:6;var c=function(a){return b("React").createElement("div",{className:"_413r",key:a},b("React").createElement("div",{className:"_4141"},b("React").createElement("div",{className:"_4142"})),b("React").createElement("div",{className:"_4143"}),b("React").createElement("div",{className:"_4x8g"}),b("React").createElement("div",{className:"_4x8h"}),b("React").createElement("div",{className:"_4146"}))};return b("React").createElement("div",{className:"_4147"},b("React").createElement("div",{className:"_4148"},b("range")(0,a).map(c)))}function i(a){var c=a.numItems,d=a.listItemWidth;a=a.listRootHeight;c=c?c:6;var e=function(a){return b("React").createElement("div",{className:"_3r2u",key:a,style:d&&{minWidth:d,maxWidth:d}},b("React").createElement("div",{className:"_4141"},b("React").createElement("div",{className:"_4142"})),b("React").createElement("div",{className:"_3r2v"}),b("React").createElement("div",{className:"_3r31"}),b("React").createElement("div",{className:"_3r32"}),b("React").createElement("div",{className:"_3r33"}),b("React").createElement("div",{className:"_3r34"}),b("React").createElement("div",{className:"_3r35"}),b("React").createElement("div",{className:"_3r36"}))};return b("React").createElement("div",{className:"_3r37 _4147",style:a&&{height:a+"px"}},b("React").createElement("div",{className:"_3r38"},b("range")(0,c).map(e)))}e.exports=a}),null);
__d("ScrollLeftHelper",["Locale","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={NEGATIVE:"negative",REVERSE:"reverse",NORMAL:"normal"},h=function(){if(b("UserAgent").isBrowser("Chrome"))return g.NORMAL;if(b("UserAgent").isBrowser("Firefox")||b("UserAgent").isBrowser("Opera")||b("UserAgent").isBrowser("Safari"))return g.NEGATIVE;return b("UserAgent").isBrowser("IE")||b("UserAgent").isBrowser("Edge")?g.REVERSE:g.NORMAL},i=function(a,c,d){if(!b("Locale").isRTL())return 0;switch(h()){case g.NEGATIVE:case g.REVERSE:return d;case g.NORMAL:default:return c-a}},j=function(a,c,d){if(a===c)return i(a,c,d);if(!b("Locale").isRTL())return c-a-d;switch(h()){case g.NEGATIVE:return a-c+d;case g.REVERSE:return c-a+d;case g.NORMAL:default:return d}};e.exports={getInitialPosition:i,getNextScrollLeftGivenPageSize:function(a,c,d,e,f,k,l){var m=j(d,e,f);d=i(d,e,f);e=h();var n;void 0;f=void 0;!b("Locale").isRTL()?(f=l?Math.min(a+c,m):Math.max(a-c,d),n=l?m-(a+c):a-c):e===g.NEGATIVE?(f=l?Math.max(a-c,m):Math.min(a+c,d),n=l?Math.abs(m-f):Math.abs(f)):e===g.REVERSE?(f=l?Math.min(a+c,m):Math.max(a-c,d),n=l?m-f:f):(f=l?Math.max(a-c,m):Math.min(a+c,d),n=l?f:d-f);return n<k?l?m:d:f},isAtRightMostPosition:function(a,c,d,e){return!b("Locale").isRTL()?a===j(c,d,e):a===i(c,d,e)},isAtLeftMostPosition:function(a,c,d,e){return!b("Locale").isRTL()?a===0:a===j(c,d,e)}}}),null);
__d("HorizontalScroll.react",["ix","cx","fbt","Animation","Ease","Image.react","Locale","React","ScrollLeftHelper","UserAgent","XUIButton.react","asset","compactArray","emptyFunction","range"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=400;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.defaultProps={placeholderFactory:b("emptyFunction")},this.state={itemCount:0,offsetWidth:0,scrolling:!1,scrollLeft:0,scrollWidth:0,viewportItemsCount:0},this.$5=function(){!this.state.scrolling&&this.$1&&this.setState({scrollLeft:this.$1.scrollLeft})}.bind(this),this.$2=function(){var a=this.state.viewportItemsCount*(this.props.itemWidth+this.props.itemMarginWidth),c=b("Locale").isRTL();a=b("ScrollLeftHelper").getNextScrollLeftGivenPageSize(this.state.scrollLeft,a,this.state.offsetWidth,this.state.scrollWidth,this.props.itemMarginWidth,this.props.itemWidth,c);this.setState({scrollLeft:a})}.bind(this),this.$3=function(){var a=this.state.viewportItemsCount*(this.props.itemWidth+this.props.itemMarginWidth),c=!b("Locale").isRTL();a=b("ScrollLeftHelper").getNextScrollLeftGivenPageSize(this.state.scrollLeft,a,this.state.offsetWidth,this.state.scrollWidth,this.props.itemMarginWidth,this.props.itemWidth,c);this.setState({scrollLeft:a})}.bind(this),c}a.prototype.componentDidMount=function(){var a=this.props.itemMarginWidth,c=this.props.itemWidth,d=this.$1.offsetWidth,e=this.$1.scrollWidth,f=b("ScrollLeftHelper").getInitialPosition(d,e,a);this.$1.scrollLeft=f;var g=0;c<=d&&(g=1+Math.floor((d-c)/(c+a)));this.setState({offsetWidth:d,scrollLeft:f,scrollWidth:e,viewportItemsCount:g})};a.prototype.componentDidUpdate=function(a,c){__p&&__p();if(this.$1){c.scrollLeft!==this.state.scrollLeft&&(this.$4&&this.$4.stop(),this.state.scrolling||this.setState({scrolling:!0}),this.$4=new(b("Animation"))(this.$1).duration(k).ease(b("Ease").circOut).ondone(function(){this.$4=null,this.setState({scrolling:!1})}.bind(this)).to("scrollLeft",this.state.scrollLeft).go());if(c.itemCount&&c.itemCount!==this.state.itemCount){a=this.$1.scrollLeft;c=this.$1.scrollWidth;var d=this.$1.offsetWidth,e=this.state.viewportItemsCount*(this.props.itemWidth+this.props.itemMarginWidth);a=Math.floor(a/e)*e;e=b("ScrollLeftHelper").getNextScrollLeftGivenPageSize(b("ScrollLeftHelper").getInitialPosition(d,c,this.props.itemMarginWidth),a,d,c,this.props.itemMarginWidth,this.props.itemWidth,!0);this.setState({scrollLeft:e,scrollWidth:c,offsetWidth:d})}}};a.prototype.UNSAFE_componentWillUpdate=function(a,c){c=a.children?b("compactArray")(b("React").Children.toArray(a.children)):[];a=c.length;a!=this.state.itemCount&&this.setState({itemCount:a})};a.prototype.render=function(){var a=b("ScrollLeftHelper").isAtLeftMostPosition(this.state.scrollLeft,this.state.offsetWidth,this.state.scrollWidth,this.props.itemMarginWidth),c=b("ScrollLeftHelper").isAtRightMostPosition(this.state.scrollLeft,this.state.offsetWidth,this.state.scrollWidth,this.props.itemMarginWidth),d=b("React").createElement(b("XUIButton.react"),{"aria-label":i._("Afficher d\u2019autres r\u00e9sultats de la gauche"),className:"_1rk2 _6107","data-testid":"horizontalScroll/leftArrow",href:{url:"#"},image:b("React").createElement(b("Image.react"),{src:g("374382")}),label:"With a Hidden Label",labelIsHidden:!0,onClick:this.$2}),e=b("React").createElement(b("XUIButton.react"),{"aria-label":i._("Afficher d\u2019autres r\u00e9sultats de la droite"),className:"_1rkd _6107","data-testid":"horizontalScroll/rightArrow",href:{url:"#"},image:b("React").createElement(b("Image.react"),{src:g("374391")}),label:"With a Hidden Label",labelIsHidden:!0,onClick:this.$3});return b("React").createElement("div",{className:"_lmj"+(this.state.viewportItemsCount===4?" _1iug":"")+(b("UserAgent").isBrowser("Chrome")&&this.state.scrolling?" _3_9y":""),onScroll:this.$5,ref:function(a){return this.$1=a}.bind(this)},this.props.children,this.$6(),!a&&d,b("React").createElement("span",null),!c&&e)};a.prototype.$6=function(){var a=Math.max(0,this.state.viewportItemsCount-this.state.itemCount);return b("range")(0,a).map(this.props.placeholderFactory)};e.exports=a}),null);
__d("FBStoriesHorizontalTray.react",["cx","FBStoriesPog.react","FBStoriesPreviewPog.react","FBStoriesTrayConfig","FBStoriesTrayInlineAddItem.react","FBStoriesTrayInlineItem.react","FBStoriesTrayItemTitle.react","FBStoriesTrayShimmerLoader.react","HorizontalScroll.react","React","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=74,j=6;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){if(this.props.loading)return b("React").createElement("div",{className:"_100f"},b("React").createElement(b("FBStoriesTrayShimmerLoader.react"),{layout:"horizontal"}));var a=[];b("FBStoriesTrayConfig").showProduction&&a.push(this.$1());a=a.concat(this.$2());return b("React").createElement("div",{className:"_100f"},b("React").createElement(b("HorizontalScroll.react"),{itemWidth:i,itemMarginWidth:j,placeholderFactory:this.$3},a))};a.prototype.$2=function(){var a=b("FBStoriesTrayConfig").showPreviews;return this.props.buckets.map(function(c,d){var e=c.bucketID,f=c.isLive,g=c.hasNewViewers,h=c.cameraPostType,i=c.profileImageUri,j=c.previewImageUri,k=c.actorShortName,l=c.actorName,m=c.actorGender,n=c.ownedByViewer,o=this.props.uploading&&n;g=g;c=g||c.hasUnseenThreads&&!f;j=a?b("React").createElement(b("FBStoriesPreviewPog.react"),{cameraPostType:h,live:f,highlighted:c,showBadge:g,profileImageUri:i,previewImageUri:j,borderOption:n&&o?"hide":"show"}):b("React").createElement(b("FBStoriesPog.react"),{cameraPostType:h,live:f,highlighted:c&&!o,showBadge:g&&!o,profileImageUri:i,borderOption:n&&o?"hide":"show"});return b("React").createElement(b("FBStoriesTrayInlineItem.react"),{key:d,bucketID:e,loading:this.props.loadingBucketID===e,uploading:o,onSelect:this.props.onItemSelect,actorName:l,actorGender:m,ownBucket:n},j,b("React").createElement(b("FBStoriesTrayItemTitle.react"),{ownBucket:n,actorName:k}))}.bind(this))};a.prototype.$3=function(a){return b("React").createElement("div",{key:"ph_"+a,className:"_46z0"},b("React").createElement("div",{className:"__bd"}))};a.prototype.$1=function(){var a;a=(a=this.props.userInfo.userProfilePic)!=null?a.uri:a;return b("React").createElement(b("FBStoriesTrayInlineAddItem.react"),{profileImageUri:b("FBStoriesTrayConfig").showPreviews?a:null,key:"production",onClick:this.props.onAddStoryItemSelect})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesCenterColumnTrayContainer.react",["cx","FBStoriesActions","FBStoriesLoggingConstants","FBStoriesLoggingHelper","React","FBStoriesHorizontalTray.react","FBStoriesProductionActions","FBStoriesTrayHeader.react","FBStoriesStore","FBStoriesViewerEntrypoint","FluxContainer","fbStoriesRootSelectors"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=function(a){this.setState({bucketIdBeingLoaded:a}),b("FBStoriesActions").userSelectedBucket(a)&&(b("FBStoriesActions").toggleViewer(!0,b("FBStoriesViewerEntrypoint").HOMEPAGE_TRAY),b("FBStoriesLoggingHelper").storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY,b("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_STORY_HEAD)),this.setState({bucketIdBeingLoaded:null})}.bind(this),c}a.getStores=function(){return[b("FBStoriesStore")]};a.calculateState=function(a){var c=b("FBStoriesStore").getState();return{bucketDescriptors:b("fbStoriesRootSelectors").bucketDescriptors(c),loading:b("fbStoriesRootSelectors").loading(c),uploading:b("fbStoriesRootSelectors").uploading(c),bucketIdBeingLoaded:a?a.bucketIdBeingLoaded:null,userInfo:b("fbStoriesRootSelectors").userInfo(c)}};a.prototype.render=function(){return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("FBStoriesTrayHeader.react"),null),b("React").createElement("div",{className:"_nyb"},this.$1()))};a.prototype.$1=function(){var a={buckets:this.state.bucketDescriptors,loading:this.state.loading,loadingBucketID:this.state.bucketIdBeingLoaded,onItemSelect:this.$2,uploading:this.state.uploading,onAddStoryItemSelect:this.$3,userInfo:this.state.userInfo};return b("React").createElement(b("FBStoriesHorizontalTray.react"),a)};a.prototype.$3=function(){b("FBStoriesProductionActions").openProductionDialog()};e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesTray",["csx","regeneratorRuntime","Arbiter","CSS","DOMQuery","FBStoriesProductionActions","FBStoriesTrayInit","Run"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=!1;function i(a){b("CSS").addClass(a,"loading")}function j(a){b("CSS").removeClass(a,"loading")}var k={init:function(){if(h)return;this._initializeOnEnter();b("FBStoriesTrayInit").loadData()},onStoryTrayItemSelect:function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:c=a.item;d=a.bucketID;i(c);e.prev=3;h||this._initializeOnEnter();e.next=7;return b("regeneratorRuntime").awrap(b("FBStoriesTrayInit").loadData());case 7:b("FBStoriesTrayInit").userSelectedBucket(d);e.next=10;return b("regeneratorRuntime").awrap(b("FBStoriesTrayInit").openViewer());case 10:j(c);b("FBStoriesTrayInit").renderReactTray();e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),j(c);case 17:case"end":return e.stop()}},null,this,[[3,14]])},onStoryTrayAddItemClick:function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=a.item,i(c),k.init(),b("FBStoriesProductionActions").openProductionDialog(),j(c),b("FBStoriesTrayInit").renderReactTray();case 6:case"end":return d.stop()}},null,this)},onSeeMoreLinkClick:function(a){b("CSS").addClass(b("DOMQuery").find(a.linkEl,"^._60kg ._1fvt"),"seeMore"),b("Arbiter").inform("netego_loaded")},_initializeOnEnter:function(){h=!0,b("FBStoriesTrayInit").initializeOnEnter(),b("Run").onBeforeUnload(this._resetOnExit)},_resetOnExit:function(){h=!1,b("FBStoriesTrayInit").resetOnExit()}};e.exports=k}),null);