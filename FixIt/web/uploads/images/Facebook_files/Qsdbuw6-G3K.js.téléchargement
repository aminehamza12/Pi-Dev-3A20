if (self.CavalryLogger) { CavalryLogger.start_js(["gGu8A"]); }

__d("TabBar",["ArbiterMixin","ReactDOM","mixin"],(function(a,b,c,d,e,f){var g;a=babelHelpers.inherits(h,b("mixin")(b("ArbiterMixin")));g=a&&a.prototype;function h(a,c,d){"use strict";g.constructor.call(this),c.props=babelHelpers["extends"]({},c.props,{onTabClick:function(a){return this.inform(h.TAB_CLICK,a)}.bind(this)}),b("ReactDOM").render(a(c),d)}h.TAB_CLICK="onTabClick";e.exports=h}),null);
__d("SpotlightViewerLoggingEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LOADED:"loaded",LOADING:"loading",ERROR:"error",ABORT:"abort",OPEN_BEGIN:"open_begin",OPEN_COMPLETE:"open_complete",CLOSE_BEGIN:"close_begin",CLOSE_COMPLETE:"close_complete",PAGE_BEGIN:"page_begin",PAGE_COMPLETE:"page_complete",PHOTO_CHANGE_BEGIN:"photo_change_begin",PHOTO_CHANGE_COMPLETE:"photo_change_complete",DATA_FETCH_BEGIN:"data_fetch_begin",DATA_FETCH_COMPLETE:"data_fetch_complete",PHOTO_FETCH:"photo_fetch"})}),null);
__d("PhotoLogger",["Event","Banzai","BanzaiScuba","SpotlightViewerLoggingEvents","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a,this.$2={}}a.prototype.log=function(a,c,d,e){"use strict";b("Banzai").post("profile_photos_view",{photo_fbid:c,source:d,profile_id:e}),this.$2[a]||(this.$3(a),this.$2[a]=!0)};a.prototype.$3=function(a){"use strict";this.$4(b("SpotlightViewerLoggingEvents").LOADING,{uri:a});var c=new(b("SubscriptionsHandler"))(),d=new Image();c.addSubscriptions(b("Event").listen(d,"load",function(){this.$4(b("SpotlightViewerLoggingEvents").LOADED,{uri:a}),c.release()}.bind(this)),b("Event").listen(d,"error",function(){this.$4(b("SpotlightViewerLoggingEvents").ERROR,{uri:a}),c.release()}.bind(this)),b("Event").listen(d,"abort",function(){this.$4(b("SpotlightViewerLoggingEvents").ABORT,{uri:a}),c.release()}.bind(this)));d.src=a};a.prototype.logEvent=function(a){"use strict";this.$4(a)};a.prototype.$4=function(a,c){"use strict";var d=new(b("BanzaiScuba"))("photos_client_loading",null,{addBrowserFields:!0});d.addNormal("event",a);d.addNormal("viewer",this.$1);for(var e in c)d.addNormal(e,c[e]);d.post()};e.exports=a}),null);
__d("PhotosConst",[],(function(a,b,c,d,e,f){a={VIEWER_PERMALINK:0,VIEWER_SNOWLIFT:6,VIEWER_VAULTBOX:8,VIEWER_SNOWFLAKE:14,VIEWER_COMPOSER:16,VIEWER_CAROUSEL:19,VIEWER_SPHERICAL:20,VIEWER_PERMALINK_STRING:"permalink",VIEWER_SNOWLIFT_STRING:"snowlift",VIEWER_VAULTBOX_STRING:"vaultbox",VIEWER_CAROUSEL_STRING:"carousel",BULK_EDITOR:3,BULK_EDITOR_REACT:15,EDITOR_MODAL:17,FLASH_UPLOADER:4,HTML5_UPLOADER:10,SIZE_NORMAL:"n",PIC_NORMAL_FBX_SIZE:180,ALBUM_NAME_MAXLEN:65};e.exports=a}),null);
__d("PhotosUtils",["Vector"],(function(a,b,c,d,e,f){__p&&__p();function a(){}Object.assign(a,{getNearestBox:function(a,b){var c=Infinity,d=null;for(var e in a){var f=a[e];if(f.contains(b)){f=b.distanceTo(f.getCenter());f<c&&(c=f,d=e)}}return d},absoluteToNormalizedPosition:function(a,c){var d=b("Vector").getElementPosition(a);a=b("Vector").getElementDimensions(a);c=c.sub(d).mul(100/a.x,100/a.y);c.domain="pure";return c},normalizedToAbsolutePosition:function(a,c){var d=b("Vector").getElementPosition(a);a=b("Vector").getElementDimensions(a);c=c.mul(a.x/100,a.y/100).add(d);c.domain="document";return c},isFacebox:function(a){return a.match(/^face:/)},isTag:function(a){return a.match(/^tag:/)}});e.exports=a}),null);
__d("PhotoPermalinkURI",[],(function(a,b,c,d,e,f){__p&&__p();var g={isValid:function(a){return g.parse(a)!==null},parse:function(a){__p&&__p();if(this.isValidLegacy(a)){var b=a.getQueryData();if(b.fbid)return{photo_id:b.fbid,set_token:b.set};return b.id&&b.pid?{photo_id:b.id+":"+b.pid,set_token:b.set}:null}b=a.getPath();b[b.length-1]==="/"&&(b=b.substring(0,b.length-1));a=b.split("/");if(a.length>=3&&a[2]==="photos")if(a.length===4&&/^\d+$/.exec(a[3])!==null)return{photo_id:a[3],set_token:null};else if(a.length===5&&/^\d+$/.exec(a[4])!==null)return{photo_id:a[4],set_token:a[3]};return null},isValidLegacy:function(a){a=a.getPath();a[a.length-1]==="/"&&(a=a.substring(0,a.length-1));return a==="/photo.php"||a==="/force_photo/photo.php"||a==="/photo"||a==="/force_photo/photo/index.php"||a==="/photo/index.php"||a==="/force_photo/photo"||a==="/video.php"||a==="/video/video.php"?!0:!1}};e.exports=g}),null);
__d("PhotoViewer",["Bootloader","CSS","DOM"],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.image=null,this.root=null,this.stream=null}a.prototype.getEventString=function(a){"use strict";var b=this.getEventPrefix();return b?b+"."+a:null};a.prototype.getImage=function(){"use strict";return this.image};a.prototype.getPosition=function(){"use strict";return this.stream?this.stream.getCursor():null};a.prototype.getRoot=function(){"use strict";return this.root};a.prototype.hiliteAllBoxes=function(){"use strict";b("DOM").scry(this.stageWrapper,"div.tagsWrapper div.faceBox").forEach(function(a){b("CSS").addClass(a,"otherActive")}),b("DOM").scry(this.stageWrapper,"div.tagsWrapper div.fbPhotosPhotoTagboxBaseComments").forEach(function(a){b("CSS").addClass(a,"otherActive")})};a.prototype.getEventPrefix=function(){"use strict";return null};a.prototype.getSourceString=function(){"use strict";return null};a.prototype.getVersionConst=function(){"use strict";return null};a.prototype.getViewerSource=function(){"use strict";return null};a.prototype.getViewerSet=function(){"use strict";return null};a.bootstrap=function(a,c){"use strict";b("Bootloader").loadModules(["PhotoSnowlift"],function(b){b.bootstrap(a,c)},"PhotoViewer")};e.exports=a}),null);
__d("TabBarShim",["DOMContainer.react","React","isNode"],(function(a,b,c,d,e,f){__p&&__p();a=function a(c){__p&&__p();var d;c.children&&(d=c.children.map(function(c,d){if(typeof c==="object"&&typeof c.ctor==="function")return a(c);else if(b("isNode")(c)){d=b("React").createElement(b("DOMContainer.react"),{key:"TabBarShim-"+d},c);return d}else return c}),d.length===1&&(d=d[0]));var e=c.ctor;return b("React").createElement(e,c.props,d)};e.exports=a}),null);
__d("ResizeListener",["EventListener","SubscriptionList","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";var g=void 0,h=!1,i=new(b("SubscriptionList"))(function(){g=b("EventListener").listen(window,"resize",j)},function(){g.remove()});function j(){h||(h=!0,b("requestAnimationFrame")(function(){i.fireCallbacks(),h=!1}))}e.exports=i}),null);
__d("ReactComponentRenderer",["React","ReactDOM","warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){this.klass=a,this.container=b,this.props={},this.component=null}a.prototype.replaceProps=function(a,b){this.props={},this.setProps(a,b)};a.prototype.setProps=function(a,c){if(this.klass==null)return;Object.assign(this.props,a);a=b("React").createElement(this.klass,this.props);var d=this;b("ReactDOM").render(a,this.container,function(){d.component=this,c&&c.call(this)})};a.prototype.unmount=function(){b("ReactDOM").unmountComponentAtNode(this.container),this.klass=null};e.exports=a}),null);