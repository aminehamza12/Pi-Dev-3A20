if (self.CavalryLogger) { CavalryLogger.start_js(["talYp"]); }

__d("ComposedEntityMutabilityToName",[],(function(a,b,c,d,e,f){e.exports={0:"MUTABLE",1:"IMMUTABLE",2:"SEGMENTED"}}),null);
__d("ComposedEntityTypeToName",[],(function(a,b,c,d,e,f){e.exports={0:"MENTION",1:"LINK",2:"IMAGE",3:"VIDEO",4:"EMOTICON",5:"TOKEN",6:"HASHTAG",7:"IMPLICIT_LINK",8:"EMBED",9:"EMOJI",10:"MATH",11:"HIGHLIGHT",12:"DELIGHT"}}),null);
__d("MessengerEmojiConfig",[],(function(a,b,c,d,e,f){e.exports={emoji_colors:[0,127995,127996,127997,127998,127999]}}),null);
__d("MNCommerceBlockTypeJSInstance",[],(function(a,b,c,d,e,f){e.exports={ALL:"all",PROMOTION:"promotion",NONE:"none"}}),null);
__d("P2PLinkConstants",[],(function(a,b,c,d,e,f){e.exports={receiverIneligibleHelpURI:"http://www.facebook.com/help/1495718484027862",addDebitCardHelpURI:"http://www.facebook.com/help/200298266807261",helpCenterURI:"http://www.facebook.com/help/863171203733904",contactSupportURI:"http://www.facebook.com/help/contact/1491759007768605",disabledPaymentsSupportURI:"http://www.facebook.com/help/contact/223254857690713",complianceLearnMoreURI:"http://www.facebook.com/help/1555715811351399",complianceLearnMoreMsiteURI:"http://www.facebook.com/help/messenger-app/369959656515129",securePayInfoLearnMoreURI:"http://www.facebook.com/help/146373702454423",contactFraudTeamURI:"http://www.facebook.com/help/contact/370238886476028",payerProtectionURI:"http://www.facebook.com/payer_protection/",helpTransferSystemFailureURI:"http://www.facebook.com/help/contact/614010102040957",helpTransferManualReviewURI:"http://www.facebook.com/help/messenger-app/1463256903894928",helpTransferRecipientCanceledURI:"http://www.facebook.com/help/messenger-app/1564459413784472",helpTransferCompletedURI:"http://www.facebook.com/help/messenger-app/750020781733477",helpTransferCanceledSameCardURI:"http://www.facebook.com/help/messenger-app/818512131561533",helpTransferPushFailURI:"http://www.facebook.com/help/1386991644944095",settingsWWWURI:"http://www.secure.facebook.com/settings/?tab=payments",settingsMsiteURI:"http://m.facebook.com/settings/p2p/",mTermsURI:"http://www.facebook.com/legal/m",mHelpURI:"http://www.facebook.com/help/messenger-app/870471599656315",disputeURI:"http://www.facebook.com/help/contact/828169843971429",paymentMethodsURI:"https://www.facebook.com/settings?tab=payments&section=settings",paymentHistoryURI:"https://www.facebook.com/settings?tab=payments&section=history",paymentsTermsURI:"http://www.facebook.com/payments_terms/"}}),null);
__d("MercuryAudioPlayer",["Arbiter","DOM","Event","Flash"],(function(a,b,c,d,e,f){__p&&__p();var g=200;function h(){var a=b("DOM").create("audio"),c=!1;try{a.canPlayType&&(a.canPlayType("video/mp4;").replace(/^no$/,"")&&(c=!0))}finally{return c}}function i(){return b("Flash").isAvailable()}var j=function(){this.interval=null,this.arbiterInstance=null,this.audio=b("DOM").create("audio"),b("Event").listen(this.audio,"playing",function(){this.informAttachment("playing",this.audio.currentTime),this.interval=setInterval(function(){this.informAttachment("playing",this.audio.currentTime)}.bind(this),g)}.bind(this)),b("Event").listen(this.audio,"ended",function(){clearInterval(this.interval),this.informAttachment("finished")}.bind(this))};Object.assign(j.prototype,{setAudio:function(a,b){this.audio.setAttribute("src",a),this.arbiterInstance=b},informAttachment:function(a,b){this.arbiterInstance&&this.arbiterInstance.inform(a,b)},play:function(){this.audio.play(),this.informAttachment("played")},resume:function(){this.audio.play(),this.informAttachment("played")},pause:function(){this.audio.pause(),clearInterval(this.interval),this.informAttachment("paused")},getType:function(){return"html5"}});var k=function(){this.src=null;this.arbiterInstance=null;var a=b("DOM").create("div");document.body.appendChild(a);this.swf=b("Flash").embed("/swf/cigars/SoundStreamPlayer.swf",a,null,{});this.interval=null;b("Arbiter").subscribe("soundstream/finished",function(){clearInterval(this.interval),this.informAttachment("finished")}.bind(this))};Object.assign(k.prototype,{setAudio:function(a,b){this.src=a,this.arbiterInstance=b},informAttachment:function(a,b){this.arbiterInstance&&this.arbiterInstance.inform(a,b)},play:function(){this.swf.playSound(this.src),this.interval=setInterval(function(){var a=this.swf.getCurrentTime();this.informAttachment("playing",a)}.bind(this),g),this.informAttachment("played")},resume:function(){this.swf.resume(),this.informAttachment("played")},pause:function(){clearInterval(this.interval),this.swf.pause(),this.informAttachment("paused")},getType:function(){return"flash"}});function l(){if(h())return new j();else if(i())return new k();return!1}var m=null,n=null,o=0;function a(a,b){this.src=a;this.arbiterInstance=b;this.audio_id=++o;m!==null||(m=l());if(!m)return!1}Object.assign(a.prototype,{getType:function(){if(!m)return!1;else return m.getType()},play:function(a){a&&n==this.audio_id?m.resume():(this.pause(),n=this.audio_id,m.setAudio(this.src,this.arbiterInstance),m.play())},pause:function(){m.pause()}});e.exports=a}),null);
__d("MercuryAttachmentAudioClip.react",["cssVar","cx","fbt","Arbiter","ArbiterMixin","MercuryAudioPlayer","CurrentUser","JSLogger","LeftRight.react","Link.react","MercuryShareAttachmentRenderLocations","React","SubscriptionsHandler","WorkModeConfig","joinClasses","messengerCustomColorUtils","shield"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=b("React").PropTypes;var j="MercuryAttachmentAudioClip/play",k="progress-bar",l=b("JSLogger").create("mercury_audio_clip");c=b("React").createClass({displayName:"AudioClip",mixins:[b("ArbiterMixin")],propTypes:{customColor:a.string,duration:a.number,isChat:a.bool,isFromViewer:a.bool,location:a.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),onAttachmentLoad:a.func,rootClassName:a.string,showHelp:a.bool,src:a.string.isRequired,width:a.number},getInitialState:function(){this.logged=!1;return{time:0,playing:!1,started:!1,duration:this.props.duration,audioPlayer:new(b("MercuryAudioPlayer"))(this.props.src,this)}},componentDidMount:function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(),this._subscriptionsHandler=new(b("SubscriptionsHandler"))(),this._subscriptionsHandler.addSubscriptions(this.subscribe("playing",this.updateTime),this.subscribe("played",b("shield")(this.setState,this,{playing:!0,started:!0})),this.subscribe("paused",b("shield")(this.setState,this,{playing:!1})),this.subscribe("finished",b("shield")(this.setState,this,{playing:!1,started:!1,time:this.props.duration})),b("Arbiter").subscribe(j,function(a,b){this.props.src!=b&&this.setState({time:0})}.bind(this)))},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release()},updateTime:function(a,b){this.setState({time:b})},play:function(){this.state.playing?this.state.audioPlayer.pause():(this.state.audioPlayer.play(this.state.started),b("Arbiter").inform(j,this.props.src),this.logged||(this.logged=!0,l.log("play",{uid:b("CurrentUser").getID(),duration:this.props.duration})))},_formatSeconds:function(a){if(a){a=Math.round(a);var b=a%60;b<10&&(b="0"+b);a=Math.floor(a/60);return a+":"+b}else return null},_renderPlayer:function(a,c,d){var e=this.props.isFromViewer,f=this.props.isChat,g=b("WorkModeConfig").is_work_user,h=d===k,j=f&&e&&!h,l=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER;g=g?"#373e4c":"#4080ff";g=d||g;a={width:a};j&&b("messengerCustomColorUtils").customBubbleStyle(g,a);j=d&&d!==k&&!f?{color:d}:{};g={};h&&(g["aria-disabled"]=!0);return b("React").createElement(b("Link.react"),babelHelpers["extends"]({"aria-label":i._("Message vocal"),className:"_1miz _2e-1"+(l?"":" _3_om")+(e&&f?" _3e5f":""),role:"button",style:a,onClick:this.play},g),b("React").createElement("span",{className:"_1mi- _2e-2"},b("React").createElement("i",{className:"_1mi_ _2e-3"})),b("React").createElement("span",{style:j,className:"_1mj0 _2e-4 _3oh-"},c),b("React").createElement("div",{className:"_1mj1 _2e-5"}))},render:function(){__p&&__p();var a=this.state.time,c=this.state.playing,d=this._formatSeconds(this.state.duration),e=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER,f=this.props.width||170;if(e){var g=this.props.duration;g>10?f=240:g>5?f=200:g>2?f=160:f=120}g=null;var h=Math.ceil(a*(f+2)/this.state.duration);e&&(h=Math.ceil(a*(f+24)/this.state.duration));if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var j=this._renderPlayer(f,d,this.props.customColor);f=this._renderPlayer(f,d,k);c="_1mj2 _2e-6"+(c&&a!==0?" _1mj3":"")+(c&&a===0?" _4g4x":"");g=b("React").createElement("div",{className:c},j,b("React").createElement("div",{className:"_1mj4 _2e-7",style:{width:h}},f))}else g=b("React").createElement("div",{className:"_1mj2"},b("React").createElement("div",{className:"_1miz"},b("React").createElement(b("LeftRight.react"),null,b("React").createElement("a",{className:"_1mj5",href:this.props.src},b("React").createElement("span",{className:"_3qi6"},b("React").createElement("i",{className:"_1mj6"})),b("React").createElement("span",{className:"_1mj7"},i._("Message vocal")),b("React").createElement("span",{className:"_1mj8"},d)),b("React").createElement("a",{href:this.props.src,className:"_1mj9"},b("React").createElement("i",{className:"_1mja"})))));return b("React").createElement("div",{className:b("joinClasses")("_1mjb"+(e?" _454y":""),this.props.rootClassName)},g)}});e.exports=c}),null);
__d("UFICreatorInfo.react",["cx","fbt","HelpLink.react","Image.react","React","URI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a=void 0,c=this.getCreatorLink();switch(this.props.labelType){case"commented":a=h._("Comment\u00e9 par {creator}",[h._param("creator",c)]);break;case"edited_comment":a=h._("Modifi\u00e9 par {creator}",[h._param("creator",c)]);break;case"sent_message":a=h._("Envoy\u00e9 par {creator}",[h._param("creator",c)]);break;case"page_admin_note":a=h._("Article cr\u00e9\u00e9 par {creator}",[h._param("creator",c)]);break;default:return b("React").createElement("span",null)}return b("React").createElement("span",null,a,b("React").createElement(b("HelpLink.react"),{tooltip:this.getHelpText()}))};a.prototype.getCreatorLink=function(){switch(this.props.creatorType){case"application":case"gray_account":case"indirect_admin":return b("React").createElement("a",{className:"uiLinkSubtle","data-hover":"tooltip","data-tooltip-content":this.getTooltipText()},this.props.creatorName);case"business_admin":return b("React").createElement("a",{className:"uiLinkSubtle",href:this.props.profileURI},this.props.creatorName);case"direct_admin":return this.getProfileLinkWithHovercard();case"former_admin":return b("React").createElement("span",{className:"uiLinkSubtle"},b("React").createElement(b("Image.react"),{src:"/images/privacy/cant-see.png",width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard());default:return b("React").createElement("span",{className:"uiLinkSubtle"},this.props.creatorName)}};a.prototype.getTooltipText=function(){switch(this.props.creatorType){case"application":return this.getApplicationText();case"gray_account":return this.getGrayAccountText();case"indirect_admin":return this.getIndirectAdminText()}return null};a.prototype.getProfileLinkWithHovercard=function(){if(!this.props.profileURI)return b("React").createElement("span",null,this.props.creatorName);var a=new(b("URI"))("/ajax/hovercard/user.php").setQueryData({id:this.props.creatorID}).addQueryData({type:"page_admin",extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return b("React").createElement("a",{className:"uiLinkSubtle","data-hovercard":a,href:this.props.profileURI},this.props.creatorName)};a.prototype.getApplicationText=function(){switch(this.props.labelType){case"commented":return h._("Ceci a \u00e9t\u00e9 comment\u00e9 par quelqu\u2019un qui utilise {application}.",[h._param("application",this.props.creatorName)]);case"edited_comment":return h._("Ceci a \u00e9t\u00e9 modifi\u00e9 par quelqu\u2019un qui utilise {application}.",[h._param("application",this.props.creatorName)]);case"sent_message":return h._("Ceci a \u00e9t\u00e9 envoy\u00e9 par quelqu\u2019un depuis {application}.",[h._param("application",this.props.creatorName)]);case"page_admin_note":return h._("Article cr\u00e9\u00e9 par quelqu\u2019un utilisant {application}.",[h._param("application",this.props.creatorName)])}return null};a.prototype.getIndirectAdminText=function(){switch(this.props.labelType){case"commented":return h._("Ceci a \u00e9t\u00e9 comment\u00e9 par quelqu\u2019un de {page}.",[h._param("page",this.props.creatorName)]);case"edited_comment":return h._("Ceci a \u00e9t\u00e9 modifi\u00e9 par quelqu\u2019un de {page}.",[h._param("page",this.props.creatorName)]);case"sent_message":return h._("Ceci a \u00e9t\u00e9 envoy\u00e9 par quelqu\u2019un depuis {page}.",[h._param("page",this.props.creatorName)]);case"page_admin_note":return h._("Article cr\u00e9\u00e9 par quelqu\u2019un de {page}.",[h._param("page",this.props.creatorName)])}return null};a.prototype.getGrayAccountText=function(){switch(this.props.labelType){case"commented":return h._("Ceci a \u00e9t\u00e9 comment\u00e9 par quelqu\u2019un qui n\u2019a pas de compte personnel Facebook.");case"edited_comment":return h._("Ceci a \u00e9t\u00e9 modifi\u00e9 par quelqu\u2019un qui n\u2019a pas de compte personnel Facebook.");case"sent_message":return h._("Ceci a \u00e9t\u00e9 envoy\u00e9 par quelqu\u2019un qui ne poss\u00e8de pas de compte Facebook.");case"page_admin_note":return h._("Article cr\u00e9\u00e9 par quelqu\u2019un qui n\u2019a pas de compte Facebook personnel.")}return null};a.prototype.getHelpText=function(){switch(this.props.labelType){case"commented":return h._("Seuls les gestionnaires de cette Page peuvent voir qui a publi\u00e9 un commentaire");case"edited_comment":return h._("Seuls les gestionnaires de cette Page peuvent voir qui a modifi\u00e9 un commentaire");case"sent_message":return h._("Seuls ceux qui administrent cette Page peuvent voir qui a envoy\u00e9 un message");case"page_admin_note":return h._("Seules les personnes qui administrent cette Page peuvent voir la personne qui a cr\u00e9\u00e9 une note")}return null};function a(){i.apply(this,arguments)}a.propTypes={creatorID:c.string.isRequired,creatorType:c.string.isRequired,creatorName:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string};e.exports=a}),null);
__d("PagesMessengerCreatorInfo.react",["cx","React","UFICreatorInfo.react","XUIGrayText.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("XUIGrayText.react"),{className:"_ajk"+(this.props.isNote?" _45l2":""),display:"inline",shade:"light",size:"meta1"},b("React").createElement(b("UFICreatorInfo.react"),{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI}))};function a(){h.apply(this,arguments)}a.propTypes={creator_info:c.shape({creatorID:c.string.isRequired,creatorName:c.string.isRequired,creatorType:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string}).isRequired};e.exports=a}),null);
__d("EmojiDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("EmojiActions",["EmojiDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("keyMirror")({CHANGE_CURRENT_CATEGORY:null,CHANGE_EMOJI_COLOR:null,EMOJI_COLOR_READY:null,GET_EMOJI_COLOR:null,TRAY_DATA_READY:null,UPDATE_TRAY_DATA:null});var g={Types:a,loadedTrayData:function(){b("EmojiDispatcher").dispatch({type:g.Types.TRAY_DATA_READY})},updateTrayData:function(){b("EmojiDispatcher").dispatch({type:g.Types.UPDATE_TRAY_DATA})},changeEmojiColor:function(a){b("EmojiDispatcher").dispatch({type:g.Types.CHANGE_EMOJI_COLOR,color:a})},changeCurrentCategory:function(a){b("EmojiDispatcher").dispatch({type:g.Types.CHANGE_CURRENT_CATEGORY,currentCategory:a})},getEmojiColor:function(){b("EmojiDispatcher").dispatch({type:g.Types.GET_EMOJI_COLOR})},emojiColorReady:function(a){b("EmojiDispatcher").dispatch({type:g.Types.EMOJI_COLOR_READY,color:a})}};e.exports=g}),null);
__d("XMessagingGetEmojiRecentUsageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/emoji_recent_usage/",{})}),null);
__d("EmojiServerRequests",["Promise","AsyncRequest","XMessagingGetEmojiRecentUsageController"],(function(a,b,c,d,e,f){"use strict";a={fetchTrayData:function(a){return g(b("XMessagingGetEmojiRecentUsageController").getURIBuilder().getURI(),a,!0)}};function g(a,c,d){return new(b("Promise"))(function(c,e){return new(b("AsyncRequest"))(a).setHandler(function(a){return c(a.getPayload())}).setAllowCrossPageTransition(d).send()}).then(c)}e.exports=a}),null);
__d("XMessagingGetEmojiColorPrefController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/get_emoji_color/",{})}),null);
__d("XMessagingSetEmojiColorPrefController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_emoji_color/",{})}),null);
__d("EmojiState",["fbt","AsyncRequest","EmojiActions","EmojiServerRequests","MessengerSupportedEmojiUtils","XMessagingGetEmojiColorPrefController","XMessagingSetEmojiColorPrefController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=null,j=void 0;a={onTrayDataReady:function(a){j||(j=b("EmojiServerRequests").fetchTrayData(function(a){i=a})),j.then(function(){a(),b("EmojiActions").loadedTrayData()}),j.done()},getEmojiColor:function(){var a=b("XMessagingGetEmojiColorPrefController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).setMethod("POST").setHandler(function(a){b("EmojiActions").emojiColorReady(a.payload)}).send()},changeEmojiColor:function(a){var c=b("XMessagingSetEmojiColorPrefController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({color:a}).send()},addMRUCategory:function(){if(i){var a=i.map(function(a){return b("MessengerSupportedEmojiUtils").getSupportedEmojiCodesArray(a)}).filter(function(a){return!!a});h={name:g._("Envoy\u00e9s r\u00e9cemment"),emojis:a,icon:[128340]};b("EmojiActions").updateTrayData();i=null}},_addRecentlyUsedEmoji:function(a){__p&&__p();var c=h&&h.emojis;if(!c)return;var d=function(b){var d=a[b];for(var b=0;b<c.length;++b)if(c[b].length==d.length&&c[b].every(function(a,b){return a===d[b]})){c.splice(b,1);break}c.unshift(d)};for(var e=0;e<a.length;++e)d(e);b("EmojiActions").updateTrayData()},getMRUCategory:function(){h||this.addMRUCategory();return h},updateRecentlyUsed:function(a){if(!h){this.addMRUCategory();return}this._addRecentlyUsedEmoji(a)}};e.exports=a}),null);
__d("EmojiStateStore",["EmojiActions","EmojiDispatcher","EmojiState","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("EmojiDispatcher")),this.__moduleID=e.id,this.$EmojiStateStore2=!1}a.prototype.getState=function(){var a=b("EmojiState").getMRUCategory();return{currentCategory:this.$EmojiStateStore4,emojiColor:this.$EmojiStateStore3,mruCategory:[a],threadID:this.$EmojiStateStore1,trayDataReady:this.$EmojiStateStore2}};a.prototype.__onDispatch=function(a){__p&&__p();var c=b("EmojiActions").Types;switch(a.type){case c.GET_EMOJI_COLOR:b("EmojiState").getEmojiColor();break;case c.EMOJI_COLOR_READY:this.$EmojiStateStore3=a.color;break;case c.CHANGE_EMOJI_COLOR:b("EmojiState").changeEmojiColor(a.color);this.$EmojiStateStore3=a.color;break;case c.CHANGE_CURRENT_CATEGORY:this.$EmojiStateStore4=a.currentCategory;break;case c.UPDATE_TRAY_DATA:break;case c.TRAY_DATA_READY:this.$EmojiStateStore2=!0;break}this.__emitChange()};e.exports=new a()}),null);
__d("MessagingThreadEventTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setActiveTimeMs=function(a){this.$1.active_time_ms=a;return this};a.prototype.setClientEventTimeMs=function(a){this.$1.client_event_time_ms=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setPageData=function(a){this.$1.page_data=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setScriptPath=function(a){this.$1.script_path=a;return this};a.prototype.setSource=function(a){this.$1.source=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={active_time_ms:!0,client_event_time_ms:!0,event:!0,page_data:!0,page_id:!0,script_path:!0,source:!0,thread_id:!0,vc:!0};e.exports=a}),null);
__d("MessengerProfileLinkTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAction=function(a){this.$1.action=a;return this};a.prototype.setDomain=function(a){this.$1.domain=a;return this};a.prototype.setLinkLocation=function(a){this.$1.link_location=a;return this};a.prototype.setTargetID=function(a){this.$1.target_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={action:!0,domain:!0,link_location:!0,target_id:!0,vc:!0};e.exports=a}),null);
__d("WorkChatActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setHscrollPosition=function(a){this.$1.hscroll_position=a;return this};a.prototype.setThreadIds=function(a){this.$1.thread_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={event:!0,hscroll_position:!0,thread_ids:!0,vc:!0};e.exports=a}),null);
__d("MessengerSharedPhoto.react",["cx","React","CssBackgroundImage.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){a.preventDefault(),this.props.onClick(this.props.fbid)}.bind(this),b}a.prototype.render=function(){if(this.props.uri)return b("React").createElement("a",{className:this.props.className,href:this.props.uri,onClick:this.$1},b("React").createElement(b("CssBackgroundImage.react"),{imageURI:this.props.uri,className:this.props.className,backgroundPosition:"center",style:{height:"100%"}},this.props.isSpherical?b("React").createElement("div",{className:"_3603 _64ks"}):null));else return b("React").createElement("a",{className:this.props.className,onClick:this.$1})};a.propTypes={className:c.string.isRequired,fbid:c.string.isRequired,onClick:c.func.isRequired,uri:c.string};e.exports=a}),null);
__d("PhotosphereMetadata",["ImmutableRecordWithV4Types"],(function(a,b,c,d,e,f){"use strict";a=b("ImmutableRecordWithV4Types").Record;c=a({CroppedAreaImageHeightPixels:0,CroppedAreaImageWidthPixels:0,CroppedAreaLeftPixels:0,CroppedAreaTopPixels:0,FullPanoHeightPixels:0,FullPanoWidthPixels:0,InitialViewHeadingDegrees:0,InitialViewPitchDegrees:0,InitialViewRollDegrees:0,InitialViewVerticalFOVDegrees:0,PoseHeadingDegrees:0,PosePitchDegrees:0,PoseRollDegrees:0,PreProcessCropLeftPixels:0,PreProcessCropRightPixels:0,ProjectionType:"equirectangular",RendererProjectionType:"equirectangular"});e.exports={makePhotosphereMetadata:c}}),null);
__d("SphericalPhotoUtils",["PhotoRendererProjection","PhotosphereMetadata","SphericalPhotoPartialLimits"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PhotoRendererProjection").PERSPECTIVE,h=b("PhotosphereMetadata").makePhotosphereMetadata,i=b("SphericalPhotoPartialLimits").makePartialLimits,j={getMetadataFromGraphQLResult:function(a){return{CroppedAreaImageHeightPixels:a.cropped_area_image_height_pixels!=null?a.cropped_area_image_height_pixels.toString():null,CroppedAreaImageWidthPixels:a.cropped_area_image_width_pixels!=null?a.cropped_area_image_width_pixels.toString():null,CroppedAreaLeftPixels:a.cropped_area_left_pixels!=null?a.cropped_area_left_pixels.toString():null,CroppedAreaTopPixels:a.cropped_area_top_pixels!=null?a.cropped_area_top_pixels.toString():null,FullPanoHeightPixels:a.full_pano_height_pixels!=null?a.full_pano_height_pixels.toString():null,FullPanoWidthPixels:a.full_pano_width_pixels!=null?a.full_pano_width_pixels.toString():null,InitialViewHeadingDegrees:a.initial_view_heading_degrees!=null?a.initial_view_heading_degrees.toString():null,InitialViewPitchDegrees:a.initial_view_pitch_degrees!=null?a.initial_view_pitch_degrees.toString():null,InitialViewRollDegrees:a.initial_view_roll_degrees!=null?a.initial_view_roll_degrees.toString():null,InitialViewVerticalFOVDegrees:a.initial_view_vertical_fov_degrees!=null?a.initial_view_vertical_fov_degrees.toString():null,PoseHeadingDegrees:a.pose_heading_degrees!=null?a.pose_heading_degrees.toString():null,PosePitchDegrees:a.pose_pitch_degrees!=null?a.pose_pitch_degrees.toString():null,PoseRollDegrees:a.pose_roll_degrees!=null?a.pose_roll_degrees.toString():null,PreProcessCropLeftPixels:null,PreProcessCropRightPixels:null,ProjectionType:a.projection_type,RendererProjectionType:g}},calculatePartialLimits:function(a){__p&&__p();var b=a.FullPanoHeightPixels,c=a.FullPanoWidthPixels,d=a.CroppedAreaImageWidthPixels,e=a.CroppedAreaImageHeightPixels,f=a.CroppedAreaLeftPixels;a=a.CroppedAreaTopPixels;b=j.parseNumber(b);c=j.parseNumber(c);d=j.parseNumber(d);e=j.parseNumber(e);f=j.parseNumber(f);a=j.parseNumber(a);var g=void 0,h=void 0,k=void 0,l=void 0;if(d!==0&&d!==c){d=360*d/c;d<350&&(g=180*(1-2*f/c),h=d-g)}e!==0&&e!==b&&(a!==0&&(k=90*(1-2*a/b)),a+e!==b&&(l=180*(a+e-b/2)/b));f=null;c=null;d=null;a=null;k&&k<87.5&&(c=k);l&&l<87.5&&(f=l);g&&(d=g);h&&(a=h);return i({partialTopDegrees:c,partialBottomDegrees:f,partialLeftDegrees:d,partialRightDegrees:a})},parseNumber:function(a){return a?Number(a):0},getThumbnailsFromPhotoEncodings:function(a){a=a.find(function(a){return a.projection_type===g});var b=null,c=null;if(a&&a.thumbnails&&a.thumbnails.length>0){a=a.thumbnails;b=a[0]?a[0].uri:null;c=a[1]?a[1].uri:null}return{smallThumbnail:b,largeThumbnail:c}},photosphereMetadataStringToNumber:function(a){var b={};Object.keys(a).forEach(function(c){switch(c){case"ProjectionType":b.ProjectionType=a.ProjectionType;break;case"RendererProjectionType":b.RendererProjectionType=a.RendererProjectionType;break;default:b[c]=parseInt(a[c],10)}});return h(b)}};e.exports=j}),null);
__d("ChatPhotoViewFooterHScroll.react",["cx","Animation","MessengerSharedPhoto.react","React","SphericalPhotoUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings;c=b("React").PropTypes;var j=200,k=74,l=140,m=30;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=null,this.state={currentPhoto:"",prevScrollLeft:0,scrollLeft:0},this.$2=function(a){return a?Math.ceil((a-l*2)/k):m},b}a.prototype.componentDidMount=function(){this.props.width&&this.props.updateNumberInOneBatch(this.$2(this.props.width)),this.$1=new(b("Animation"))(this.refs.childContainer).to("scrollLeft",0).duration(j).go()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){if(a.photoID!=this.state.currentPhoto||this.props.sharedPhotos.length!==a.sharedPhotos.length){var b=a.width?(a.width-k)/2-l:0,c=a.sharedPhotos.findIndex(function(b){return b.node.id===a.photoID});this.setState({currentPhoto:a.photoID,prevScrollLeft:this.state.scrollLeft,scrollLeft:c*k-b})}a.width!=this.props.width&&this.props.updateNumberInOneBatch(this.$2(a.width))};a.prototype.componentDidUpdate=function(){this.$1&&this.$1.from("scrollLeft",this.state.prevScrollLeft).to("scrollLeft",this.state.scrollLeft).duration(j).go()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.stop()};a.prototype.shouldComponentUpdate=function(a,b){return a.photoID!=this.state.currentPhoto||a.sharedPhotos.length!==this.props.sharedPhotos.length?!0:!1};a.prototype.render=function(){__p&&__p();var a=this.props.sharedPhotos;a=a.map(function(a){var c=a.node.photo_encodings?a.node.photo_encodings.length!==0:!1,d=a.node.image1.uri;if(c){var e=i(a.node.photo_encodings);e=e.smallThumbnail;d=e||d}return b("React").createElement("div",{className:"_1oyb",key:a.node.legacy_attachment_id},b("React").createElement(b("MessengerSharedPhoto.react"),{className:"_1oyc"+(this.state.currentPhoto!==a.node.id?" _1oyd":""),fbid:a.node.legacy_attachment_id,onClick:this.props.onScroll,photoID:a.node.id,uri:d,isSpherical:c}))}.bind(this));return b("React").createElement("div",{className:"_1oye"},b("React").createElement("div",{className:"_1oyf",ref:"childContainer"},b("React").createElement("div",{className:"_1oyh",ref:"scrollable"},a)))};a.propTypes={onScroll:c.func,photoID:c.string,sharedPhotos:c.array,updateNumberInOneBatch:c.func,width:c.number};e.exports=a}),null);
__d("XForwardingNUXSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/forwarding_nux_seen/",{})}),null);
__d("MessagingForwardingButtonNUX.react",["AsyncRequest","ChatConfig","React","XForwardingNUXSeenController","XUIAmbientNUX.react"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={showNUX:!b("ChatConfig").get("seen_forwarding_nux")},this.$1=function(){if(!this.state.showNUX)return;b("ChatConfig").set("seen_forwarding_nux",!0);new(b("AsyncRequest"))(b("XForwardingNUXSeenController").getURIBuilder().getURI()).send();this.setState({showNUX:!1})}.bind(this),this.close=function(){this.$1()}.bind(this),c}a.prototype.render=function(){"use strict";return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$1,position:"left",width:"auto",shown:this.state.showNUX},this.props.children)};a.propTypes={contextRef:c.func.isRequired};e.exports=a}),null);
__d("MessengerPhotoViewCloseLink.react",["cx","fbt","React","TooltipLink.react"],(function(a,b,c,d,e,f,g,h){"use strict";a=b("React").PropTypes;c=function(a){var c=a.customTooltip!==undefined?a.customTooltip:b("React").createElement("span",null,h._("Appuyez sur \u00c9chap pour fermer"));return b("React").createElement(b("TooltipLink.react"),{className:"_51ok _50-m _51an",onClick:a.onClick,tooltip:c},b("React").createElement("div",{className:"_387s"}))};c.propTypes={onClick:a.func,customTooltip:a.element};e.exports=c}),null);
__d("SpotlightViewerBottomBarLink",["cx","Link.react","React"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props.className||"_4_8j _4_8k";return b("React").createElement(b("Link.react"),babelHelpers["extends"]({},this.props,{className:a}),this.props.children)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("ChatPhotoViewHeader.react",["cx","fbt","MessagingForwardingButtonNUX.react","MessengerPhotoViewCloseLink.react","React","SpotlightViewerBottomBarLink","WorkModeConfig"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$3=function(){this.$2(),this.props.showForwardDialog&&this.props.showForwardDialog()}.bind(this),this.$4=function(){this.$2(),this.props.showShareDialog&&this.props.showShareDialog()}.bind(this),b}a.prototype.render=function(){return b("React").createElement("div",{className:"_51an _50-m _3h_t _5l-3",role:"banner"},this.$1(),b("React").createElement(b("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onClose}))};a.prototype.$2=function(){this.refs.forwardNUX&&this.refs.forwardNUX.close()};a.prototype.$1=function(){var a=void 0,c=void 0,d=void 0;this.props.disableForward||(a=b("React").createElement(b("SpotlightViewerBottomBarLink"),{className:"_3h_u",onClick:this.$3,ref:"forwardButton"},b("React").createElement("div",{className:"_3h_v _3h_w"}),h._("Transf\u00e9rer")),c=b("React").createElement(b("MessagingForwardingButtonNUX.react"),{contextRef:function(){return this.refs.forwardButton}.bind(this),ref:"forwardNUX"},h._("Envoyer cette image \u00e0 d\u2019autres personnes dans des messages s\u00e9par\u00e9s.")));this.props.enableShareToFB&&(d=b("React").createElement("div",{className:"_3h_u",onClick:this.$4,ref:"shareButton",role:"button",tabIndex:"0"},b("React").createElement("div",{className:"_3tth _3h_w"}),this.$5()));return b("React").createElement("div",{key:"buttonsContainer",ref:"buttons"},b("React").createElement(b("SpotlightViewerBottomBarLink"),{className:"_3h_u",rel:"async",ajaxify:this.props.url,ref:"downloadButton"},b("React").createElement("div",{className:"_3h_x _3h_w"}),h._("T\u00e9l\u00e9charger")),a,c,d,b("React").createElement("div",{className:"_3h_u",onClick:this.props.openInfo,ref:"moreInfo",role:"link",tabIndex:"0"},b("React").createElement("div",{className:"_3h_y _3h_w"}),h._("Infos")))};a.prototype.$5=function(){if(b("WorkModeConfig").is_work_user)return h._("Partager sur Workplace");else return h._("Partager sur Facebook")};a.propTypes={disableForward:c.bool,enableShareToFB:c.bool,onClose:c.func,openInfo:c.func,showForwardDialog:c.func,showShareDialog:c.func,url:c.object};e.exports=a}),null);
__d("ChatSpeakingSticker.react",["React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(){var a=b("ReactDOM").findDOMNode(this.refs.stickerVideo);a.play()}.bind(this),c}a.prototype.render=function(){return b("React").createElement("div",{onClick:this.$1,role:"presentation"},b("React").createElement("video",{height:this.props.videoSize.height,ref:"stickerVideo",width:this.props.videoSize.width},b("React").createElement("source",{src:this.props.videoURI})))};a.propTypes={videoURI:c.string.isRequired,videoSize:c.shape({height:c.number,width:c.number}).isRequired};e.exports=a}),null);
__d("ChatEmojiPickerButton.react",["cx","fbt","Image.react","ImmutableObject","Keys","React","MessengerHotLikePreviewEvents","MessengerHotLikeUtils","MercuryMessageObject","MercuryTriodeSourceUtil","StickerConstants","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryMessageObject").get();c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.$2=null,this.$3=null,this.$5=function(a){a.stopPropagation(),this.props.onClick(this.props.emojiData.emojiCodes,this.refs.div)}.bind(this),this.$6=function(a){a.keyCode===b("Keys").RETURN&&(a.preventDefault(),this.props.onClick(this.props.emojiData.emojiCodes,this.refs.div))}.bind(this),this.$7=function(a){a.preventDefault();a.stopPropagation();if(a.button!==0)return;!this.props.enableHotEmoji?this.$1=setTimeout(this.$9,1e3):(this.$1=setTimeout(function(){this.$3=Date.now(),this.$10(),this.$11()}.bind(this),500),this.props.onMouseDown&&this.props.onMouseDown())}.bind(this),this.$10=function(){this.$9();if(!this.props.threadID)return;var a=this.$12();b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").START,a,this.props.threadID,this.props.emojiData.emojiCodes)}.bind(this),this.$8=function(a){a.stopPropagation();b("clearTimeout")(this.$1);if(this.props.enableHotEmoji){if(!(this.props.threadID&&this.$3))return;this.$3=0;this.$13();this.$14()}}.bind(this),this.$9=function(){this.props.onLongPress(this.props.emojiData.emojiCodes,this.refs.div)}.bind(this),this.$14=function(){if(!this.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP_EMOJI,this.props.threadID,!0)}.bind(this),this.$15=function(){if(!this.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").POP,this.props.threadID)}.bind(this),this.$11=function(){this.$13(),this.$2=b("setTimeoutAcrossTransitions")(this.$15,b("MessengerHotLikeUtils").SizeTimes.large)}.bind(this),this.$13=function(){b("clearTimeout")(this.$2)}.bind(this),this.$4=function(){this.$3&&(this.$3=0,this.$13(),this.$15())}.bind(this),c}a.prototype.componentWillUnmount=function(){this.$4(),b("clearTimeout")(this.$1),b("clearTimeout")(this.$2)};a.prototype.render=function(){return b("React").createElement("div",{"aria-label":h._("Choisir un emoji"),onClick:this.$5,onKeyDown:this.$6,onMouseDown:this.$7,onMouseLeave:this.$4,onMouseUp:this.$8,ref:"div",role:"button",tabIndex:"1"},b("React").createElement(b("Image.react"),{className:"_1lih _1ift _1ifu",style:{margin:0},src:this.props.emojiData.uri}))};a.prototype.$12=function(){if(!this.props.threadID)return null;var a=j.constructStickerMessageObject(b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.threadID);j.normalizeNewMessage(a);a.is_like_preview=!0;a.like_preview_since=this.$3;a.customLike=this.props.emojiData;a.body="";return new(b("ImmutableObject"))(a)};a.propTypes={emojiData:c.object.isRequired,enableHotEmoji:c.bool,onClick:c.func.isRequired,onLongPress:c.func.isRequired,threadID:c.string};e.exports=a}),null);
__d("EmojiFormat.bs",["EmojiFormat"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return a.length}d=b("EmojiFormat").codeStringToCodeArray;function c(a){return b("EmojiFormat").codeArrayToCodeString(a)}e=b("EmojiFormat").codeArrayToUnicode;var g=b("EmojiFormat").codeStringToUnicode;f.numSegments=a;f.codeStringToCodeArray=d;f.codeArrayToCodeString=c;f.codeArrayToUnicode=e;f.codeStringToUnicode=g}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return 1;default:return 0}}function h(a){var c=+(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039);if(c!==0)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=+(h(a)===0);if(b!==0)return a;else return a.slice(0,a.length-1|0)}function k(a){var c=b("MessengerEmojiConfig").emoji_colors;c=c.filter(function(b){return+(b===a)});return+(c.length!==0)}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=+(b===0);c=c!==0?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=+(b===0);if(c!==0)return a.slice(0,a.length-1|0);else return i(a.slice(0,a.length-2|0))}else return a}function a(a,b){__p&&__p();if(b!==0){var c=h(a),d=+(c===0);d=d!==0?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([b]);d=+(c===0);if(d!==0)return e;else return e.concat([c])}}else return a}function c(a){return m(j(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(j(a))))}e=65039;f.emoji_modifier_code=e;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isToneModifier=k;f.getTone=l;f.removeTone=m;f.applyTone=a;f.removeAllModifiers=c;f.hasVariations=d}),null);
__d("ChatEmojiPicker.react",["cx","ChatEmojiPickerButton.react","ChatEmojiSkinToneSelector.react","EmojiActions","EmojiFormat","EmojiLikeConstants","Grid.react","MessengerHotLikePreviewEvents","MessengerScrollableArea.react","MessengerSupportedEmojiUtils","React","SkinToneEmoji.bs","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("Grid.react").GridItem;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=!1,this.$2=null,this.state={clickedEmoji:null,selectedEmoji:[],toneSelectorShown:!1,toneSelectorContext:null},this.componentWillUnmount=function(){this.$2&&this.$2.release()}.bind(this),this.scrollToTop=function(a){this.refs.scrollable.scrollToTop(a)}.bind(this),this.$7=function(a){if(this.props.shouldSaveEmojiColorChoice){var c=b("SkinToneEmoji.bs").getTone(a);b("EmojiActions").changeEmojiColor(c)}this.props.onSelect&&this.props.onSelect(a)}.bind(this),this.$4=function(a,c){this.props.shouldSaveEmojiColorChoice&&this.props.useSkinToneSelector&&b("SkinToneEmoji.bs").hasVariations(a)?(this.$8(a,c),this.$1=!1):this.$1?this.$1=!1:this.$7(a)}.bind(this),this.$5=function(a,c){this.props.useSkinToneSelector&&b("SkinToneEmoji.bs").hasVariations(a)?this.$8(a,c):this.setState({clickedEmoji:a}),this.$1=!0}.bind(this),this.$6=function(){this.$1||this.$3()}.bind(this),this.$3=function(){this.setState({toneSelectorShown:!1})}.bind(this),c}a.prototype.componentDidMount=function(){this.$2=new(b("SubscriptionsHandler"))(),this.$2.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(a,c,d){d&&this.props.useSkinToneSelector&&!b("SkinToneEmoji.bs").hasVariations(d)&&this.state.toneSelectorShown&&this.$3()}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a,c,d){a===this.props.threadID&&(d&&this.state.clickedEmoji&&this.props.sendCustomEmoji&&(this.props.sendCustomEmoji({emoji:b("EmojiFormat").codeArrayToUnicode(this.state.clickedEmoji)},d,b("EmojiLikeConstants").source.PICKER),this.setState({clickedEmoji:null})))}.bind(this)))};a.prototype.render=function(){var a=this.props.emojiChoices.map(function(a){var c=String.fromCodePoint.apply(String,a),d=b("MessengerSupportedEmojiUtils").getUrl(b("EmojiFormat").codeArrayToCodeString(a),b("EmojiLikeConstants").size.SMALL),e=this.props.enableHotEmoji||!b("SkinToneEmoji.bs").hasVariations(a);return d?b("React").createElement(i,{key:a.join("_"),className:"_3-sy"},b("React").createElement("div",{className:(c===this.props.currentEmoji?"_4rlt":"")+" _4rlu"},b("React").createElement(b("ChatEmojiPickerButton.react"),{emojiData:{emojiCodes:a,uri:d},enableHotEmoji:e,onClick:this.$4,onLongPress:this.$5,threadID:this.props.threadID}))):null}.bind(this)).filter(function(a){return!!a});return b("React").createElement(b("MessengerScrollableArea.react"),{className:this.props.className,onScroll:this.$3,ref:"scrollable"},b("React").createElement(b("Grid.react"),{cols:this.props.columns,className:"_3-s_"},a),this.props.useSkinToneSelector?b("React").createElement(b("ChatEmojiSkinToneSelector.react"),{context:this.state.toneSelectorContext,emojiCodes:this.state.selectedEmoji,onBlur:this.$6,onSelect:this.$7,sendCustomEmoji:this.props.sendCustomEmoji,shouldSaveEmojiColorChoice:this.props.shouldSaveEmojiColorChoice,shown:this.state.toneSelectorShown,threadID:this.props.threadID}):null)};a.prototype.$8=function(a,b){this.setState({toneSelectorShown:!0,selectedEmoji:a,toneSelectorContext:b})};a.propTypes={className:c.string,columns:c.number,currentEmoji:c.string,emojiChoices:c.arrayOf(c.arrayOf(c.number)).isRequired,enableHotEmoji:c.bool,onSelect:c.func,sendCustomEmoji:c.func,shouldSaveEmojiColorChoice:c.bool,threadID:c.string,useSkinToneSelector:c.bool};a.defaultProps={columns:7,useSkinToneSelector:!1};e.exports=a}),null);
__d("ChatEmojiSkinToneFlyout.react",["cx","fbt","ChatEmojiPicker.react","MessengerEmojiConfig","React","SkinToneEmoji.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this,c=[];this.props.emojiCodes.length>0&&(function(){var d=b("SkinToneEmoji.bs").removeTone(a.props.emojiCodes);c=b("MessengerEmojiConfig").emoji_colors.map(function(a){return b("SkinToneEmoji.bs").applyTone(d,a)})})();var d=null;this.props.shouldSaveEmojiColorChoice&&(d=b("React").createElement("div",{className:"_4gww"},h._("Choisissez-en un. Vous pouvez le changer \u00e0 tout moment dans les param\u00e8tres.")));return b("React").createElement("div",null,d,b("React").createElement(b("ChatEmojiPicker.react"),{className:this.props.className,columns:6,emojiChoices:c,enableHotEmoji:!0,onSelect:this.props.onSelect,sendCustomEmoji:this.props.sendCustomEmoji,threadID:this.props.threadID}))};function a(){i.apply(this,arguments)}a.propTypes={className:c.string,emojiCodes:c.arrayOf(c.number).isRequired,onSelect:c.func.isRequired,sendCustomEmoji:c.func,shouldSaveEmojiColorChoice:c.bool,threadID:c.string};e.exports=a}),null);
__d("ChatEmojiSkinToneSelector.react",["cx","ChatEmojiSkinToneFlyout.react","ContextualLayerAutoFlip","React","XUIContextualDialog.react","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=220;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("XUIContextualDialog.react"),{behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip")},context:this.props.context,contextRef:b("emptyFunction"),onBlur:this.props.onBlur,onToggle:this.$1,shown:this.props.shown,width:i},b("React").createElement(b("ChatEmojiSkinToneFlyout.react"),{className:"_2ejf",emojiCodes:this.props.emojiCodes,onSelect:this.props.onSelect,sendCustomEmoji:this.props.sendCustomEmoji,shouldSaveEmojiColorChoice:this.props.shouldSaveEmojiColorChoice,threadID:this.props.threadID}))};function a(){h.apply(this,arguments)}a.propTypes={context:c.instanceOf(HTMLElement),emojiCodes:c.arrayOf(c.number).isRequired,onBlur:c.func.isRequired,onSelect:c.func.isRequired,sendCustomEmoji:c.func,shouldSaveEmojiColorChoice:c.bool,shown:c.bool,threadID:c.string};e.exports=a}),null);
__d("ChatEmojiSkinTonePreferencePicker.react",["ChatEmojiPicker.react","MessengerEmojiConfig","React","SkinToneEmoji.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=128077;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){a=b("SkinToneEmoji.bs").getTone(a);this.props.onSelect&&this.props.onSelect(a)}.bind(this),c}a.prototype.render=function(){var a=null;try{a=this.props.currentPreference?String.fromCodePoint.apply(String,b("SkinToneEmoji.bs").applyTone([h],this.props.currentPreference)):String.fromCodePoint(h)}catch(b){a=String.fromCodePoint(h)}return b("React").createElement(b("ChatEmojiPicker.react"),{className:this.props.className,columns:this.props.columns,currentEmoji:a,emojiChoices:b("MessengerEmojiConfig").emoji_colors.map(function(a){return b("SkinToneEmoji.bs").applyTone([h],a)}),onSelect:this.$1})};a.propTypes={className:c.string,columns:c.number,currentPreference:c.number,onSelect:c.func};a.defaultProps={columns:6};e.exports=a}),null);
__d("MontageThreadViewContainer.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MontageThreadViewContainerImpl.react").__setRef("MontageThreadViewContainer.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("EmojiSticker.react",["cx","Image.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};a.prototype.render=function(){var a=this.props.emojiImage?this.props.emojiImage:b("React").createElement(b("Image.react"),{src:this.props.sourceURI});return b("React").createElement("div",{"aria-label":this.props.emoji,className:b("joinClasses")(this.props.className,"_383m"),tabIndex:"0"},a)};function a(){h.apply(this,arguments)}a.propTypes={emoji:c.string,emojiImage:c.any,onAttachmentLoad:c.func,sourceURI:c.string.isRequired};e.exports=a}),null);
__d("MessengerErrorBoundary.react",["cx","fbt","ChatReliabilityInstrumentation","ErrorBoundary.react","LogHistory","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("LogHistory").getInstance("messenger_error_boundary"),k=function(a){return h._({"conversation list":"Impossible d\u2019afficher la liste des conversations.","conversation":"Impossible d\u2019afficher la conversation.","composer":"Impossible d\u2019afficher l\u2019\u00e9diteur.","conversation information":"Impossible d\u2019afficher les informations de la conversation.","attachment":"Impossible d\u2019afficher la pi\u00e8ce jointe."},[h._enum(a,{"conversation list":"conversation list",conversation:"conversation",composer:"composer","conversation information":"conversation information",attachment:"attachment"})])},l=function(a,c){return function(){return b("React").createElement("div",{className:b("joinClasses")("_5jpt",c)},a)}};c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(a,c){var d="React error in "+c+" got "+a.message;j.error(d,JSON.stringify(a));b("ChatReliabilityInstrumentation").logERROR(d);this.props.onHandleError&&this.props.onHandleError(a,c)}.bind(this),c}a.prototype.render=function(){var a=this.props,c=a.className,d=a.component;a=babelHelpers.objectWithoutProperties(a,["className","component"]);return b("React").createElement(b("ErrorBoundary.react"),babelHelpers["extends"]({},a,{fallbackComponent:l(k(d),c),onHandleError:this.$1,bigRedBox:!0}))};e.exports=a}),null);
__d("MercuryShareAttachment.react",["cx","BootloadedComponent.react","DOM","Event","MercuryShareAttachmentReactShape","MercuryShareStyleMap","MessengerErrorBoundary.react","React","ReactDOM","MercuryShareAttachmentRenderLocations","emptyFunction","idx","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$3=function(a){this.$1(a),b("DOM").scry(b("ReactDOM").findDOMNode(this),"img").forEach(function(a){var c=b("Event").listen(a,"load",function(){this.$1(a.height),c.remove()}.bind(this))}.bind(this))}.bind(this),c}a.prototype.componentDidMount=function(){this.$1()};a.prototype.$2=function(a,c){this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER&&!this.props.isSubattachment&&(c=b("joinClasses")("_52mr _2poz _ui9","_4skb",c));return b("React").createElement("div",{className:c},a,this.props.afterDecorators)};a.prototype.render=function(){var a=b("MercuryShareStyleMap").getStyleFactory(this.props.attachment);if(!a)return null;var c=a.attachment;a=a.factory;return this.$2(b("React").createElement(b("MessengerErrorBoundary.react"),babelHelpers["extends"]({},this.props,{component:"attachment"}),b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({},this.props,{attachment:c,bootloadLoader:a.componentLoader,bootloadPlaceholder:b("React").createElement("div",null),key:(c=this)!=null?(c=c.props)!=null?(c=c.attachment)!=null?c.share_id:c:c:c,module:a.componentName,onComponentLoad:this.$3}))),a.cx&&a.cx.get(this.props.location))};a.prototype.$1=function(a){this.props.onComponentLoaded(a)};a.propTypes={attachment:b("MercuryShareAttachmentReactShape"),isFromViewer:c.bool,isPageMessage:c.bool,isSponsored:c.bool,isSubattachment:c.bool,isVisible:c.bool,location:c.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),messageID:c.string,onComponentLoaded:c.func.isRequired,onSelect:c.func,pageID:c.string,threadID:c.string.isRequired,afterDecorators:c.array};a.defaultProps={onComponentLoaded:b("emptyFunction")};e.exports=a}),null);
__d("MessagingFlowerBorderChecker",["MercuryMessageCustomizations","MessageBorderType","MessageCustomizationType","gkx"],(function(a,b,c,d,e,f){"use strict";a={shouldRenderWithFlowerBorder:function(a){return b("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&b("MercuryMessageCustomizations").getCustomizationValue(a,b("MessageCustomizationType").BORDER)===b("MessageBorderType").FLOWERS}};e.exports=a}),null);
__d("MessengerErrorAttachment.react",["cx","fbt","CurrentUser","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(a){i.constructor.call(this,a)}a.prototype.render=function(){var a=this.props.attachment.error_msg||h._("Impossible de charger la pi\u00e8ce jointe.");return b("React").createElement("div",{className:"_1o12 _52mr"},b("React").createElement("div",{className:"_1o13"},a,this.$1()))};a.prototype.$1=function(){return!this.props.attachment.error_msg&&b("CurrentUser").isEmployee()&&b("CurrentUser").hasWorkUser()&&!b("CurrentUser").isWorkUser()?b("React").createElement("div",null,h._("Elle \u00e9tait probablement destin\u00e9e \u00e0 votre compte \u0040workplace.")):null};e.exports=a}),null);
__d("MessengerFileAttachment.react",["cx","Link.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("Link.react"),{className:"_4pcn _2uf4",target:"_blank",href:this.props.attachment.url},b("React").createElement("div",{className:"_2uf5"}),this.props.attachment.name)};function a(){h.apply(this,arguments)}a.propTypes={attachment:c.object.isRequired};e.exports=a}),null);
__d("MessengerFromViewerUtils",["CurrentUser","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.author===b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID())}e.exports={isFromViewer:a}}),null);
__d("MessengerHotLikePreview.react",["cx","Animation","EmojiLikeConstants","HotLikeSound","MessengerHotLikePreviewEvents","MessengerHotLikeSVG.react","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","React","ReactDOM","StickerConstants","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$5=function(){this.$6=new(b("Animation"))(b("ReactDOM").findDOMNode(this)),this.$7(-2,2,150,1e3),this.$7(-4,4,100,1e3),this.$7(-10,10,75,1e3),this.$6.go()}.bind(this),this.$2=function(a,c){__p&&__p();var d=c?b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION:b("MessengerHotLikePreviewEvents").FINISH_ANIMATION;if(this.$8)return;this.$8=!0;c=Date.now()-this.props.since;var e=null;this.props.customLike&&(e=b("MessengerHotLikeUtils").getEmojiSizeForTime(c));var f=b("MessengerHotLikeUtils").getStickerIDForTime(c);b("HotLikeSound").snap(f);c=b("MessengerHotLikeUtils").getMetadataForHotLike(e||f);this.$6.stop();var g=30,h=-10;f===b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID&&(g=0,h=0);this.$4.stop().to("width",c.width*1.2).to("height",c.height*1.2).to("rotateZ",g).duration(100).checkpoint().to("width",c.width*.9).to("height",c.height*.9).to("rotateZ",h).duration(100).checkpoint().to("width",c.width).to("height",c.height).to("rotateZ",0).duration(100).ondone(function(){b("MessengerHotLikePreviewEvents").emit(d,a,f,e)}).go()}.bind(this),this.$3=function(a){b("HotLikeSound").pop(),this.$4.stop().to("width",0).to("height",0).duration(100).ondone(function(){b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").REMOVE,a)}).go()}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,this.$2),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,this.$2),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").POP,this.$3)),b("HotLikeSound").start(),this.$4=new(b("Animation"))(b("ReactDOM").findDOMNode(this)).to("width",80).to("height",80).duration(3e3).go(),this.$5()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.release()};a.prototype.render=function(){if(this.props.customLike){var a=this.props.customLike,c=b("MessengerSupportedEmojiUtils").getNewEmojiData(a.emoji,b("EmojiLikeConstants").size.LARGE);c=c?c.url:this.props.customLike.large;a.uri&&(c=a.uri);return b("React").createElement("div",{className:"_4a9g _383m",style:{backgroundImage:"url("+c+")"}})}return b("React").createElement("div",{className:"_4a9g _576q"},b("React").createElement(b("MessengerHotLikeSVG.react"),{color:this.props.customColor}))};a.prototype.$7=function(a,b,c,d){d=Math.floor(d/c);var e;for(var f=0;f<d;f++)e=f%2?a:b,this.$6.to("rotateZ",e).duration(c).checkpoint()};a.propTypes={customLike:c.object,since:c.number};e.exports=a}),null);
__d("ChatSpeakingStickerReact.bs",["ReasonReact.bs","ChatSpeakingSticker.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ChatSpeakingSticker.react"),{videoURI:a,videoSize:c},d)}f.make=a}),null);
__d("MercuryAttachmentPayload.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b?b[0]:null;return{app_attribution:null,attach_type:a,deduplication_key:null,description:null,icon_type:null,key:b,large_preview_height:null,large_preview_width:null,large_preview_url:null,media:null,metadata:null,name:null,photo_encodings:null,preview_height:null,preview_uploading:null,preview_url:null,preview_width:null,rel:null,share:null,source:null,target:null,thumbnail_url:null,upload_id:null,uri:null,url:c,video_title:null}}f.create=a}),null);
__d("MessagingFlowerBorderReact.bs",["ReasonReact.bs","MessagingFlowerBorder.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessagingFlowerBorder.react"),{offset:a},c)}f.make=a}),null);
__d("MessagingGiftWrapReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessagingGiftWrap.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessagingGiftWrap.react"),{isSticker:b("Utils.bs").optionBoolToNullUndefinedBoolean(a),onUnwrap:b("bs_js_null_undefined").from_opt(c)},d)}f.make=a}),null);
__d("MessengerAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={renderVideo:function(a){b("Bootloader").loadModules(["MessagingVideoViewer.react","MessengerForwardAttachmentDialogReact.bs"],function(c,d){d=d.jsComponent;b("MessagesViewer").renderVideo(b("React").createElement(c,babelHelpers["extends"]({},a,{forwardDialogComponent:d})))},"MessengerAttachmentViewer")},bootstrapWithConfig:function(a,c){b("Bootloader").loadModules(["SpotlightMessagesViewer","MessengerForwardAttachmentDialogReact.bs"],function(d,e){e=e.jsComponent;b("MessagesViewer").renderSpotlight(a,c,d,e)},"MessengerAttachmentViewer")},preload:function(){b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessengerForwardAttachmentDialogReact.bs"],b("emptyFunction"),"MessengerAttachmentViewer")})}};e.exports=a}),null);
__d("SphericalPhotoViewerInMessengerThreadBootloaded.react",["cx","BootloadedComponent.react","CssBackgroundImage.react","JSResource","React","PhotoProjection"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("PhotoProjection").PERSPECTIVE;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();if(this.props.photoEncodings&&this.props.thumbnail){var a=this.props.photoEncodings.find(function(a){return a.projection_type===i}),c=null,d=null;if(a&&a.thumbnails&&a.thumbnails.length>0){a=a.thumbnails;c=a[0]?a[0].uri:null;d=a[1]?a[1].uri:null}if(this.props.useRenderer&&this.props.width&&this.props.height&&this.props.fbid){a=d||c||this.props.thumbnail;return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoViewerInMessengerThreadWrapper.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:b("React").createElement(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),height:this.props.height,width:this.props.width,fbid:this.props.fbid,thumbnail:a,photoEncodings:this.props.photoEncodings,isVisible:this.props.isVisible,onClickHandler:this.props.onClickHandler})}else{a=c||d||this.props.thumbnail;return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoMessengerThumbnail.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:b("React").createElement(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),photoEncodings:this.props.photoEncodings,thumbnail:a})}}return null};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerSphericalPhotoReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","SphericalPhotoViewerInMessengerThreadBootloaded.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("SphericalPhotoViewerInMessengerThreadBootloaded.react"),{height:b("bs_js_null_undefined").from_opt(a),width:b("bs_js_null_undefined").from_opt(c),fbid:b("bs_js_null_undefined").from_opt(d),thumbnail:b("bs_js_null_undefined").from_opt(e),photoEncodings:b("bs_js_null_undefined").from_opt(f),isVisible:b("Utils.bs").optionBoolToBoolean(g),onClickHandler:h,useRenderer:i},j)}f.make=a}),null);
__d("MessengerPhotoReact.bs",["cx","fbt","bs_curry","React","Utils.bs","LinkReact.bs","cssURL","ImageReact.bs","bs_js_boolean","ReasonReact.bs","joinClasses","bs_js_primitive","bs_caml_primitive","MercuryAttachmentType","MessengerSpinnerReact.bs","bs_caml_builtin_exceptions","MessengerSphericalPhotoReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,c){__p&&__p();var d=a.metadata;if(d==null)return null;else if(a.attach_type===b("MercuryAttachmentType").VIDEO){var e=c&&b("Utils.bs").isDefined(d.large_preview);if(e!==0)return d.large_preview;else return d.inbox_preview}else if(c!==0)return a.large_preview_url;else return a.preview_url}function j(a){if(a==null)return[null,null];else return[a.width,a.height]}function k(a){__p&&__p();var c=+(window.screen.width>1800);if(b("Utils.bs").isTruthy(a.preview_uploading)){var d=function(c,d){var a=b("Utils.bs").isDefined(c);if(a!==0)return c;else return d},e=c&&b("Utils.bs").isDefined(a.large_preview_url);if(e!==0)return[[d(a.large_preview_width,480),d(a.large_preview_height,480),a.large_preview_url,c]];else return[[d(a.preview_width,280),d(a.preview_height,280),a.preview_url,c]]}else{e=i(a,c);d=b("Utils.bs").isDefined(e);var f=a.metadata;if(d!==0)if(f==null)d=1;else{var g=c&&b("Utils.bs").isDefined(f.large_size);g=g!==0?f.large_size:f.inbox_size;f=j(g);return[[f[0],f[1],e,c]]}else d=1;if(d===1)if(b("Utils.bs").isDefined(a.preview_url)){g=c&&b("Utils.bs").isDefined(a.large_preview_url);if(g!==0)return[[a.large_preview_width,a.large_preview_height,a.large_preview_url,c]];else return[[a.preview_width,a.preview_height,a.preview_url,c]]}else{f=a.media;if(f==null)return 0;else{e=b("Utils.bs").isDefined(f.playable)&&b("Utils.bs").isDefined(f.animated_image);if(e!==0){d=j(f.animated_image_size);return[[d[0],d[1],f.animated_image,c]]}else{g=j(f.image_size);return[[g[0],g[1],f.image,c]]}}}}}function l(a){__p&&__p();var c=function(a){return[""+(String(a)+"")]};if(b("Utils.bs").isTruthy(a.preview_uploading)){var d=b("Utils.bs").isDefined(a.preview_url);return c(d!==0?0:280)}else{var e=function(a){var b=a[1];a=a[0];if(!(a==null)&&!(b==null))return[[a,b]];else return 0};d=function(a){if(a){a=a[0];return e([a[0],a[1]])}else return 0};var f=b("Utils.bs").isDefined(a.media);f=f!==0?d(k(a)):e([a.preview_width,a.preview_height]);if(f){d=f[0];return c(b("bs_caml_primitive").caml_float_min(d[1]*b("bs_caml_primitive").caml_float_min(1,450/d[0]),450))}else return 0}}function m(a,c,d,e,f){__p&&__p();b("Utils.bs").isTruthy(e.preview_uploading);e=a[2];if(e==null)return null;else if(f){f=a[3];a=f!==0?window.screen.height*.7:window.screen.height*.65;f={maxHeight:""+(String(a)+""),maxWidth:"100%",width:"100%"};return b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make([b("joinClasses")(d,b("bs_js_boolean").to_js_boolean(1-c)?"_5pf5":"")],[""],[e],0,0,0,[f],[]))}else return null}var n=b("ReasonReact.bs").statelessComponent("MessengerPhoto");function a(a,c,d,e,f,g,i){__p&&__p();var j=a?a[0]:"";a=n.slice();a[4]=function(){f&&b("bs_curry")._1(f[0],0);return 0};a[9]=function(){__p&&__p();var a=k(c);if(a){a=a[0];var f=+(c.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE),n=b("Utils.bs").isDefined(c.app_attribution),o=c.photo_encodings;o=o==null?0:+(o.length!==0);var p=(1-f||1-d)&&1-o;if(p!==0){p=a[2];p=p==null?0:[b("cssURL")(p)];var q=d!==0?l(c):0;p=[p,q]}else p=[0,0];q={};var r=p[0];r&&(q.backgroundImage=r[0]);r=p[1];r&&(q.minHeight=r[0]);p=q;r=b("Utils.bs").isTruthy(c.preview_uploading);q=r!==0?b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[])):null;r=f!==0?[b("MercuryAttachmentType").ANIMATED_IMAGE]:0;var s=function(){if(g)return b("bs_curry")._1(g[0],c);else return 0},t=function(a){a.preventDefault();return s(0)};if(o){var u=a[2],v=c.metadata,w;if(v==null)w=0;else{v=v.fbid;w=v==null?0:[v]}v=c.photo_encodings;w=b("ReasonReact.bs").element(0,0,b("MessengerSphericalPhotoReact.bs").make([400],[400],w,u==null?0:[u],v==null?0:[v],e,s,d,[]))}else w=m(a,d&&f,(b("bs_js_boolean").to_js_boolean(n)?"_mxz":"")+(b("bs_js_boolean").to_js_boolean(d&&1-n)?" _52mr":"")+(b("bs_js_boolean").to_js_boolean(d&&1-n)?" _1byr":""),c,d);return b("React").cloneElement(b("React").createElement("div",{className:b("joinClasses")(j,"_4tsk"+(b("bs_js_boolean").to_js_boolean(n)?" _mxz":"")+(b("bs_js_boolean").to_js_boolean(d&&1-n)?" _52mr":"")+(b("bs_js_boolean").to_js_boolean(d&&1-n)?" _1byr":"")+(b("bs_js_boolean").to_js_boolean(b("Utils.bs").isTruthy(c.preview_uploading)&&1-b("Utils.bs").isDefined(a[2]))?" _3etv":"")+(b("bs_js_boolean").to_js_boolean(o&&1-d)?" _3603":"")),role:"presentation",style:p,onClick:t}),{"data-testid":r},b("React").createElement("div",{className:b("bs_js_boolean").to_js_boolean(o&&1-d)?"_64ks":""}),b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make([h._("Ouvrir la photo")],["_4tsl"],0,0,0,0,b("bs_js_primitive").null_undefined_to_opt(a[2]),0,0,0,0,0,0,0,0,0,[i])),w,q)}else return null};return a}c=280;d=480;e=1800;g=450;f.preview_thumbnail_size=c;f.preview_large_size=d;f.large_window_width=e;f.max_photo_width=g;f.getSrcFromAttachment=i;f.sizeToWidthHeight=j;f.extractPreviewMetadata=k;f.getMinHeightForAttachment=l;f.getImageFromMetadata=m;f.component=n;f.make=a}),null);
__d("MessengerThreadSharedMediaAfterWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1668947383157276"};c.getQueryID=function(){"use strict";return"515216185516880"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerThreadSharedMediaBeforeWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1712143858865110"};c.getQueryID=function(){"use strict";return"1694317194012102"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerThreadSharedMediaFindWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1504091236306393"};c.getQueryID=function(){"use strict";return"1829469114011976"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerSharedMediaReducer",["JSReliabilityFixesGatingConfig","MessengerSharedMediaActions","MessengerThreadSharedMediaHelper","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerSharedMediaActions").Types;function a(a,c){__p&&__p();switch(c.type){case g.LOAD_CURRENT:var d=a.get("sharedMedia").get(c.threadFBID);if(d){d=d.edges.find(function(a){return a.node.legacy_attachment_id===c.photoID});if(d)return a}d=a.get("isLoading").get(c.threadFBID);if(!!d&&d.curr)return a;d=l(a,c.threadFBID,"curr",!0);b("MessengerThreadSharedMediaHelper").search(c.threadFBID,c.photoID,function(a){return b("MessengerSharedMediaActions").currentLoaded(a)});return d}return a}function c(a,c){__p&&__p();switch(c.type){case g.LOAD_MORE_PREVIOUS:var d=a.get("isLoading").get(c.threadFBID);if(!!d&&d.prev)return a;d=l(a,c.threadFBID,"prev",!0);if(d===null)return a;b("MessengerThreadSharedMediaHelper").loadMorePrevious(c.threadFBID,c.afterCursor,c.first,function(a){return b("MessengerSharedMediaActions").previousLoaded(a)});return d}return a}function d(a,c){__p&&__p();switch(c.type){case g.LOAD_MORE_LATEST:var d=a.get("isLoading").get(c.threadFBID);if(!!d&&d.latest)return a;d=l(a,c.threadFBID,"latest",!0);if(d===null)return a;b("MessengerThreadSharedMediaHelper").loadMoreLatest(c.threadFBID,c.beforeCursor,c.last,function(a){return b("MessengerSharedMediaActions").latestLoaded(a)});return d}return a}function f(a,c){__p&&__p();var d;switch(c.type){case g.CURRENT_LOADED:c=c.data;var e=Object.keys(c)[0],f=b("JSReliabilityFixesGatingConfig").should_get_fix;d=f?(d=c[e])!=null?d.message_shared_media:d:c[e].message_shared_media;f=f?(c=d)!=null?(c=c.edges)!=null?c.length:c:c:d.edges.length;c=l(a,e,"curr",!1);if(f!==0){f=k(a.get("sharedMedia").get(e),d,0);f=a.get("sharedMedia").set(e,f);c=c.set("sharedMedia",f);f=d.edges[0];b("MessengerThreadSharedMediaHelper").loadMorePrevious(e,f.cursor,10,function(a){return b("MessengerSharedMediaActions").previousLoaded(a)});b("MessengerThreadSharedMediaHelper").loadMoreLatest(e,f.cursor,10,function(a){return b("MessengerSharedMediaActions").latestLoaded(a)})}return c}return a}function h(a,b){__p&&__p();switch(b.type){case g.PREVIOUS_LOADED:b=b.data;var c=Object.keys(b)[0];b=b[c].message_shared_media;var d=l(a,c,"prev",!1);b=k(a.get("sharedMedia").get(c),b,1);c=a.get("sharedMedia").set(c,b);d=d.set("sharedMedia",c);return d}return a}function i(a,b){__p&&__p();switch(b.type){case g.LATEST_LOADED:b=b.data;var c=Object.keys(b)[0];b=b[c].message_shared_media;var d=l(a,c,"latest",!1);b=k(a.get("sharedMedia").get(c),b,-1);c=a.get("sharedMedia").set(c,b);d=d.set("sharedMedia",c);return d}return a}function j(a,b){__p&&__p();switch(b.type){case g.DELETE_PHOTOS:var c=b.threadFBID;b=b.photoFBIDs;var d=a.get("sharedMedia").get(c),e=new Set(b.map(function(a){return a.toString()}));d.edges=d.edges.filter(function(a){return!e.has(a.node.legacy_attachment_id)});b=a.get("sharedMedia").set(c,d);c=a.set("sharedMedia",b);return c}return a}function k(a,b,c){__p&&__p();var d={};d.count=b.count;if(c===1&&a){var e=a.edges;d.has_previous_page=a.has_previous_page;d.has_next_page=b.page_info.has_next_page;b.edges.length>0?d.edges=e.concat(b.edges):d.edges=e}else if(c===-1&&a){e=a.edges;d.has_previous_page=b.page_info.has_previous_page;d.has_next_page=a.has_next_page;b.edges.length>0?d.edges=b.edges.concat(e):d.edges=e}else d.has_previous_page=b.page_info.has_previous_page,d.has_next_page=b.page_info.has_next_page,b.edges.length>0&&(d.edges=b.edges);return d}function l(a,b,c,d){var e=a.get("isLoading").get(b);e===undefined?(e={},e[c]=d):e[c]=d;c=a.set("isLoading",a.get("isLoading").set(b,e));return c}f={currentLoaded:f,deletePhotos:j,latestLoaded:i,loadCurrent:a,loadMoreLatest:d,loadMorePrevious:c,previousLoaded:h};e.exports=f}),null);
__d("MessengerSharedMediaState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={sharedMedia:b("immutable").Map({}),isLoading:b("immutable").Map({})};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerSharedMediaStore",["MessengerFluxReduceDispatcher","MessengerSharedMediaActions","MessengerSharedMediaReducer","MessengerSharedMediaState","FluxReduceStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=Object.keys(b("MessengerSharedMediaReducer"));c=babelHelpers.inherits(a,b("FluxReduceStore"));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.__moduleID=e.id,b}a.prototype.getInitialState=function(){return new(b("MessengerSharedMediaState"))()};a.prototype.reduce=function(a,c){if(c.namespace!==b("MessengerSharedMediaActions").Namespace)return a;h.forEach(function(d){a=b("MessengerSharedMediaReducer")[d](a,c)});return a};e.exports=new a(b("MessengerFluxReduceDispatcher"))}),null);
__d("MessengerSharedPhotosAlbumViewPhotoReact.bs",["bs_curry","React","cssURL","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerSharedPhotosAlbumViewPhotoReact");function a(a,c,d,e,f){var h=g.slice();h[9]=function(){return b("React").createElement("a",{className:a,style:{backgroundImage:b("cssURL")(e)},href:"#",onClick:function(){return b("bs_curry")._1(d,c)}},f)};return h}f.component=g;f.make=a}),null);
__d("MessengerSharedPhotosAlbumViewVScrollReact.bs",["cx","bs_array","bs_curry","React","bs_string","ReactDOM","Animation","bs_caml_array","bs_js_boolean","ReasonReact.bs","bs_caml_builtin_exceptions","MessengerSharedMediaActions","MessengerSharedPhotosAlbumViewPhotoReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){var c=a[1],d=c.length;if(d<48){b("MessengerSharedMediaActions").loadMorePrevious(a[0],b("bs_caml_array").caml_array_get(c,c.length-1|0).cursor,48);return 0}else return 0}function i(a){if(a){a=a[0];return+((a.scrollTop+a.clientHeight|0)>=(a.scrollHeight-20|0))}else throw b("bs_caml_builtin_exceptions").not_found}function j(a){if(a)return+(a[0].scrollTop<=20);else throw b("bs_caml_builtin_exceptions").not_found}function k(a){if(a)return a[0].clientHeight;else throw b("bs_caml_builtin_exceptions").not_found}function l(a,c){if(a){new(b("Animation"))(a[0]).to("scrollTop",c).duration(200).go();return 0}else return 0}function m(a){var c=a[2][0];if(c)return l(a[1][0],b("ReactDOM").findDOMNode(c[0]).offsetTop-70|0);else return 0}function n(a,c){__p&&__p();a=c[2];var d=a[3],e=a[1],f=a[0];c=c[1];var g=e.length;if(i(c[1][0]))if(g<a[2]&&!d.prev){b("MessengerSharedMediaActions").loadMorePrevious(f,b("bs_caml_array").caml_array_get(e,e.length-1|0).cursor,48);return 0}else return 0;else if(j(c[1][0])&&!d.latest){b("MessengerSharedMediaActions").loadMoreLatest(f,b("bs_caml_array").caml_array_get(e,0).cursor,48);return 0}else return 0}function o(a){__p&&__p();var c=a[1],d=c[1][0];if(d){var e=b("bs_curry")._1(a[0],n);d[0].addEventListener("scroll",e);b("bs_curry")._1(a[4],function(){var a=c[1][0];if(a)return a[0].removeEventListener("scroll",e);else return 0})}h(a[2]);d=function(){__p&&__p();if(k(c[3][0])>0){m(c);var a=c[0][0];if(a){clearInterval(a[0]);c[0][0]=0;return 0}else return 0}else return 0};c[0][0]=[setInterval(d,200)];return 0}function p(a){a=a[1][0][0];if(a){clearInterval(a[0]);return 0}else return 0}var q=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerSharedPhotosAlbumViewVScrollReact");function r(a,b){b[1][1][0]=a==null?0:[a];return 0}function s(a,b){b[1][3][0]=a==null?0:[a];return 0}function t(a,b){b[1][2][0]=a==null?0:[a];return 0}function u(a,c,d,e,f,g,h){__p&&__p();var i=function(a){__p&&__p();return b("bs_array").map(function(d){__p&&__p();d=d.node;var e=d.photo_encodings;e=e==null?0:+(e.length!==0);var f=d.photo_encodings,h;if(e!==0)if(f==null)h=d.image1.uri;else{f=f.find(function(a){return+(a.projection_type==="perspective")});if(f!==undefined)if(f.thumbnails.length!==0){f=f.thumbnails;h=b("bs_caml_array").caml_array_get(f,0).uri}else h=d.image1.uri;else h=d.image1.uri}else h=d.image1.uri;f=+(d.legacy_attachment_id===g);return b("ReasonReact.bs").element([d.legacy_attachment_id],f!==0?[b("bs_curry")._1(a[0],t)]:0,b("MessengerSharedPhotosAlbumViewPhotoReact.bs").make("_3bly"+(b("bs_js_boolean").to_js_boolean(e)?" _3603":""),d.legacy_attachment_id,c,h,[b("React").createElement("div",{key:b("bs_string").concat("_",[d.legacy_attachment_id,["spherical_gradient",0]]),className:b("bs_js_boolean").to_js_boolean(e)?"_64ks":""})]))},d)};return[q[0],q[1],q[2],q[3],o,q[5],p,q[7],q[8],function(a){return b("React").createElement("div",{ref:b("bs_curry")._1(a[0],r),className:"_3xo8",onScroll:b("bs_curry")._1(a[0],n)},b("React").createElement("div",{ref:b("bs_curry")._1(a[0],s),className:"_3xoa"},i(a)))},function(){return[[0],[0],[0],[0]]},[e,d,f,a],function(a,b){return 0},q[13]]}a=b("ReasonReact.bs").wrapReasonForJs(q,function(a){return u(a.isLoading,a.onClick,a.sharedPhotos,a.threadID,a.totalCount,a.viewedPhoto,[])});c=200;d=48;e=6;g=20;var v=70;f.animationDuration=c;f.imagesToLoad=d;f.photosPerRow=e;f.scrollToEdgeTolerance=g;f.headerHeight=v;f.graduallyLoadPhotos=h;f.isScrolledToBottom=i;f.isScrolledToTop=j;f.getScrollHeight=k;f.scrollTo=l;f.autoScrollWhenLoaded=m;f.handleScroll=n;f.didMount=o;f.willUnmount=p;f.component=q;f.setRefChildContainer=r;f.setRefScrollable=s;f.setRefChild=t;f.make=u;f.jsComponent=a}),null);
__d("MessengerSharedPhotosAlbumView.react",["cx","fbt","MessengerSharedPhotosAlbumViewVScrollReact.bs","MessengerPhotoViewCloseLink.react","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerSharedPhotosAlbumViewVScrollReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$2=function(){this.props.onClick(this.props.viewedPhoto)}.bind(this),b}a.prototype.render=function(){return b("React").createElement("div",{className:"_3bl- _5l-3",ref:"window"},this.$1(),b("React").createElement(j,{isLoading:this.props.isLoading,onClick:this.props.onClick,sharedPhotos:this.props.sharedPhotos,threadID:this.props.threadID,totalCount:this.props.totalCount,viewedPhoto:this.props.viewedPhoto}))};a.prototype.$1=function(){return b("React").createElement("div",{className:"_3bm0 _5l-3",ref:"header"},b("React").createElement(b("ShimButton.react"),{className:"_3bm2",onClick:this.$2},b("React").createElement("div",{className:"_3bm3"}),h._("Retour \u00e0 la photo")),b("React").createElement("div",{className:"_3bm4"},h._("Photos partag\u00e9es")),b("React").createElement(b("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onCloseSharedPhotos}))};a.propTypes={onClick:c.func.isRequired,onCloseSharedPhotos:c.func.isRequired,sharedPhotos:c.arrayOf(c.object).isRequired,totalCount:c.number.isRequired,viewedPhoto:c.string.isRequired,threadID:c.string.isRequired,isLoading:c.object.isRequired};e.exports=a}),null);
__d("MessengerSharedPhotosAlbumViewContainer.react",["FluxContainer","MessengerSharedMediaStore","React","MessengerSharedPhotosAlbumView.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={edges:[],count:0,isLoading:{}},b}a.getStores=function(){return[b("MessengerSharedMediaStore")]};a.calculateState=function(a,c){a=b("MessengerSharedMediaStore").getState();var d=a.sharedMedia;return{edges:d.get(c.threadID).edges,count:d.get(c.threadID).count,isLoading:a.isLoading.get(c.threadID)}};a.prototype.render=function(){return this.state.edges.length===0?null:b("React").createElement(b("MessengerSharedPhotosAlbumView.react"),{onClick:this.props.onClick,onCloseSharedPhotos:this.props.onCloseSharedPhotos,sharedPhotos:this.state.edges,totalCount:this.state.count,viewedPhoto:this.props.viewedPhoto,threadID:this.props.threadID,isLoading:this.state.isLoading})};a.propTypes={onClick:c.func.isRequired,onCloseSharedPhotos:c.func.isRequired,viewedPhoto:c.string.isRequired,threadID:c.string};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessageShareType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMAGE:"image",PLATFORM_SHARE_CTA:"platform_share_CTA"})}),null);
__d("MessengerTabIndices",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NEW_MESSAGE_TOKENIZER:9998,COMPOSER_INPUT:9999});e.exports=a}),null);
__d("MessengerComposeViewHeader.react",["cx","fbt","gkx","immutable","MessengerGraphQLTokenizer.react","MessengerTabIndices","React","clearImmediate","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=320;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={tokenizerContext:null,excludeGroups:!1,excludePages:!1,forGroup:!1},this.$1=null,this.$2=function(){this.$1=b("setImmediate")(function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput()}.bind(this))}.bind(this),c}a.prototype.componentDidMount=function(){this.$2(),this.setState({tokenizerContext:this.refs.tokenizerContext})};a.prototype.componentDidUpdate=function(a){this.props.recipients!==a.recipients&&this.props.onResize()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.recipients!==this.props.recipients&&(a.recipients.size===0?this.setState({excludeGroups:!1,excludePages:!1,forGroup:!1}):a.isWorkUser?this.setState({excludeGroups:!0,excludePages:!1,forGroup:!0}):this.setState({excludeGroups:!0,excludePages:!0,forGroup:!0}))};a.prototype.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1)};a.prototype.render=function(){var a={enableMessageSearch:!1,hasHoverState:!0,originalEntryIDs:b("immutable").Set(),scrollableViewClassName:"_2y8_",shouldQueryInternalBot:!0,shouldQueryVCEndpoint:!1,width:j};return b("React").createElement("div",{className:b("joinClasses")("_2y8y _5l-3",this.props.className),onClick:this.$2,role:"presentation"},b("React").createElement("div",{className:"_2y8z",ref:b("gkx")("AT6Yilkln5f96nRXioOq13cDPCObGBXyvgYqCAnQUaX65pRAKq-nGqLOprquxXuHzv81m5wzzj4tuAiPBqV-ffQ_qlTKHg2SAFcZxWCm3nT90A")?"tokenizerContext":""},h._("\u00c0\u00a0:")),b("React").createElement("div",{className:"_66s6"},b("React").createElement(b("MessengerGraphQLTokenizer.react"),babelHelpers["extends"]({autoFocus:!0,className:"_2y8-",context:this.state.tokenizerContext,entries:this.props.recipients,excludeGroups:this.state.excludeGroups,excludePages:this.state.excludePages,forGroup:this.state.forGroup,forceHideClearButton:this.props.forceHideClearButton,onAddEntryAttempt:this.props.onAddRecipient,onClear:this.props.onClear,onRemoveEntryAttempt:this.props.onRemoveRecipient,placeholder:h._("Saisissez le nom d\u2019une personne ou d\u2019un groupe"),ref:"tokenizer",tabIndex:b("MessengerTabIndices").NEW_MESSAGE_TOKENIZER,useLayer:!0,viewer:this.props.viewer},a)),b("gkx")("AT6Yilkln5f96nRXioOq13cDPCObGBXyvgYqCAnQUaX65pRAKq-nGqLOprquxXuHzv81m5wzzj4tuAiPBqV-ffQ_qlTKHg2SAFcZxWCm3nT90A")?null:b("React").createElement("div",{ref:"tokenizerContext"})))};a.propTypes={forceHideClearButton:c.bool.isRequired,onAddRecipient:c.func.isRequired,onClear:c.func,onRemoveRecipient:c.func.isRequired,onResize:c.func.isRequired,recipients:c.instanceOf(b("immutable").List).isRequired,viewer:c.string.isRequired,isWorkUser:c.bool.isRequired};a.defaultProps={isWorkUser:!1};e.exports=a}),null);
__d("MessengerComposeViewHeaderReact.bs",["bs_js_boolean","ReasonReact.bs","bs_js_null_undefined","MessengerComposeViewHeader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){return b("ReasonReact.bs").wrapJsForReason(b("MessengerComposeViewHeader.react"),{className:b("bs_js_null_undefined").from_opt(a),forceHideClearButton:b("bs_js_boolean").to_js_boolean(c),onClear:b("bs_js_null_undefined").from_opt(d),onAddRecipient:e,onRemoveRecipient:f,onResize:g,recipients:h,viewer:i,isWorkUser:b("bs_js_boolean").to_js_boolean(j)},k)}f.make=a}),null);
__d("MessengerDialogBodyReact.bs",["cx","ReasonReact.bs","joinClasses","bs_js_primitive"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerDialogBodyReact");function i(a,c){var d=a?a[0]:"";a=h.slice();a[9]=function(){return b("ReasonReact.bs").createDomElement("div",{className:b("joinClasses")("_4eb-",d)},c)};return a}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(b("bs_js_primitive").null_undefined_to_opt(a.className),a.children)});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerDialogReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerDialog.react","MessengerDialogTitle.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogCancelButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a)switch(a[0]){case 0:return["cancel"];case 1:return["button"];case 2:return["confirm"]}else return 0}function h(a){if(a)if(a[0]!==0)return["secondary"];else return["primary"];else return 0}function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialog.react"),{className:b("bs_js_null_undefined").from_opt(a),onToggle:c,repositionOnUpdate:b("Utils.bs").optionBoolToNullUndefinedBoolean(d),shown:b("Utils.bs").optionBoolToNullUndefinedBoolean(e),titleID:b("bs_js_null_undefined").from_opt(f),type:b("bs_js_null_undefined").from_opt(g),width:b("bs_js_null_undefined").from_opt(h)},i)}a=[a];function c(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogHeader.react"),{className:b("bs_js_null_undefined").from_opt(a),id:b("bs_js_null_undefined").from_opt(c)},d)}c=[c];function d(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogTitle.react"),{className:b("bs_js_null_undefined").from_opt(a)},c)}d=[d];function e(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogFooter.react"),{className:b("bs_js_null_undefined").from_opt(a),leftContent:b("bs_js_null_undefined").from_opt(c)},d)}e=[e];function i(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogCancelButton.react"),{onClick:b("bs_js_null_undefined").from_opt(a)},c)}i=[i];function j(a,c,d,e,f,i,j,k,l){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogButton.react"),{action:b("bs_js_null_undefined").from_opt(g(a)),label:b("bs_js_null_undefined").from_opt(c),disabled:b("Utils.bs").optionBoolToNullUndefinedBoolean(d),use:b("bs_js_null_undefined").from_opt(e),onClick:b("bs_js_null_undefined").from_opt(f),type:b("bs_js_null_undefined").from_opt(h(i)),className:b("bs_js_null_undefined").from_opt(j),leftContent:b("bs_js_null_undefined").from_opt(k)},l)}j=[j];var k=0;f.stringOfButtonAction=g;f.stringOfButtonType=h;f.Dialog=a;f.Header=c;f.Title=d;f.Footer=e;f.CancelButton=i;f.Button=j;f.Body=k}),null);
__d("XMessagingForwardAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/forward/",{})}),null);
__d("XMessengerPlatformShareCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/platform/share/",{})}),null);
__d("MessengerForwardAttachmentDialogReact.bs",["ix","cx","fbt","bs_block","bs_curry","React","immutable","ImageReact.bs","bs_js_boolean","CurrentUser","fbglyph","ReasonReact.bs","AsyncRequest","bs_js_primitive","MercuryLocalIDs","MessageShareType","MessengerDialogReact.bs","MessengerSpinnerReact.bs","MessengerDialogBodyReact.bs","MessengerComposeViewHeaderReact.bs","XMessengerPlatformShareCTAController","XMessagingForwardAttachmentController"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i._("Envoyer"),k=b("ReasonReact.bs").reducerComponent("MessengerForwardAttachmentDialogReact");function l(a,c,d){new(b("AsyncRequest"))(a.getURIBuilder().getURI()).setMethod("POST").setHandler(d).setData(c).send();return 0}function m(a,c,d,e,f,h,m){__p&&__p();var n=function(d,a){if(d)return 0;else return b("bs_curry")._1(c,0)},o=function(c,e){__p&&__p();var f=e[3];c=function(a){if(a.payload.success)return b("bs_curry")._1(f,2);else return b("bs_curry")._1(f,b("bs_block").__(2,[b("bs_js_primitive").null_undefined_to_opt(a.payload.error)]))};var g={};e[1][0].forEach(function(c,a,d){g[String(b("MercuryLocalIDs").generateOfflineThreadingID(undefined))]=c.getUniqueID();return!0});var i=0;h&&d&&h[0]===b("MessageShareType").PLATFORM_SHARE_CTA?l(b("XMessengerPlatformShareCTAController"),{cta_id:a,message_id:d[0],recipient_map:g},c):i=1;i===1&&l(b("XMessagingForwardAttachmentController"),{attachment_id:a,recipient_map:g},c);return b("bs_curry")._1(e[3],1)};m=k.slice();m[9]=function(a){__p&&__p();var c=a[1],d=c[2],h=c[1];if(d!==0)d=b("React").createElement("div",undefined,b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[])),b("React").createElement("span",{className:"_1e1n _3-99"},i._("Envoi en cours")));else if(h){var k=g("141787");d=b("React").createElement("div",{className:"_1e1n"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,[k],0,0,0,0,[])),b("React").createElement("span",{className:"_3-99"},h[0]))}else d=null;return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,b("bs_curry")._1(a[0],n),0,[e],0,0,[560],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,[f])))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("ReasonReact.bs").element(0,0,b("MessengerComposeViewHeaderReact.bs").make(["_1e1o"],0,[function(){return b("bs_curry")._1(a[3],0)}],function(c){return b("bs_curry")._1(a[3],b("bs_block").__(0,[c]))},function(c){return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))},function(){return 0},c[0],b("CurrentUser").getID(),+b("CurrentUser").isWorkUser(),[]))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,[d],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([2],[j],[+c[0].isEmpty()||c[2]],0,[b("bs_curry")._1(a[0],o)],[0],0,0,[]))]))]))};m[10]=function(){return[b("immutable").List([]),0,0]};m[12]=function(a){__p&&__p();if(typeof a==="number")switch(a){case 0:return function(a){return b("bs_block").__(0,[[b("immutable").List([]),a[1],a[2]]])};case 1:return function(a){return b("bs_block").__(0,[[a[0],0,1]])};case 2:b("bs_curry")._1(c,0);return function(){return b("bs_block").__(0,[[b("immutable").List([]),0,0]])}}else switch(a.tag|0){case 0:var d=a[0];return function(a){return b("bs_block").__(0,[[a[0].push(d),a[1],a[2]]])};case 1:var e=a[0];return function(a){return b("bs_block").__(0,[[a[0].filter(function(a){return b("bs_js_boolean").to_js_boolean(+(a!==e))}),a[1],a[2]]])};case 2:var f=a[0];return function(a){return b("bs_block").__(0,[[a[0],f,0]])}}};return m}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return m(a.attachmentID,a.onClose,b("bs_js_primitive").null_undefined_to_opt(a.messageID),+a.shown,a.title,b("bs_js_primitive").null_undefined_to_opt(a.shareType),[])});f.sendButtonLabel=j;f.component=k;f.sendData=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerDialogs.bs",["bs_list","bs_curry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[0],h=[0];function i(){var a=h[0],c=g[0];if(a){a=a[0];if(b("bs_list").length(c)>0)return b("bs_curry")._1(a,[c]);else return b("bs_curry")._1(a,0)}else return 0}function a(a){h[0]=[a];return i(0)}function c(a){g[0]=[a,g[0]];return i(0)}function d(){var a=g[0];g[0]=a?a[1]:0;return i(0)}function e(){g[0]=0;return i(0)}f.visibleDialogs=g;f.setDialogComponentState=h;f.updateComponent=i;f.addHandler=a;f.showDialog=c;f.removeDialog=d;f.removeAllDialogs=e}),null);
__d("MessengerPhotoInfoDialog.react",["cx","fbt","MessengerEnvironment","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerDialogs.bs","MessengerSpinner.react","MercuryIDs","MercuryTimestamp","MercuryParticipants","React","RelayClassic_DEPRECATED","react-relay/classic/query/RelayQL","XUIDialog.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerContactImageReact.bs").jsComponent;c=b("React").PropTypes;var k=54;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$4=function(event){event.preventDefault(),this.props.showHeader&&this.props.showHeader(),b("MessengerDialogs.bs").removeDialog()}.bind(this),this.$3=function(a){a||(this.props.showHeader&&this.props.showHeader(),this.props.closeInfo())}.bind(this),c}a.prototype.render=function(){return!this.props.fullMedia?null:b("MessengerEnvironment").messengerui?this.$1():this.$2()};a.prototype.$1=function(){var a=this.props.fullMedia;return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$3,ref:"dialog",type:"default",width:504},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,h._("Infos")),b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Termin\u00e9"),onClick:this.$4,type:"primary"})),b("React").createElement("div",{className:"_2zn1"},b("React").createElement("div",{className:"_2zn2"},h._("T\u00e9l\u00e9charg\u00e9e par")),b("React").createElement("div",{className:"_2zn4"},b("React").createElement("div",{className:"_2zn5"},a.creator.name),b("React").createElement("div",{className:"_2zn6"},b("MercuryTimestamp").getPreciseTimestamp(a.creation_time*1e3))),b("React").createElement("div",{className:"_2zn7"},this.showProfilePic())),this.$5(),this.$6())};a.prototype.$2=function(){var a=this.props.fullMedia;return b("React").createElement(b("XUIDialog.react"),{onToggle:this.$3,shown:this.props.infoOpen,ref:"dialog",type:"serif",width:504},b("React").createElement(b("XUIDialogHeader.react"),null,b("React").createElement(b("XUIDialogHeaderTitle.react"),null,h._("Infos"))),b("React").createElement("div",{className:"_2zn1"},b("React").createElement("div",{className:"_2zn2"},h._("T\u00e9l\u00e9charg\u00e9e par")),b("React").createElement("div",{className:"_2zn4"},b("React").createElement("div",{className:"_2zn5"},a.creator.name),b("React").createElement("div",{className:"_2zn6"},b("MercuryTimestamp").getPreciseTimestamp(a.creation_time*1e3))),b("React").createElement("div",{className:"_2zn7"},this.showProfilePic())),this.$5(),this.$6())};a.prototype.$6=function(){__p&&__p();var a=this.props.fullMedia.exif_data,c="";if(a){a.aperture&&(c=a.aperture+" ");if(a.focal_length){var d=a.focal_length.split("/");d=parseInt(d[0],10)/(parseInt(d[1],10)||1);c+=d+"mm "}a.iso&&(c+="ISO "+a.iso)}return!c.length?null:b("React").createElement("div",{className:"_2zn1"},b("React").createElement("div",{className:"_2zn2"},h._("Appareil photo")),b("React").createElement("div",{className:"_2zn4"},b("React").createElement("div",{className:"_2zn5"},a.model||"Camera"),b("React").createElement("div",{className:"_2zn6"},c)))};a.prototype.$5=function(){var a=this.props.fullMedia,c="";a.filesize>1e6?c=(a.filesize/1e6).toFixed(2)+"MB":a.filesize>1e3?c=(a.filesize/1e3).toFixed(2)+"KB":a.filesize>0&&(c=a.filesize+"B");var d=a.__typename==="MessageImage"?(a.original_dimensions.x*a.original_dimensions.y/1e6).toFixed(2)+"MP":"";return b("React").createElement("div",{className:"_2zn1"},b("React").createElement("div",{className:"_2zn2"},h._("D\u00e9tails")),b("React").createElement("div",{className:"_2zn4"},b("React").createElement("div",{className:"_2zn5"},a.filename),b("React").createElement("div",{className:"_2zn6"},d+" "+a.original_dimensions.x+" x "+a.original_dimensions.y+" "+c)))};a.prototype.showProfilePic=function(){var a=this.props.fullMedia;if(!a)return b("React").createElement(b("MessengerSpinner.react"),null);else{a=b("MercuryIDs").getParticipantIDFromUserID(a.creator.id);a=b("MercuryParticipants").getNow(a);return a?b("React").createElement(j,{isMessengerUser:a.is_messenger_user,size:k,src:a.big_image_src||a.image_src}):b("React").createElement(b("MessengerSpinner.react"),null)}};a.propTypes={closeInfo:c.func,fullMedia:c.object,infoOpen:c.bool,photoID:c.string,showHeader:c.func};e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{fragments:{fullMedia:function(a){return function(){return{children:[{fieldName:"__typename",kind:"Field",metadata:{isRequisite:!0},type:"String"},{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{children:[{fieldName:"creation_time",kind:"Field",metadata:{},type:"Time"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],fieldName:"creator",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0},type:"Actor"},{fieldName:"filename",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"x",kind:"Field",metadata:{},type:"Float"},{fieldName:"y",kind:"Field",metadata:{},type:"Float"}],fieldName:"original_dimensions",kind:"Field",metadata:{canHaveSubselections:!0},type:"Vect2"},{fieldName:"filesize",kind:"Field",metadata:{},type:"Int"},{children:[{fieldName:"iso",kind:"Field",metadata:{},type:"Int"},{fieldName:"aperture",kind:"Field",metadata:{},type:"String"},{fieldName:"focal_length",kind:"Field",metadata:{},type:"String"},{fieldName:"model",kind:"Field",metadata:{},type:"String"}],fieldName:"exif_data",kind:"Field",metadata:{canHaveSubselections:!0},type:"MessageImageExifData"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageImage",type:"MessageImage"},{children:[{fieldName:"creation_time",kind:"Field",metadata:{},type:"Time"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],fieldName:"creator",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0},type:"Actor"},{fieldName:"filename",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"x",kind:"Field",metadata:{},type:"Float"},{fieldName:"y",kind:"Field",metadata:{},type:"Float"}],fieldName:"original_dimensions",kind:"Field",metadata:{canHaveSubselections:!0},type:"Vect2"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageVideo",type:"MessageVideo"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"MessengerPhotoInfoDialog_FullMediaRelayQL",type:"Node"}}()}}})}),null);
__d("SpotlightMessagesViewerContainerRoute",["react-relay/classic/route/RelayRoute","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("react-relay/classic/route/RelayRoute"));g&&g.prototype;function a(){g.apply(this,arguments)}a.routeName="SpotlightMessagesViewerContainerRoute";a.paramDefinition={photoID:{type:"String",required:!0}};a.queries={fullMedia:function(a){return function(a){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"photoID"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},b("react-relay/classic/query/RelayQL").__frag(a)]),fieldName:"node",kind:"Query",metadata:{isAbstract:!0,identifyingArgName:"id",identifyingArgType:"ID!"},name:"SpotlightMessagesViewerContainerRoute",type:"Node"}}(a.getFragment("fullMedia"))}};e.exports=a}),null);
__d("MessengerPhotoInfoDialogContainer.react",["MessengerPhotoInfoDialog.react","react-relay/classic/container/RelayRootContainer","SpotlightMessagesViewerContainerRoute","React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerPhotoInfoDialogContainer",proptypes:{photoID:a.string.isRequired,showHeader:a.func},render:function(){var a=new(b("SpotlightMessagesViewerContainerRoute"))({photoID:this.props.photoID});return b("React").createElement(b("react-relay/classic/container/RelayRootContainer"),{Component:b("MessengerPhotoInfoDialog.react"),route:a,renderFetched:function(a){return b("React").createElement(b("MessengerPhotoInfoDialog.react"),babelHelpers["extends"]({},a,{closeInfo:this.props.closeInfo,photoID:this.props.photoID,infoOpen:this.props.infoOpen,showHeader:this.props.showHeader}))}.bind(this)})}});e.exports=c}),null);
__d("MessengerPhotoViewBottomBar.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return b("React").createElement("div",{className:"_51an _50-m _16zz"},a.children)};e.exports=a}),null);
__d("MessengerPhotoViewHScroll.react",["cx","Animation","MessengerSharedPhoto.react","React","SphericalPhotoUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings;b("React").PropTypes;var j=200,k=80;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=null,b}a.prototype.componentDidMount=function(){this.$2()};a.prototype.componentDidUpdate=function(){this.$2()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.stop(),this.$1=null};a.prototype.render=function(){__p&&__p();var a=this.props.sharedPhotos;a=a.reduce(function(a,c){var d=c.node.image1===null?c.node.image:c.node.image1,e=c.node.photo_encodings?c.node.photo_encodings.length!==0:!1,f=d.uri;if(e){var g=i(c.node.photo_encodings);g=g.smallThumbnail;f=g||f}d&&a.push(b("React").createElement("div",{className:"_4dy9",key:c.node.legacy_attachment_id},b("React").createElement(b("MessengerSharedPhoto.react"),{className:"_42rl"+(this.props.photoID!==c.node.legacy_attachment_id?" _q1a":""),fbid:c.node.legacy_attachment_id,onClick:this.props.onScroll,uri:f,isSpherical:e})));return a}.bind(this),[]);var c=(this.props.width-k)/2;return b("React").createElement("div",{className:"_463g"},b("React").createElement("div",{className:"_463h",ref:"childContainer"},b("React").createElement("div",{className:"_463j",style:{paddingLeft:c,paddingRight:c},ref:"scrollable"},a)))};a.prototype.$2=function(){var a=this.refs.childContainer?this.refs.childContainer.scrollLeft:0,c=this.props.sharedPhotos.findIndex(function(a){return a.node.legacy_attachment_id===this.props.photoID}.bind(this));c=c*k;this.$1||(this.$1=new(b("Animation"))(this.refs.childContainer));this.$1.from("scrollLeft",a).to("scrollLeft",c).duration(j).go()};e.exports=a}),null);
__d("MessengerPhotoViewHeader.react",["cx","fbt","MessagingForwardingButtonNUX.react","MessengerActions","MessengerPhotoInfoDialogContainer.react","React","SpotlightViewerBottomBarLink","MessengerPhotoViewCloseLink.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$3=function(){this.refs.forwardNUX&&this.refs.forwardNUX.close(),this.props.showForwardDialog&&this.props.showForwardDialog()}.bind(this),b}a.prototype.render=function(){return b("React").createElement("div",{className:"_51an _50-m _3c1i _5l-3",role:"banner"},this.$1(),this.$2())};a.prototype.$2=function(){return b("React").createElement(b("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onClose})};a.prototype.$1=function(){var a=void 0,c=void 0;this.props.disableForward||(a=b("React").createElement(b("SpotlightViewerBottomBarLink"),{className:"_3c1o",onClick:this.$3,ref:"forwardButton"},b("React").createElement("div",{className:"_2msr _3oo2"}),h._("Transf\u00e9rer")),c=b("React").createElement(b("MessagingForwardingButtonNUX.react"),{contextRef:function(){return this.refs.forwardButton}.bind(this),ref:"forwardNUX"},h._("Envoyer cette image \u00e0 d\u2019autres personnes dans des messages s\u00e9par\u00e9s.")));return b("React").createElement("div",{key:"buttonsContainer",ref:"buttons"},b("React").createElement(b("SpotlightViewerBottomBarLink"),{ajaxify:this.props.url,className:"_3c1o",rel:"async"},b("React").createElement("div",{className:"_3ooo _2msr"}),h._("T\u00e9l\u00e9charger")),a,c,b("React").createElement(b("SpotlightViewerBottomBarLink"),{className:"_3c1o",href:"#",onClick:this.props.openInfo,ref:"moreInfo"},b("React").createElement("div",{className:"_3c1k _2msr"}),h._("Infos")))};a.propTypes={disableForward:c.bool,onClose:c.func,openInfo:c.func,photoID:c.string,showForwardDialog:c.func,url:c.object};e.exports=a}),null);
__d("XMessagingVideoAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/video/",{video_id:{type:"String",required:!0},video_container_id:{type:"String",required:!0},width:{type:"Int",required:!0},height:{type:"Int",required:!0},start_muted:{type:"Bool",defaultValue:!1},no_fullscreen:{type:"Bool",defaultValue:!1},load_player_controller:{type:"Bool",defaultValue:!1},hide_controls_on_finish:{type:"Bool",defaultValue:!1},hide_url_menu_option:{type:"Bool",defaultValue:!1},is_share:{type:"Bool",defaultValue:!1},render_play_button:{type:"Bool",defaultValue:!1},start_timestamp:{type:"Int",defaultValue:0}})}),null);
__d("MessengerVideoPlayer.react",["cx","ActorURI","AsyncRequest","BackgroundImage.react","Event","FullScreen","MessengerSpinner.react","React","ShimButton.react","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","Vector","XMessagingVideoAttachmentController","SpotlightMercurySharedMediaViewer.react","SubscriptionsHandler","cssURL","getFullScreenElement","gkx","guid","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i="_ox1";d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(a){__p&&__p();h.constructor.call(this,a),this.$2=!0,this.$3=[],this.$4=-1,this.$5=!1,this.$6=!1,this.state={playerAPI:null,forcePause:!1},this.$10=function(a){if(!b("gkx")("AT59RsD6Oiw6mLCf0aoZOq_3iqj624RxAYXc9aMeKCQhXLf14PDA6oVEBHRx-eSc-flBhEiq2DauG8iOn4NpXhX0rqJcIa4_Rg1Bf-oX75YjPQ")&&!this.props.onClick||!this.isVideoClicked(a))return;a.preventDefault();b("gkx")("AT59RsD6Oiw6mLCf0aoZOq_3iqj624RxAYXc9aMeKCQhXLf14PDA6oVEBHRx-eSc-flBhEiq2DauG8iOn4NpXhX0rqJcIa4_Rg1Bf-oX75YjPQ")&&this.props.isOnStage?(a.stopPropagation(),this.isState(b("VideoPlayerStates").PLAYING)?this.pause(b("VideoPlayerReason").USER):this.play(b("VideoPlayerReason").USER)):(this.pause(b("VideoPlayerReason").USER),this.props.onClick&&this.props.onClick())}.bind(this),this.$11=function(a){if(!this.isRightClick(a))return;a.stopPropagation();a.preventDefault();b("setImmediate")(function(){this.props.onSelect&&this.props.onSelect()}.bind(this))}.bind(this),this.$8=function(){if(!this.$2||this.state.forcePause)return;this.$6&&(this.play(new(b("VideoPlayerReasonTransitionHelper"))(b("VideoPlayerReason").PAGE_VISIBILITY)),this.$6=!1)}.bind(this),this.$7=function(){if(!this.$2||this.state.forcePause||!(this.state.playerAPI&&this.state.playerAPI.isMuted()))return;this.$6=!!this.state.playerAPI&&this.state.playerAPI.isState(b("VideoPlayerStates").PLAYING);this.pause()}.bind(this),this.$1=b("guid")(),this.props.isInThread&&(this.listeners=new(b("SubscriptionsHandler"))(),this.listeners.addSubscriptions(b("Event").listen(window,"blur",this.$7),b("Event").listen(window,"focus",this.$8)))}a.prototype.shouldComponentUpdate=function(a){var c=document.getElementById(this.$1.toString()),d=b("FullScreen").isFullScreen();if(c!=null&&d&&c.children[0].children[0]===b("getFullScreenElement")())return!1;d=!!(a.stageDimensions&&a.stageDimensions!==this.props.stageDimensions);d&&(this.$4=this.getCurrentTimePosition(),this.$5=!this.isState(b("VideoPlayerStates").PLAYING));return!this.props.videoData||a.videoData.id!==this.props.videoData.id||d};a.prototype.UNSAFE_componentWillReceiveProps=function(a){if(!this.$2)return;this.props.isInThread&&a.isVisible!==this.props.isVisible&&(a.isVisible&&!this.state.forcePause?this.play(new(b("VideoPlayerReasonTransitionHelper"))(b("VideoPlayerReason").VIDEO_VISIBILITY)):this.pause())};a.prototype.componentDidMount=function(){this.props.videoData&&this.$9()};a.prototype.componentDidUpdate=function(){this.$3.forEach(function(a){return a.abandon()}),this.$3=[],this.props.videoData&&this.$9()};a.prototype.componentWillUnmount=function(){this.pause(b("VideoPlayerReason").UNLOADED),this.seek(0),this.$3.forEach(function(a){return a.abandon()}),this.listeners&&this.listeners.release(),this.state.playerAPI&&this.state.playerAPI.detachRootNode(),this.state.playerAPI&&this.state.playerAPI.destroy&&this.state.playerAPI.destroy()};a.prototype.isVideoLoaded=function(){var a=!!this.state.playerAPI;a||!1;return this.isState(b("VideoPlayerStates").FALLBACK)?!1:a};a.prototype.isVideoClicked=function(a){return a.target instanceof HTMLElement?a.target.classList.contains(i):!1};a.prototype.isRightClick=function(a){a=a||window.event;return a.button===2};a.prototype.play=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.play(a)};a.prototype.pause=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.pause(a)};a.prototype.seek=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.seek(a)};a.prototype.getCurrentTimePosition=function(){return this.isVideoLoaded()&&this.state.playerAPI?this.state.playerAPI.getCurrentTimePosition():-1};a.prototype.render=function(){var a=this.props.videoData,c=b("React").createElement("div",{ref:"placeholder"},b("React").createElement(b("MessengerSpinner.react"),{color:"blue",size:b("MessengerSpinner.react").large_size})),d={};if(a&&a.url){var e=a.original_dimensions;d.backgroundImage=b("cssURL")(a.url);c=b("React").createElement("div",{ref:"placeholder"},b("React").createElement(b("BackgroundImage.react"),{className:this.props.className,width:e.x,height:e.y,loadingIndicatorStyle:"large",backgroundSize:"cover",ref:"placeholder",style:d,src:a.url}))}return b("React").createElement(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_4-od"),id:this.$1,onClick:this.$10,onMouseDown:this.$11,style:d},c)};a.prototype.$9=function(){__p&&__p();var a=this.props.videoData;if(a){var c=a.original_dimensions;this.props.stageDimensions&&(c=b("SpotlightMercurySharedMediaViewer.react").getImageDimensionsForStage(new(b("Vector"))(a.original_dimensions.x,a.original_dimensions.y),this.props.stageDimensions));c=b("XMessagingVideoAttachmentController").getURIBuilder().setString("video_id",a.legacy_attachment_id).setString("video_container_id",this.$1).setInt("width",c.x).setInt("height",c.y).setInt("start_timestamp",this.$4>0?Math.round(this.$4):0).setBool("start_muted",a.start_muted).setBool("no_fullscreen",a.no_fullscreen).setBool("load_player_controller",!0).setBool("hide_controls_on_finish",a.hide_controls_on_finish).setBool("hide_url_menu_option",Boolean(a.hide_url_menu_option)).setBool("is_share",a.is_share).setBool("render_play_button",this.props.isInThread).getURI();a=this.props.attachment;a&&a.metadata&&a.metadata.pageid&&(c=b("ActorURI").create(c,a.metadata.pageid));a=new(b("AsyncRequest"))();this.$3.push(a);a.setMethod("GET").setStatusElement(this.refs.placeholder).setURI(c).setRelativeTo(this).setReadOnly(!0).setHandler(function(a){}).send()}};a.prototype.$12=function(){this.props.isVisible&&this.isState(b("VideoPlayerStates").FINISHED)?(this.seek(0),this.play(b("VideoPlayerReason").LOOP)):this.props.isVisible&&this.isState(b("VideoPlayerStates").PAUSED)&&!this.$6?this.setState({forcePause:!0}):this.isState(b("VideoPlayerStates").PLAYING)&&this.setState({forcePause:!1})};a.prototype.onVideoLoaded=function(){if(!this.$2)return;this.state.playerAPI&&this.state.playerAPI.addListener("stateChange",function(){return this.$12()}.bind(this));this.props.isVisible&&!this.$5&&!this.state.forcePause?this.play(b("VideoPlayerReason").AUTOPLAY):this.pause();this.$4=-1;this.$5=!1};a.prototype.isState=function(a){return!!(this.state.playerAPI&&this.state.playerAPI.isState(a))};a.propTypes={attachment:c.object,className:c.string,isInThread:c.bool,isVisible:c.bool,isOnStage:c.bool,stageDimensions:c.instanceOf(b("Vector")),videoData:c.object,onClick:c.func,onSelect:c.func};a.invokeVideoLoaded=function(a,c,d){a.$2=d,c.setAllowCrossPageTransition(!0),c.isState(b("VideoPlayerStates").LOADING)?a.stateChangeListener=c.addListener("stateChange",function(){if(!c.isState(b("VideoPlayerStates").LOADING)){if(a.state&&a.state.playerAPI)return;a.setState({playerAPI:c},a.onVideoLoaded);a.stateChangeListener&&a.stateChangeListener.remove()}}):a.setState({playerAPI:c},a.onVideoLoaded)};e.exports=a}),null);
__d("MessagingForwardAttachmentDialog.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MessagingForwardAttachmentDialogImpl.react").__setRef("MessagingForwardAttachmentDialog.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("SpotlightMessagesViewerPagers.react",["cx","LeftRight.react","Link.react","React"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return b("React").createElement(b("LeftRight.react"),null,b("React").createElement(b("Link.react"),{className:"_322u"+(a.disablePrevArrow?"":" _2bbb")+" _50-m"},b("React").createElement("div",{className:(a.disablePrevArrow?"":"_4ksl")+(a.disablePrevArrow?"":" _4ksm")})),b("React").createElement(b("Link.react"),{className:"_322u"+(a.disableNextArrow?"":" _2bbc")+" _50-m"},b("React").createElement("div",{className:(a.disableNextArrow?"":"_4ksl")+(a.disableNextArrow?"":" _4kso")})))};e.exports=a}),null);
__d("XMessagingPhotoDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/photo/",{photo_id:{type:"String",required:!0}})}),null);
__d("XMessagingShareAttachmentDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/share/dialog/",{__asyncDialog:{type:"Int"}})}),null);
__d("SpotlightMercurySharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","AsyncDialog","AsyncRequest","BootloadedComponent.react","ChatPhotoViewFooterHScroll.react","ChatPhotoViewHeader.react","Event","FunnelLogger","JSResource","KeyEventController","MessagingForwardAttachmentDialog.react","MessengerPhotoInfoDialogContainer.react","MessengerThreadSharedMediaHelper","MessengerVideoPlayer.react","Parent","PhotoUtils","React","SpotlightViewer","SpotlightViewerImage","SpotlightMessagesViewerPagers.react","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","XMessagingShareAttachmentDialogController"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;a=b("React").PropTypes;var l=88,m=30,n="WWW_MESSENGER_SHARE_TO_FB_FUNNEL",o="_4-og";c=babelHelpers.inherits(p,b("React").Component);k=c&&c.prototype;function p(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.$1=undefined,this.$2=[],this.state={hasPrevPage:!1,hasNextPage:!1,firstPhotoLoaded:!1,isLoading:!1,mediaData:[],numberInOneBatch:m,photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},this.$11=function(){return!this.state.photoData?null:b("React").createElement(b("ChatPhotoViewFooterHScroll.react"),{onScroll:this.$18,photoID:this.state.photoData.node.id,sharedPhotos:this.state.mediaData,updateNumberInOneBatch:this.$19,width:this.state.stageDimensions.x})}.bind(this),this.$19=function(a){this.setState({numberInOneBatch:a})}.bind(this),this.$18=function(a){if(!this.state.mediaData||this.state.isLoading)return;var b=this.state.mediaData.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=this.state.mediaData[b];this.setState({photoData:c});this.$22(b)}.bind(this),this.$5=function(a,event){__p&&__p();if(this.state.photoData==null||this.state.isLoading)return;if(event&&!!b("Parent").bySelector(event.target,"._170l"))return;event&&event.target instanceof HTMLElement&&event.target.className===o&&this.$10();var c=this.state.mediaData.findIndex(function(a){this.state.photoData!=null||j(0);return a.node.legacy_attachment_id===this.state.photoData.node.legacy_attachment_id}.bind(this));if(c<0||c===this.state.mediaData.length-1&&!this.state.hasNextPage&&a)return;if(c===0&&!a){this.setState({isLoading:!0},function(){return this.$7(this.state.photoData,1,function(b){if(b===0)return;this.$5(a)}.bind(this))}.bind(this));return}var d=a?this.state.mediaData[c+1]:this.state.mediaData[c-1];this.setState({photoData:d});this.$22(c)}.bind(this),this.$10=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView()}.bind(this),this.$16=function(){this.setState({showForward:!0})}.bind(this),this.$20=function(){this.setState({showForward:!1})}.bind(this),this.$15=function(){this.setState({showInfo:!0})}.bind(this),this.$21=function(){this.setState({showInfo:!1})}.bind(this),this.$17=function(){this.setState({showForward:!1,showInfo:!1});b("FunnelLogger").appendAction(n,"click");var a=this.state.photoData;if(!this.$14()||!(a&&a.node))return;a=a.node.legacy_attachment_id;var c=b("XMessagingShareAttachmentDialogController").getURIBuilder().getURI();c=new(b("AsyncRequest"))(c).setData({attachment_id:a}).setMethod("POST");b("AsyncDialog").send(c)}.bind(this),this.$23=function(a,b,c){__p&&__p();var d=Object.keys(a)[0];a=a[d].message_shared_media;d=a.page_info;var e=a.edges.length;if(e!==0){var f=this.state.mediaData;switch(b){case 0:this.setState({photoData:a.edges[0],mediaData:[a.edges[0]],firstPhotoLoaded:!0});break;case 1:f=f.concat(a.edges);this.setState({hasNextPage:d.has_next_page,mediaData:f});break;case-1:f=a.edges;f=f.concat(this.state.mediaData);this.setState({mediaData:f,hasPrevPage:d.has_previous_page});break}}this.setState({isLoading:!1});c(e)}.bind(this),this.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-l);return a},c}p.prototype.getDefaultProps=function(){return{enableShareToFB:!1}};p.prototype.componentDidMount=function(){this.setState({isLoading:!0,stageDimensions:this.$3()},function(){return this.$4(this.props.photoID)}.bind(this)),this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){this.setState({stageDimensions:this.$3()})}.bind(this)),b("KeyEventController").registerKey("LEFT",function(){this.$5(!1);return!1}.bind(this)),b("KeyEventController").registerKey("RIGHT",function(){this.$5(!0);return!1}.bind(this))),this.props.enableShareToFB&&b("FunnelLogger").startFunnel(n)};p.prototype.UNSAFE_componentWillUpdate=function(a,b){b.firstPhotoLoaded!==this.state.firstPhotoLoaded&&this.setState({isLoading:!0},function(){this.$6(b.photoData,b.numberInOneBatch,function(){}),this.$7(b.photoData,b.numberInOneBatch,function(){})}.bind(this)),b.numberInOneBatch!=this.state.numberInOneBatch&&!b.isLoading&&this.setState({isLoading:!0},function(){return this.$6(b.mediaData[b.mediaData.length-1],b.numberInOneBatch,function(){})}.bind(this))};p.prototype.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};p.prototype.render=function(){var a=this.$8(),c=this.state.stageDimensions,d=this.state.isLoading||this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var e=this.state.mediaData.findIndex(function(a){this.state.photoData!=null||j(0);return a.node.id===this.state.photoData.node.id}.bind(this));e=b("React").createElement("div",null,this.$9(),this.props.disablepaging?null:b("React").createElement(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:e<=0&&!this.state.hasPrevPage,disableNextArrow:!this.state.hasNextPage&&e>=this.state.mediaData.length-1}));return b("React").createElement("span",null,b("React").createElement(b("SpotlightViewer"),{className:"_53vs",onHide:this.$10,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName},b("React").createElement(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:a,onClick:this.$5,ref:"viewport",showLoadingIndicator:d,stageDimensions:c,useWidth:!0},e),this.$11()),this.$12(),this.$13())};p.prototype.$9=function(){if(!this.state.photoData)return null;var a=this.state.photoData;a=a.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return b("React").createElement(b("ChatPhotoViewHeader.react"),{disableForward:this.props.disableForward,enableShareToFB:this.$14(),onClose:this.$10,openInfo:this.$15,ref:"photoviewheader",showForwardDialog:this.$16,showShareDialog:this.$17,url:a})};p.prototype.$12=function(){if(!this.state.photoData)return null;var a=i._("Transf\u00e9rer dans des messages s\u00e9par\u00e9s");return b("React").createElement(b("MessagingForwardAttachmentDialog.react"),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$20,shown:this.state.showForward,title:a})};p.prototype.$13=function(){return this.state.showInfo?b("React").createElement(b("MessengerPhotoInfoDialogContainer.react"),{closeInfo:this.$21,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):b("React").createElement("xhp",null)};p.prototype.$14=function(){var a=this.state.photoData;return!a?!1:!!this.props.enableShareToFB&&a.node.__typename==="MessageImage"&&a.node.image1.uri.indexOf(".gif")<0};p.prototype.$22=function(a){var b=this.state.numberInOneBatch,c=this.state.mediaData;a<=b/2?this.setState({isLoading:!0},function(){return this.$7(c[0],b,function(){})}.bind(this)):a>=c.length-b/2&&this.state.hasNextPage&&this.setState({isLoading:!0},function(){return this.$6(c[c.length-1],b,function(){})}.bind(this))};p.prototype.$4=function(a){a=b("MessengerThreadSharedMediaHelper").search(this.props.threadID,String(a),function(a){return this.$23(a,0,function(){})}.bind(this));this.$2.push(a)};p.prototype.$6=function(a,c,d){a=b("MessengerThreadSharedMediaHelper").loadMorePrevious(this.props.threadID,a.cursor,c||1,function(a){return this.$23(a,1,d)}.bind(this));this.$2.push(a)};p.prototype.$7=function(a,c,d){a=a?a.cursor:null;a=b("MessengerThreadSharedMediaHelper").loadMoreLatest(this.props.threadID,a,c||1,function(a){return this.$23(a,-1,d)}.bind(this));this.$2.push(a)};p.prototype.$8=function(){__p&&__p();if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$24();var c=this.state.stageDimensions,d=this.$25(a,c);if(!d)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$26(a.legacy_attachment_id,d,a.photo_encodings,c);a=p.getImageDimensionsForStage(new(b("Vector"))(d.width,d.height),c);return this.$27(d,a)}else return null};p.prototype.$24=function(){return this.state.photoData?b("React").createElement(b("MessengerVideoPlayer.react"),{isOnStage:!0,isVisible:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};p.prototype.$27=function(a,c){return b("React").createElement(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};p.prototype.$26=function(a,c,d,e){return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMercurySharedMediaViewer.react"),bootloadPlaceholder:b("React").createElement("div",null),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};p.prototype.$25=function(a,c){var d=null;a=b("PhotoUtils").getImagesFromData(a);a=a.sort(function(a,b){return b.width-a.width});window.devicePixelRatio&&window.devicePixelRatio>1&&(c=new(b("Vector"))(c.x*window.devicePixelRatio,c.y*window.devicePixelRatio));for(var e=0;e<a.length;e++)(!d||a[e].width>=c.x||a[e].height>=c.y)&&(d=a[e]);return d};p.propTypes={disableForward:a.bool,enableShareToFB:a.bool,onClosePhotoView:a.func,photoID:a.string,rootClassName:a.string,threadID:a.string};p.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};e.exports=p}),null);
__d("SpotlightMessengerSharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","BootloadedComponent.react","JSResource","MessengerPhotoViewHScroll.react","Event","KeyEventController","MessengerForwardAttachmentDialogReact.bs","MessengerPhotoInfoDialogContainer.react","MessengerPhotoViewHeader.react","MessengerSharedMediaActions","MessengerVideoPlayer.react","Parent","PhotoUtils","React","SpotlightViewer","SpotlightViewerImage","SpotlightMessagesViewerPagers.react","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","MessengerPhotoViewBottomBar.react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("MessengerForwardAttachmentDialogReact.bs").jsComponent;a=b("React").PropTypes;var m=88,n=80,o=30,p="_4-og";c=babelHelpers.inherits(q,b("React").Component);k=c&&c.prototype;function q(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.$1=undefined,this.$2=[],this.state={photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},this.$14=function(a){if(!this.props.sharedMedia)return;var b=this.props.sharedMedia.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=this.props.sharedMedia[b];this.setState({photoData:c});this.$17(b)}.bind(this),this.$4=function(a,event){__p&&__p();if(this.state.photoData==null)return;var c=this.state.photoData;if(event&&!!b("Parent").bySelector(event.target,"._170l"))return;event&&event.target instanceof HTMLElement&&event.target.className===p&&this.$7();var d=this.props.sharedMedia.findIndex(function(a){return a.node.legacy_attachment_id===c.node.legacy_attachment_id});if(d<0||d===this.props.sharedMedia.length-1&&!this.props.hasNextPage&&a)return;if(d===0&&!a){b("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,this.props.sharedMedia[0].cursor,o);return}a=a?this.props.sharedMedia[d+1]:this.props.sharedMedia[d-1];this.setState({photoData:a});this.$17(d)}.bind(this),this.$7=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView()}.bind(this),this.$12=function(){this.setState({showForward:!0})}.bind(this),this.$15=function(){this.setState({showForward:!1})}.bind(this),this.$11=function(){this.setState({showInfo:!0})}.bind(this),this.$16=function(){this.setState({showInfo:!1})}.bind(this),c}q.prototype.componentDidMount=function(){__p&&__p();var a=this.props.sharedMedia.find(function(a){return a.node.legacy_attachment_id===this.props.photoID}.bind(this));this.setState({photoData:a,stageDimensions:this.$3()});this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){this.setState({stageDimensions:this.$3()})}.bind(this)),b("KeyEventController").registerKey("LEFT",function(){this.$4(!1);return!1}.bind(this)),b("KeyEventController").registerKey("RIGHT",function(){this.$4(!0);return!1}.bind(this)))};q.prototype.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};q.prototype.render=function(){var a=this.$5(),c=this.state.stageDimensions,d=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var e=this.props.sharedMedia.findIndex(function(a){this.state.photoData!=null||j(0);return a.node.id===this.state.photoData.node.id}.bind(this));e=b("React").createElement("div",null,this.$6(),this.props.disablepaging?null:b("React").createElement(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:e<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&e>=this.props.sharedMedia.length-1}));return b("React").createElement("span",null,b("React").createElement(b("SpotlightViewer"),{className:"_53vs",onHide:this.$7,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName},b("React").createElement(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:a,onClick:this.$4,ref:"viewport",showLoadingIndicator:d,stageDimensions:c,useWidth:!0},e),this.$8()),this.$9(),this.$10())};q.prototype.$6=function(){if(!this.state.photoData)return null;var a=this.state.photoData.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return b("React").createElement(b("MessengerPhotoViewHeader.react"),{disableForward:this.props.disableForward,onClose:this.$7,openInfo:this.$11,photoID:this.props.photoID,ref:"photoviewheader",showForwardDialog:this.$12,url:a})};q.prototype.$13=function(a){return a?Math.ceil(a/n):o};q.prototype.$8=function(){if(!this.state.photoData)return null;var a=this.state.photoData,c=b("React").createElement("button",{className:"_2n5b",onClick:function(){return this.props.openAlbum(a.node.legacy_attachment_id)}.bind(this),type:"button"},b("React").createElement("div",{className:"_3por"}));return b("React").createElement(b("MessengerPhotoViewBottomBar.react"),null,b("React").createElement(b("MessengerPhotoViewHScroll.react"),{onScroll:this.$14,photoID:a.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),c)};q.prototype.$9=function(){if(!this.state.photoData||this.props.disableForward)return null;var a=i._("Transf\u00e9rer dans des messages s\u00e9par\u00e9s");return b("React").createElement(l,{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$15,shown:this.state.showForward,title:a})};q.prototype.$10=function(){return this.state.showInfo?b("React").createElement(b("MessengerPhotoInfoDialogContainer.react"),{closeInfo:this.$16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):b("React").createElement("xhp",null)};q.prototype.$17=function(a){var c=this.$13(this.state.stageDimensions.x),d=this.props.sharedMedia;a<=c/2?(b("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,d[0].cursor,c),d.length<c&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)):a>=d.length-c/2&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)};q.prototype.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-m);return a};q.prototype.$5=function(){__p&&__p();if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$18();var c=this.state.stageDimensions,d=this.$19(a,c);if(!d)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$20(a.legacy_attachment_id,d,a.photo_encodings,c);a=q.getImageDimensionsForStage(new(b("Vector"))(d.width,d.height),c);return this.$21(d,a)}else return null};q.prototype.$18=function(){return this.state.photoData?b("React").createElement(b("MessengerVideoPlayer.react"),{isVisible:!0,isOnStage:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};q.prototype.$21=function(a,c){return b("React").createElement(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};q.prototype.$20=function(a,c,d,e){return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMessengerSharedMediaViewer.react"),bootloadPlaceholder:b("React").createElement("div",null),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};q.prototype.$19=function(a,c){c=b("PhotoUtils").getImagesFromData(a);return c[c.length-1]};q.propTypes={disableForward:a.bool,hasPrevPage:a.bool,hasNextPage:a.bool,onClosePhotoView:a.func,openAlbum:a.func,photoID:a.string,rootClassName:a.string,threadID:a.string,sharedMedia:a.arrayOf(a.object)};q.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};e.exports=q}),null);
__d("SpotlightMessengerSharedMediaViewerContainer.react",["FluxContainer","MessengerSharedMediaStore","MessengerSharedMediaActions","React","SpotlightMessengerSharedMediaViewer.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MessengerSharedMediaStore")]};a.calculateState=function(a,c){a=b("MessengerSharedMediaStore").getState();var d=a.sharedMedia.get(c.threadID);a=a.isLoading.get(c.threadID);return{sharedMedia:d,isLoading:a}};a.prototype.componentDidMount=function(){b("MessengerSharedMediaActions").loadCurrent(this.props.threadID,this.props.photoID)};a.prototype.render=function(){if(!this.state.sharedMedia)return null;var a=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(a){return a.node.legacy_attachment_id===this.props.photoID}.bind(this));return!a?null:b("React").createElement(b("SpotlightMessengerSharedMediaViewer.react"),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID})};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessengerThreadSharedPhotos.react",["cx","MessengerSharedPhotosAlbumViewContainer.react","React","SpotlightViewer","SpotlightMessengerSharedMediaViewerContainer.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={photoView:this.props.findFBID,albumView:""},this.$3=function(a){this.setState({albumView:a,photoView:""})}.bind(this),this.$4=function(){this.setState({albumView:""})}.bind(this),this.$5=function(a){this.setState({albumView:"",photoView:a})}.bind(this),this.$6=function(){this.setState({photoView:""})}.bind(this),this.$7=function(a){this.setState({photoView:a})}.bind(this),b}a.prototype.componentDidUpdate=function(){!this.state.photoView&&!this.state.albumView&&this.props.onCloseSharedPhotos()};a.prototype.render=function(){var a=this.state.photoView?this.$1():null,c=this.state.albumView?this.$2():null;return b("React").createElement("div",null,c,a)};a.prototype.$1=function(){return b("React").createElement(b("SpotlightMessengerSharedMediaViewerContainer.react"),{disableForward:!1,onClosePhotoView:this.$6,openAlbum:this.$3,photoID:this.state.photoView,rootClassName:"",threadID:this.props.threadFBID})};a.prototype.$2=function(){return b("React").createElement(b("SpotlightViewer"),{className:"_3ode",onHide:this.$4,open:!0,ref:"spotlightViewer"},b("React").createElement(b("MessengerSharedPhotosAlbumViewContainer.react"),{onClick:this.$5,onCloseSharedPhotos:this.props.onCloseSharedPhotos,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}))};a.propTypes={findFBID:c.string,onCloseSharedPhotos:c.func,threadFBID:c.string};e.exports=a}),null);
__d("MessengerThreadSharedPhotosReact.bs",["ReasonReact.bs","MessengerThreadSharedPhotos.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadSharedPhotos.react"),{findFBID:a,onCloseSharedPhotos:c,threadFBID:d},e)}f.make=a}),null);
__d("MessengerVideoPlayerReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerVideoPlayer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){return b("ReasonReact.bs").wrapJsForReason(b("MessengerVideoPlayer.react"),{attachment:b("bs_js_null_undefined").from_opt(a),className:b("bs_js_null_undefined").from_opt(c),isInThread:b("Utils.bs").optionBoolToNullUndefinedBoolean(d),isVisible:b("Utils.bs").optionBoolToNullUndefinedBoolean(e),isOnStage:b("Utils.bs").optionBoolToNullUndefinedBoolean(f),stageDimensions:b("bs_js_null_undefined").from_opt(g),videoData:h,onClick:b("bs_js_null_undefined").from_opt(i),onSelect:b("bs_js_null_undefined").from_opt(j)},k)}f.make=a}),null);
__d("MessengerVideoReact.bs",["cx","ix","bs_curry","React","Utils.bs","ImageReact.bs","bs_js_boolean","bs_pervasives","ReasonReact.bs","joinClasses","bs_js_primitive","MessengerPhotoReact.bs","MessengerVideoPlayerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerVideo");function j(a){__p&&__p();var c=!0,d=!0,e=!1;a=a.metadata;var f;if(a==null)f=1;else if(b("Utils.bs").isDefined(a.fbid)){var g=+(window.screen.width>1800)&&b("Utils.bs").isDefined(a.large_size)&&b("Utils.bs").isDefined(a.large_preview),h=a.fbid,i=g!==0?a.large_size:a.inbox_size;i=i==null?{x:0,y:0}:{x:i.width,y:i.height};g=g!==0?a.large_preview:a.inbox_preview;return{legacy_attachment_id:h,original_dimensions:i,start_muted:c,hide_controls_on_finish:d,url:g,is_share:e}}else f=1;if(f===1)return{legacy_attachment_id:null,original_dimensions:null,start_muted:c,hide_controls_on_finish:d,url:null,is_share:e}}function k(a){var c=a%60,d=+(c<10);return b("bs_pervasives").string_of_int(a/60|0)+(":"+((d!==0?"0":"")+b("bs_pervasives").string_of_int(c)))}function a(a,c,d,e,f,g,l,m){__p&&__p();var n=a?a[0]:"",o=function(){var a=c.metadata,d=c.media;d=a==null?d==null?0:b("bs_js_primitive").null_undefined_to_opt(d.duration):b("bs_js_primitive").null_undefined_to_opt(a.duration);if(d)return k(d[0]);else return null},p=function(){if(g)return b("bs_curry")._1(g[0],c);else return 0},q=function(a){var e=a.legacy_attachment_id;if(b("Utils.bs").isDefined(e))return[b("ReasonReact.bs").element(0,0,b("MessengerVideoPlayerReact.bs").make([c],[b("joinClasses")(n,"_ccq","_4tsk","_3o67",b("bs_js_boolean").to_js_boolean(d)?"_52mr":"",b("bs_js_boolean").to_js_boolean(d)?"_1byr":"")],[1],f,0,0,a,[p],l,[]))];else return 0};m=i.slice();m[9]=function(){var a=j(c);a=q(a);if(a)return a[0];else return b("ReasonReact.bs").element(0,0,b("MessengerPhotoReact.bs").make([b("joinClasses")(n,"_ccq")],c,d,0,e,g,[b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["_ccr"],0,[h("27983")],0,0,0,0,[])),b("React").createElement("span",{className:"_ccs"},o(0))]))};return m}c=1800;f.component=i;f.large_window_width=c;f.constructVideoData=j;f.formatDuration=k;f.make=a}),null);
__d("MessengerXMATextBlock.react",["cx","LineClamp.react","React","ShimButton.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=26;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.url&&window.open(this.props.url)}.bind(this),b}a.prototype.render=function(){if(!this.props)return b("React").createElement("div",{className:"__6j"});var a=this.props.width?{maxWidth:this.props.width-i,textAlign:"left"}:{textAlign:"left"},c={textDecoration:"none"};return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"__6j _43kk"),style:a},b("React").createElement(b("ShimButton.react"),{form:"link",onClick:this.$1,style:c},this.renderTitle(),this.renderDescription(),this.renderSource()))};a.prototype.renderTitle=function(){return!this.props.title?null:b("React").createElement("div",{className:"__6k"},b("React").createElement(b("LineClamp.react"),{lines:2,lineHeight:16},this.props.title))};a.prototype.renderDescription=function(){return!this.props.description?null:b("React").createElement("div",{className:"__6l"},b("React").createElement(b("LineClamp.react"),{lines:2,lineHeight:15},this.props.description))};a.prototype.renderSource=function(){return!this.props.source?null:b("React").createElement("div",{className:"__6m"},b("React").createElement(b("LineClamp.react"),{lines:1,lineHeight:14},this.props.source))};a.propTypes={className:c.string,description:c.string,source:c.string,title:c.string,url:c.string,width:c.number};e.exports=a}),null);
__d("MessengerXMATextBlockReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerXMATextBlock.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h){return b("ReasonReact.bs").wrapJsForReason(b("MessengerXMATextBlock.react"),{className:b("bs_js_null_undefined").from_opt(a),description:b("bs_js_null_undefined").from_opt(c),source:b("bs_js_null_undefined").from_opt(d),title:b("bs_js_null_undefined").from_opt(e),url:b("bs_js_null_undefined").from_opt(f),width:b("bs_js_null_undefined").from_opt(g)},h)}f.make=a}),null);
__d("MessengerVideoXMAReact.bs",["cx","React","Utils.bs","ReasonReact.bs","joinClasses","bs_js_primitive","MessengerVideoPlayerReact.bs","MessengerXMATextBlockReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerVideoXMA");function i(a){__p&&__p();if(a==null)return null;else{var b=a.width>a.height?a.width:a.height,c=+(window.screen.width>1800);c=c!==0?640:450;if(b<=c)return{x:a.width,y:a.height};else{c=c/b;b=a.width*c|0;a=a.height*c|0;return{x:b,y:a}}}}function j(a){__p&&__p();var c=a.media;a=a.target;if(c==null)return 0;else if(a==null)return 0;else if(b("Utils.bs").isDefined(c.image_size)&&b("Utils.bs").isDefined(a.video_id)){var d=c.image_size;return[{legacy_attachment_id:a.video_id,original_dimensions:i(d),start_muted:!0,hide_controls_on_finish:!0,url:c.image,is_share:!0}]}else return 0}function a(a,c,d,e,f){__p&&__p();var g=a?a[0]:"",i=function(a){if(a)return b("ReasonReact.bs").element(0,0,b("MessengerVideoPlayerReact.bs").make([c],[b("joinClasses")(g,"_ccq","_4tsk","_3o67","_52mr","_1byr")],[1],d,0,0,a[0],0,e,[]));else return null},k=function(a){return b("ReasonReact.bs").element(0,0,b("MessengerXMATextBlockReact.bs").make(["_2f5n _4br2 _29ew _3dug"],b("bs_js_primitive").null_undefined_to_opt(c.description),b("bs_js_primitive").null_undefined_to_opt(c.source),b("bs_js_primitive").null_undefined_to_opt(c.video_title),b("bs_js_primitive").null_undefined_to_opt(c.uri),a?[a[0].x]:0,[]))};f=h.slice();f[9]=function(){var a=j(c),d=i(a);return b("React").createElement("div",{className:"_3duc"},d,k(a?b("bs_js_primitive").null_undefined_to_opt(a[0].original_dimensions):0))};return f}c=640;d=450;e=1800;f.large_preview_dim=c;f.thumbinail_inbox_dim=d;f.large_window_width=e;f.component=h;f.adjustSize=i;f.constructVideoData=j;f.make=a}),null);
__d("MessengerPhotosGroupReact.bs",["cx","URI","bs_list","bs_array","bs_block","bs_curry","React","Utils.bs","ActorURI","bs_caml_array","bs_js_boolean","MercuryIDs","bs_pervasives","ReasonReact.bs","joinClasses","bs_js_primitive","bs_caml_primitive","bs_js_null_undefined","MessagesViewerSetID","MessengerPhotoReact.bs","MessengerVideoReact.bs","MercuryAttachmentType","getPageIDFromThreadID","MessagingGiftWrapReact.bs","MessengerVideoXMAReact.bs","bs_caml_builtin_exceptions","ChatSpeakingStickerReact.bs","MercuryAttachmentPayload.bs","MessengerAttachmentViewer","MessagingFlowerBorderReact.bs","MessengerThreadSharedPhotosReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="empty-spacer",i=b("ReasonReact.bs").reducerComponent("MessengerPhotosGroup");function j(a,c,d,e,f,g,j,k,l,m,n,o,p,q,r){__p&&__p();var s=d?d[0]:"",t=function(a){a=a.length;var c=+(a===2||a===4);return b("joinClasses")(s,"_2n8h",b("bs_js_boolean").to_js_boolean(+(a===1))?"_2n8i":"",b("bs_js_boolean").to_js_boolean(c)?"_4ksk":"",b("bs_js_boolean").to_js_boolean(+(a>1)&&1-c)?"_2n8k":"","_5fk1")},u=function(){__p&&__p();if(m){var a=m[0],c=a.thread_fbid;if(c==null)return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id);else{var d=+(b("bs_caml_primitive").caml_string_compare(c,"")===0);if(d!==0)return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id);else return c}}else return null},v=function(a,c){var d=u(0);c=c.metadata;c=c==null?null:c.fbid;return b("ReasonReact.bs").element(0,0,b("MessengerThreadSharedPhotosReact.bs").make(c,function(){return b("bs_curry")._1(a[3],0)},d,[]))},w=function(d,f,g,i){__p&&__p();var m=b("Utils.bs").isDefined(f.deduplication_key),p=f.metadata;if(m!==0)m=f.deduplication_key;else if(p==null)m=f.upload_id;else{p=p.fbid;m=p==null?null:p}p=b("Utils.bs").$pipe$unknown(m==null?0:[m],"");var r;if(!g&&!b("Utils.bs").isSomeTrue(j)){var s=f.metadata;m=0;if(s==null)m=1;else if(b("Utils.bs").isDefined(s.fbid)){g=1-b("Utils.bs").isDefined(f.app_attribution);r=g!==0?[function(a){return b("bs_curry")._1(d[3],[a])}]:[function(c){__p&&__p();var d=s;c=c;if(b("Utils.bs").isTruthy(c.preview_uploading))return 0;else if(c.attach_type===b("MercuryAttachmentType").VIDEO){var f=d.dimensions;f=f==null?{x:null,y:null}:{x:f.width,y:f.height};b("MessengerAttachmentViewer").renderVideo({pageID:b("bs_js_null_undefined").from_opt(q),rootClassName:"_1j1h",videoID:d.fbid,videoSize:f,videoURI:c.url});return 0}else if(c.attach_type===b("MercuryAttachmentType").PHOTO||c.attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER||c.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE){f=+(a.length===1);var g=c.url;if(!b("Utils.bs").isSomeTrue(k)&&c.attach_type===b("MercuryAttachmentType").PHOTO&&e!==0){var h=u(0),i=+(e===[1]);h=new(b("URI"))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:h,image_id:d.fbid});h=q?new(b("ActorURI").create)(h,q[0]):h;h=[b("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD,h,i]}else h=[null,g,f];b("MessengerAttachmentViewer").bootstrapWithConfig({actorid:b("bs_js_null_undefined").from_opt(q),dimensions:d.dimensions,disableForward:b("bs_js_boolean").to_js_boolean(+(q!==0)),disablePaging:b("bs_js_boolean").to_js_boolean(h[2]),endpoint:h[1],fbid:d.fbid,rootClassName:"_1j1h",setID:h[0],snapToPhoto:!0,src:c.preview_url});return 0}else if(b("Utils.bs").isDefined(c.uri))return window.open(c.uri);else return 0}]}else m=1;if(m===1){g=b("Utils.bs").isDefined(f.uri);if(g!==0){var t=f.uri;r=[function(){return window.open(t)}]}else r=0}}else r=0;m=b("Utils.bs").$pipe$unknown(c,f.attach_type);if(m===b("MercuryAttachmentType").PHOTO||m===b("MercuryAttachmentType").ANIMATED_IMAGE||m===b("MercuryAttachmentType").THIRDPARTYSTICKER)return b("ReasonReact.bs").element([p],0,b("MessengerPhotoReact.bs").make(0,f,i,l,n,r,[]));else if(m===b("MercuryAttachmentType").VIDEO){g=f.metadata;var v;if(g==null)v=1;else if(b("Utils.bs").isTruthy(g.render_as_sticker)){g=g.dimensions;g=g==null?{height:null,width:null}:{height:g.height,width:g.width};var w=f.url;return b("ReasonReact.bs").element(0,0,b("ChatSpeakingStickerReact.bs").make(w,g,[]))}else v=1;if(v===1)if(b("Utils.bs").isSomeTrue(k))return b("ReasonReact.bs").element([p],0,b("MessengerVideoXMAReact.bs").make(0,f,l,o,[]));else return b("ReasonReact.bs").element([p],0,b("MessengerVideoReact.bs").make(0,f,i,n,l,r,o,[]))}else if(m===h){w={className:"_4tsk _4rf-"};g=b("bs_js_primitive").null_undefined_to_opt(f.key);g&&(w.key=g[0]);return b("React").createElement("div",w)}else throw[b("bs_caml_builtin_exceptions").invalid_argument,m+" is not handled by MessengerPhotosGroup"]},x=function(c,a,d){__p&&__p();if(a.length===1)return w(c,b("bs_caml_array").caml_array_get(a,0),d,1);else{var e=+(a.length===2||a.length===4),f=e!==0?2:3;e=0;var g=[0],i=a.length;while(g[0]<i){var j=b("bs_caml_primitive").caml_int_min(f,i-g[0]|0);j=b("bs_array").init(f,function(e){return function(j){var i=+(j<e);if(i!==0)return w(c,b("bs_caml_array").caml_array_get(a,g[0]+j|0),d,0);else{i="ghost"+b("bs_pervasives").string_of_int(f-j|0);j=b("MercuryAttachmentPayload.bs").create(h,[i],new(b("URI"))(""));return w(c,j,d,0)}}}(j));e=[b("React").createElement("div",{key:b("bs_pervasives").string_of_int(g[0]),className:"_2n8g"},j),e];g[0]=g[0]+f|0}return b("bs_array").of_list(b("bs_list").rev(e))}};r=i.slice();r[4]=function(){b("MessengerAttachmentViewer").preload();return 0};r[9]=function(c){var d=m?b("Utils.bs").isDefined(b("getPageIDFromThreadID")(m[0].thread_id)):0;d=x(c,a,d);var e=b("Utils.bs").isSomeTrue(g);e=e!==0?b("React").createElement("div",undefined,d):d;d=c[1][0];c=d?v(c,d[0]):null;d=b("Utils.bs").isSomeTrue(g);var h=b("Utils.bs").isSomeTrue(f);return b("React").createElement("div",{className:t(a),tabIndex:0},c,e,d!==0?b("ReasonReact.bs").element(0,0,b("MessagingGiftWrapReact.bs").make(0,p,[])):null,h!==0?b("ReasonReact.bs").element(0,0,b("MessagingFlowerBorderReact.bs").make(-10,[])):null)};r[10]=function(){return[0]};r[12]=function(c,a){if(c)return b("bs_block").__(0,[[[c[0]]]]);else return b("bs_block").__(0,[[0]])};return r}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.attachments,b("bs_js_primitive").null_undefined_to_opt(a.attachType),b("bs_js_primitive").null_undefined_to_opt(a.className),a.count,b("Utils.bs").nullUndefinedBooleanToOptionBool(a.hasFlowerBorder),b("Utils.bs").nullUndefinedBooleanToOptionBool(a.isGiftWrapped),b("Utils.bs").nullUndefinedBooleanToOptionBool(a.isPageMessage),b("Utils.bs").nullUndefinedBooleanToOptionBool(a.isXMA),b("Utils.bs").nullUndefinedBooleanToOptionBool(a.isVisible),b("bs_js_primitive").null_undefined_to_opt(a.message),b("bs_js_primitive").null_undefined_to_opt(a.onAttachmentLoad),b("bs_js_primitive").null_undefined_to_opt(a.onSelect),b("bs_js_primitive").null_undefined_to_opt(a.onUnwrap),b("bs_js_primitive").null_undefined_to_opt(a.pageID),[])});f.empty_spacer_type=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerPhotosGroup.react",["MessengerPhotosGroupReact.bs"],(function(a,b,c,d,e,f){"use strict";a=b("MessengerPhotosGroupReact.bs").jsComponent;e.exports=a}),null);
__d("MessengerStickerUtils",["MercuryAttachmentType"],(function(a,b,c,d,e,f){"use strict";function g(a){return!!(a&&a.attach_type===b("MercuryAttachmentType").STICKER)}function h(a){var b=a.attachments;return!!(a.is_like_preview||a.sticker_id||b&&b.length===1&&g(b[0]))}function a(a){return a.size===1&&h(a.first())}e.exports={isStickerMessageGroup:a,isStickerMessage:h,isStickerAttachment:g}}),null);
__d("MessengerVoiceClipAttachment.react",["cx","MercuryAttachmentAudioClip.react","MercuryShareAttachmentRenderLocations","MessagingGiftWrap.react","MessagingFlowerBorder.react","React","messengerCustomColorUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props.attachment,c=a.metadata.duration/1e3,d=!!a.app_attribution,e={};this.props.customColor&&(e=b("messengerCustomColorUtils").customBubbleStyle(this.props.customColor,e));var f=this.props.isGiftWrapped?b("React").createElement(b("MessagingGiftWrap.react"),{onUnwrap:this.props.onUnwrap}):null,g=this.props.hasFlowerBorder?b("React").createElement(b("MessagingFlowerBorder.react"),{offset:-10}):null;return b("React").createElement("div",{className:"_hh7 _s1-"+(this.props.customColor?" _5sxi":"")+(d?"":" _52mr")+(d?" _mxz":"")+" _1fz8"+(d?" _1-wa":"")+" _1nqp",style:e},b("React").createElement(b("MercuryAttachmentAudioClip.react"),{customColor:this.props.customColor,src:a.url,duration:c,key:"audio:"+this.props.message.message_id,showHelp:!1,width:200,location:b("MercuryShareAttachmentRenderLocations").MESSENGER,rootClassName:"_3czg"+(d?" _4yjw":"")+" _2poz _ui9"}),f,g)};function a(){h.apply(this,arguments)}a.propTypes={attachment:c.object.isRequired,customColor:c.string,isGiftWrapped:c.bool,message:c.object.isRequired,onUnwrap:c.func};e.exports=a}),null);
__d("XStickerInTrayController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/in_tray/",{pack_id:{type:"Int",required:!0}})}),null);
__d("StickersPackInTray",["Promise","AsyncRequest","react-relay/classic/query/RelayQL","react-relay/classic/store/RelayStore","XStickerInTrayController","react-relay/classic/query/createRelayQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={onIsPackInTray:function(a,c,d){__p&&__p();c=b("react-relay/classic/query/createRelayQuery")(function(){return{children:[{children:[{calls:[{kind:"Call",metadata:{type:"StickerInterfaces"},name:"interface",value:{kind:"CallVariable",callVariableName:"stickerInterface"}},{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallValue",callValue:1e4}}],children:[{children:[{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"}],fieldName:"node",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:!0},type:"StickerPack"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"PacksInTrayEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:!0,isGenerated:!0,isRequisite:!0},type:"PageInfo"}],fieldName:"tray_packs",kind:"Field",metadata:{canHaveSubselections:!0,isConnection:!0},type:"PacksInTrayConnection"}],fieldName:"sticker_store",kind:"Field",metadata:{canHaveSubselections:!0},type:"StickerStore"}],fieldName:"viewer",kind:"Query",metadata:{},name:"StickersPackInTray",type:"Viewer"}}(),{stickerInterface:c});var e=b("react-relay/classic/store/RelayStore").readQuery(c);e=e&&e.length>0?e[0]:null;if(e&&e.sticker_store&&e.sticker_store.tray_packs&&e.sticker_store.tray_packs.edges)return new(b("Promise"))(function(b,c){return b({in_sticker_tray:e.sticker_store.tray_packs.edges.filter(function(b){return b.node.id===a}).length>0})}).then(d);var f=b("XStickerInTrayController").getURIBuilder().setInt("pack_id",a).getURI();return new(b("Promise"))(function(a,c){return new(b("AsyncRequest"))(f).setHandler(function(b){return a(b.getPayload())}).setAllowCrossPageTransition(!0).send()}).then(d)}};e.exports=a}),null);
__d("StickersStateStore",["FluxReduceStore","immutable","StickersActions","StickersConfig","StickersDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxReduceStore"));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.__moduleID=e.id,b}a.prototype.getInitialState=function(){return b("immutable").Map({recentStickers:[],recentStickersLoaded:!1,showFlyout:!1,storePackID:null,threadID:null,trayLoaded:!1,trayPackID:null})};a.prototype.reduce=function(a,c){__p&&__p();var d=c;c=b("StickersActions").Types;switch(d.type){case c.ADD_RECENT_STICKER:var e=[d.sticker];a.get("recentStickers").forEach(function(a){if(a.id===d.sticker.id)return;e.push(a)});return a.set("recentStickers",e.splice(0,b("StickersConfig").max_mru_stickers));case c.HIDE_FLYOUT:return a.set("showFlyout",!1);case c.LOAD_RECENT_STICKERS:return a.set("recentStickersLoaded",!0).set("recentStickers",d.stickers);case c.SELECT_STORE_PACK:return a.set("storePackID",d.packID);case c.SELECT_TRAY_PACK:return a.set("trayPackID",d.packID).set("trayLoaded",!0);case c.SHOW_FLYOUT:return a.set("showFlyout",!0).set("threadID",d.threadID);case c.TRAY_LOADED:return a.set("trayLoaded",!0);default:return a}};e.exports=new a(b("StickersDispatcher"))}),null);
__d("StickersStoreController",["cx","Bootloader","DialogFitHeight","DOM","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","PureStoreBasedStateMixin","React","ReactDOM","StickersActions","StickersDispatcher","StickersStateStore","XUIDialog.react","XUIDialogBody.react","XUISpinner.react","isSocialPlugin","requestAnimationFrame"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=688,i=320,j=null,k=b("React").createClass({displayName:"StoreLayer",mixins:[b("PureStoreBasedStateMixin")(b("StickersStateStore"))],propTypes:{isComposer:a.bool,onToggle:a.func.isRequired,shown:a.bool.isRequired},getDefaultProps:function(){return{isComposer:!1}},statics:{calculateState:function(){return{packID:b("StickersStateStore").getState().get("storePackID")}}},getInitialState:function(){return{renderStore:function(){return b("React").createElement("div",{className:"_5r5e"},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"}))}}},UNSAFE_componentWillMount:function(){b("StickersDispatcher").explicitlyRegisterStores([b("StickersStateStore")])},shouldComponentUpdate:function(a){return!!a.shown},componentDidMount:function(){b("Bootloader").loadModules(["StickersStore.react","react-relay/classic/container/RelayRootContainer","StickersStorePackListRoute","StickersStorePackDetailRoute"],function(a,c,d,e){this.setState({renderStore:function(){var f=this.state.packID?new e({packID:this.state.packID}):new d();return b("React").createElement(c,{Component:a,route:f,renderFetched:function(c){return b("React").createElement(a,babelHelpers["extends"]({},c,{isComposer:this.props.isComposer,packID:this.state.packID,shown:this.props.shown}))}.bind(this)})}.bind(this)})}.bind(this),"StickersStoreController")},_onToggle:function(a){b("requestAnimationFrame")(function(){return this.props.onToggle(a)}.bind(this))},render:function(){var a=b("isSocialPlugin")()&&document.body.offsetWidth<h?i:h;return b("React").createElement(b("XUIDialog.react"),{behaviors:{DialogFitHeight:b("DialogFitHeight"),LayerAutoFocus:b("LayerAutoFocus"),LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")},onToggle:this._onToggle,shown:this.props.shown,width:a},b("React").createElement(b("XUIDialogBody.react"),{className:"_5rq- autofocus"},this.state.renderStore()))}}),l=function(a){j||(j=b("DOM").create("div"),b("DOM").appendContent(document.body,j)),b("ReactDOM").render(b("React").createElement(k,{isComposer:a,onToggle:n,shown:!0}),j)},m=function(){if(!j)return;b("ReactDOM").render(b("React").createElement(k,{shown:!1,onToggle:n}),j)},n=function(a){a?l():m()};c={showStore:function(a,c){b("StickersActions").selectStorePack(a),l(!!c)}};e.exports=c}),null);
__d("isRetina",[],(function(a,b,c,d,e,f){"use strict";e.exports=function(){return(window.devicePixelRatio||1)>1}}),null);
__d("MessengerAttachmentRenderer",["cx","EmojiSticker.react","MercuryAttachment","MercuryAttachmentType","MercuryAudioType","MercuryIDs","MercuryShareAttachment.react","MercuryShareAttachmentRenderLocations","MessagingFlowerBorder.react","MessagingFlowerBorderChecker","MessagingGiftWrap.react","MessagingGiftWrapChecker","MessengerErrorAttachment.react","MessengerFileAttachment.react","MessengerFromViewerUtils","MessengerHotLikePreview.react","MessengerHotLikeUtils","MessengerPhotosGroup.react","MessengerStickerUtils","MessengerSupportedEmojiUtils","MessengerVoiceClipAttachment.react","MessengerWebDriverTestIDs","React","Sticker.react","StickerAssetType","StickerConstants","StickerInterfaces","StickerUtils","StickersActions","StickersPackInTray","StickersStoreController","StoryAttachmentStyle","XStickerAssetController","idx","isRetina","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=700,i="sticker:",j="giftwrap:",k="share:",l="_1c_u",m="_3o6m",n=function(a){return a===Object(a)};a={getAttachmentsInsideBubble:function(a,c){var d=b("MercuryAttachment").get(a).filter(n).filter(function(a){return!this.attachmentShouldAppearOutsideBubble(a)}.bind(this));return this._getAttachmentComponents(d,a,c)},getAttachmentsOutsideBubble:function(a,c,d,e){var f=b("MercuryAttachment").get(a).filter(n).filter(function(a){return this.attachmentShouldAppearOutsideBubble(a)}.bind(this));return this._getAttachmentComponents(f,a,c,d,e)},_getAttachmentComponents:function(a,c,d,e,f){var g=this._getPhotosGroup(a.filter(b("MercuryAttachment").isPhotoGroupAttachment),c,d,e);a=a.filter(function(a){return!b("MercuryAttachment").isPhotoGroupAttachment(a)}).map(function(a){return this._getAttachmentComponent(a,c,d,e,f)}.bind(this));g&&a.push(g);return a},_getAttachmentComponent:function(a,c,d,e,f){__p&&__p();var g=e&&e.customColor,h=e&&e.onUnwrap,i=e&&e.isVisible,j=e&&e.isFromViewer,k=e&&e.isPageMessage;e=e&&e.onSelect;if(b("MessengerStickerUtils").isStickerAttachment(a))return this._getStickerComponent(a,c,g,h);if(this.isEmojiLikeAttachment(a))return this._getEmojiLikeAttachment(a,c,h);if(this.isVoiceClip(a))return this._getVoiceClip(a,c,g,h);if(this.isFileAttchment(a))return this._getFileComponent(a,c);if(this.isP2P(a)||this.isShareAttachment(a))return this._getShareAttachment(a,c,d,i,j,k,e,f);return this.isErrorAttachment(a)?this._getErrorAttachment(a,c):null},_getStickerComponent:function(a,c,d,e){__p&&__p();if(c.is_like_preview)return this._maybeGiftWrapSticker(b("React").createElement(b("MessengerHotLikePreview.react"),{customColor:d,customLike:c.customLike,key:"hlp:"+c.like_preview_since,since:c.like_preview_since}),c,e);a=a.metadata;if(!a){a=b("MessengerHotLikeUtils").getMetadataForHotLike(c.sticker_id);if(!a){a={};var f=b("StickerUtils").getScaledDimensions(b("StickerConstants").THREAD_SIZE,b("StickerConstants").THREAD_SIZE,b("StickerConstants").THREAD_SIZE),g=f.height;f=f.width;a.height=g;a.width=f}a.stickerID=c.sticker_id}g=b("XStickerAssetController").getURIBuilder().setInt("sticker_id",a.stickerID);f=null;var h=null;b("isRetina")()?(f=a.paddedSpriteURI2x,h=a.spriteURI2x):(f=a.paddedSpriteURI,h=a.spriteURI);var j=a.stickerID.toString();d=b("React").createElement(b("Sticker.react"),{accessibilityLabel:a.accessibilityLabel,className:"_2poz _ui9"+(b("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(c)&&!!b("MessengerHotLikeUtils").getMetadataForHotLike(j)?" _4ue_":""),animationTrigger:"hover",customColor:d,frameCount:a.frameCount||1,frameRate:a.frameRate||b("StickerConstants").DEFAULT_FRAME_RATE,framesPerCol:a.framesPerCol||1,framesPerRow:a.framesPerRow||1,key:i+c.message_id,onStickerClick:function(d,a){b("StickersPackInTray").onIsPackInTray(d,b("StickerInterfaces").MESSAGES,function(a){a.in_sticker_tray?(b("StickersActions").selectTrayPack(d),b("StickersActions").showStickerFlyout(c.thread_id)):b("StickersStoreController").showStore(d)})},packID:a.packID&&a.packID.toString(),paddedSpriteURI:f,sourceHeight:a.height,sourceURI:g.setEnum("image_type",b("StickerAssetType").IMAGE).getURI().toString(),sourceWidth:a.width,spriteURI:h,stickerID:j,testID:b("MessengerWebDriverTestIDs").STICKER});return this._maybeGiftWrapSticker(d,c,e)},_getEmojiLikeAttachment:function(a,c,d){var e=b("MessengerSupportedEmojiUtils").transferSize(a.size);e=b("MessengerSupportedEmojiUtils").getNewEmojiData(c.body,e);var f=e?e.emoji:undefined;if(!e)return this._getErrorAttachment(a,c);e=b("React").createElement(b("EmojiSticker.react"),{className:"_2poz _ui9",key:i+c.message_id,emoji:c.body,emojiImage:f,sourceURI:""});return this._maybeGiftWrapSticker(e,c,d)},_getShareAttachment:function(a,c,d,e,f,g,i,j){var l,m,n=null;c&&c.platform_xmd&&(n=JSON.parse(c.platform_xmd));l=(l=a)!=null?(l=l.share)!=null?(l=l.messenger_ctas)!=null?(l=l[0])!=null?l.page_id:l:l:l:l;m=(m=a)!=null?(m=m.share)!=null?(m=m.target)!=null?(m=m.items)!=null?(m=m[0])!=null?(m=m.call_to_actions)!=null?(m=m[0])!=null?m.page_id:m:m:m:m:m:m:m;l=l||m;m=l?b("MercuryIDs").getParticipantIDFromUserID(l):c.author;return b("React").createElement(b("MercuryShareAttachment.react"),{attachment:a.share,isFromViewer:f,isPageMessage:g,isSponsored:c.is_sponsored,isVisible:!!e,key:k+c.message_id,location:b("MercuryShareAttachmentRenderLocations").MESSENGER,maxWidth:h,messageID:c.message_id,mnMessageType:n&&n.template_type,onComponentLoaded:d,onSelect:i,pageID:m,threadID:c.thread_id,afterDecorators:j})},_getVoiceClip:function(a,c,d,e){d=b("MessengerFromViewerUtils").isFromViewer(c)?d||undefined:undefined;return b("React").createElement(b("MessengerVoiceClipAttachment.react"),{attachment:a,customColor:d,isGiftWrapped:b("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(c),hasFlowerBorder:b("MessagingFlowerBorderChecker").shouldRenderWithFlowerBorder(c),key:"audio:"+c.message_id,message:c,onUnwrap:function(b){function a(){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(){e&&e()})})},_getErrorAttachment:function(a,c){return b("React").createElement(b("MessengerErrorAttachment.react"),{attachment:a,key:"error:"+c.message_id})},_getPhotosGroup:function(a,c,d,e){__p&&__p();if(!a.length)return null;var f=e&&e.onUnwrap;d=e&&e.isVisible;var g=e&&e.onSelect,h=e&&e.isPageMessage;e=e&&e.pageID;var i=b("MessagingFlowerBorderChecker").shouldRenderWithFlowerBorder(c),j=b("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(c)&&this._rendersWithoutAttribution(a);return b("React").createElement(b("MessengerPhotosGroup.react"),{attachments:a,className:"_2poz _52mr _ui9",count:a.length,hasFlowerBorder:i,isGiftWrapped:j,isPageMessage:h,isVisible:!!d,key:"photos:"+c.message_id,message:c,onSelect:g,onUnwrap:function(b){function a(){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(){f&&f()}),pageID:e})},getVideoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(l);return a&&a.length?a[0]:b},getSphericalPhotoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(m);return a&&a.length?a[0]:b},_rendersWithoutAttribution:function(a){return a.length!=1||!b("MercuryAttachment").hasAttribution(a[0])},_getFileComponent:function(a,c){return b("React").createElement(b("MessengerFileAttachment.react"),{attachment:a,className:"_2poz",key:"file:"+a.url})},attachmentShouldAppearOutsideBubble:function(a){return b("MessengerStickerUtils").isStickerAttachment(a)||b("MercuryAttachment").isPhotoGroupAttachment(a)||this.isShareAttachment(a)||this.isP2P(a)||this.isVoiceClip(a)||this.isErrorAttachment(a)||this.isEmojiLikeAttachment(a)},isPhotosGroupAttachment:function(a){a=a.props.attachments;return!!a&&a.length>1&&a.some(function(a){return!!a&&b("MercuryAttachment").isPhotoGroupAttachment(a)})},isRenderedShareAttachment:function(a){return!!(a.key&&a.key.startsWith(k))},isFileAttchment:function(a){return a.attach_type===b("MercuryAttachmentType").FILE},isShareAttachment:function(a){return!!(this._isStoryBased(a)&&!this.isP2P(a)&&(a.share.style_list.indexOf(b("StoryAttachmentStyle").SHARE)>-1||a.share.style_list.indexOf(b("StoryAttachmentStyle").FALLBACK)>-1))},isSharedVideoAttachment:function(a){a=a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.subattachments&&a.share.subattachments[0];return!!(a&&a.target&&a.target.video_id)},isP2P:function(a){return!!(this._isStoryBased(a)&&a.share.style_list.indexOf(b("StoryAttachmentStyle").ORION)>-1)},_isStoryBased:function(a){return!!(a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list)},isEmojiLikeAttachment:function(a){return a.attach_type===b("MercuryAttachmentType").EMOJI_LIKE},isVoiceClip:function(a){a=a.metadata;return!!a&&(!!a.isAudio||a.type===b("MercuryAudioType").AudioClip||a.type===b("MercuryAudioType").VoiceMessageWithTranscript)},isVoiceClipAttachment:function(a){a=b("MercuryAttachment").get(a).filter(n).filter(function(a){return this.isVoiceClip(a)}.bind(this));return!!a.length},isP2PAttachment:function(a){a=b("MercuryAttachment").get(a).filter(function(a){return n(a)&&this.isP2P(a)}.bind(this));return!!a.length},isSingleVideoAttachment:function(a){a=b("MercuryAttachment").get(a).filter(n).filter(function(a){return b("MercuryAttachment").isVideoAttachment(a)});return a.length===1},isSharedVideoAttachmentMessage:function(a){a=b("MercuryAttachment").get(a).filter(n).filter(function(a){return this.isSharedVideoAttachment(a)||this.isGenieSharedVideoAttachment(a)}.bind(this));return a.length===1},isGenieSharedVideoAttachment:function(a){return!!(a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list.indexOf(b("StoryAttachmentStyle").GENIE_MESSAGE)>-1&&a.share.target&&a.share.target.attachment&&this.isSharedVideoAttachment(a.share.target.attachment))},isSingleSphericalPhotoAttachment:function(a){a=b("MercuryAttachment").get(a).filter(n);if(a.length!==1)return!1;a=a.filter(function(a){return a.photo_encodings&&a.photo_encodings.length!==0}).length===1;return a},isErrorAttachment:function(a){return a.attach_type===b("MercuryAttachmentType").ERROR},_maybeGiftWrapComponentForMessage:function(a,c,d){var e=b("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(c),f=b("MessagingFlowerBorderChecker").shouldRenderWithFlowerBorder(c);return!e&&!f?a:b("React").createElement("div",{key:j+c.message_id},a,e?b("React").createElement(b("MessagingGiftWrap.react"),{onUnwrap:b("wrapNullableForReact")(d)}):null,f?b("React").createElement(b("MessagingFlowerBorder.react"),{offset:-10}):null)},_maybeGiftWrapSticker:function(a,c,d){var e=b("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(c),f=b("MessagingFlowerBorderChecker").shouldRenderWithFlowerBorder(c);return!e&&!f?a:b("React").createElement("div",{key:j+c.message_id},a,e?b("React").createElement(b("MessagingGiftWrap.react"),{isSticker:!0,onUnwrap:b("wrapNullableForReact")(d)}):null,f?b("React").createElement(b("MessagingFlowerBorder.react"),{offset:-10}):null)}};e.exports=a}),null);
__d("MessengerCodePasteUtils",["cx","BanzaiODS","MessengerBubble.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/`{3,}/;function a(a){return!!(a&&a.search(h)!==-1&&a.split("\n").length>1)}function c(a,c,d,e,f){__p&&__p();a=a.split(h);var g=[];for(var i=0;i<a.length;i+=2){var j=a[i].trim();j&&j.length>0&&g.push(b("React").createElement(b("MessengerBubble.react"),{key:i,body:j,customColor:e||undefined,className:"clearfix _3058 _ui9",isFromViewer:f,ranges:c,threadID:d}));if(i+1<a.length&&a[i+1]){j=a[i+1].split("\n");var k=j[0].replace(/[^a-zA-Z]+/g,"");j=j.slice(1).join("\n");b("BanzaiODS").bumpEntityKey("messenger_code_paste","render_bubble");g.push(b("React").createElement("div",{key:i+1,className:"_3058 _wu0 _52mr"},b("React").createElement("div",{ref:"syntaxTarget"+i,className:"language-"+k},j)))}}return g}e.exports={containsCodeBlock:a,getCodeAndMessageBubbles:c}}),null);
__d("MNRTCCallabilityStore",["MessengerDispatcher","RTCCallabilityStore"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("RTCCallabilityStore"))(b("MessengerDispatcher"))}),null);
__d("shouldNotRenderSegoe",["MessengerConfig","UserAgent"],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("[\u0530-\u05f4\u10a0-\u10ff]"),h=b("UserAgent").isBrowser("Chrome")&&b("UserAgent").isPlatform("Windows 10");e.exports=function(a){return!b("MessengerConfig").SegoeUIDisabled&&h&&g.test(a)}}),null);
__d("MessengerBubble.react",["cx","fbt","invariant","EmojiOnlyMessage.react","immutable","ImmutableObject","MercuryIDs","MercuryMessageBody.react","MessengerCodeBubble.react","MercuryMessageRenderLocations","MessengerActions","MessengerContactActions.bs","MessengerDecorator","MessengerSupportedEmojiUtils","React","SimpleXUIDialog","joinClasses","shouldNotRenderSegoe"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MessengerContactActions.bs").actions;c=b("React").PropTypes;f=babelHelpers.inherits(a,b("React").PureComponent);j=f&&f.prototype;function a(){__p&&__p();var a,c;for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];return c=(a=j.constructor).call.apply(a,[this].concat(f)),this.state={emojis:undefined},this.$1=function(a,c,e){__p&&__p();switch(a){case k.MESSAGE:this.$2(c,e);break;case k.PROFILE:a=b("MercuryIDs").getParticipantIDFromUserID(c.id);a=this.props.participants&&this.props.participants.get(a);a&&a.href?window.open(a.href):this.$2(c,e);break;case k.FREE_CALL:d(["FBRTCCore","MNRTCCallabilityStore"],function(a,d){var e=c.id;e||i(0);a.isAvailableForWebrtcCalling(e)||d.isCallable(e)?a.startOutgoingCall(e,"messenger_dot_com",!1):b("SimpleXUIDialog").show(h._("{firstname} est injoignable pour le moment.",[h._param("firstname",c.contactName)]),h._("Impossible de connecter l\u2019appel"))});break}}.bind(this),c}a.prototype.componentDidMount=function(){if(!this.props.emojis){var a=this.props.body||"";a=b("MessengerSupportedEmojiUtils").getEmojiOnlyContents(a);a&&a.length&&this.setState({emojis:a})}};a.prototype.render=function(){var a=!1,c=null;this.state.emojis?c=b("React").createElement(b("EmojiOnlyMessage.react"),{contents:this.state.emojis}):(a=!0,c=b("React").createElement(b("MercuryMessageBody.react"),{ref:this.props.bodyRef,body:this.props.body,className:"_3oh-"+(b("shouldNotRenderSegoe")(this.props.body||"")?" _2por":"")+" _58nk",threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges,metaRanges:this.props.metaRanges,plainText:this.props.plainText,threadID:this.props.threadID,customLike:this.props.customLike,onContactSelect:this.$1,renderLocation:b("MercuryMessageRenderLocations").MESSENGER}));var d=[],e=[],f=this.props.message,g=!!this.props.isFromViewer;f&&!this.props.excludeAfterDecorators&&(b("MessengerDecorator").getInsideDecorators().concat(b("MessengerDecorator").getAfterDecorators()).forEach(function(a){a.check(f)&&(d.push(a.render(f,g,this.props)),e.push(a.getAdditionalClassNames()))}.bind(this)),b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(f)&&e.push(a.getAdditionalClassNames())}));var h=e.join(" "),i=null;this.props.body&&(this.props.containsCode?i=b("React").createElement(b("MessengerCodeBubble.react"),babelHelpers["extends"]({},this.props,{attachments:this.props.attachments,body:this.props.body,customColor:this.props.customColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges||[],threadID:this.props.threadID||""})):i=b("React").createElement("div",{className:"_aok"},c,this.props.attachments));return b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(h,this.props.className,(this.props.containsCode?"":"_hh7")+(!this.props.isFromViewer&&this.props.containsCode?" _65sp":"")+(this.props.isFromViewer&&this.props.containsCode?" _65sq":"")+(this.props.containsCode?"":" _s1-")+(!this.props.containsCode&&!this.props.notBubblish?" _52mr":"")+(!this.props.containsCode&&this.props.isP2PAttachment?" _4z55":"")+(!this.props.containsCode&&!!this.state.emojis?" _2f5r":"")+(!this.props.containsCode&&!!this.state.emojis?" _581a":"")+(this.props.isFromViewer&&!this.state.emojis&&!this.props.containsCode?" _43by":"")+(!this.props.containsCode&&a?" _3oh-":""))}),i,i?null:c,i?null:this.props.attachments,d)};a.prototype.$2=function(a,c){c&&c.preventDefault();c=b("MercuryIDs").getThreadIDFromUserID(a.id);c&&b("MessengerActions").selectThread(c)};a.propTypes={attachments:c.instanceOf(b("immutable").List),body:c.string,customColor:c.string,customLike:c.object,excludeAfterDecorators:c.bool,isFromViewer:c.bool,message:c.instanceOf(b("ImmutableObject")),metaRanges:c.array,notBubblish:c.bool,onUnwrap:c.func,participants:c.object,plainText:c.bool,ranges:c.array,threadID:c.string,threadCustomColor:c.string};e.exports=a}),null);
__d("MessengerCodeBubble.react",["Bootloader","immutable","MessengerCodePasteUtils","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.componentDidMount=function(){b("Bootloader").loadModules(["Prism.Complete"],function(a){for(var c in this.refs){var d=b("ReactDOM").findDOMNode(this.refs[c]);a.highlightElement(d)}}.bind(this),"MessengerCodeBubble.react")};a.prototype.render=function(){var a=b("MessengerCodePasteUtils").getCodeAndMessageBubbles(this.props.body,this.props.ranges,this.props.threadID,this.props.customColor,this.props.isFromViewer);return b("React").createElement("div",{className:this.props.className},a)};function a(){g.apply(this,arguments)}a.propTypes={attachments:c.instanceOf(b("immutable").List),body:c.string.isRequired,customColor:c.string,isFromViewer:c.bool.isRequired,ranges:c.array.isRequired,threadID:c.string.isRequired};e.exports=a}),null);
__d("MessengerDesktopNotificationPermissions",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",DENIED:"denied",GRANTED:"granted"});e.exports=a}),null);
__d("MessengerDesktopNotifications",["MessengerDesktopNotificationPermissions","Run","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5e3,h=new Map();function a(){h.forEach(function(a,b,c){a.close&&a.close()})}c={_closeTimer:null,isSupported:function(){return!!window.Notification},checkPermission:function(){if(window.Notification)return window.Notification.permission},hasDefaultSound:function(){return b("UserAgent").isBrowser("FireFox")&&b("UserAgent").isPlatform("Mac OS X")},isDenied:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED},isGranted:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").GRANTED},requestPermission:function(a){window.Notification&&window.Notification.requestPermission(a)},showNotification:function(a){__p&&__p();if(this.isGranted()){var c=window.Notification?new window.Notification(a.title,{body:a.body,icon:a.icon,tag:a.tag,silent:a.silent}):{};h.set(a.tag,c);c.onclick=function(){b("WorkplaceChatHelper").isDesktopChatApp()&&b("WorkplaceChatHelper").showWindow(),a.onClick};c.onclose=function(){h["delete"](a.tag)};this._closeTimer=setTimeout(function(){c.close()},a.closeTime||g);return c}else return null}};b("Run").onUnload(a);e.exports=c}),null);
__d("ComposedEntityMutability",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MUTABLE:0,IMMUTABLE:1,SEGMENTED:2})}),null);
__d("MessengerConstants",[],(function(a,b,c,d,e,f){"use strict";a={NEW_THREAD_KEY:"new",BROWSER_EXTENSIONS_DIALOG_DIMENSIONS:{HEIGHT:604,WIDTH:405}};e.exports=a}),null);
__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","ComposedEntityMutabilityToName","ComposedEntityTypeToName","DraftEntityInstance","EditorState","MessengerConstants","SelectionState","decodeBlocks","encodeBlocks","mapObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("CacheStorage"))("localstorage"),h=b("ComposedEntityMutability").IMMUTABLE,i=void 0;a={get:function(a){__p&&__p();if(!a)return this._getEmptyEditorState();if(a===b("MessengerConstants").NEW_THREAD_KEY)return i||this._getEmptyEditorState();a=g.get(a,!1);if(!a)return this._getEmptyEditorState();var c=a.encodedBlocks,d=b("mapObject")(c.entityMap,function(a,c){return new(b("DraftEntityInstance"))({type:b("ComposedEntityTypeToName")[a.type],mutability:b("ComposedEntityMutabilityToName")[h],data:a.data})});c=b("decodeBlocks")(c.blocks,d);d=b("EditorState").createWithContent(c);return b("EditorState").acceptSelection(d,new(b("SelectionState"))(a.selection))},set:function(a,c){if(a===b("MessengerConstants").NEW_THREAD_KEY){i=c;return}var d=b("encodeBlocks")(c.getCurrentContent());c=c.getSelection().toJS();g.set(a,{encodedBlocks:d,selection:c})},_getEmptyEditorState:function(){var a=b("EditorState").createEmpty();return b("EditorState").forceSelection(a,a.getSelection())}};e.exports=a}),null);
__d("MessengerPresenceStatusUtils",["fbt","AvailableListConstants","CurrentUser","LastActiveTimes","MercuryIDs","PresenceStatus"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getStatusFromCanonicalThread:function(a,c){__p&&__p();var d=null;if(c&&c.is_canonical){a=a.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id));if(a){c=void 0;a.is_messenger_user?c=b("CurrentUser").isWorkUser()?g._("Workplace Chat"):g._("Messenger"):c=b("CurrentUser").isWorkUser()?g._("Workplace"):g._("Facebook");var e=b("PresenceStatus").get(a.fbid),f=void 0,h=void 0;e!==b("AvailableListConstants").ACTIVE&&(f=b("LastActiveTimes").get(a.fbid),h=b("LastActiveTimes").getShortDisplay(a.fbid));d={contact:a,platform:c,isUserActive:e===b("AvailableListConstants").ACTIVE,lastActiveTS:f,lastActive:h}}}return d}};e.exports=a}),null);
__d("MessagingThreadEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTIVE:"active",INACTIVE:"inactive"})}),null);
__d("MessagingThreadSourceName",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_NUB:"chat_nub",MESSENGER:"messenger"})}),null);
__d("MessengerLoggerUtils",["MercuryIDs","MessagingThreadEventType","MessagingThreadEventTypedLogger","MessagingThreadSourceName","ScriptPath","pageID"],(function(a,b,c,d,e,f){a={logThreadChangeEvent:function(a,c,d,e){d.activeThreadID&&a&&this.log({activeThreadID:d.activeThreadID,event:b("MessagingThreadEventType").INACTIVE,clientEventTimeMs:c,activeTimeMs:c-a}),e.activeThreadID&&this.log({activeThreadID:e.activeThreadID,event:b("MessagingThreadEventType").ACTIVE,clientEventTimeMs:c,activeTimeMs:0})},log:function(a){var c=b("MercuryIDs").tokenize(a.activeThreadID.toString()),d=b("ScriptPath").getPageInfo();new(b("MessagingThreadEventTypedLogger"))().setEvent(a.event).setClientEventTimeMs(a.clientEventTimeMs).setActiveTimeMs(a.activeTimeMs).setPageID(b("pageID")).setPageData(d?d.extraData:{}).setThreadID(c.value).setSource(b("MessagingThreadSourceName").MESSENGER).log()}};e.exports=a}),null);
__d("MessengerURIStore",["MessengerActions","MessengerLoggerUtils","MessengerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$MessengerURIStore1={activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null,threadIDs:null},this.$MessengerURIStore2=babelHelpers["extends"]({},this.$MessengerURIStore1),this.$MessengerURIStore4=this.$MessengerURIStore3=null}a.prototype.getState=function(){return this.$MessengerURIStore1};a.prototype.getPrevState=function(){return this.$MessengerURIStore2};a.prototype.__onDispatch=function(a){switch(a.type){case b("MessengerActions").Types.REPLACE_STATE:this.$MessengerURIStore2=this.$MessengerURIStore1;this.$MessengerURIStore4=this.$MessengerURIStore3;this.$MessengerURIStore1=babelHelpers["extends"]({activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null,threadsIDs:null},a.nextState);a=Date.now();this.$MessengerURIStore3=a;b("MessengerLoggerUtils").logThreadChangeEvent(this.$MessengerURIStore4,a,this.$MessengerURIStore2,this.$MessengerURIStore1);this.emitChange();break}};e.exports=new a()}),null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null});a={Types:g,addToken:function(a){b("MessengerDispatcher").dispatch({type:g.ADD_TOKEN,entry:a})},moveDraftToNextThread:function(a){b("MessengerDispatcher").dispatch({type:g.MOVE_DRAFT,threadID:a})},removeToken:function(a){b("MessengerDispatcher").dispatch({type:g.REMOVE_TOKEN,entry:a})},focusComposer:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_COMPOSER})},focusTypeahead:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_TYPEAHEAD})},exitComposeState:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE})}};e.exports=a}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDispatcher","MessengerDesktopNotifications","MessengerDesktopNotificationPermissions","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null});a={Types:g,changeSettings:function(a){var c=b("XMessengerDotComSettingsEditController").getURIBuilder().getURI();b("CurrentEnvironment").facebookdotcom&&c.setPath(b("MessengerURIConstants").FACEBOOK_PREFIX+c.getPath());new(b("AsyncRequest"))().setData({settings:a}).setURI(c).send();b("MessengerDispatcher").dispatch({type:g.CHANGE_SETTINGS,newSettings:a})},changeDesktopNotifs:function(a,c){a&&!b("MessengerDesktopNotifications").isGranted()?b("MessengerDesktopNotifications").requestPermission(function(d){if(d!==b("MessengerDesktopNotificationPermissions").GRANTED){b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED&&(c&&c());return}b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}):b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}};e.exports=a}),null);
__d("LinkWithHiddenURLBar.react",["Link.react","React","ReactDOM","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.link=null,this.$5=function(a){this.link=a}.bind(this),this.$4=function(a){this.$6(),this.props.onFocus&&this.props.onFocus(a)}.bind(this),this.$2=function(a){this.$1(),this.props.onBlur&&this.props.onBlur(a)}.bind(this),this.$3=function(a){this.$6(),!a.metaKey&&this.props.onClick&&(this.props.onClick(a),a.preventDefault()),this.props.onAllClicks&&this.props.onAllClicks(a),b("setImmediate")(function(){return this.$1()}.bind(this))}.bind(this),c}a.prototype.componentDidMount=function(){this.$1()};a.prototype.render=function(){var a=this.props,c=a.label;a.onBlur;a.onAllClicks;a.onClick;a.onFocus;a=babelHelpers.objectWithoutProperties(a,["label","onBlur","onAllClicks","onClick","onFocus"]);return b("React").createElement(b("Link.react"),babelHelpers["extends"]({},a,{label:c,onBlur:this.$2,onClick:this.$3,onFocus:this.$4,ref:this.$5}))};a.prototype.$1=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link);a.href&&(a.setAttribute("data-href",a.href),a.removeAttribute("href"))}};a.prototype.$6=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link),c=a.getAttribute("data-href");c&&(a.setAttribute("href",c),a.removeAttribute("data-href"))}};e.exports=a}),null);
__d("MessengerAddIconSVG.react",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=function(a){return b("React").createElement("div",{className:a.className},b("React").createElement("svg",{viewBox:"-8 -8 48 48"},b("React").createElement("title",null,"add to group"),b("React").createElement("path",{d:"M16,0 V32 M0,16 H32",fillRule:"evenodd",clipRule:"evenodd",fill:"none",stroke:a.customColor,strokeWidth:2,strokeMiterlimit:10,strokeLinecap:"round"})))};c.propTypes={className:a.string,customColor:a.string.isRequired};e.exports=c}),null);
__d("MercuryAttachmentAttribution.react",["cx","fbt","Image.react","ImmutableObject","Link.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this.$1();return!a?null:b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_29ew")},b("React").createElement(b("Image.react"),{src:a.icon_url,className:"_29ex"}),b("React").createElement("span",{className:"_29ey"},a.name),this.$2())};a.prototype.$1=function(){return this.props.attachment&&this.props.attachment.app_attribution};a.prototype.$2=function(){var a=this.$1();if(!a||!a.metadata)return null;var c="_439n",d=void 0;try{d=JSON.parse(a.metadata)}catch(a){return null}return d.spotify_link?b("React").createElement(b("Link.react"),{className:c,href:d.spotify_link,target:"_blank"},h._("Ouvrir")):null};function a(){i.apply(this,arguments)}a.propTypes={attachment:c.instanceOf(b("ImmutableObject"))};e.exports=a}),null);
__d("MessengerAttachmentAttribution.react",["cx","ImmutableObject","MercuryAttachmentAttribution.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("MercuryAttachmentAttribution.react"),{attachment:this.props.attachment,className:"_2f5n _4br2"})};function a(){h.apply(this,arguments)}a.propTypes={attachment:c.instanceOf(b("ImmutableObject"))};e.exports=a}),null);
__d("MessengerBootloadedLogMessage.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MessengerLogMessage.react").__setRef("MessengerBootloadedLogMessage.react"),placeholder:b("React").createElement("div",{className:"_497p"},"...")})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerBubbleBlock.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_52mr _4h13 _3058"},this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={collapsed:!0},b}a.prototype.render=function(){var a=h._("Voir la derni\u00e8re activit\u00e9"),c=h._("Voir moins d\u2019activit\u00e9");return b("React").createElement("div",{className:"_497p"},b("React").createElement(b("Link.react"),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed})}.bind(this)},this.state.collapsed?a:c),this.state.collapsed?null:b("React").createElement("div",null,b("React").createElement("div",{className:"_4ea2"}),this.props.children,b("React").createElement("div",{className:"_4ea2"})))};e.exports=a}),null);
__d("MessageThreadAssociatedObjectKey",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_LINK:"action_link",APPROVAL_MODE_TOGGLEABLE:"approval_mode_toggleable",EVENT_PLACE:"event_place",ID:"id",IS_WORKPLACE_COMMUNITY:"is_workplace_community",MENTORSHIP_PROGRAM:"mentorship_program",NAME:"name",PRIVACY_MODE:"privacy_mode",PROFILE_PICTURE:"profile_picture",ROOM_TYPE:"room_type",START_TIMESTAMP:"start_timestamp"})}),null);
__d("MessengerProfileLinkAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK:"click",HOVER:"hover"})}),null);
__d("MessengerProfileLinkDomain",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FB_SLASH_MESSAGES:"fb_slash_messages",WORK_CHAT:"work_chat"})}),null);
__d("MessengerProfileLinkLogger.bs",["MessengerProfileLinkTypedLogger"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){new(b("MessengerProfileLinkTypedLogger"))().setTargetID(a).setDomain(c).setLinkLocation(d).setAction(e).log();return 0}f.logItemImpression=a}),null);
__d("ProfileLinkReact.bs",["ReasonReact.bs","bs_js_null_undefined","ProfileLink.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("ProfileLink.react"),{className:b("bs_js_null_undefined").from_opt(a),href:b("bs_js_null_undefined").from_opt(c),onClick:b("bs_js_null_undefined").from_opt(d),onMouseEnter:b("bs_js_null_undefined").from_opt(e),onMouseLeave:b("bs_js_null_undefined").from_opt(f),target:b("bs_js_null_undefined").from_opt(g),uid:h},i)}f.make=a}),null);
__d("MessengerProfileLink.bs",["URI","bs_block","bs_curry","React","Arbiter","LinkReact.bs","QE2Logger","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerConfig","ProfileLinkReact.bs","isMessengerDotComURI","MessengerProfileLinkAction","MessengerProfileLinkDomain","MessengerProfileLinkLogger.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").reducerComponent("MessengerProfileLink");function h(a,c,d,e,f){__p&&__p();var h=+b("isMessengerDotComURI")(new(b("URI"))(window.location.href));f=+b("CurrentUser").isWorkUser();var i=f!==0?b("MessengerProfileLinkDomain").WORK_CHAT:h!==0?b("MessengerProfileLinkDomain").MESSENGER_DOT_COM:b("MessengerProfileLinkDomain").FB_SLASH_MESSAGES,j=function(){return b("MessengerProfileLinkLogger.bs").logItemImpression(e,i,c,b("MessengerProfileLinkAction").HOVER)},k=function(){return b("MessengerProfileLinkLogger.bs").logItemImpression(e,i,c,b("MessengerProfileLinkAction").CLICK)};f=g.slice();f[4]=function(a){var c=b("Arbiter").subscribe("Hovercard/show",function(c,d){return b("bs_curry")._1(a[3],0)}),d=b("Arbiter").subscribe("Hovercard/hide",function(c,d){return b("bs_curry")._1(a[3],1)});b("bs_curry")._1(a[4],function(){c.unsubscribe();d.unsubscribe();return 0});return 0};f[9]=function(c){__p&&__p();if(a){b("QE2Logger").logExposureForUser("www_messenger_profile_links",b("CurrentUser").getID());var f=+b("MessengerConfig").PLIS;f=f!==0?h!==0?b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,[a[0]],0,[function(){c[1][0]&&j(0);return k(0)}],0,0,0,0,0,0,0,[d])):b("ReasonReact.bs").element(0,0,b("ProfileLinkReact.bs").make(0,0,[function(){return k(0)}],0,[function(){var a=c[1][0];if(a!==0)return j(0);else return 0}],0,e,[d])):d}else f=d;return b("React").createElement("div",undefined,f)};f[10]=function(){return[0]};f[12]=function(c,a){if(c!==0)return b("bs_block").__(0,[[0]]);else return b("bs_block").__(0,[[1]])};return f}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").null_undefined_to_opt(a.href),a.location,a.name,a.uid,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerProfileLinkLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTEXT_BANNER:"context_banner",INFOPANEL:"infopanel"})}),null);
__d("TimeSpentRoomTypeEnum$FbtEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GROUP:"Group",EVENT:"Event"});e.exports=a}),null);
__d("MessengerContextBanner.react",["cx","fbt","Badge.react","CurrentUser","Image.react","ImageBlock.react","immutable","Link.react","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryThreadImage.react","MessageThreadAssociatedObjectKey","MessengerProfileLink.bs","MessengerProfileLinkLocation","React","MercuryShareAttachmentRenderLocations","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerProfileLink.bs").jsComponent;c=b("React").PropTypes;var k=void 0;b("requireWeak")("MessengerThreadImageReact.bs",function(a){k=a.jsComponent});i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=b("React").createElement(b("ImageBlock.react"),{className:"_llj"+(this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER?" _2eu-":"")+(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?" _2eu_":""),spacing:"large",style:this.props.style},this.$1(),b("React").createElement("div",{className:"_lll"},this.$2(),this.$3(),this.$4())),c=this.props.associatedObject;c&&c[b("MessageThreadAssociatedObjectKey").ACTION_LINK]&&(a=b("React").createElement(b("Link.react"),{href:c[b("MessageThreadAssociatedObjectKey").ACTION_LINK],target:"_blank",style:{textDecoration:"none"}},a));return a};a.prototype.$1=function(){var a=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER,c=this.props.associatedObject,d=null;if(!this.props.contactName&&c&&a)d=b("React").createElement(b("Image.react"),{className:"_4ld- _1wrc",src:c[b("MessageThreadAssociatedObjectKey").PROFILE_PICTURE]});else if(this.props.thread){c=k&&a?k:b("MercuryThreadImage.react");d=b("React").createElement(c,{showBadge:!1,participants:this.props.participants,size:a?60:null,thread:this.props.thread,viewer:this.props.viewer})}else this.props.participantIDs&&(d=b("React").createElement(b("MercuryParticipantsImage.react"),{participants:this.props.participantIDs,size:b("MercuryParticipantsConstants").BIG_IMAGE_SIZE}));return b("React").createElement("div",{className:"_llk"},d)};a.prototype.$2=function(){__p&&__p();if(this.props.location!==b("MercuryShareAttachmentRenderLocations").MESSENGER)return null;var a=this.props.isVerified?b("React").createElement(b("Badge.react"),{size:"medium",type:"verified"}):null,c=this.props.contactName;if(!c){var d=this.props.associatedObject;c=d?d[b("MessageThreadAssociatedObjectKey").NAME]:null}d=this.props.contactFBProfile;var e=this.props.contactID;return b("React").createElement("div",{className:"_llq"},b("React").createElement("span",{className:"_3oh-"},b("React").createElement(j,{href:d,location:b("MessengerProfileLinkLocation").CONTEXT_BANNER,name:c,uid:e}),a))};a.prototype.$3=function(){return b("React").createElement("div",{className:"_1n-e _36zg"},this.props.connectionContext)};a.prototype.$4=function(){__p&&__p();if(!this.props.contextItems.length){var a=this.props.associatedObject;if(a){a=b("TimeSpentRoomTypeEnum")[a[b("MessageThreadAssociatedObjectKey").ROOM_TYPE]];var c=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return b("React").createElement("div",{className:"_1n-e"},h._({"EVENT":"Acc\u00e9der \u00e0 l\u2019\u00e9v\u00e8nement {productName}","GROUP":"Acc\u00e9der au groupe {productName}"},[h._param("productName",c),h._enum(a,b("TimeSpentRoomTypeEnum$FbtEnum"))]))}return null}return b("React").createElement("div",null,this.props.contextItems.map(function(a,c){return b("React").createElement("div",{className:"_1n-e",key:"item:"+c},a)}))};function a(){i.apply(this,arguments)}a.propTypes={contactFBProfile:c.string,contactID:c.string,contactName:c.string,associatedObject:c.object,connectionContext:c.string,contextItems:c.arrayOf(c.string).isRequired,isVerified:c.bool,location:c.string.isRequired,participantIDs:c.arrayOf(c.string),participants:c.instanceOf(b("immutable").Map),thread:c.object,viewer:c.string.isRequired};e.exports=a}),null);
__d("XMessengerContextBannerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/messenger/context_banner/",{profile_id:{type:"Int",required:!0},max_context_items:{type:"Int",defaultValue:3}})}),null);
__d("MessengerContextInformationStore",["AsyncRequest","EventEmitter","TimeSlice","XMessengerContextBannerController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new Map(),i=new Map();c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$MessengerContextInformationStore1=function(a){if(i.get(a))return;var c=b("XMessengerContextBannerController").getURIBuilder().setInt("profile_id",a).getURI();c=new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI(c).setHandler(this.$MessengerContextInformationStore2.bind(this,a));i.set(a,c);c.send()}.bind(this),c}a.prototype.getOrFetch=function(a){var c=h.get(a);c||b("TimeSlice").guard(this.$MessengerContextInformationStore1,"Chat Tab Messenger Context Banner Fetch",{propagationType:b("TimeSlice").PropagationType.ORPHAN})(a);return c};a.prototype.$MessengerContextInformationStore2=function(a,b){h.set(a,{connectionContext:b.payload.connection_context||"",contextItems:b.payload.context_items||[]}),i["delete"](a),this.emit("change")};e.exports=new a()}),null);
__d("PagesMessengerContextBanner.react",["cx","MercuryThreadImage.react","ProfileHeaderCoverPhoto.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=83,j=260,k=60;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props.coverPhotoData?b("React").createElement(b("ProfileHeaderCoverPhoto.react"),{coverPhotoData:this.props.coverPhotoData,height:i,width:j}):null;return b("React").createElement("div",{className:"_fj3",style:this.props.style},a,b("React").createElement("div",{className:"_2-0o"},b("React").createElement(b("MercuryThreadImage.react"),{size:k,thread:this.props.thread,viewer:this.props.viewer})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerContextBannerContainer.react",["DOMDimensions","immutable","MercuryIDs","MercuryParticipants","MercuryThreads","MessengerContextBanner.react","MessengerContextInformationStore","PagesMessagingMercuryChatTabStore","PagesMessengerContextBanner.react","ReactComponentWithPureRenderMixin","React","ReactDOM","MercuryShareAttachmentRenderLocations","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;var g=b("React").createClass({displayName:"MessengerContextBannerContainer",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MercuryParticipants"),b("MercuryThreads"),b("MessengerContextInformationStore"),b("PagesMessagingMercuryChatTabStore"))],propTypes:{location:a.string.isRequired,onResize:a.func,otherUserFBIDs:a.arrayOf(a.string),threadID:a.string,viewer:a.string.isRequired},statics:{calculateState:function(a){__p&&__p();var c=null,d=null;a.threadID?(c=b("MercuryThreads").getForFBID(a.viewer).getOrFetch(a.threadID),d=c&&c.participants):a.otherUserFBIDs&&a.otherUserFBIDs.length===1&&(d=a.otherUserFBIDs.map(function(a){return b("MercuryParticipants").getIDFromVanityOrFBID(a)}));var e=b("immutable").Map();d&&(e=e.withMutations(function(a){d&&d.forEach(function(c){a.set(c,b("MercuryParticipants").getOrFetch(c))})}));var f=null,h=null;c?(f=e.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id)),h=c.associated_object):f=d&&e.get(d[0]);a=b("PagesMessagingMercuryChatTabStore").getStateByThread(a.threadID);a=a.coverPhotoData;return babelHelpers["extends"]({associatedObject:h,contact:f,coverPhotoData:a,participantIDs:d,participants:e,thread:c},g.getContextInformation(f&&f.fbid&&f.fbid.toString()))},getContextInformation:function(a){var c=void 0;a&&(c=b("MessengerContextInformationStore").getOrFetch(a.toString()));return c||{connectionContext:"",contextItems:[]}}},componentDidUpdate:function(){var a=b("ReactDOM").findDOMNode(this);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).height;this.props.onResize&&this.props.onResize(a)},render:function(){if(!this.state.contact)return this.state.associatedObject&&this.props.location==b("MercuryShareAttachmentRenderLocations").MESSENGER?b("React").createElement(b("MessengerContextBanner.react"),{associatedObject:this.state.associatedObject,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer}):null;if(this.state.contact.type==="page"){if(!this.state.connectionContext&&!this.state.contextItems.length)return null;if(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT)return b("React").createElement(b("PagesMessengerContextBanner.react"),{coverPhotoData:this.state.coverPhotoData,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer})}return b("React").createElement(b("MessengerContextBanner.react"),{contactFBProfile:this.state.contact.href,contactID:this.state.contact.fbid,contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.is_verified,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer})}});e.exports=g}),null);
__d("MessengerDateBreak.react",["cx","React","formatDate","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){"use strict";return this.props.date.getTime()!==a.date.getTime()};a.prototype.render=function(){"use strict";var a=b("formatDate")(this.props.date,{today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return b("React").createElement("h4",{className:b("joinClasses")(this.props.className,"_497p _2lpt")},b("React").createElement("time",{className:"_3oh-"},a))};function a(){"use strict";h.apply(this,arguments)}a.propTypes={date:c.instanceOf(Date).isRequired};e.exports=a}),null);
__d("MessengerDeliveryReceipt.bs",["Utils.bs","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("Utils.bs").$pipe$unknown(b("bs_js_primitive").undefined_to_opt(a[c]),0)}c=b("Utils.bs").$pipe$unknown;f.$pipe$unknown=c;f.getDeliveryTimeOfThread=a}),null);
__d("MessengerSignals.bs",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("EventEmitter"))(),h="resize";function a(){g.emit(h);return 0}function c(a){return g.addListener(h,a)}f.emitter=g;f.resizeEvent=h;f.resize=a;f.onResize=c}),null);
__d("MessengerFlexArea.react",["cx","CSS","Event","MessengerSignals.bs","React","ReactDOM","ResponsiveBlock.react","Style","SubscriptionsHandler","Vector","getElementRect","getScrollPosition","joinClasses","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerFlexArea",propTypes:{beforeResize:a.func,onResize:a.func},_subscriptions:null,_onResizeTimeout:null,getInitialState:function(){return{height:0}},componentDidMount:function(){var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.recalculateHeight,51)),b("MessengerSignals.bs").onResize(function(){this.recalculateHeight()}.bind(this)));this._subscriptions=a;this.recalculateHeight()},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),clearTimeout(this._onResizeTimeout)},render:function(){return b("React").createElement(b("ResponsiveBlock.react"),{className:b("joinClasses")(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+"px"}},this.props.children)},recalculateHeight:function(){__p&&__p();if(!this.isMounted())return;var a=b("ReactDOM").findDOMNode(this),c=a.parentNode,d=this.state.height,e=b("Vector").getViewportDimensions().y,f=!1;c&&b("Style").get(c,"display")==="none"&&(b("Style").set(c,"display","initial"),f=!0);var g=!1;c instanceof Element&&b("CSS").hasClass(c,"hidden_elem")&&(b("CSS").removeClass(c,"hidden_elem"),g=!0);e-=b("Vector").getElementPosition(c||a).y;var h=b("getScrollPosition")(window);e+=h.y;c&&(Array.from(c.childNodes).forEach(function(a){if(a.nodeType===Node.COMMENT_NODE||b("Style").get(a,"position")==="absolute")return;e-=b("getElementRect")(a).height}),e+=b("getElementRect")(a).height);f&&b("Style").set(c,"display","");g&&c instanceof Element&&b("CSS").addClass(c,"hidden_elem");(isNaN(e)||e<0)&&(e=0);e!==d&&(this.props.beforeResize&&this.props.beforeResize(),this.setState({height:e},this.props.onResize))},_handleResponsiveBlockResize:b("throttle")(function(a,b){if(!this.isMounted())return;b===this.state.height&&(this.props.beforeResize&&this.props.beforeResize(),clearTimeout(this._onResizeTimeout),this.props.onResize&&(this._onResizeTimeout=setTimeout(this.props.onResize,0)))},51)});e.exports=c}),null);
__d("MessengerFlexScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={shouldTrackBottom:this.props.shouldStickToBottom},this.$2=function(){this.props.onScroll&&this.props.onScroll();if(!this.props.shouldStickToBottom)return;this.$3()}.bind(this),this.$1=function(){this.trackBottomIfRequired()}.bind(this),b}a.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount()};a.prototype.render=function(){return b("React").createElement(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$1,ref:"flexArea"},this.props.flexChildren,b("React").createElement(b("MessengerScrollableArea.react"),{height:"100%",needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$2,ref:"scrollable",tabIndex:this.props.tabIndex},this.props.children),this.props.footerChildren)};a.prototype.$3=function(){this.isScrolledToBottom()?this.setState({shouldTrackBottom:!0}):this.setState({shouldTrackBottom:!1})};a.prototype.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea()};a.prototype.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight()};a.prototype.trackBottomIfRequired=function(){this.state.shouldTrackBottom&&this.scrollToBottom()};a.prototype.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom()};a.prototype.scrollToTop=function(a){this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};a.prototype.scrollToPosition=function(a,b,c){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(a,b,c)};a.prototype.isScrolledToBottom=function(){var a=this.refs.scrollable;return a?a.isScrolledToBottom():!0};a.prototype.isScrolledToBottomWithHeight=function(a){return this.refs.scrollable.isScrolledToBottomWithHeight(a)};a.prototype.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop()};a.prototype.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0};a.propTypes={flexChildren:c.node,footerChildren:c.node,onMount:c.func,onScroll:c.func,shouldStickToBottom:c.bool,tabIndex:c.number};e.exports=a}),null);
__d("MessengerMessageActionsWrapper.react",["ImmutableObject","React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerMessageActionsWrapper",propTypes:{message:a.instanceOf(b("ImmutableObject")).isRequired,onShowMenu:a.func.isRequired},render:function(){return b("React").createElement("div",babelHelpers["extends"]({onMouseEnter:this._handleShowMenu,onMouseLeave:this._handleHideMenu},this.props),this.props.children)},_handleShowMenu:function(){this.props.onShowMenu(this.props.message.message_id,!0)},_handleHideMenu:function(){this.props.onShowMenu(this.props.message.message_id,!1)}});e.exports=c}),null);
__d("MessengerMessageSeenHeadsReact.bs",["cx","fbt","cssVar","React","immutable","ImageReact.bs","bs_pervasives","ReasonReact.bs","joinClasses","MessengerConfig","MercuryTimestamp","MercuryAttachment","MercuryMessageInfo","getViewportDimensions"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerConfig").MaxSeenHeadCount;function k(){var a=b("getViewportDimensions")().width;if(a<parseInt("920px".replace("px",""),10))if(j<8)return j;else return 8;else if(a<parseInt("1211px".replace("px",""),10)&&j>=3)return 3;else return j}var l=b("ReasonReact.bs").statelessComponent("MessengerMessageSeenHeadsReact");function m(a,c,d,e,f,g,i){__p&&__p();i=l.slice();i[9]=function(){__p&&__p();if(b("MercuryMessageInfo").isSending(d)||g.isEmpty()||b("MercuryMessageInfo").hasError(d))return null;else{var i=b("immutable").Seq(g).filter(function(a){a=+(a.watermark>=d.timestamp&&a.watermark<e);if(a!==0)return!0;else return!1}).sort(function(a,b){return a.action-b.action|0});if(i.isEmpty())return null;else{var l=c!==0?j:k(0),m=+(i.count()>(l+1|0)),n=m!==0?i.slice(0,l):i;n=n.map(function(c,d,a){a=f.get(d);if(a==null)return null;else{c=h._("Vu par {full name} \u00e0 {seen time}",[h._param("full name",a.name),h._param("seen time",b("MercuryTimestamp").getPreciseTimestamp(c.action))]);return b("ReasonReact.bs").element([b("bs_pervasives").string_of_int(d)],0,b("ImageReact.bs").make(["_jf2"],[c],[a.image_src],0,[c],0,0,[]))}}).toArray();var o=n.length;if(o){m=m!==0?i.slice(l,undefined).count():0;if(m>0){i=i.slice(l,undefined).map(function(a,b,c){a=f.get(b);if(a==null)return"";else return a.name}).filter(function(a){a=+(a==="");if(a!==0)return!1;else return!0}).join("\n")+" ";n.unshift(b("React").createElement("span",{key:"overflow",className:"_jf3",title:i},"+"+b("bs_pervasives").string_of_int(m)))}return b("React").createElement("span",{className:b("joinClasses")(a,"_jf4"+(+((o+m|0)===1)?" _jf5":"")+(+b("MercuryAttachment").isSinglePhotoGroupAttachment(d)?" _ba3":""))},n)}else return null}}};return i}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.className,+a.isFromViewer,a.message,a.nextTimestamp,a.participants,a.readReceipts,[])});f.maxSeenHeads=j;f.calculateSliceNumber=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerURIUtils.bs",["URI","MercuryIDs","MessengerView","MessengerURISerializer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var c=b("MessengerURISerializer").deserialize(new(b("URI"))(window.location.href)),d=b("MessengerView").DETAIL.THREAD,e=+c.queryAll;return b("MessengerURISerializer").serialize(Object.assign(Object.assign({},c),{activeThreadID:a,detailView:d,query:e!==0?c.query:undefined}))}function a(a){return g(b("MercuryIDs").getThreadIDFromUserID(a))}function c(a){return new(b("URI"))("/m/"+a)}f.getURIForThreadID=g;f.getURIForUserID=a;f.getURIForMessageID=c}),null);
__d("messengerRTLClasses",["cx","isRTL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){a=b("isRTL")(a||"");return c?a?"_4pv0":"":(a?"":"direction_ltr")+(a?" direction_rtl":"")+(a?"":" text_align_ltr")+(a?" text_align_rtl":"")+(a?" _4pv0":"")}e.exports=a}),null);
__d("MessengerMessage.react",["cssVar","cx","fbt","EmojiLikeUtils","MercuryDisplayTimeFilterMessageRenderer","FluxContainer","ifRequired","immutable","ImmutableObject","MercuryAttachment","MercuryMessageDeliveryState","MercuryMessageError.react","MercuryMessageInfo","MercuryTimestamp","MessengerAttachmentAttribution.react","MessengerAttachmentRenderer","MessengerBubble.react","MessengerBubbleBlock.react","MessengerCodeBubble.react","MessengerCodePasteUtils","MessengerDecorator","MessengerInnerDecorators.react","MessengerMessageActionsWrapper.react","MessengerMessageSeenHeadsReact.bs","MessengerURIUtils.bs","MessengerVideoAutoplayStore","MNCommerceMessageType","React","TooltipData","emptyFunction","getViewportDimensions","joinClasses","messengerRTLClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MessengerMessageSeenHeadsReact.bs").jsComponent;c=b("React").PropTypes;function l(a){switch(a){case b("MercuryMessageDeliveryState").SENDING:return i._("Envoi en cours");case b("MercuryMessageDeliveryState").SENT:return i._("Envoy\u00e9");case b("MercuryMessageDeliveryState").DELIVERED:return i._("Livr\u00e9");case b("MercuryMessageDeliveryState").ERROR:return i._("Erreur")}return null}d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={isVisible:!1,plainText:!1,shown:{}},this.$15=function(a){a.stopPropagation(),this.props.onSelect(this.props.message.message_id)}.bind(this),this.$5=function(a,b){var c;this.setState({shown:babelHelpers["extends"]({},this.state.shown,(c={},c[a]=b,c))})}.bind(this),this.$6=function(){this.setState({plainText:!this.state.plainText})}.bind(this),this.$13=function(){this.props.onSelect(this.props.message.message_id)}.bind(this),this.$7=function(){return b("MessengerCodePasteUtils").containsCodeBlock(this.props.message.body)||!!this.messageBody&&this.messageBody.hasFormatting()}.bind(this),c}a.getStores=function(){var a=[b("MessengerVideoAutoplayStore")],c=b("ifRequired")("MessengerSphericalRendererStore",function(a){return a},function(){return null});c&&a.push(c);return a};a.calculateState=function(a,c){return{isVisible:b("MessengerVideoAutoplayStore").isVisible(c.message.thread_id,c.message.message_id)||b("ifRequired")("MessengerSphericalRendererStore",function(a){return a.isVisible(c.message.thread_id,c.message.message_id)},function(){return!1})}};a.prototype.shouldComponentUpdate=function(a,c){return a.isActive!==this.props.isActive||a.isFromViewer!==this.props.isFromViewer||a.message!==this.props.message||a.nextTimestamp!==this.props.nextTimestamp||a.showDeliveryState!==this.props.showDeliveryState||a.deliveryTimestamp!==this.props.deliveryTimestamp||!b("immutable").is(a.readReceipts,this.props.readReceipts)||!b("immutable").is(a.participants,this.props.participants)||a.customColor!==this.props.customColor||c.isVisible!==this.state.isVisible};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isActive,d=a.isFromViewer,e=a.isPageMessage;a=a.message;var f=i._("{time}",[i._param("time",b("MercuryTimestamp").getPreciseTimestamp(a.timestamp))]);f=b("TooltipData").propsFor(f,m(d));var g=[],h=[],j=this.props.message,l=d||!1;j&&!this.props.hideBeforeDecorator&&(b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(j)&&g.push(a.render(j,l))}),b("MessengerDecorator").getInnerDecorators().forEach(function(a){a.check(j)&&h.push(a.getAdditionalClassNames())}));var n=this.$1(f,!1),o=this.$2(f,null);o&&(n=this.$1(f,!0));f=!!o&&this.$3();var p=this.$4(g);return b("React").createElement(b("MessengerMessageActionsWrapper.react"),{className:b("joinClasses").apply(undefined,["clearfix _o46 _3erg"+(c?" _-5k":"")+(d?" _3i_m":"")+(d?" _nd_":"")+(d?"":" _29_7")+(a.isSelected?" _3xsz":"")+(f?" _q4a":""),b("messengerRTLClasses")(a.body)].concat(h)),message:a,onShowMenu:this.$5},p?p:g,n,p||o||e?null:b("React").createElement(b("MessengerInnerDecorators.react"),{message:j,isFromViewer:d,hovered:this.state.shown[j.message_id],onReplyToMessage:this.props.onReplyToMessage,messageProps:babelHelpers["extends"]({},this.props,{handleToggleOriginal:this.$6,hasFormatting:this.$7,isShowingOriginal:this.state.plainText})}),o,this.$8(j,l),this.$9(),this.$10(),b("React").createElement(k,{className:"_4jzq",isFromViewer:d,message:a,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts}))};a.prototype.$4=function(a){return!this.props.message.replied_to_message?null:b("React").createElement("div",{key:"renderedMessageReply",className:"_3058"},a,b("React").createElement(b("MessengerInnerDecorators.react"),{message:this.props.message,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.shown[this.props.message.message_id],messageProps:this.props}))};a.prototype.$8=function(a,c){__p&&__p();var d,e=this;if(a&&!this.props.hideAfterExternalDecorator){var d=function(){var d=[],f=[];b("MessengerDecorator").getAfterExternalDecorators().forEach(function(b){a&&b.check(a)&&(d.push(b.render(a,c,this.props)),f.push(b.getAdditionalClassNames()))},e);var g=f.join(" ");return d.length===0?{v:null}:{v:b("React").createElement("span",{className:b("joinClasses")(g,"_31gm"+(c?"":" isFromOther"))},d)}}();if(typeof d==="object")return d.v}return null};a.prototype.$11=function(a){return a.every(function(a){return!a||!b("MessengerAttachmentRenderer").isRenderedShareAttachment(a)})};a.prototype.$12=function(){return this.props.message.attachments.length===1&&b("MercuryAttachment").hasAttribution(this.props.message.attachments[0])};a.prototype.$2=function(a,c){__p&&__p();if(this.props.message.is_filtered_content)return null;if(this.props.message.commerce_message_type===b("MNCommerceMessageType").RIDE_INTENT)return null;var d=[],e=[],f=this.props.message,g=this.props.isFromViewer||!1;f&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(f,g)&&(d.push(a.render(f,g,this.props,this.state.shown[this.props.message.message_id])),e.push(a.getAdditionalClassNames()))}.bind(this));c=b("MessengerAttachmentRenderer").getAttachmentsOutsideBubble(this.props.message,this.props.onAttachmentLoad,{customColor:this.props.customColor,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,isVisible:this.state.isVisible,onSelect:this.$13,onUnwrap:null,pageID:this.props.pageID},d);if(!c||!c.length)return null;if(a){var h=c.some(function(a){return!!a&&b("MessengerAttachmentRenderer").isPhotosGroupAttachment(a)});this.$12()&&(c=[b("React").createElement("span",{key:"AttachmentWithAttribution"},c[0],b("React").createElement(b("MessengerAttachmentAttribution.react"),{attachment:new(b("ImmutableObject"))(this.props.message.attachments[0])}))]);c=this.$11(c)?b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses").apply(undefined,["_3zvs"+(h?" _2-x3":"")].concat(e))}),c,d):c.map(function(c){return c&&b("React").cloneElement(c,a)})}h=b("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(this.props.message);h=b("React").createElement("div",{key:"renderedAttachments",className:"_3058 _15gf"+(h?" _3duc":"")},c,this.props.isPageMessage?null:b("React").createElement(b("MessengerInnerDecorators.react"),{message:this.props.message,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.shown[this.props.message.message_id],messageProps:this.props}));return this.$12()?b("React").createElement(b("MessengerBubbleBlock.react"),null,h):h};a.prototype.$14=function(){return b("MessengerAttachmentRenderer").isP2PAttachment(this.props.message)};a.prototype.$1=function(a,c){var d=this.props.message,e=b("immutable").List(b("MessengerAttachmentRenderer").getAttachmentsInsideBubble(d,this.props.onAttachmentLoad)),f=d.ranges;d.profile_ranges&&d.profile_ranges.length&&(f=(f||[]).concat(d.profile_ranges.map(function(a){return babelHelpers["extends"]({},a,{url:b("MessengerURIUtils.bs").getURIForUserID(a.id)})})));var g=b("MessengerCodePasteUtils").containsCodeBlock(d.body)&&!this.state.plainText;if(d.is_filtered_content)return b("React").createElement("div",{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(d));var h=d.body&&!b("EmojiLikeUtils").isEmojiLike(d);return h||!e.isEmpty()?b("React").createElement(b("MessengerBubble.react"),babelHelpers["extends"]({attachments:e,body:d.body,bodyRef:function(a){this.messageBody=a}.bind(this),className:g?(this.props.isFromViewer?"_3uhm":"")+(this.props.isFromViewer?"":" _3uhn"):"_3058 _ui9",containsCode:g,customColor:this.props.isFromViewer?this.props.customColor:"",customLike:d.customLike,excludeAfterDecorators:c,isFromViewer:this.props.isFromViewer,isP2PAttachment:this.$14(),ranges:f,message:d,metaRanges:d.meta_ranges,plainText:this.state.plainText,threadCustomColor:this.props.threadCustomColor||"#0084ff",threadID:d.thread_id,participants:this.props.participants},a||{})):null};a.prototype.$10=function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var a=b("MercuryMessageInfo").getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(a===b("MercuryMessageDeliveryState").UNKNOWN)return null;var c={};this.props.customColor&&(a===b("MercuryMessageDeliveryState").SENT||a===b("MercuryMessageDeliveryState").SENDING||a===b("MercuryMessageDeliveryState").DELIVERED)&&(c.color=this.props.customColor);var d=l(a);return b("React").createElement("span",{className:"_2her"+(a===b("MercuryMessageDeliveryState").SENDING?" _4jzp":"")+(a===b("MercuryMessageDeliveryState").SENT?" _3zzf":"")+(a===b("MercuryMessageDeliveryState").DELIVERED?" _9ah":"")+(a===b("MercuryMessageDeliveryState").ERROR?" _5ei9":""),style:c,title:d},b("React").createElement("i",{"aria-label":d,"aria-roledescription":i._("Ic\u00f4ne Statut"),className:"_57e_",role:"img"}))};a.prototype.$9=function(){var a=this.props.message;return!b("MercuryMessageInfo").hasError(a)?null:b("React").createElement(b("MercuryMessageError.react"),{className:"_3058 _2ygi",message:a,authorFBID:this.props.authorFBID})};a.prototype.$3=function(){var a=this.props.message,b=!1;a&&(b=!!(a.reactions&&Object.keys(a.reactions).length>0));return b};a.propTypes={customColor:c.string,deliveryTimestamp:c.number.isRequired,hideAfterExternalDecorator:c.bool,hideBeforeDecorator:c.bool,isActive:c.bool,isFromViewer:c.bool,isPageMessage:c.bool,message:c.instanceOf(b("ImmutableObject")).isRequired,nextTimestamp:c.number.isRequired,onAttachmentLoad:c.func.isRequired,onDeselect:c.func.isRequired,onSelect:c.func.isRequired,onReplyToMessage:c.func,participants:c.instanceOf(b("immutable").Map).isRequired,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,showDeliveryState:c.bool,authorFBID:c.string,threadCustomColor:c.string,pageID:c.string};a.defaultProps={onAttachmentLoad:b("emptyFunction"),threadCustomColor:"#0084ff"};function m(a){return b("getViewportDimensions")().width<=parseInt("700px".replace("px",""),10)?"above":a?"right":"left"}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessengerPageAdminNoteList.react",["cx","fbt","LeftRight.react","MessengerBubble.react","PagesMessengerCreatorInfo.react","ReactComponentWithPureRenderMixin","React","enumerate","classWithMixins","immutable","mixin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("classWithMixins")(b("React").Component,b("mixin")(b("ReactComponentWithPureRenderMixin"))));i&&i.prototype;a.prototype.render=function(){var a=[],c=this.calculateGroups(this.props.notes);c.forEach(function(c,d){a.push(b("React").createElement("li",{className:"_4kd2",key:"group:"+d},this.$MessengerPageAdminNoteList1(c)))}.bind(this));return b("React").createElement("ul",{className:"_4kd3"},a)};a.prototype.$MessengerPageAdminNoteList1=function(a){var c=[];a.forEach(function(d,e){c.push(b("React").createElement("div",{className:"_4kd4",key:"note:"+e},this.$MessengerPageAdminNoteList2(d,a)))}.bind(this));return c};a.prototype.$MessengerPageAdminNoteList2=function(a,c){c=b("immutable").List([b("React").createElement(b("LeftRight.react"),{className:"_561k"},b("React").createElement("div",{className:"_561l"},h._("Note priv\u00e9e")),b("React").createElement(b("PagesMessengerCreatorInfo.react"),{key:"creator_info",creator_info:c[0].creator_info,isNote:!0}))]);return b("React").createElement("div",{className:"_o46 _3i_m _nd_"},b("React").createElement("div",{className:"clearfix"},b("React").createElement(b("MessengerBubble.react"),{body:a.body.text,attachments:c,className:"_3058 _4kd5"})))};a.prototype.calculateGroups=function(a){__p&&__p();var c=[],d=null,e=null;a=b("enumerate")(a);var f=void 0;while(!(f=a.next()).done){var g=e&&e.value.creator_info.creatorID===f.value.creator_info.creatorID;g||(d=[],c.push(d));d&&d.push(f.value);e=f}return c};function a(){i.apply(this,arguments)}a.propTypes={notes:c.arrayOf(c.shape({id:c.string,body:c.object.isRequired,creator_info:c.shape({creatorID:c.string.isRequired,creatorName:c.string.isRequired,creatorType:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string}),timestamp:c.number.isRequired})).isRequired};e.exports=a}),null);
__d("MessengerMessageGroup.react",["cx","fbt","invariant","BootloadOnRender.react","CurrentUser","Image.react","immutable","ImmutableObject","JSResource","LazyComponent.react","Link.react","MercuryIDs","MercuryParticipants","MercuryParticipantSilhouettes","MessengerActions","MessengerContactActions.bs","MessengerMessage.react","MessengerPageAdminNoteList.react","MessengerProfileImageWrapperReact.bs","MessengerStickerUtils","MessengerTextWithEmoticons.react","MessengerURIUtils.bs","PagesMessengerCreatorInfo.react","React","ReactDOM","SimpleXUIDialog","StoreAndPropBasedStateMixin","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerContactActions.bs").actions,k=b("MessengerProfileImageWrapperReact.bs").jsComponent;a=b("immutable").List;c=b("immutable").OrderedMap;f=b("React").PropTypes;var l=32,m=new(b("ImmutableObject"))({image_src:b("MercuryParticipantSilhouettes").neutralSilhouette,is_messenger_user:!0,name:""});g=b("React").createClass({displayName:"MessengerMessageGroup",mixins:[b("StoreAndPropBasedStateMixin")(b("MercuryParticipants"))],propTypes:{activeMessageID:f.string,deliveryTimestamp:f.number.isRequired,hasDateBreak:f.bool,isCanonical:f.bool,isFromViewer:f.bool,isPageMessage:f.bool,lastReadTimestamp:f.number.isRequired,messages:f.instanceOf(a).isRequired,nextTimestamp:f.number.isRequired,onAttachmentLoad:f.func,onMessageDeselect:f.func.isRequired,onMessageSelect:f.func.isRequired,personaID:f.string,onReplyToMessage:f.func,readReceipts:f.instanceOf(c).isRequired,thread:f.object,pageID:f.string},statics:{calculateState:function(a){return{participants:n(a)}}},shouldComponentUpdate:function(a,c){return this.props.activeMessageID!==a.activeMessageID||this.props.isFromViewer!==a.isFromViewer||this.props.deliveryTimestamp!==a.deliveryTimestamp||this.props.lastReadTimestamp!==a.lastReadTimestamp||!b("immutable").is(this.props.messages,a.messages)||!b("immutable").is(this.props.readReceipts,a.readReceipts)||!b("immutable").is(this.state.participants,c.participants)||Boolean(a.thread&&this.props.thread&&this.props.thread!==a.thread)},render:function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_1t_p clearfix"+(b("MessengerStickerUtils").isStickerMessageGroup(this.props.messages)?" _5tx1":"")+(this._hasSeenHeadsAtBottom()?" _35fy":"")},this._renderProfileColumn(),b("React").createElement("div",{className:"_41ud"},this._renderName(),this._renderMessages())),this.props.isPageMessage?this._renderNotes():null)},_renderProfileColumn:function(){__p&&__p();if(this.props.isFromViewer)return null;var a=this.props.messages.last();a=this.state.participants.get(a.author)||m;this.props.personaID&&(a=this.state.participants.get(this.props.personaID)||m);var c=h._("{name}",[h._param("name",a.name)]),d=b("CurrentUser").isWorkUser()&&a.is_coworker===!1;d=b("React").createElement(k,{className:"_1t_r",isMessengerUser:a.is_messenger_user,size:l,showBadge:d,isMultiCompany:d,tooltipContent:c},b("React").createElement(b("Image.react"),{alt:a.name,src:a.image_src,height:l,width:l}));if(a.fbid){c=b("MessengerURIUtils.bs").getURIForUserID(a.fbid);!this.props.personaID&&b("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")?d=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerAvatarActions.react").__setRef("MessengerMessageGroup.react"),placeholder:this.props.isCanonical?d:b("React").createElement(b("Link.react"),{className:"_5f0v",href:c.toString(),onClick:this._handleContactSelect.bind(this,a),tabIndex:-1},d),component:b("React").createElement(b("LazyComponent.react"),{avatar:d,contact:a,showSendMessageItem:!this.props.isCanonical,onAction:this._handleContactAction})}):this.props.isCanonical||(d=b("React").createElement(b("Link.react"),{className:"_5f0v",href:c.toString(),onClick:this._handleContactSelect.bind(this,a),tabIndex:-1},d))}return b("React").createElement("div",{className:"_1t_q"},d)},_handleContactAction:function(a,c,e){__p&&__p();switch(a){case j.MESSAGE:this._handleContactSelect(c,e);break;case j.PROFILE:a=this.state.participants.get(c.id);a&&a.href?window.open(a.href):this._handleContactSelect(c,e);break;case j.FREE_CALL:d(["FBRTCCore","MNRTCCallabilityStore"],function(a,d){var e=c.fbid;e||i(0);a.isAvailableForWebrtcCalling(e)||d.isCallable(e)?a.startOutgoingCall(e,"messenger_dot_com",!1):b("SimpleXUIDialog").show(h._("{firstname} est injoignable pour le moment.",[h._param("firstname",c.short_name)]),h._("Impossible de connecter l\u2019appel"))});break}},_renderMessages:function(){var a=this.props.messages.size,c=[];this.props.messages.forEach(function(d,e,f){var g=d.message_id===this.props.activeMessageID,h=b("MercuryIDs").getUserIDFromParticipantID(this.props.author),i=this.props.thread?this.props.thread.custom_color:"",j=this.props.onAttachmentLoad;c.push(b("React").createElement(b("MessengerMessage.react"),{customColor:i,deliveryTimestamp:this.props.deliveryTimestamp,isActive:g,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,key:d.message_id,message:d,messageActionsWrapper:this.props.messageActionWrapper,onAttachmentLoad:j,participants:this.state.participants,nextTimestamp:this._getNextTimestamp(f,a,e),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.props.readReceipts,showDeliveryState:d.timestamp>this.props.lastReadTimestamp,ref:d.message_id,authorFBID:h==null?undefined:h,threadCustomColor:i,pageID:this.props.pageID}));o(this.props.isPageMessage,f,e,d)&&c.push(b("React").createElement(b("PagesMessengerCreatorInfo.react"),{key:"creator_info:"+e,creator_info:d.creator_info}))}.bind(this));return c},_renderNotes:function(){var a=[];this.props.messages.forEach(function(c,d,e){this.props.isPageMessage&&c.page_admin_notes&&a.push(b("React").createElement(b("MessengerPageAdminNoteList.react"),{key:"notes:"+c.message_id,notes:c.page_admin_notes}))}.bind(this));return a},_renderName:function(){__p&&__p();var a=this.props.messages.first(),c=this.props.personaID?this.state.participants.get(this.props.personaID):this.state.participants.get(a.author);if(!c)return null;var d=c.short_name;if(this.props.thread){var e=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null,f=b("MercuryIDs").getUserIDFromParticipantID(c.id);e&&f&&e[f]&&(d=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e[f]}))}if(this.props.personaID){e=this.state.participants.get(a.author);d=e?h._("{persona name} de {page name}",[h._param("persona name",c.name),h._param("page name",e.short_name)]):c.name}return b("React").createElement("h5",{className:"_ih3"+(this.props.isFromViewer?" accessible_elem":"")+(this.props.isCanonical&&!this.props.personaID?" _-ne":"")},d)},getMessageElement:function(a){return b("ReactDOM").findDOMNode(this.refs[a])},_hasSeenHeadsAtBottom:function(){var a=this.props,b=a.messages,c=a.nextTimestamp;a=a.readReceipts;var d=b.last().timestamp,e=0;a.forEach(function(a){if(a>=d&&a<c&&++e===2)return!1});return e===2},_getNextTimestamp:function(a,b,c){return c<b-1?a.get(c+1).timestamp:this.props.nextTimestamp},_handleContactSelect:function(a,c){c&&c.preventDefault();c=b("MercuryIDs").getThreadIDFromParticipantID(a.id);c&&b("MessengerActions").selectThread(c)}});function n(a){var c=a.personaID?a.personaID:a.messages.first().author;return b("immutable").Map().withMutations(function(d){a.readReceipts.forEach(function(a,c){d.set(c,b("MercuryParticipants").getOrFetch(c))}),d.set(c,b("MercuryParticipants").getOrFetch(c))})}function o(a,b,c,d){if(!a||!d.creator_info)return!1;if(c===b.size-1)return!0;a=b.get(c+1).creator_info;return!a?!0:d.creator_info.creatorID!==a.creatorID}e.exports=g}),null);
__d("MessengerNewMessagesNoticeReact.bs",["cx","ix","fbt","React","LinkReact.bs","ImageReact.bs","bs_js_boolean","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=h("86939"),k=i._("Nouveaux messages"),l=b("ReasonReact.bs").statelessComponent("MessengerNewMessagesNoticeReact");function m(a,c,d,e){var f=d?d[0]:k;e=l.slice();e[9]=function(){return b("React").cloneElement(b("React").createElement("div",{className:"_4wzq"+(b("bs_js_boolean").to_js_boolean(a)?" _4wzr":"")+(b("bs_js_boolean").to_js_boolean(1-a)?" _4-je":"")},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,["_5f0v _4wzs"],0,0,0,0,0,0,[c],0,0,0,0,[a!==0?0:-1],0,0,[b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["_4wzt"],0,[j],0,0,0,0,[])),b("React").createElement("div",{className:"_1bqr"},f)]))),{"aria-hidden":b("bs_js_boolean").to_js_boolean(1-a)})};return e}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(+a.isOpen,a.onClick,[a.label],[])});f.newMessageSrc=j;f.defaultLabel=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerPlatformSubscriptionMessageClassification",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EXEMPTED_TEMPLATE_MESSAGE:"exempted_template_message",MESSAGE_WITHIN_24HRS:"message_within_24hrs",SUBSCRIPTION_MESSAGE:"subscription_message",ACCEPTABLE_EXTRA_MESSAGE:"acceptable_extra_message",UNACCEPTABLE_EXTRA_MESSAGGE:"unacceptable_extra_message",AD_MESSAGE:"ad_message",FREE_LIMIT:"FREE_LIMIT"})}),null);
__d("XSetNUXSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/nux_seen/",{setting_name:{type:"String"}})}),null);
__d("MessagingShowNUX.react",["AsyncRequest","ChatConfig","React","XSetNUXSeenController","XUIAmbientNUX.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={showNUX:!b("ChatConfig").get(this.props.settingName)},this.$1=function(){if(!this.state.showNUX)return;b("ChatConfig").set(this.props.settingName,!0);new(b("AsyncRequest"))(b("XSetNUXSeenController").getURIBuilder().getURI()).setData({setting_name:this.props.settingName}).send();this.setState({showNUX:!1});this.props.onHidden()}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$1,position:"left",width:"auto",shown:this.state.showNUX&&this.props.shown},this.props.children)};a.propTypes={children:c.any,contextRef:c.func.isRequired,onHidden:c.func.isRequired,settingName:c.string.isRequired,shown:c.bool.isRequired};e.exports=a}),null);
__d("MessengerQuickCamDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("MessengerQuickCamActions",["MessengerQuickCamDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CLOSE:null,COUNT_DOWN_TIMER:null,COUNT_DOWN_TIMER_START:null,PROCESS_RECORDING:null,REGISTER_QUICKCAM:null,REMOVE_ALL_LISTENERS:null,REQUEST_USER_MEDIA:null,RETAKE:null,SEND_PHOTO:null,SEND_VIDEO:null,SET_MEDIA:null,SHUTTER_OFF:null,STOP_VIDEO:null,TAKE_VIDEO:null,UPDATE_PROGRESS:null,UPLOAD_COMPLETE:null,UPLOAD_ERROR:null,USER_MEDIA_ERROR:null});a={Types:g,close:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.CLOSE})},countDownTimer:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.COUNT_DOWN_TIMER})},countDownTimerStart:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.COUNT_DOWN_TIMER_START})},processRecording:function(a){b("MessengerQuickCamDispatcher").dispatch({type:g.PROCESS_RECORDING,videoBlob:a})},registerQuickCam:function(a,c){b("MessengerQuickCamDispatcher").dispatch({type:g.REGISTER_QUICKCAM,source:a,quickcam:c})},requestUserMedia:function(a,c){b("MessengerQuickCamDispatcher").dispatch({type:g.REQUEST_USER_MEDIA,viewer:a,threadID:c})},retake:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.RETAKE})},sendPhoto:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.SEND_PHOTO})},sendVideo:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.SEND_VIDEO})},setMedia:function(a,c){b("MessengerQuickCamDispatcher").dispatch({type:g.SET_MEDIA,videoSrc:a,videoStream:c})},stopVideo:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.STOP_VIDEO})},shutterOff:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.SHUTTER_OFF})},takeVideo:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.TAKE_VIDEO})},updateProgress:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.UPDATE_PROGRESS})},uploadError:function(a){b("MessengerQuickCamDispatcher").dispatch({type:g.UPLOAD_ERROR,error:a})},uploadComplete:function(a){b("MessengerQuickCamDispatcher").dispatch({type:g.UPLOAD_COMPLETE,data:a})},userMediaError:function(){b("MessengerQuickCamDispatcher").dispatch({type:g.USER_MEDIA_ERROR})}};e.exports=a}),null);
__d("MessengerQuickCamButtonHTML5.react",["cx","fbt","BootloadedComponent.react","ChatConfig","JSResource","AutoFocusableLink.react","MessagingShowNUX.react","MessengerDialog.react","MessengerQuickCamActions","MessengerQuickCamOrigins","MessengerSpinner.react","React","XUIDialog.react","XUISpinner.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="seen_cam_button_nux";d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={dialogOpen:!!this.props.clicked,nuxShown:!!b("ChatConfig").get(j),nuxOpen:!1},this.$3=function(){this.setState({nuxOpen:!1,nuxShown:!0,dialogOpen:!0})}.bind(this),this.$6=function(){this.state.dialogOpen&&this.setState({dialogOpen:!1})}.bind(this),this.$7=function(a){!a?this.$6():b("MessengerQuickCamActions").requestUserMedia(this.props.viewer,this.props.threadID)}.bind(this),this.$1=function(a){if(!this.state.nuxShown){this.setState({nuxOpen:!0});return}if(this.state.dialogOpen)return;a.stopPropagation();this.setState({dialogOpen:!this.state.dialogOpen})}.bind(this),c}a.prototype.render=function(){var a=this.props.textChild;return b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:b("joinClasses")(this.props.className,"_30yy"),onClick:this.$1,ref:"photoButton",role:"button",title:h._("Prendre une photo avec la fonction quick cam")},!!a&&a,this.$2())};a.prototype.$2=function(){if(!this.state.nuxShown)return b("React").createElement(b("MessagingShowNUX.react"),{contextRef:function(){return this.refs.photoButton}.bind(this),settingName:j,shown:this.state.nuxOpen,onHidden:this.$3,ref:"camNUX"},h._("Envoyez des photos et des vid\u00e9os \u00e0 partir de l\u2019appareil photo de votre ordinateur."));return!this.state.dialogOpen?null:this.props.location===b("MessengerQuickCamOrigins").MESSENGER?this.$4():this.$5()};a.prototype.$4=function(){var a=window.innerWidth/3;return b("React").createElement(b("MessengerDialog.react"),{overflow:"hidden",contextRef:function(){return this.refs.photoButton}.bind(this),shown:this.state.dialogOpen,onBlur:this.$6,onToggle:this.$7,width:400>a?400:a},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},b("React").createElement(b("MessengerSpinner.react"),null)),bootloadLoader:b("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerQuickCamButtonHTML5.react"),location:this.props.location,onShown:function(a){this.$7(!0),this.props.onDialogShown&&this.props.onDialogShown(a)}.bind(this),onHidden:this.$6,onEscKeyDown:this.$6,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};a.prototype.$5=function(){var a=window.innerWidth/3;return b("React").createElement(b("XUIDialog.react"),{overflow:"hidden",contextRef:function(){return this.refs.photoButton}.bind(this),shown:this.state.dialogOpen,onBlur:this.$6,hideOnEscape:!0,onToggle:this.$7,width:400>a?400:a},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},b("React").createElement(b("XUISpinner.react"),null)),bootloadLoader:b("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerQuickCamButtonHTML5.react"),location:this.props.location,onShown:function(a){this.$7(!0),this.props.onDialogShown&&this.props.onDialogShown(a)}.bind(this),onHidden:this.$6,onEscKeyDown:this.$6,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};a.propTypes={autoFocus:c.bool,className:c.string.isRequired,clicked:c.bool,location:c.oneOf(b("MessengerQuickCamOrigins").getValues()).isRequired,textChild:c.node,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerTypingIndicator.react",["cx","Image.react","immutable","MercuryParticipants","MercuryTypingAnimation.react","MessengerProfileImageWrapperReact.bs","MessengerBubble.react","ReactComponentWithPureRenderMixin","React","createReactClass_DEPRECATED","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("MessengerProfileImageWrapperReact.bs").jsComponent;a=b("React").PropTypes;var i=32;c=b("createReactClass_DEPRECATED")({displayName:"MessengerTypingIndicator",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MercuryParticipants"))],propTypes:{userID:a.string,showName:a.bool},statics:{calculateState:function(a){return{author:b("MercuryParticipants").getOrFetch(a.userID)}}},render:function(){if(!this.state.author)return null;var a=this.state.author;return b("React").createElement("div",{className:"_1t_p _1hbw"},b("React").createElement("div",{className:"_1t_q"},b("React").createElement(h,{className:"_1t_r",isMessengerUser:a.is_messenger_user,size:i,showBadge:!0},b("React").createElement(b("Image.react"),{alt:"",src:a.image_src,height:i,width:i}))),b("React").createElement("div",{className:"_41ud"},b("React").createElement("div",{className:"_o46 _3erg _29_7"},b("React").createElement(b("MessengerBubble.react"),{attachments:b("immutable").List([b("React").createElement(b("MercuryTypingAnimation.react"),{key:"animation"})]),body:"",className:"_3058",ref:"bubble"}))))},getBubble:function(){return this.refs.bubble}});e.exports=c}),null);
__d("MessengerConversation.react",["csx","cx","fbt","Bootloader","BootloadOnRender.react","ChatTypingIndicatorsWrapper.react","CSS","DOM","DOMDimensions","Event","EventProfiler","immutable","ImmutableObject","JSReliabilityFixesGatingConfig","JSResource","KeyEventController","LazyComponent.react","MercuryActionType","MercuryIDs","MessengerReadReceipt.bs","MercuryShareAttachmentRenderLocations","MessageList.react","MessengerAttachmentRenderer","MessengerButtonReact.bs","MessengerCollapsedLogMessageGroup.react","MessengerContextBannerContainer.react","MessengerDateBreak.react","MessengerDeliveryReceipt.bs","MessengerFlexScrollableArea.react","MessengerBootloadedLogMessage.react","MessengerMessageGroup.react","MessengerNewMessagesNoticeReact.bs","MessengerPlatformSubscriptionMessageClassification","MessengerQuickCamButtonHTML5.react","MessengerQuickCamOrigins","MessengerSpinner.react","MessengerTypingIndicator.react","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","MessengerViewerContactMethodsWebGraphQLQuery","Parent","React","ReactDOM","SubscriptionsHandler","UserActivity","WebGraphQL","WebMessengerConstants","convertMIGColorToFIGColor","getPageIDFromThreadID","gkx","idx","ifRequired","joinClasses","setImmediate","throttle"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MessengerButtonReact.bs").jsComponent,l=b("MessengerNewMessagesNoticeReact.bs").jsComponent;b("immutable").OrderedMap;c=b("React").PropTypes;var m=20,n=100,o=1e3;function p(event,a){return!!(b("KeyEventController").filterEventTypes(event,a)&&b("KeyEventController").filterEventModifiers(event,a)&&event.target instanceof Element&&b("Parent").bySelector(event.target,"._4_j4"))}d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={readReceipts:q(this.props),scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:this.props.thread?this.props.thread.unread_count:0,width:0,viewerEmail:null,viewerPhone:null},this.$1=null,this.$2=null,this.$4=[],this.$14=function(){__p&&__p();var a=this.$16();if(!this.refs||!a||this.props.isLoading){this.$4=[];return}var c=b("getPageIDFromThreadID")(this.props.threadID),d=this.refs.messageList;if(!d||!c){this.$4=[];return}var e=10,f=a.getElement().getBoundingClientRect(),g=[];this.$3.forEach(function(a){var d=a.message_id,h=this.refs.messageList.getMessageElement(d);if(h){h=h.getBoundingClientRect();h.top>f.top-e&&h.bottom<f.bottom+e&&(g.push(d),this.$4.includes(d)||b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,e){b.log(a.ad_client_token,a.ad_id,e.MESSAGE_SEEN_THREAD,!0,d,c)},"MessengerConversation.react"))}}.bind(this),this);this.$4=g}.bind(this),this.$7=function(){var a=this.$16();a&&a.pageUp();return!1}.bind(this),this.$8=function(){var a=this.$16();a&&a.pageDown();return!1}.bind(this),this.$9=function(a){if(a.target===document.body){this.scrollToTop();return!1}return null}.bind(this),this.$10=function(a){if(a.target===document.body){this.scrollToBottom();return!1}return null}.bind(this),this.$13=function(){__p&&__p();if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(!this.refs.scrollable)return;var a=this.$16(),c=this.refs.quickReply;c&&b("CSS").conditionClass(c,"_1mzg",!this.isScrolledToBottom());this.$11();this.$12();a&&this.state.unreadCount&&this.$20(a)&&this.setState({showUnreadNotice:!1,unreadCount:0});this.$30(a);this.$31(a);this.$6()}.bind(this),this.$29=function(a){a.preventDefault(),this.setState({showUnreadNotice:!1}),this.$18()}.bind(this),this.$12=function(){if(!this.isScrolledToBottom()||this.props.messages.size===0)return;b("UserActivity").isOnTab()&&b("UserActivity").isActive()?this.props.onRead(this.props.threadID):this.$2||(this.$2=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(this.$15(),this.props.onRead(this.props.threadID))}.bind(this)))}.bind(this),this.handleResize=function(){__p&&__p();if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(this.refs.scrollable){this.refs.scrollable.handleResize();var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this.refs.scrollable)).width;a!==this.state.width&&this.setState({width:a})}a=this.refs.quickReply;a&&b("CSS").conditionClass(a,"_1mzg",!this.isScrolledToBottom());this.trackBottomIfRequired()}.bind(this),c}a.getDerivedStateFromProps=function(a){return{readReceipts:q(a)}};a.prototype.componentDidMount=function(){__p&&__p();var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.handleResize,50)),b("KeyEventController").registerKey("PAGE_UP",this.$7,p),b("KeyEventController").registerKey("PAGE_DOWN",this.$8,p),b("KeyEventController").registerKey("HOME",this.$9,p),b("KeyEventController").registerKey("END",this.$10,p));this.$1=a;this.$11();this.handleResize();this.$12();this.$5=b("throttle")(this.$13,n);this.$6=b("throttle")(this.$14,o);this.$3=this.props.messages.filter(function(a){return a.is_sponsored});this.$6()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b=a.threadID!==this.props.threadID;b&&(this.$15(),this.setState({scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:a.thread?a.thread.unread_count:0}));(b||a.messages!==this.props.messages)&&(this.$3=a.messages.filter(function(a){return a.is_sponsored}),this.setState({readReceipts:q(a)}))};a.prototype.componentWillUnmount=function(){this.$15(),this.$1&&this.$1.release()};a.prototype.getSnapshotBeforeUpdate=function(){var a=this.$16();if(a)return{originalScrollHeight:a.getScrollHeight(),originalScrollTop:a.getScrollTop()};else return{originalScrollHeight:0,originalScrollTop:0}};a.prototype.componentDidUpdate=function(a,c,d){__p&&__p();if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(!this.refs.scrollable)return;c=this.props.threadID!==a.threadID;if(c||r(a,this.props))this.scrollToBottom(),this.$17();else{var e=this.$16();if(e){var f=e.getScrollHeight();if(d&&f!==d.originalScrollHeight){f=e.getScrollHeight()-d.originalScrollHeight+d.originalScrollTop;this.refs.scrollable.scrollToPosition(f)}else this.$17()}}this.props.messages!==a.messages&&(this.$12(),this.state.scrollingToUnreadMessage&&this.$18(),this.$19());setTimeout(function(){var a=this.$16();this.trackBottomIfRequired();a&&this.state.unreadCount&&!this.state.scrollingToUnreadMessage&&!this.props.isLoading&&(this.$20(a)?this.setState({showUnreadNotice:!1,unreadCount:0}):this.setState({showUnreadNotice:!0}));this.$11();this.$6()}.bind(this),0);e=a.messages&&a.messages.size||0;d=this.props.messages&&this.props.messages.size||0;(c||e===0&&(d>0||!this.props.isLoading))&&b("EventProfiler").informManualInteractionTimestamp(["MessengerThredRow"],!0,"click")};a.prototype.render=function(){__p&&__p();if(this.props.isLoading&&this.props.messages.isEmpty())return this.$21();var a=this.props.messages.last(),c=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),d=this.$22(a),e=this.$23(a);this.$24(a);d=a&&a.author!==c?d||e:null;e=null;if(Array.isArray(d)){var f=d.every(function(a){return a.content_type==="user_email"&&this.state.viewerEmail===null||a.content_type==="user_phone_number"&&this.state.viewerPhone===null}.bind(this));f||(e=b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{options:d,threadID:a.thread_id,onVoiceClipCreate:this.props.onVoiceClipCreate,viewer:this.props.viewer,quickCamOriginLocation:b("MessengerQuickCamOrigins").MESSENGER,messageId:a.message_id,pageId:b("MercuryIDs").getUserIDFromParticipantID(a.author),isMessengerAdPreview:this.props.isMessengerAdPreview,isSponsored:a.is_sponsored,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}),loader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MessengerConversation.react"),placeholder:b("React").createElement("div",null)}))}f=null;if(a&&a.message_source&&a.author!==c&&b("gkx")("AT7Fdvvof3gB21NGh8Fo7o5af68El03cTnUDtqQrI_yHQbziWN3MyQvvj6iMavHBZ0fTg3S3rpHTM9337zgjjUnM")){d=a.message_source;if(d==="camera"){c=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.custom_color):null;a=b("React").createElement("div",{className:"_1gc5",style:c&&{color:c}},i._("Envoyer une r\u00e9ponse photo"));f=b("React").createElement("div",{className:"_1gc6"},b("React").createElement(b("MessengerQuickCamButtonHTML5.react"),{className:"_4rv5 _1gcb",location:b("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer,textChild:a}))}}d=null;c=null;(f||e)&&(d=b("React").createElement("div",{className:"_51op"},b("React").createElement("div",{className:"_51oq",onResize:this.handleResize})),c=b("React").createElement("div",{ref:"quickReply"},b("React").createElement("div",{className:"_1mzb",onResize:this.handleResize},f,e)));a=i._("Messages");f=i._("Charger plus...");return b("React").createElement(b("MessengerFlexScrollableArea.react"),{className:this.props.className,flexChildren:this.$25(),footerChildren:c,onMount:function(){return b("setImmediate")(this.$12)}.bind(this),onScroll:this.props.useManualFetch?undefined:this.$5,ref:"scrollable",shouldStickToBottom:!0,tabIndex:0},b("React").createElement("div",{"aria-label":a,className:b("joinClasses")("__i_",this.props.innerClassName),role:"region"},b("React").createElement("h3",{className:"accessible_elem"},a),this.$26(),this.props.useManualFetch&&!this.props.upExhausted?b("React").createElement(k,{className:"_41jf",label:f,onClick:function(){return this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP)}.bind(this),type:"primary",use:"default"}):null,this.$27(),b("React").createElement(b("MessageList.react"),{DateBreak:b("MessengerDateBreak.react"),deliveryTimestamp:this.props.deliveryReceipts?b("MessengerDeliveryReceipt.bs").getDeliveryTimeOfThread(this.props.deliveryReceipts,this.props.threadID):0,isCanonical:this.props.isCanonical,LogMessage:b("MessengerBootloadedLogMessage.react"),CollapsedLogMessageGroup:b("MessengerCollapsedLogMessageGroup.react"),MessageGroup:b("MessengerMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.$28(this.props.threadID),onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.state.readReceipts,ref:"messageList",location:b("MercuryShareAttachmentRenderLocations").MESSENGER,viewer:this.props.viewer,thread:this.props.thread}),this.props.useManualFetch&&!this.props.downExhausted?b("React").createElement(k,{className:"_41jf",label:f,onClick:function(){return this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN)}.bind(this),type:"primary",use:"default"}):null,b("React").createElement(b("ChatTypingIndicatorsWrapper.react"),{indicatorClass:b("MessengerTypingIndicator.react"),indicatorsDidShow:function(){this.trackBottomIfRequired()}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),d))};a.prototype.$22=function(a){var c=null;a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);var d=a&&a.message_classification===b("MessengerPlatformSubscriptionMessageClassification").AD_MESSAGE;d&&Array.isArray(a&&a.quick_replies)&&(c=a&&a.quick_replies);return c};a.prototype.$23=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};a.prototype.$11=function(){if(this.props.useManualFetch)return;var a=this.$16();a&&a.getScrollTop()<m&&(this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP),this.$19())};a.prototype.$24=function(a){__p&&__p();a=this.$23(a);if(!a)return;a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})).done(function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var c=b?b.find(function(a){return a.is_preferred}):null;!c&&b&&(c=b[0]);b=a?a.find(function(a){return a.is_primary}):null;this.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=c)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})}.bind(this))};a.prototype.isScrolledToBottom=function(){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom())};a.prototype.isScrolledToBottomWithHeight=function(a){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(a))};a.prototype.$25=function(){return b("React").createElement(l,{isOpen:this.state.showUnreadNotice,label:i._({"*":"{number} messages non lus","_1":"1 message non lu"},[i._plural(this.state.unreadCount,"number")]),onClick:this.$29})};a.prototype.$26=function(){return!this.props.isLoaded?null:b("React").createElement(b("MessengerContextBannerContainer.react"),{location:b("MercuryShareAttachmentRenderLocations").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer})};a.prototype.$27=function(){return this.props.isLoaded?null:b("React").createElement("div",{className:"_2k8v"},this.props.isLoading?b("React").createElement(b("MessengerSpinner.react"),null):null)};a.prototype.$21=function(){return b("React").createElement("div",{className:"_4xu0"},b("React").createElement(b("MessengerSpinner.react"),{className:"_4xu1",size:b("MessengerSpinner.react").large_size}))};a.prototype.trackBottomIfRequired=function(){if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired()};a.prototype.scrollToBottom=function(){if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToBottom()};a.prototype.scrollToTop=function(a){if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};a.prototype.$28=function(a){return function(){if(this.props.threadID!==a)return;this.trackBottomIfRequired()}.bind(this)};a.prototype.$17=function(){b("DOM").scry(b("ReactDOM").findDOMNode(this),"img").forEach(function(a){if(a.complete)return;var c=this.props.threadID,d=b("Event").listen(a,"load",function(){this.props.threadID===c&&this.trackBottomIfRequired(),d.remove()}.bind(this))}.bind(this))};a.prototype.$32=function(){var a=this.props.messages,b=this.state.unreadCount;return!b||b>a.size?null:a.get(a.size-b)};a.prototype.$20=function(a){__p&&__p();var b=this.props.messages,c=this.$32();if(!c)return!1;var d=a.getElement().getBoundingClientRect();return b.filter(function(a){return a.timestamp<=c.timestamp}).some(function(a){a=this.refs.messageList.getMessageElement(a.message_id);if(!a)return!1;a=a.getBoundingClientRect();return a.bottom>d.top&&a.top<d.bottom}.bind(this))};a.prototype.$33=function(a){return!!this.props.messages.find(function(b){return b.message_id===a})};a.prototype.$18=function(){__p&&__p();if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:!0});var a=this.$32();if(!a){this.scrollToTop(!1);return}this.$34(a.message_id,function(){this.setState({scrollingToUnreadMessage:!1,unreadCount:0})}.bind(this))};a.prototype.$34=function(a,c){a=this.refs.messageList.getMessageElement(a,!0);var d=this.$16();if(!a||!d)return;a=a.getBoundingClientRect().top;var e=b("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,f=d.getElement().getBoundingClientRect().top;a=a+Math.abs(e)+f;d.setScrollTop(a,!0,{callback:c})};a.prototype.$16=function(){if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;return this.refs.scrollable&&this.refs.scrollable.getArea()};a.prototype.$15=function(){this.$2&&this.$2.unsubscribe(),this.$2=null};a.prototype.$35=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleVideoAttachment(a)||b("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id})};a.prototype.$30=function(a){__p&&__p();var c=this.refs.messageList;if(!c||!a)return;var d=[];a=a.getElement().getBoundingClientRect();var e=b("MessengerVideoAutoplayStore").getMessageIDs(this.props.threadID),f=e||this.$35()||b("immutable").List();f.map(function(a){var e=b("MessengerAttachmentRenderer").getVideoElem(a,c);e&&d.push([a,e.getBoundingClientRect()])});d.length&&b("MessengerVideoAutoplayActions").onScroll(this.props.threadID,e?null:f,b("immutable").Map(d),a)};a.prototype.$36=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleSphericalPhotoAttachment(a)}).map(function(a){return a.message_id})};a.prototype.$31=function(a){__p&&__p();b("ifRequired")("MessengerSphericalRendererActions",function(c){__p&&__p();b("ifRequired")("MessengerSphericalRendererStore",function(d){__p&&__p();var e=this.refs.messageList;if(!e||!a)return;var f=[],g=a.getElement().getBoundingClientRect();d=d.getMessageIDs(this.props.threadID);d=d||this.$36()||b("immutable").List();d.map(function(a){var c=b("MessengerAttachmentRenderer").getSphericalPhotoElem(a,e);c&&f.push([a,c.getBoundingClientRect()])});f.length&&c.onScroll(this.props.threadID,d,b("immutable").Map(f),g)}.bind(this),function(){})}.bind(this),function(){})};a.prototype.$19=function(){b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$35());var a=this.$36();a&&a.count()!==0&&b("ifRequired")("MessengerSphericalRendererActions",function(b){b.updateStore(this.props.threadID,a)}.bind(this),function(){b("Bootloader").loadModules(["MessengerSphericalRendererActions","MessengerSphericalRendererStore"],function(b,c){b.updateStore(this.props.threadID,a)}.bind(this),"MessengerConversation.react")}.bind(this))};a.propTypes={contact:c.instanceOf(b("ImmutableObject")),deliveryReceipts:c.object,downExhausted:c.bool,fetchMessages:c.func.isRequired,innerClassName:c.string,isCanonical:c.bool,isLoaded:c.bool,isLoading:c.bool,isMessengerAdPreview:c.bool,messages:c.instanceOf(b("immutable").List).isRequired,onVoiceClipCreate:c.func,onReplyToMessage:c.func,participants:c.instanceOf(b("immutable").Map),readReceipts:c.object.isRequired,thread:c.object,threadID:c.string.isRequired,upExhausted:c.bool,useManualFetch:c.bool,viewer:c.string.isRequired};function q(a){__p&&__p();var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);var f=null;b("immutable").Seq(a.messages).reverse().forEach(function(a){if(a.action_type!==b("MercuryActionType").LOG_MESSAGE){f=a;return!1}return!0});return d.withMutations(function(c){__p&&__p();b("immutable").Seq(a.messages).reverse().forEach(function(a){__p&&__p();if(e.size===0)return!1;if(!e.has(a.author))return;c.update(a.author,function(b){var c=b;(!b||b.watermark<=a.timestamp)&&(c={watermark:a.timestamp,action:a.timestamp});f&&f.timestamp<c.watermark&&(c={watermark:f.timestamp,action:f.timestamp});return c});e["delete"](a.author)})})}function r(a,c){var d=b("MercuryIDs").getParticipantIDFromUserID(c.viewer);return c.threadID===a.threadID&&c.messages!==a.messages&&!c.messages.isEmpty()&&c.messages.last()!==a.messages.last()&&c.messages.last().author===d}e.exports=a}),null);
__d("MessengerMessageRequestsInfo.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){return b("React").createElement("div",{className:"_5u15"},h._("Ouvrez une demande pour obtenir plus d\u2019infos sur la personne qui vous envoie un message.")," ",h._("Ils ne sauront pas que vous l\u2019avez vu tant que vous n\u2019aurez pas accept\u00e9."))};e.exports=a}),null);
__d("MessengerResponsiveBlock.react",["React","createCancelableFunction","requestAnimationFrame","shallowEqual","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,visibility:"hidden",zIndex:-1},i={left:0,position:"absolute",top:0,transition:"0s"},j={height:"200%",left:0,position:"absolute",top:0,transition:"0s",width:"200%"};d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.dirty=!1,this.lastWidth=null,this.lastHeight=null,this.lastBreakpointsToggles=null,this.setupWeirdScrollTracking=function(){this.refs.expandChild.style.width="10000px",this.refs.expandChild.style.height="10000px",this.refs.expand.scrollLeft=1e5,this.refs.expand.scrollTop=1e5,this.refs.shrink.scrollLeft=1e5,this.refs.shrink.scrollTop=1e5}.bind(this),this.$2=function(){__p&&__p();var a=this.refs.outer.offsetWidth,c=this.refs.outer.offsetHeight;if((a!=this.lastWidth||c!=this.lastHeight)&&!this.dirty){if(Math.abs(a-(this.lastWidth||0))<10&&Math.abs(c-(this.lastHeight||0))<16)return;this.dirty=!0;this.lastWidth=a;this.lastHeight=c;a=this.props.breakpointsToggles(a,c);b("shallowEqual")(this.lastBreakpointsToggles,a)?this.dirty=!1:this.forceUpdate(function(){b("requestAnimationFrame")(function(){this.dirty=!1}.bind(this))}.bind(this));this.lastBreakpointsToggles=a}this.setupWeirdScrollTracking()}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=b("createCancelableFunction")(this.$2),this.onScroll=b("throttle")(this.$1,50),this.setupWeirdScrollTracking(),this.onScroll()};a.prototype.componentWillUnmount=function(){this.$1.cancel()};a.prototype.render=function(){return b("React").createElement("div",{ref:"outer"},this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),b("React").createElement("div",{style:h,onScroll:this.onScroll,ref:"expand"},b("React").createElement("div",{style:i,ref:"expandChild"})),b("React").createElement("div",{style:h,onScroll:this.onScroll,ref:"shrink"},b("React").createElement("div",{style:j})))};a.propTypes={children:c.func.isRequired,breakpointsToggles:c.func.isRequired};e.exports=a}),null);
__d("MessengerThreadListGridWrapper.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props.label;return b("React").createElement("div",null,b("React").createElement("h2",{className:"accessible_elem"},a),b("React").createElement("ul",{"aria-label":a,role:"grid"},this.props.children))};function a(){h.apply(this,arguments)}a.propTypes={label:c.string.isRequired};e.exports=a}),null);
__d("MessengerContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=12;c=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("ContextualLayerAutoFlipHorizontal"),b("ContextualLayerUpdateOnScroll"),b("LayerHideOnEscape"),b("AccessibleLayer")],displayName:"MessengerContextualDialog",shouldSetARIAProperties:!1,theme:{wrapperClassName:"_1r_9",arrowDimensions:{offset:a,length:16}}}));e.exports=c}),null);
__d("MessengerRadioButton.react",["cx","React","XUIRadioInput.react"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("XUIRadioInput.react"),babelHelpers["extends"]({},this.props,{className:"__rm"}))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerRadioList.react",["invariant","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","MessengerRadioButton.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;d=b("React").PropTypes;f=babelHelpers.inherits(a,b("React").Component);h=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(event){event.target instanceof HTMLInputElement||g(0),this.props.onSelect&&this.props.onSelect(this.props.value)}.bind(this),b}a.prototype.render=function(){return b("React").createElement("li",{className:this.props.className},b("React").createElement(b("InputLabel_DEPRECATED.react"),{display:"inline"},b("React").createElement(b("MessengerRadioButton.react"),{checked:this.props.selectedValue===this.props.value,disabled:!!this.props.disabled,name:this.props.name,onChange:this.$1,value:this.props.value}),b("React").createElement(b("InputLabelLabel_DEPRECATED.react"),null,this.props.children)))};a.propTypes={disabled:d.bool,name:d.string,onSelect:d.func,selectedValue:d.any,value:d.any};i=babelHelpers.inherits(c,b("React").Component);i&&i.prototype;c.prototype.render=function(){var a=b("React").Children.map(this.props.children,function(a){return b("React").cloneElement(a,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue})},this);return b("React").createElement("ul",babelHelpers["extends"]({},this.props,{name:null}),a)};function c(){i.apply(this,arguments)}c.propTypes={name:d.string,onValueChange:d.func,selectedValue:d.any};c.Item=a;e.exports=c}),null);
__d("MNCommerceAttachmentConstants",[],(function(a,b,c,d,e,f){a={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:"subTotal",SHIPPING:"shippingCost",TAX:"tax",TOTAL:"totalCost"}};e.exports=a}),null);
__d("MNCommerceDialog.react",["cx","MessengerEnvironment","LayerFadeOnHide","LayerHideOnEscape","MNCommerceAttachmentConstants","MessengerDialog.react","React","XUIDialog.react","emptyFunction","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"MNCommerceDialog",propTypes:{onToggle:a.func,shown:a.bool,width:a.number.isRequired},getDefaultProps:function(){return{onToggle:b("emptyFunction"),repositionOnUpdate:!0,shown:!0,width:b("MessengerEnvironment").messengerui?b("MNCommerceAttachmentConstants").MDOTCOMDIALOG.WIDTH:b("MNCommerceAttachmentConstants").DIALOG.WIDTH}},componentDidUpdate:function(){this.props.repositionOnUpdate&&setTimeout(function(){this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer&&this.refs.dialog.layer.updatePosition()}.bind(this),0)},render:function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialog.react"):b("XUIDialog.react");return b("React").createElement(c,babelHelpers["extends"]({behaviors:{LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")}},this.props,{className:b("joinClasses")(this.props.className,a?"_3rx0":""),ref:"dialog"}),this.props.children)}});e.exports=c}),null);
__d("MNCommerceDialogBody.react",["MessengerEnvironment","MessengerDialogBody.react","React","XUIDialogBody.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=b("MessengerEnvironment").messengerui;a=a?b("MessengerDialogBody.react"):b("XUIDialogBody.react");return b("React").createElement(a,this.props,this.props.children)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MNCommerceDialogTitle.react",["MessengerEnvironment","MessengerDialogHeader.react","React","XUIDialogTitle.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=b("MessengerEnvironment").messengerui;a=a?b("MessengerDialogHeader.react"):b("XUIDialogTitle.react");return b("React").createElement(a,this.props,this.props.children)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MNCommerceDetailsDialog.react",["cx","fbt","React","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogTitle.react","XUISpinner.react","XUIButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(){return b("React").createElement("div",{className:"_4y9b"},b("React").createElement("p",{className:"_4y9c"},h._("D\u00e9sol\u00e9, une erreur s\u2019est produite.")),b("React").createElement("p",{className:"_4y9d"},this.props.errorMessage),b("React").createElement(b("XUIButton.react"),{onClick:this.props.onTryAgain,label:h._("R\u00e9essayer")}))}.bind(this),this.$1=function(){return b("React").createElement("div",{className:"_4y9e"},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large",paused:!1}))},c}a.prototype.render=function(){var a=null;this.props.loading?a=this.$1():this.props.error?a=this.$2():a=this.props.children;return b("React").createElement(b("MNCommerceDialog.react"),{className:this.props.className,modal:!0,onToggle:this.props.onToggle,shown:this.props.shown},this.$3(),b("React").createElement(b("MNCommerceDialogBody.react"),{useCustomPadding:!0},a))};a.prototype.$3=function(){return this.props.title?b("React").createElement(b("MNCommerceDialogTitle.react"),null,this.props.title):null};a.propTypes={error:c.object,errorMessage:c.node,loading:c.bool.isRequired,onToggle:c.func,onTryAgain:c.func,title:c.node,shown:c.bool.isRequired};a.defaultProps={shown:!1};e.exports=a}),null);
__d("MNCommerceButton.react",["MessengerEnvironment","MessengerDialogButton.react","React","XUIButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialogButton.react"):b("XUIButton.react"),d=this.props.type;d||(d=this.props.type==="confirm"?"primary":"secondary");a=a?"default":this.props.use;d=babelHelpers["extends"]({},this.props,{type:d,use:a});return b("React").createElement(c,d,this.props.children)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MNCommerceDialogFooter.react",["cx","MessengerEnvironment","MessengerDialogFooter.react","React","XUIDialogFooter.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialogFooter.react"):b("XUIDialogFooter.react"),d=void 0,e=this.props.children;a&&(d=b("React").Children.count(this.props.children),e=b("React").Children.map(this.props.children,function(a,c){return!a?null:b("React").cloneElement(a,{className:b("joinClasses")(a.props.className,"_4ec0"),type:c===0&&d===2?"secondary":"primary"})}));return b("React").createElement(c,this.props,e)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MNCommercePromotionManageBlockDialog.react",["fbt","MessengerEnvironment","Link.react","MessengerRadioList.react","MNCommerceButton.react","MNCommerceDetailsDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","MNCommerceBlockTypeJSInstance","React","URI","WorkModeConfig","XUIRadioList.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerRadioList.react").Item,j=b("XUIRadioList.react").Item;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(a,b){h.constructor.call(this,a,b),k.call(this),this.state=this.$1()}a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.$1(a))};a.prototype.$1=function(a){a=a||this.props;var c=b("MNCommerceBlockTypeJSInstance").ALL;(a.isAllBlocked||a.isPromotionBlocked)&&(c=b("MNCommerceBlockTypeJSInstance").NONE);return{type:c}};a.prototype.render=function(){var a=this.props.merchantName||"";a=g._("G\u00e9rer les messages de {label for merchant name}",[g._param("label for merchant name",a)]);var c=g._("Annuler"),d=g._("Confirmer"),e=g._("Impossible d\u2019afficher G\u00e9rer les options."),f=b("WorkModeConfig").is_work_user?new(b("URI"))("https://facebook.com/help/work/1731361900459513").setSubdomain(b("WorkModeConfig").company_subdomain||""):new(b("URI"))("https://www.facebook.com/help/389645087895231");f=b("React").createElement(b("Link.react"),{href:f,target:"_blank"},g._("En savoir plus"));return b("React").createElement(b("MNCommerceDetailsDialog.react"),babelHelpers["extends"]({errorMessage:e,onToggle:this.props.onToggle,shown:this.props.shown},this.props),b("React").createElement(b("MNCommerceDialogTitle.react"),{showCloseButton:!0},a),b("React").createElement(b("MNCommerceDialogBody.react"),null,this.$2()),b("React").createElement(b("MNCommerceDialogFooter.react"),{leftContent:f},b("React").createElement(b("MNCommerceButton.react"),{label:c,onClick:this.props.onCancelButtonClick,use:"default"}),b("React").createElement(b("MNCommerceButton.react"),{label:d,onClick:this.$3,use:"confirm"})))};a.prototype.$2=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerRadioList.react"):b("XUIRadioList.react");a=a?i:j;return b("React").createElement(c,{selectedValue:this.state.type,onValueChange:this.onTypeChange},b("React").createElement(a,{value:b("MNCommerceBlockTypeJSInstance").ALL},g._("Recevoir tous les messages")),b("React").createElement(a,{value:b("MNCommerceBlockTypeJSInstance").NONE},g._("D\u00e9sactiver tous les messages")))};a.propTypes={isAllBlocked:c.bool,isPromotionBlocked:c.bool,error:c.object,loading:c.bool.isRequired,merchantName:c.string,onCancelButtonClick:c.func,onConfirmButtonClick:c.func.isRequired,pageID:c.string};var k=function(){this.onTypeChange=function(a){this.setState({type:a})}.bind(this),this.$3=function(a){a=this.props;a.onToggle(!1);if(!a.onConfirmButtonClick)return;var b=a.pageID;a.onConfirmButtonClick(b,this.state.type)}.bind(this)};e.exports=a}),null);
__d("MNCommerceCacheTimeoutLimits",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SUCCESS_TIMEOUT:10,ERROR_TIMEOUT:1});e.exports=a}),null);
__d("XMNCommercePromotionStateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/promotion/state/",{page_id:{type:"String",required:!0}})}),null);
__d("MNCommercePromotionStateDataManager",["AsyncRequest","MNCommercePromotionStateActions","XMNCommercePromotionStateController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.fetchPromotionState=function(a){a=b("XMNCommercePromotionStateController").getURIBuilder().setString("page_id",a).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};a.prototype.$1=function(a){var c=a.getRequest().uri.getQueryData();c=c.page_id;a.payload.pageID=c;b("MNCommercePromotionStateActions").stateLoaded(a.payload)};a.prototype.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateLoadError(a)};function a(){}e.exports=new a()}),null);
__d("MNCommercePromotionStateStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommercePromotionStateDataManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerDispatcher")),this.__moduleID=e.id,this.$MNCommercePromotionStateStore1=new(b("Cache"))()}a.prototype.__onDispatch=function(a){__p&&__p();var c=a.type,d=a.pageID||a.state&&a.state.pageID;switch(c){case b("MNCommerceActionTypes").PROMOTION_STATE.LOADED:c=a.state;this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").empty().setValue(c),null,b("MNCommerceCacheTimeoutLimits").SUCCESS_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").PROMOTION_STATE.LOAD_ERROR:this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").empty().setError(new Error("Unable to load permissions for: "+d)),null,b("MNCommerceCacheTimeoutLimits").ERROR_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").PROMOTION_STATE.RELOAD:d&&(this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").loading()),b("MNCommercePromotionStateDataManager").fetchPromotionState(d));this.__emitChange();break}};a.prototype.getPromotionState=function(a){a&&!this.$MNCommercePromotionStateStore1.has(a)&&(this.$MNCommercePromotionStateStore1.set(a,b("LoadObject").loading().setValue({pageID:a})),b("MNCommercePromotionStateDataManager").fetchPromotionState(a));return this.$MNCommercePromotionStateStore1.get(a)||b("LoadObject").empty()};e.exports=new a()}),null);
__d("MNCommercePromotionManageBlockDialogContainer.react",["MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialog.react","MNCommercePromotionStateActions","MNCommercePromotionStateStore","PureStoreBasedStateMixin","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").createClass({displayName:"MNCommercePromotionManageBlockDialogContainer",mixins:[b("PureStoreBasedStateMixin")(b("MNCommercePromotionStateStore"))],statics:{calculateState:function(){var a=b("MNCommerceDialogStateStore").getState(),c=null;a&&(c=a.pageID);var d=b("MNCommercePromotionStateStore").getPromotionState(c);return{shown:!!a,loading:d.isLoading(),pageID:c,promotionState:d.getValue(),error:d.getError()}}},render:function(){var a=this.state.promotionState;return b("React").createElement(b("MNCommercePromotionManageBlockDialog.react"),{error:this.state.error,isAllBlocked:a&&a.is_all_blocked,isPromotionBlocked:a&&a.is_promotion_blocked,loading:this.state.loading,merchantName:a&&a.name,onCancelButtonClick:this._hideDialog,onToggle:this._onToggle,pageID:this.state.pageID,onTryAgain:this._onTryAgainClick,onConfirmButtonClick:this._handleConfirmButtonClick,shown:this.state.shown})},_onToggle:function(a){a||this._hideDialog()},_onTryAgainClick:function(){b("MNCommercePromotionStateActions").stateReload(this.state.pageID)},_hideDialog:function(){b("MNCommerceDialogStateActions").hideDialog()},_handleConfirmButtonClick:function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)}});e.exports=a}),null);
__d("MessengerPlatformAbuseReportType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPAM:"spam",INAPPROPRIATE:"inappropriate",OTHER_ABUSE:"other_abuse"})}),null);
__d("XMNReportPageConversationActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger_platform/report_page_conversation/submit/",{page_id:{type:"FBID",required:!0},report_type:{type:"String",required:!0},surface:{type:"String"}})}),null);
__d("MNCommerceReportConversationDialog.react",["cx","fbt","AsyncRequest","Link.react","MercuryIDs","MercuryParticipants","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerEnvironment","MessengerPlatformAbuseReportType","MNCommerceDialogStateActions","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialogContainer.react","React","XMNReportPageConversationActionController","XUIRadioList.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("XUIRadioList.react").Item;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={error:!1,pageName:"",reportType:b("MessengerPlatformAbuseReportType").SPAM},this.$9=function(){this.$1();var a=function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)},c=this.props.pageID;b("MNCommerceDialogStateActions").showDialog(b("MNCommercePromotionManageBlockDialogContainer.react"),{pageID:c,onConfirmButtonClick:a})}.bind(this),this.$7=function(a){this.setState({reportType:a})}.bind(this),this.$1=function(){this.props.onToggle?this.props.onToggle():b("MessengerDialogs.bs").removeDialog()}.bind(this),this.$6=function(){var a=b("MessengerEnvironment").messengerui?"www_messenger":"www_chat_tabs";a=b("XMNReportPageConversationActionController").getURIBuilder().setFBID("page_id",this.props.pageID).setString("report_type",this.state.reportType).setString("surface",a).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(){this.$1()}.bind(this)).setErrorHandler(function(){this.setState({error:!0})}.bind(this)).send()}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){var a=b("MercuryParticipants").getNow(b("MercuryIDs").getParticipantIDFromUserID(this.props.pageID));this.setState({pageName:a?a.short_name:""})};a.prototype.render=function(){return this.props.showDialog===!1?null:b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1},b("React").createElement(b("MessengerDialogHeader.react"),null,h._("Signaler")),this.$2(),this.$3())};a.prototype.$2=function(){var a=b("React").createElement("div",{className:"_5zjy"},h._("Aidez-nous \u00e0 comprendre ce qui se passe\u00a0:")),c=this.$4(),d=b("React").createElement("div",{className:"_5zjz"},h._("Si vous signalez cette conversation, tous les messages de {page name} seront \u00e9galement d\u00e9sactiv\u00e9s.",[h._param("page name",this.state.pageName)])),e=this.$5();return this.state.error?b("React").createElement(b("MessengerDialogBody.react"),{className:"_5zj-"},h._("Une erreur s\u2019est produite.")):b("React").createElement(b("MessengerDialogBody.react"),{className:"_5zj_"},a,c,d,e)};a.prototype.$3=function(){var a=h._("Signaler"),c=h._("Annuler"),d=h._("OK");return this.state.error?b("React").createElement(b("MessengerDialogFooter.react"),{className:"_5zk0"},b("React").createElement(b("MessengerDialogButton.react"),{label:d,onClick:this.$1,type:"primary",use:"default"})):b("React").createElement(b("MessengerDialogFooter.react"),{className:"_5zk0"},b("React").createElement(b("MessengerDialogButton.react"),{label:c,type:"secondary",onClick:this.$1,use:"default"}),b("React").createElement(b("MessengerDialogButton.react"),{label:a,onClick:this.$6,type:"primary",use:"default"}))};a.prototype.$4=function(){return b("React").createElement(b("XUIRadioList.react"),{selectedValue:this.state.reportType,onValueChange:this.$7},b("React").createElement(j,{value:b("MessengerPlatformAbuseReportType").SPAM},h._("C\u2019est du contenu ind\u00e9sirable")),b("React").createElement(j,{value:b("MessengerPlatformAbuseReportType").INAPPROPRIATE},h._("C\u2019est inappropri\u00e9")),b("React").createElement(j,{value:b("MessengerPlatformAbuseReportType").OTHER_ABUSE},h._("Autre")))};a.prototype.$5=function(){return b("React").createElement("div",{className:"_5zk1"},h._("Pour ne plus recevoir de messages sans signaler {page name}, vous pouvez aussi g\u00e9rer vos messages.",[h._param("page name",this.state.pageName)]),this.$8())};a.prototype.$8=function(){return b("React").createElement(b("Link.react"),{className:"_5zk2",onClick:this.$9},h._("G\u00e9rer"))};a.propTypes={pageID:c.string.isRequired,showDialog:c.bool,onToggle:c.func};e.exports=a}),null);
__d("MessengerDeleteAllMenuBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerDeleteAllMenuReactComponent").__setRef("MessengerDeleteAllMenuBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerDeleteDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerDeleteDialogReactComponent").__setRef("MessengerDeleteDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerMarkSpamDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerMarkSpamDialogReactComponent").__setRef("MessengerMarkSpamDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerMuteDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerMuteDialogReactComponent").__setRef("MessengerMuteDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("WorkchatNotificationsJewelBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("workchatNotificationsJewelReactComponent").__setRef("WorkchatNotificationsJewelBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerRTCUnavailableDialog.react",["fbt","MessengerDialogs.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerDialogBodyReact.bs").jsComponent;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1},b("React").createElement(b("MessengerDialogHeader.react"),null,g._("Appel impossible")),b("React").createElement(i,null,this.$2()),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:g._("OK"),type:"primary"})))};a.prototype.$2=function(){return b("React").createElement("div",null,g._("{name} n\u2019est pas disponible pour le moment.",[g._param("name",this.props.name)]))};a.prototype.$1=function(a){a||b("MessengerDialogs.bs").removeDialog()};function a(){h.apply(this,arguments)}a.propTypes={name:c.string.isRequired};e.exports=a}),null);
__d("MessengerRTCGroupCallUnsupportedBrowserDialog.react",["fbt","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerDialogBodyReact.bs").jsComponent;a=function(a){var c=a.browserName,d=a.hasVideo,e=a.onUnmount;a=a.hideDialog;return b("React").createElement(b("MessengerDialog.react"),{onToggle:e},b("React").createElement(b("MessengerDialogHeader.react"),null,i(d)),b("React").createElement(h,null,j(c,d)),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:g._("OK"),onClick:a,type:"primary"})))};function i(a){return a?g._("Changez de navigateur pour passer des appels vid\u00e9os de groupe"):g._("Changez de navigateur pour passer des appels de groupe")}function j(a,c){return c?g._("Malheureusement, notre fonctionnalit\u00e9 d\u2019appel de groupe ne prend pas encore en charge {browser name, i.e. Internet Explorer or Safari}. Pour lancer un appel vid\u00e9o de groupe, utilisez {link to install chrome}.",[g._param("browser name, i.e. Internet Explorer or Safari",a),g._param("link to install chrome",b("React").createElement(b("Link.react"),{href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome"))]):g._("Malheureusement, notre fonctionnalit\u00e9 d\u2019appel de groupe ne prend pas encore en charge {browser name, i.e. Internet Explorer or Safari}. Pour passer un appel de groupe, utilisez {link to install chrome}.",[g._param("browser name, i.e. Internet Explorer or Safari",a),g._param("link to install chrome",b("React").createElement(b("Link.react"),{href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome"))])}e.exports=a}),null);
__d("MessengerRTCUnsupportedBrowserDialog.react",["cx","fbt","CurrentUser","FBRTCConfig","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.browserName,d=a.hasVideo,e=a.onUnmount;a=a.hideDialog;return b("React").createElement(b("MessengerDialog.react"),{onToggle:e},b("React").createElement(b("MessengerDialogHeader.react"),null,h._("Changer de navigateur pour passer des appels")),b("React").createElement(j,null,this.$1(c,d)),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{className:"_30vt",label:h._("En savoir plus"),onClick:a,type:"secondary",href:b("FBRTCConfig").unsupportedBrowserUrl(),target:"_blank"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("OK"),onClick:a,type:"primary"})))};a.prototype.$1=function(a,c){if(b("CurrentUser").isWorkUser())return c?h._("Malheureusement, {browser name, i.e. Internet Explorer or Safari} ne prend pas encore en charge notre fonctionnalit\u00e9 d\u2019appel vid\u00e9o. Pour passer un appel, ouvrez Workplace Chat dans {link to install chrome} ou {link to install firefox}.",[h._param("browser name, i.e. Internet Explorer or Safari",a),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3())]):h._("Malheureusement, {browser name, i.e. Internet Explorer or Safari} ne prend pas encore en charge notre fonctionnalit\u00e9 d\u2019appel vid\u00e9o. Pour passer un appel, ouvrez Workplace Chat dans {link to install chrome} ou {link to install firefox}.",[h._param("browser name, i.e. Internet Explorer or Safari",a),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3())]);else return c?h._("Malheureusement, {browser name, i.e. Internet Explorer or Safari} ne prend pas encore en charge notre fonctionnalit\u00e9 d\u2019appel vid\u00e9o. Pour passer un appel, ouvrez Messenger dans {link to install chrome} ou {link to install firefox}.",[h._param("browser name, i.e. Internet Explorer or Safari",a),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3())]):h._("Malheureusement, {browser name, i.e. Internet Explorer or Safari} ne prend pas encore en charge notre fonctionnalit\u00e9 d\u2019appel vid\u00e9o. Pour passer un appel, ouvrez Messenger dans {link to install chrome} ou {link to install firefox}.",[h._param("browser name, i.e. Internet Explorer or Safari",a),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3())])};a.prototype.$2=function(){return b("React").createElement(b("Link.react"),{onClick:this.props.hideDialog,href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome")};a.prototype.$3=function(){return b("React").createElement(b("Link.react"),{onClick:this.props.hideDialog,href:"https://www.mozilla.org/en-US/firefox/new/",target:"_blank"},"Mozilla Firefox")};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MessengerRTCUnsupportedBrowserDialogController",["fbt","MessengerDialogs.bs","MessengerRTCUnsupportedBrowserDialog.react","MessengerRTCGroupCallUnsupportedBrowserDialog.react","React","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={_dialog:null,_handleToggle:function(a){a||b("MessengerDialogs.bs").removeAllDialogs()},hideDialog:function(){b("MessengerDialogs.bs").removeAllDialogs()},_browserName:function(){if(b("UserAgent").isBrowser("Firefox"))return g._("Firefox");else if(b("UserAgent").isBrowser("IE"))return g._("Internet Explorer");else if(b("UserAgent").isBrowser("Safari"))return g._("Safari");else return g._("votre navigateur")},render:function(a){var c=a.hasVideo,d=a.isGroupCall;b("MessengerDialogs.bs").showDialog(function(){return d?b("React").createElement(b("MessengerRTCGroupCallUnsupportedBrowserDialog.react"),{browserName:this._browserName(),hasVideo:c,hideDialog:this.hideDialog,onUnmount:this._handleToggle}):b("React").createElement(b("MessengerRTCUnsupportedBrowserDialog.react"),{browserName:this._browserName(),hasVideo:c,hideDialog:this.hideDialog,onUnmount:this._handleToggle})}.bind(this))},dismiss:b("MessengerDialogs.bs").removeAllDialogs};e.exports=a}),null);
__d("MessengerRTCInvokeHandler",["invariant","MercuryIDs","MercuryThreadIDMap","MessengerDialogs.bs","MessengerRTCFunnelLogger","MessengerRTCUnavailableDialog.react","MNRTCCallabilityStore","React","RTCCallState","FBRTCLogger","VideoCallTypedLogger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MercuryThreadIDMap").get(),i=b("FBRTCLogger").Trigger;a={isCallable:function(a,c){var d;!1;if(b("MercuryIDs").isGroupChat(a))d=!0;else{a=b("MercuryIDs").getUserIDFromThreadID(a);d=a?b("MNRTCCallabilityStore").isCallable(a,c):!1}return d},handleStartCall:function(a,c,e,f,j,k,l){__p&&__p();b("MessengerRTCFunnelLogger").startFunnel("FBMessagesPage"),l?b("MercuryIDs").isGroupChat(a)?(b("MessengerRTCFunnelLogger").appendAction("start_in_group_thread"),d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(d,g,k,l){__p&&__p();var m=c.rtc_call_data;if(m&&m.call_state!==b("RTCCallState").NO_ONGOING_CALL&&m.server_info_data){b("MessengerRTCFunnelLogger").appendAction("join_existing_call");d.startGroupCall({conferenceName:"GROUP:"+c.thread_fbid,hasVideo:e,serverInfoData:m.server_info_data,trigger:m.call_state!==b("RTCCallState").AUDIO_GROUP_CALL?e?i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:e?i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return}if(!g.isGroupCallWebtrcSupported()){b("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");k.render({hasVideo:e,isGroupCall:!0});return}var n=function(a){b("MessengerRTCFunnelLogger").appendAction("render_participant_picker"),l.render({participants:j.filter(function(a){a=a.fbid;return a!==f}),thread:c,viewerID:f,trigger:e?i.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:"GROUP:"+a,hasVideo:e})};b("MercuryIDs").isLocalThread(a)?h.getServerIDFromClientID(a,function(a){return n(a)}):n(b("MercuryIDs").getThreadFBIDFromThreadID(a))})):(b("MessengerRTCFunnelLogger").appendAction("start_in_p2p_thread"),new(b("VideoCallTypedLogger"))().setEvent("web_messenger_call_click").log(),d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController"],function(c,d,f){if(!d.isWebrtcSupported()){b("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");f.render({hasVideo:e,isGroupCall:!1});return}d=b("MercuryIDs").getUserIDFromThreadID(a);d||g(0);c.startOutgoingCall(d,"messenger_dot_com",!e)})):(b("MessengerRTCFunnelLogger").endFunnel("callee_not_callable"),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("MessengerRTCUnavailableDialog.react"),{name:k})}))}};e.exports=a}),null);
__d("MessengerRTCVideoCallButtonReact.bs",["ix","cx","fbt","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={height:"32px",width:"32px"};function k(a,b){return{clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:a,strokeMiterlimit:"10",strokeWidth:"2"}}var l=k("#888888",0),m=b("ReasonReact.bs").statelessComponent("MessengerRTCVideoCallButtonReact");function n(a,c,d,e){e=m.slice();e[9]=function(){var e=d!==0?i._("D\u00e9marrez un appel vid\u00e9o de groupe"):i._("D\u00e9marrez un appel vid\u00e9o"),f=c!==0?k(a,0):l,h=b("React").createElement("div",{className:"_2phz"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,[g("470488")],0,[e],0,0,[])));f=b("React").createElement("div",{style:j,title:e},b("React").createElement("svg",{style:f,viewBox:"0 0 64 64"},b("React").createElement("title",undefined,e),b("React").createElement("g",undefined,b("React").createElement("g",undefined,b("React").createElement("path",{d:"M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3\nc3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z"})))));e=b("VideoCallWebDriverIDs").START_VIDEO_CALL;var m=+b("CurrentUser").isWorkUser();return b("React").cloneElement(m!==0?h:f,{"data-testid":e})};return e}a=b("ReasonReact.bs").wrapReasonForJs(m,function(a){return n(a.customColor,+a.isAvailable,+a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.svgWrapperStyle=j;f.svgStyle=k;f.unavailable=l;f.component=m;f.make=n;f.jsComponent=a}),null);
__d("MessengerRTCVoiceCallButtonReact.bs",["ix","cx","fbt","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={height:"32px",width:"32px"};function k(a,b){return{clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:a,strokeMiterlimit:"10",strokeWidth:"2"}}var l=k("#888888",0),m=b("ReasonReact.bs").statelessComponent("MessengerRTCVoiceCallButtonReact");function n(a,c,d,e){e=m.slice();e[9]=function(){var e=d!==0?i._("D\u00e9marrez un appel de groupe"):i._("D\u00e9marrer un appel vocal"),f=c!==0?k(a,0):l,h=b("React").createElement("div",{className:"_2phz"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,[g("470545")],0,[e],0,0,[])));f=b("React").createElement("div",{style:j,title:e},b("React").createElement("svg",{style:f,viewBox:"0 0 64 64"},b("React").createElement("title",undefined,e),b("React").createElement("path",{d:"M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7\nc0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2\nc1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z"})));e=b("VideoCallWebDriverIDs").START_VOICE_CALL;var m=+b("CurrentUser").isWorkUser();return b("React").cloneElement(m!==0?h:f,{"data-testid":e})};return e}a=b("ReasonReact.bs").wrapReasonForJs(m,function(a){return n(a.customColor,+a.isAvailable,+a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.svgWrapperStyle=j;f.svgStyle=k;f.unavailable=l;f.component=m;f.make=n;f.jsComponent=a}),null);
__d("MessengerRTCCallButton.react",["immutable","ImmutableObject","Link.react","MercuryIDs","MessengerRTCInvokeHandler","MessengerRTCVideoCallButtonReact.bs","MessengerRTCVoiceCallButtonReact.bs","MNRTCCallabilityStore","React","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerRTCVideoCallButtonReact.bs").jsComponent,h=b("MessengerRTCVoiceCallButtonReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerRTCCallButton",mixins:[b("StoreAndPropBasedStateMixin")(b("MNRTCCallabilityStore"))],statics:{calculateState:function(a){return{isCallable:b("MessengerRTCInvokeHandler").isCallable(a.threadID,a.thread)}}},propTypes:{className:a.string.isRequired,customColor:a.string.isRequired,isVideo:a.bool.isRequired,participants:a.instanceOf(b("immutable").Map).isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,threadID:a.string.isRequired,viewer:a.string.isRequired,calleeName:a.string.isRequired},render:function(){var a={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:b("MercuryIDs").isGroupChat(this.props.threadID)};return b("React").createElement(b("Link.react"),{className:this.props.className,onClick:this._handleStartCall},this.props.isVideo?b("React").createElement(g,a):b("React").createElement(h,a))},_handleStartCall:function(a){a.preventDefault(),b("MessengerRTCInvokeHandler").handleStartCall(this.props.threadID,this.props.thread,this.props.isVideo,this.props.viewer,this.props.participants,this.props.calleeName,this.state.isCallable)}});e.exports=c}),null);
__d("XMessengerDotComSpoofIFrameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spoof/fb_iframe_target/",{gk_spoof:{type:"String"}})}),null);
__d("XSpoofMessengerDotComIFrameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spoof/messenger_dot_com_iframe/",{redirect_uri:{type:"String",required:!0}})}),null);
__d("MessengerSpoof",["Arbiter","DOM","JSXDOM","URI","XSpoofMessengerDotComIFrameController","XMessengerDotComSpoofIFrameController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=6e3;function a(a){var c=b("JSXDOM").iframe({src:h().toString(),width:0,height:0});b("DOM").appendContent(document.body,c);b("Arbiter").subscribeOnce("messengerdotcom_spoof",function(){b("DOM").remove(c),a()});setTimeout(function(){b("Arbiter").inform("messengerdotcom_spoof")},g)}function h(){var a=new(b("URI"))(document.URL),c=b("XMessengerDotComSpoofIFrameController").getURIBuilder().getURI().getQualifiedURI().toString();c=b("XSpoofMessengerDotComIFrameController").getURIBuilder().setString("redirect_uri",c).getURI();return c.setDomain(a.getDomain().replace("messenger.com","facebook.com")).setPort(a.getPort()).setProtocol("https")}e.exports={init:a}}),null);
__d("MessengerThreadlistMessageRequestsRow.react",["cx","fbt","ix","CurrentUser","Image.react","ImmutableObject","Keys","LinkWithHiddenURLBar.react","MercuryConfig","MercuryIDs","MercuryParticipants","MessagingTag","MessengerActions","MessengerMessageRequestsTypedLogger","MNAdsLogMessageUtils","React","XUIBadge.react","intlList","shallowEqual"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=50,l=i("86936");c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$3=function(a){if(this.props.aggregatedThreads.length>0){var c=this.props.aggregatedThreads,d=c.map(function(a){return a.thread_id});b("MessengerActions").selectAggregation(d);this.props.onAggregationClick&&this.props.onAggregationClick(a,c)}else a.preventDefault(),b("MessengerActions").changeFolder(b("MessagingTag").PENDING)}.bind(this),c}a.prototype.shouldComponentUpdate=function(a){return!b("shallowEqual")(this.props,a)};a.prototype.componentDidUpdate=function(a){this.props.isFocused&&(this.$1&&this.$1.focus&&this.$1.focus())};a.prototype.render=function(){var a=this.props.newMessageRequestThreads.length||this.props.aggregatedThreads.length;return a===0?null:b("React").createElement("li",{className:"_5l-3 _1ht1 _2il3 _2kt",ref:function(a){this.$1=a}.bind(this),onKeyPress:this.$2,role:"row",tabIndex:-1},b("React").createElement(b("LinkWithHiddenURLBar.react"),{tabIndex:-1,onAllClicks:this.$3,className:"_1ht5 _5l-3"},b("React").createElement("div",{className:"_5l-3 _1qt3 _5nxe"},b("React").createElement(b("Image.react"),{alt:"",height:k,src:l,width:k}),this.$4()?this.$5():null),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6 _5nxa"+(this.$4()?" _3xsd":"")},this.$6())),b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1htf"+(this.$4()?" _3xsd":"")},this.$7())))))};a.prototype.$4=function(){return b("MercuryConfig").IASS?this.props.pendingFolderUnseenCount!==0:this.$8()!==0};a.prototype.$6=function(){var a=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;return b("MercuryConfig").RTCR?h._({"*":"Demandes de contact","_1":"Demande de contact"},[h._plural(a.length)]):h._({"*":"Nouvelles invitations par message","_1":"Nouvelle invitation par message"},[h._plural(a.length)])};a.prototype.$8=function(){var a=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;return!b("MercuryConfig").MCMA?a.length:a.reduce(function(a,b){return a+Math.sign(b.unread_count)},0)};a.prototype.$5=function(){return b("MercuryConfig").IASS?b("React").createElement("span",{className:"_3xse"}):b("React").createElement(b("XUIBadge.react"),{className:"_5nxf",count:this.$8(),maxcount:99,size:"large",type:"special"})};a.prototype.componentDidMount=function(){var a=this;this.props.aggregatedThreads&&this.props.aggregatedThreads.length>0&&(function(){var c=b("CurrentUser").getID(),d=a.props.aggregatedThreads.map(function(a){return b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.thread_id,c)});new(b("MessengerMessageRequestsTypedLogger"))().setAction("aggregation_unit_impression").setThreadKeyList(d.filter(function(a){return a}).join(", ")).setEntryPoint("inbox_aggregation").setSurface("inbox").setFolderType("pending").log()})()};a.prototype.$9=function(){__p&&__p();var a=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads,c=h._({"*":"De personnes que vous connaissez peut-\u00eatre","_1":"D\u2019une personne que vous connaissez peut-\u00eatre"},[h._plural(a.length)]),d=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),e=[];for(var f=0,g=0;g<3&&f<a.length;f++){var i=a[f].participants.find(function(a){return a!==d});if(i){i=b("MercuryParticipants").getOrFetch(i);i&&(g++,e.push(i.name.split(" ")[0]))}}if(!e||e.length==0)return c;a.length>0&&b("MNAdsLogMessageUtils").logAdsThreadListImpression(a[0]);return a.length-e.length==0?h._("De {name}",[h._param("name",b("intlList")(e,b("intlList").CONJUNCTIONS.NONE))]):h._({"*":"De {name} et {count} autres personnes"},[h._param("name",b("intlList")(e,b("intlList").CONJUNCTIONS.NONE)),h._param("count",a.length-e.length,[0])])};a.prototype.$7=function(){__p&&__p();if(b("MercuryConfig").MCMA)return this.$9();var a=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads,c=h._({"someone":"D\u2019une personne que vous connaissez peut-\u00eatre","people":"De personnes que vous connaissez peut-\u00eatre"},[h._enum(a.length===1?"someone":"people",{someone:"someone",people:"people"})]),d=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),e=a[0].participants.find(function(a){return a!==d});if(!e)return c;e=b("MercuryParticipants").getOrFetch(e);if(!e||!e.name)return c;a.length>0&&b("MNAdsLogMessageUtils").logAdsThreadListImpression(a[0]);return a.length===1?h._("De {name}",[h._param("name",e.name)]):h._({"*":"De {name} et {count} autres personnes"},[h._param("name",e.name),h._param("count",a.length-1,[0])])};a.prototype.$10=function(a){a.preventDefault();a=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;this.props.onFocus(a[0].thread_id)};a.prototype.$2=function(a){a.preventDefault();a=a.charCode;a===b("Keys").RETURN&&b("MessengerActions").changeFolder(b("MessagingTag").PENDING)};a.propTypes={onAggregationClick:c.func,isFocused:c.bool,newMessageRequestThreads:c.arrayOf(c.instanceOf(b("ImmutableObject"))).isRequired,pendingFolderUnseenCount:c.number,aggregatedThreads:c.arrayOf(c.instanceOf(b("ImmutableObject"))),viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerComposerState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({step:null,recipients:b("immutable").List()});a.__TCmeta={type:"MessengerComposerState"};e.exports=a}),null);
__d("MessengerComposerSteps",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});e.exports=a}),null);
__d("MessengerComposerStore",["EditorState","immutable","MessengerActions","MessengerComposerActions","MessengerComposerState","MessengerComposerSteps","MessengerConstants","MessengerDispatcher","MessengerEditorStateManager","MessengerURIStore","MessengerStore","MessengerView"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new(b("MessengerComposerState"))({step:b("MessengerComposerSteps").NULL,recipients:b("immutable").List()});c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$MessengerComposerStore1=h}a.prototype.getState=function(){return this.$MessengerComposerStore1};a.prototype.__onDispatch=function(a){__p&&__p();b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var c=b("MessengerURIStore").getState().detailView,d=this.$MessengerComposerStore1.recipients,e=this.$MessengerComposerStore1.step,f=null,g=null;switch(a.type){case b("MessengerComposerActions").Types.ADD_TOKEN:if(d.some(function(b){return b.getUniqueID()===a.entry.getUniqueID()}))break;f=d.push(a.entry);break;case b("MessengerComposerActions").Types.REMOVE_TOKEN:var h=a.entry.getUniqueID(),i=d.findIndex(function(a){return a.getUniqueID()===h});i!==-1&&(f=d["delete"](i));break;case b("MessengerComposerActions").Types.FOCUS_COMPOSER:e===b("MessengerComposerSteps").SELECT_RECIPIENTS&&(g=b("MessengerComposerSteps").COMPOSE);break;case b("MessengerComposerActions").Types.FOCUS_TYPEAHEAD:e===b("MessengerComposerSteps").COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerActions").Types.REPLACE_STATE:i=b("MessengerURIStore").getPrevState().detailView;i!==b("MessengerView").DETAIL.COMPOSE&&c===b("MessengerView").DETAIL.COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerComposerActions").Types.MOVE_DRAFT:b("MessengerEditorStateManager").set(a.threadID,b("MessengerEditorStateManager").get(b("MessengerConstants").NEW_THREAD_KEY));break;case b("MessengerComposerActions").Types.EXIT_COMPOSE_STATE:var j=b("EditorState").createEmpty();setTimeout(function(){b("MessengerEditorStateManager").set(b("MessengerConstants").NEW_THREAD_KEY,b("EditorState").forceSelection(j,j.getSelection()))},0);g=b("MessengerComposerSteps").NULL;f=b("immutable").List();break}(f||g)&&(this.$MessengerComposerStore1=new(b("MessengerComposerState"))({step:g||e,recipients:f||d}),this.emitChange())};e.exports=new a()}),null);
__d("MessengerThreadlistNewMessageRow.react",["cx","fbt","ix","Image.react","LinkWithHiddenURLBar.react","MercuryIDs","MercuryParticipantListRenderer","MercuryParticipants","MercuryParticipantsImage.react","MessengerActions","MessengerComposerStore","MessengerProfileImageWrapperReact.bs","MessengerView","ReactComponentWithPureRenderMixin","PureStoreBasedStateMixin","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerProfileImageWrapperReact.bs").jsComponent,k=50,l=i("86935");a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadlistNewMessageRow",mixins:[b("ReactComponentWithPureRenderMixin"),b("PureStoreBasedStateMixin")(b("MercuryParticipants"),b("MessengerComposerStore"))],propTypes:{isActive:a.bool,onClose:a.func.isRequired},statics:{calculateState:function(){return{participants:b("MessengerComposerStore").getState().recipients.map(function(a){return b("MercuryParticipants").getOrFetch(b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID()))}).filter(function(a){return!!a})}}},render:function(){return b("React").createElement("li",{className:"_5l-3 _1ht1"+(this.props.isActive?" _1ht2":"")},b("React").createElement(b("LinkWithHiddenURLBar.react"),{onAllClicks:this._handleClickRow,className:"_1ht5 _2il3 _5l-3"},this._renderImage(),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6"},this._renderTitle()),b("React").createElement(b("ShimButton.react"),{className:"_23ct",onClick:this.props.onClose})),b("React").createElement("div",{className:"_1qt5 _5l-3"},"\xa0"))))},_renderImage:function(){var a=this.state.participants;return!a.isEmpty()?b("React").createElement("div",{className:"_1qt3 _5l-3"},b("React").createElement(j,{isMessengerUser:a.size===1&&a.first().is_messenger_user,size:k,showBadge:!1},b("React").createElement(b("MercuryParticipantsImage.react"),{participants:a.map(function(a){return a.id}).slice(0,3).toArray(),size:k}))):b("React").createElement("div",{className:"_1qt3 _5l-3"},b("React").createElement(b("Image.react"),{height:k,src:l,width:k}))},_renderTitle:function(){return this.state.participants.isEmpty()?h._("Nouveau message"):h._("Nouveau message \u00e0 {List of message recipients}",[h._param("List of message recipients",new(b("MercuryParticipantListRenderer"))().renderParticipantList(this.state.participants.toArray()))])},_handleClickRow:function(a){a.preventDefault(),b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE)}});e.exports=c}),null);
__d("Keys.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=8;b=9;c=13;d=18;e=27;var g=32,h=33,i=34,j=35,k=36,l=37,m=38,n=39,o=40,p=46,q=188,r=190,s=65,t=90,u=48,v=96,w=105;f.backspace=a;f.tab=b;f.$$return=c;f.alt=d;f.esc=e;f.space=g;f.page_up=h;f.page_down=i;f.end_=j;f.home=k;f.left=l;f.up=m;f.right=n;f.down=o;f.$$delete=p;f.comma=q;f.period=r;f.a=s;f.z=t;f.zero=u;f.numpad_0=v;f.numpad_9=w}),null);
__d("MNCommerceReportConversationDialogReact.bs",["ReasonReact.bs","MNCommerceReportConversationDialog.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MNCommerceReportConversationDialog.react"),{pageID:a},c)}f.make=a}),null);
__d("MessengerBlockDialogReact.bs",["cx","fbt","bs_curry","React","Utils.bs","LinkReact.bs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerBlockDialogReact");function j(a,c){return b("React").createElement("div",{className:"_1q73"},h._("Si vous le souhaitez, vous pouvez \u00e9galement {link}",[h._param("link",b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,[c],0,0,0,0,0,0,0,["_blank"],0,h._("bloquer {short_name_or_description} sur Facebook.",[h._param("short_name_or_description",b("Utils.bs").$pipe$unknown(a,h._("cette personne")))]))))]))}function k(a,c,d,e,f){__p&&__p();f=i.slice();f[9]=function(){__p&&__p();var f=function(){b("bs_curry")._1(c,!1);return b("bs_curry")._1(a,0)};if(d){var g=d[0],i=+b("CurrentUser").isMessengerOnlyUser();i=[[g.short_name],i!==0?0:b("bs_js_primitive").null_undefined_to_opt(g.href)]}else i=[0,0];g=i[1];i=i[0];if(!(e==null)){var k=new(b("IgnoreMessagesTypedLogger"))().setEvent("block_clicked").setThreadID(e).setPlatform("messengerdotcom");k.log()}return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,c,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,h._("Bloquer les messages"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",{className:"_1q73"},h._("Ne plus recevoir de messages et d\u2019appels de {short_name_or_description} dans Messenger.",[h._param("short_name_or_description",b("Utils.bs").$pipe$unknown(i,h._("cette personne")))])),g?j(i,g[0]):null,b("React").createElement("div",undefined,b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,["https://www.facebook.com/help/389645087895231"],0,0,0,0,0,0,0,["_blank"],0,h._("En savoir plus"))))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Block Messages")],0,["danger"],[f],[0],0,0,[]))]))]))};return f}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return k(a.onBlock,a.onToggle,b("bs_js_primitive").null_undefined_to_opt(a.contact),a.threadID,[])});c=b("Utils.bs").$pipe$unknown;f.$pipe$unknown=c;f.component=i;f.renderBlockOnFacebook=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerDeleteDialogBootloaderReact.bs",["ReasonReact.bs","MessengerDeleteDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDeleteDialogBootloader.react"),{onArchive:a,onDelete:c,onToggle:d},e)}f.make=a}),null);
__d("MessengerIgnoreDialogReact.bs",["cx","fbt","bs_curry","React","Utils.bs","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerIgnoreDialogReact");function j(a,c,d,e,f,g){__p&&__p();g=i.slice();g[9]=function(){var g=function(){b("bs_curry")._1(a,0);return b("bs_curry")._1(c,!1)},i=d?[d[0].short_name]:0;if(!(e==null)){var j=new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_clicked").setThreadID(e).setPlatform("messengerdotcom");j.log()}return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,c,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,f!==0?h._("Ignorer le groupe\u00a0?"):h._("Ignorer cette conversation\u00a0?"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",{className:"_1q73"},f!==0?h._("Vous ne recevrez pas de notification lorsqu\u2019une personne envoie un message \u00e0 ce groupe, et le groupe sera d\u00e9plac\u00e9 dans les messages filtr\u00e9s. Nous n\u2019informerons aucun membre du groupe que les messages ont \u00e9t\u00e9 ignor\u00e9s."):h._("Vous ne recevrez pas de notification lorsque {short_name_or_description} vous envoie un message direct, et la conversation ira dans les Invitations filtr\u00e9es. Nous n\u2019indiquerons pas \u00e0 {sameParam} que ses messages ont \u00e9t\u00e9 ignor\u00e9s.",[h._param("short_name_or_description",b("Utils.bs").$pipe$unknown(i,h._("cette personne"))),h._param("sameParam",b("Utils.bs").$pipe$unknown(i,h._("cette personne")))]))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Ignorer les messages")],0,["danger"],[g],[0],0,0,[]))]))]))};return g}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.onIgnore,a.onToggle,b("bs_js_primitive").null_undefined_to_opt(a.contact),a.threadID,a.isGroupChat,[])});c=b("Utils.bs").$pipe$unknown;f.$pipe$unknown=c;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerMarkSpamDialogBootloaderReact.bs",["ReasonReact.bs","MessengerMarkSpamDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMarkSpamDialogBootloader.react"),{onMarkSpam:a,onToggle:c},d)}f.make=a}),null);
__d("MessengerMenuReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerMenu.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMenu.react"),{},a)}e=[a];function c(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMenu.react").Item,{href:b("bs_js_null_undefined").from_opt(a),label:c,onclick:b("bs_js_null_undefined").from_opt(d),target:b("bs_js_null_undefined").from_opt(e)},f)}a=[c];function d(a){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMenu.react").Separator,{},a)}c=[d];f.Menu=e;f.MenuItem=a;f.MenuSeparator=c}),null);
__d("MessengerMuteDialogBootloaderReact.bs",["ReasonReact.bs","MessengerMuteDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMuteDialogBootloader.react"),{onMute:a,onToggle:c},d)}f.make=a}),null);
__d("MessengerPopoverMenuReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerPopoverMenu.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h){return b("ReasonReact.bs").wrapJsForReason(b("MessengerPopoverMenu.react"),{className:b("bs_js_null_undefined").from_opt(a),disableArrowKeyActivation:b("Utils.bs").optionBoolToNullUndefinedBoolean(c),isOpen:b("Utils.bs").optionBoolToNullUndefinedBoolean(d),menu:e,onHide:b("bs_js_null_undefined").from_opt(f),onShow:b("bs_js_null_undefined").from_opt(g)},h)}f.make=a}),null);
__d("XNFXStartForMessageThreadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/start_message_thread/",{thread_fbid:{type:"String",required:!0},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("MessengerThreadlistRowActionsReact.bs",["cx","fbt","Keys.bs","bs_block","bs_curry","React","Utils.bs","gkx","MercuryIDs","AsyncDialog","CurrentUser","ReasonReact.bs","joinClasses","AsyncRequest","bs_js_primitive","MessagingTag","MessengerDialogs.bs","MercuryThreadIDMap","MessengerMenuReact.bs","MessengerBlockDialogReact.bs","MessengerPopoverMenuReact.bs","MessengerIgnoreDialogReact.bs","MessengerMuteDialogBootloaderReact.bs","XNFXStartForMessageThreadController","MessengerDeleteDialogBootloaderReact.bs","MessengerMarkSpamDialogBootloaderReact.bs","MNCommerceReportConversationDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function j(a){a.preventDefault();a.stopPropagation();return 0}var k=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerThreadlistRowActionsReact"),l="_5blh _4-0h",m="_5blh _4-0h _4-0i";function n(a,c,d,e,f,g,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I){__p&&__p();var J=a?a[0]:"",K=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerDeleteDialogBootloaderReact.bs").make(p,q,i,[]))})},L=function(){if(f)return b("bs_curry")._1(y,0);else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerMuteDialogBootloaderReact.bs").make(v,i,[]))})},M=function(){if(n)return b("bs_curry")._1(s,0);else return b("bs_curry")._1(u,0)},N=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerMarkSpamDialogBootloaderReact.bs").make(t,i,[]))})},O=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerIgnoreDialogReact.bs").make(z,i,c,H.thread_fbid,+b("MercuryIDs").isGroupChat(H.thread_id),[]))})},P=function(){if(o)return b("bs_curry")._1(B,0);else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerBlockDialogReact.bs").make(A,i,c,H.thread_fbid,[]))})},Q=function(){var a=b("MercuryThreadIDMap").get();a.getServerIDFromClientID(H.thread_id,function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(b("XNFXStartForMessageThreadController").getURIBuilder().setString("thread_fbid",a).getURI()));return 0});return 0},R=function(){var a=H.other_user_fbid;if(a==null)return 0;else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MNCommerceReportConversationDialogReact.bs").make(a,[]))})};I=function(){return[O,P,K,M,N,L,R,Q]};a=k.slice();a[8]=function(a){var b=a[1];a=a[0];if(b[2]||b[2]!==a[2])return 1;else return+(b[1]!==a[1])};a[9]=function(a){__p&&__p();var c=a[1];if(g){var i=e!==0?d!==0?h._("Quitter la discussion"):h._("Quitter le salon"):h._("Quitter le groupe"),k=h._("Ignorer les messages"),q=o!==0?h._("D\u00e9bloquer les messages"):h._("Bloquer les messages"),s=b("Utils.bs").isSomeTrue(E),t=b("Utils.bs").isSomeTrue(E),u=+(H.folder===b("MessagingTag").INBOX),v=b("Utils.bs").isSomeTrue(F),x=b("Utils.bs").isSomeTrue(F),y=1-+b("CurrentUser").isWorkUser()&&1-o&&(D||+(H.folder===b("MessagingTag").INBOX&&b("MercuryIDs").isGroupChat(H.thread_id)&&b("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U"))),z=1-+b("CurrentUser").isWorkUser()&&D;s=b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").Menu[0]([s!==0?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Renommer"),w,0,[])):null,t!==0?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,f!==0?h._("Reprendre"):h._("Sourdine"),[c[5]],0,[])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),C!==0?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,i,r,0,[])):null,u!==0?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Archiver"),[p],0,[])):null,b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Supprimer"),[c[2]],0,[])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,n!==0?h._("Marquer comme lu(s)"):h._("Marquer comme non lu(s)"),[c[3]],0,[])),v!==0?null:b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Signaler comme ind\u00e9sirable"),[c[4]],0,[])),x!==0?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Signaler..."),[c[6]],0,[])):b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Signaler du contenu ind\u00e9sirable ou un abus..."),[c[7]],0,[])),y!==0?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,k,[c[0]],0,[])):null,z!==0?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,q,[c[1]],0,[])):null]));t=+(J==="");i=t!==0?m:b("joinClasses")(J,m);return b("React").createElement("div",{className:"_3d85"},b("ReasonReact.bs").element(0,[function(c){return b("bs_curry")._1(a[3],[c==null?0:[c]])}],b("MessengerPopoverMenuReact.bs").make(0,[1],[g],s,[function(){return b("bs_curry")._1(a[3],1)}],0,[b("React").cloneElement(b("React").createElement("div",{ref:"button",className:i,role:"button",tabIndex:0,onClick:j}),{"aria-label":h._("Actions de conversation")})])))}else{u=+(J==="");v=u!==0?l:b("joinClasses")(J,l);return b("React").createElement("div",{className:"_3d85"},b("React").cloneElement(b("React").createElement("div",undefined),{"aria-label":h._("Actions de conversation"),className:v,onClick:function(){return b("bs_curry")._1(a[3],0)},onKeyUp:function(c){c=+(c.keyCode===b("Keys.bs").$$return);return b("bs_curry")._1(a[3],c!==0?0:2)},role:"button",ref:"button",tabIndex:G}))}};a[10]=I;a[11]=g;a[12]=function(c,a){__p&&__p();if(typeof c==="number")switch(c){case 0:return b("bs_block").__(2,[[O,P,K,M,N,L,R,Q],function(){return b("bs_curry")._1(x,!0)}]);case 1:return b("bs_block").__(1,[function(){return b("bs_curry")._1(x,!1)}]);case 2:return 0}else{a=c[0];if(a){var d=a[0];return b("bs_block").__(1,[function(){return d.showPopover()}])}else return 0}};return a}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return n(b("bs_js_primitive").null_undefined_to_opt(a.className),b("bs_js_primitive").null_undefined_to_opt(a.contact),+a.isGroupChat,+a.isJoinableThread,+a.isMuted,+a.isOpen,+a.isUnread,+a.isBlocked,a.onArchive,a.onDelete,b("bs_js_primitive").null_undefined_to_opt(a.onLeaveGroup),a.onMarkRead,a.onMarkSpam,a.onMarkUnread,a.onMute,b("bs_js_primitive").null_undefined_to_opt(a.onRename),a.onToggle,a.onUnmute,a.onIgnore,a.onBlock,a.onUnblock,+a.showLeaveGroup,+a.showBlock,b("Utils.bs").nullUndefinedBooleanToOptionBool(a.showRename),b("Utils.bs").nullUndefinedBooleanToOptionBool(a.showReport),a.tabIndex,a.thread,[])});f.handleReasonDialogToggle=i;f.handleClick=j;f.component=k;f.actionButtonClassesClosed=l;f.actionButtonClassesOpen=m;f.make=n;f.jsComponent=a}),null);
__d("MessengerThreadlistRowSeenHeadReact.bs",["cx","ImageReact.bs","MercuryIDs","ReasonReact.bs","joinClasses","bs_js_primitive","MercuryMessageInfo"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,c,d,e){__p&&__p();var f=d.snippet_sender;if(e){e=e[0];if(e.author===a&&c.watermark>=e.timestamp&&!b("MercuryMessageInfo").isSending(e))return 1-+b("MercuryMessageInfo").hasError(e);else return 0}else if(!(f==null)&&f===a)return+(c.watermark>=d.timestamp);else return 0}var i=b("ReasonReact.bs").statelessComponent("MessengerThreadlistRowSeenHeadReact");function j(a,c,d,e,f,g,j,k){__p&&__p();var l=a?a[0]:"";k=i.slice();k[9]=function(){__p&&__p();var a=+g.is_canonical,i=g.other_user_fbid;if(c)if(a!==0)if(i==null)return null;else if(c[0])return null;else{a=b("MercuryIDs").getParticipantIDFromUserID(j);i=b("MercuryIDs").getParticipantIDFromUserID(i);var k=f.get(i);i=e.get(i);if(!(i==null)&&!(k==null)&&h(a,k,g,d))return b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make([b("joinClasses")(l,"_2_a2")],0,[i.image_src],0,[i.name],0,0,[]));else return null}else return null;else return null};return k}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(b("bs_js_primitive").null_undefined_to_opt(a.className),b("bs_js_primitive").null_undefined_to_opt(a.isHidden),b("bs_js_primitive").null_undefined_to_opt(a.lastMessage),a.participants,a.readReceipts,a.thread,a.viewer,[])});f.shouldRender=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerThreadlistRow.react",["cx","fbt","ix","Bootloader","FBRTCCore","Image.react","immutable","ImmutableObject","LinkWithHiddenURLBar.react","MercuryConfig","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryMessageInfo","MercuryParticipants","MercuryThreadActions","MercuryThreadSnippet.react","MercuryThreadTimestampReact.bs","MercuryThreadTitle.react","MercuryTimestamp","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerButtonReact.bs","MessengerDialogs.bs","MessengerPresenceStatusUtils","MessengerMessageRequestsTypedLogger","MessengerThreadImageReact.bs","MessengerThreadlistRowActionsReact.bs","MessengerThreadlistRowSeenHeadReact.bs","MessengerURIStore","MessengerURIUtils.bs","MNAdsMessageUtils","MercuryParticipantListRenderer","React","ReactDOM","RTCCallState","Tooltip","FBRTCLogger","UserAgent","CurrentUser","getPageIDFromThreadID","gkx","joinClasses","messengerRTLClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MercuryThreadTimestampReact.bs").jsComponent,l=b("MessengerButtonReact.bs").jsComponent,m=b("MessengerThreadImageReact.bs").jsComponent,n=b("MessengerThreadlistRowActionsReact.bs").jsComponent,o=b("MessengerThreadlistRowSeenHeadReact.bs").jsComponent,p=b("FBRTCLogger").Trigger;c=b("React").PropTypes;var q=50,r=i("86913"),s=i("86914"),t=function(a){var b=void 0;switch(a){case"pending":case"other":case"inbox":case"thread":b=a;break;default:b=null}return b};d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={actionsOpen:!1,participantNames:""},this.$1=0,this.$2=null,this.$15=function(){__p&&__p();var a=b("CurrentUser").getID();a=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,a);b("MercuryThreadActions").get()["delete"](this.props.thread.thread_id);this.props.isActive&&b("MessengerActions").selectThread(null);if(this.props.showAggregation){var c=b("MessengerURIStore").getState().threadIDs;if(c){c=c.filter(function(a){return this.props.thread.thread_id!==a}.bind(this));b("MessengerActions").selectAggregation(c)}}new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(t(this.props.folder)).setFolderType("pending").setThreadKey(a).setEntryPoint("inbox_banner").log()}.bind(this),this.$16=function(a){var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,c);a||(b("MessengerDialogs.bs").removeDialog(),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(t(this.props.folder)).setFolderType("pending").setThreadKey(c).setEntryPoint("inbox_banner").log())}.bind(this),this.$3=function(a){a.preventDefault(),this.props.onFocus(this.props.thread.thread_id)}.bind(this),this.$4=function(a){this.$1++;if(this.$2)return;this.$2=setTimeout(function(){this.props.onSelect&&this.props.onSelect(),this.$1=0,this.$2=null}.bind(this),1e3)}.bind(this),this.$5=function(a){this.$1--,this.$1===0&&(clearTimeout(this.$2),this.$2=null)}.bind(this),this.$7=function(a){this.props.onSelect()}.bind(this),this.$8=function(a){if(this.props.logClickHandler){a=this.props.thread.is_canonical?b("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id)||"0":this.props.thread.thread_fbid;this.props.logClickHandler&&this.props.logClickHandler(a)}}.bind(this),this.$14=function(a){this.setState({actionsOpen:a})}.bind(this),this.$17=function(a){__p&&__p();a.preventDefault();a.stopPropagation();a=window.callWindow&&!window.callWindow.closed&&window.callWindow.focus;if(a)window.callWindow.focus();else{a=this.props.thread;var c=a.rtc_call_data;a=a.thread_fbid;b("FBRTCCore").startGroupCall({conferenceName:"GROUP:"+a,hasVideo:c.call_state===b("RTCCallState").VIDEO_GROUP_CALL,serverInfoData:c.server_info_data,trigger:p.MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON})}}.bind(this),c}a.prototype.componentDidMount=function(){this.getParticipantNames()};a.prototype.componentDidUpdate=function(a){this.props.isFocused&&(!a.isFocused?this.props.isActionsFocused?b("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus():b("ReactDOM").findDOMNode(this.refs.link).focus():!a.isActionsFocused&&this.props.isActionsFocused?b("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus():a.isActionsFocused&&!this.props.isActionsFocused&&b("ReactDOM").findDOMNode(this.refs.link).focus()),this.getParticipantNames()};a.prototype.getParticipantNames=function(){__p&&__p();if(this.state.participantNames!=="")return;var a=this.props,c=a.thread;a=a.viewer;var d=c.participants||[],e=b("MercuryIDs").getParticipantIDFromUserID(a);d.length>1&&(d=d.filter(function(a){return a!=e}));var f=c.custom_nickname?{}:null;if(f)for(var g in c.custom_nickname)f[g]=c.custom_nickname[g];b("MercuryParticipants").getMulti(d,function(a){var c=d.map(function(b){return a[b]});c=new(b("MercuryParticipantListRenderer"))().setNickname(f).renderParticipantList(c);this.setState({participantNames:c})}.bind(this))};a.prototype.render=function(){var a=this.props,c=a.isActive,d=a.isActionsFocused,e=a.isTabbable,f=a.participants,g=a.thread;a=a.viewer;var h=g.unread_count>0,i=b("MessengerURIUtils.bs").getURIForThreadID(g.thread_id),j=g.name?g.name:this.state.participantNames;return b("React").createElement("li",{"aria-live":h?"polite":null,"aria-relevant":c||h?"additions text":null,onFocus:this.$3,className:"_5l-3 _1ht1"+(g.folder===b("MessagingTag").PENDING?" _4as3":"")+(this.props.isActive?" _1ht2":"")+(h?" _1ht3":"")+(this.state.actionsOpen?" _13aa":"")+(this.props.isMuted?" _569x":"")+(this.props.isFocused?" _23_m":"")+(h&&b("UserAgent").isBrowser("Chrome")&&b("UserAgent").isPlatform("Mac")?" _5fx8":""),onDragEnter:c?null:this.$4,onDragLeave:c?null:this.$5,role:"row",ref:function(a){return a&&this.props.registerThreadRefs&&this.props.registerThreadRefs(a)}.bind(this),tabIndex:-1},b("React").createElement("div",{className:"_5l-3 _1ht5",id:this.$6(g.thread_id),role:"gridcell",tabIndex:-1},b("React").createElement(b("LinkWithHiddenURLBar.react"),{href:i.toString(),onClick:this.$7,onAllClicks:this.$8,className:"_1ht5 _2il3 _5l-3 _3itx",s:"true",ref:"link",role:"link",tabIndex:e&&!d?0:-1},b("React").createElement("div",babelHelpers["extends"]({},b("Tooltip").propsFor(j,"right","center"),{"data-tooltip-root-class":"_33g_","aria-hidden":!0,className:"_1qt3 _5l-3"}),b("React").createElement(m,{isPresenceForWork:this.props.isPresenceForWork,participants:f,size:q,thread:g,viewer:a})),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement(b("MercuryThreadTitle.react"),{className:"_1ht6",showUnreadCount:!1,thread:g,useShortName:!1,viewer:a}),b("React").createElement("div",null,b("MNAdsMessageUtils").isAdsMessageRequest(g)?b("MNAdsMessageUtils").renderAdsMessageRequestStatus():this.$9(g))),b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement(b("MercuryThreadSnippet.react"),{className:b("joinClasses")("_1htf",b("messengerRTLClasses")(g.snippet,!0)),participants:f,shouldRenderYou:!0,thread:g,viewer:a})),this.$10(),this.$11()))),this.$12())};a.prototype.$12=function(){if(this.props.showActions===!1)return null;var a=this.props,c=a.blockedIds,d=a.isActionsFocused,e=a.isTabbable,f=a.participants,g=a.thread;a=a.viewer;var i=b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(this.props.participants,g);i=i&&i.contact;c=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(a,c,g);var j=b("MessengerAdminGroupUtils").isJoinableThread(g),k=b("MessengerAdminGroupUtils").isGroupChat(g),l=g.unread_count>0;return b("React").createElement("div",{role:"gridcell"},b("React").createElement("div",{"aria-describedby":this.$6(g.thread_id),"aria-haspopup":"true","aria-label":h._("Actions"),className:"_2j6 _5l-3",tabIndex:e&&d?0:-1,role:"button"},b("React").createElement(o,{className:"_5bli",isHidden:this.state.actionsOpen,lastMessage:this.props.lastMessage,participants:f,readReceipts:this.props.readReceipts,thread:g,viewer:a}),this.$13(),b("React").createElement(n,{contact:i,isGroupChat:k,isJoinableThread:j,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isUnread:l,isBlocked:c,onArchive:this.props.onArchiveSetting,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onToggle:this.$14,onUnmute:this.props.onUnmute,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showLeaveGroup:this.props.showLeaveGroup,showMute:!0,showIgnoreGroup:b("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U"),showBlock:g.is_canonical_user&&g.other_user_fbid&&a!==g.other_user_fbid,showReport:b("getPageIDFromThreadID")(this.props.thread.thread_id),tabIndex:-1,thread:g,ref:"actions"}),b("React").createElement("div",{className:"_56ck"})))};a.prototype.$13=function(){var a=this.props.lastMessage;if(this.state.actionsOpen||!a)return null;var c=b("MercuryMessageInfo").isSending(a);a=b("MercuryMessageInfo").hasError(a);return!c&&!a?null:b("React").createElement(b("Image.react"),{className:"_wtw"+(c?" _3qh2":""),src:c?s:r})};a.prototype.$9=function(a){return b("React").createElement(k,{className:"_1ht7",time:a.timestamp,title:b("MercuryTimestamp").getAbsoluteTimestamp(a.timestamp),text:b("MercuryTimestamp").getRelativeTimestamp(a.timestamp)})};a.prototype.$10=function(){__p&&__p();if(this.props.thread.folder!==b("MessagingTag").PENDING||!b("MercuryConfig").EPB)return null;var a=b("CurrentUser").getID(),c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,a);return b("React").createElement("div",{className:"_5l-3"},b("React").createElement(l,{className:"_3yvh",type:"primary",label:h._("Accepter"),onClick:function(a){__p&&__p();a.preventDefault();a.stopPropagation();if(this.props.showAggregation){a=b("MessengerURIStore").getState().threadIDs;if(a){a=a.filter(function(a){return this.props.thread.thread_id!==a}.bind(this));b("MessengerActions").selectAggregation(a)}}b("MercuryThreadActions").get().changeFolder(this.props.thread.thread_id,b("MessagingTag").INBOX);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(t(this.props.folder)).setFolderType("pending").setThreadKey(c).setEntryPoint("inbox_banner").log()}.bind(this)}),b("React").createElement(l,{className:"_3yvh _1d-z",type:"faded",label:h._("Refuser"),onClick:function(a){a.preventDefault(),a.stopPropagation(),b("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(a){var d=a.jsComponent,e=b("MercuryIDs").isGroupChat(this.props.thread.thread_id);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(d,{onBlock:this.props.onBlock,onDelete:this.$15,onToggle:this.$16,isGroupChat:e})}.bind(this));new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(t(this.props.folder)).setFolderType("pending").setThreadKey(c).setEntryPoint("inbox_banner").log()}.bind(this),"MessengerThreadlistRow.react")}.bind(this)}))};a.prototype.$11=function(){if(!this.props.thread.rtc_call_data||this.props.thread.rtc_call_data.call_state===b("RTCCallState").NO_ONGOING_CALL)return null;var a=window.callWindow&&!window.callWindow.closed?h._("Revenir \u00e0 l\u2019appel"):h._("Rejoindre l\u2019appel");return b("React").createElement(l,{className:"_4ry5",label:a,onClick:this.$17,type:"primary"})};a.prototype.$6=function(a){return"row_header_id_"+a};a.propTypes={isActive:c.bool.isRequired,blockedIds:c.instanceOf(Set).isRequired,isActionsFocused:c.bool,isFocused:c.bool,isMuted:c.bool.isRequired,isPresenceForWork:c.bool,lastMessage:c.instanceOf(b("ImmutableObject")),logClickHandler:c.func,onArchive:c.func.isRequired,onArchiveSetting:c.func.isRequired,onDelete:c.func.isRequired,onMarkRead:c.func.isRequired,onMarkSpam:c.func.isRequired,onMarkUnread:c.func.isRequired,onMute:c.func.isRequired,onSelect:c.func.isRequired,onUnmute:c.func.isRequired,onIgnore:c.func.isRequired,onBlock:c.func.isRequired,onUnblock:c.func.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,registerThreadRefs:c.func,showAggregation:c.bool,thread:c.instanceOf(b("ImmutableObject")).isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerConfirmBlockThreadDialogReact.bs",["fbt","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerConfirmBlockThreadDialogReact");function i(a,c){var d=function(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)},e=function(){return d(!1)};c=h.slice();c[9]=function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,d,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,g._("Vous avez bloqu\u00e9 {sender name}.",[g._param("sender name",a)]))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g._("Vous pouvez acc\u00e9der aux personnes que vous avez bloqu\u00e9es en vous rendant sur la liste des invitations filtr\u00e9es.")])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[g._("OK")],0,0,[e],[1],0,0,[]))]))]))};return c}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.participantName,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerConfirmLeaveGroupDialogReact.bs",["bs_curry","bs_js_boolean","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerConfirmLeaveGroupDialogReact");function h(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function i(a,c,d,e){var f=function(a,d){b("bs_curry")._1(c,0);return b("MessengerDialogs.bs").removeDialog(0)};e=g.slice();e[9]=function(c){var e=b("bs_js_boolean").to_js_boolean(a),g=b("MessengerAdminGroupUtils").getLeaveGroupBodyText(e,d),i=b("MessengerAdminGroupUtils").getLeaveGroupButtonText(e,d);e=b("MessengerAdminGroupUtils").getLeaveGroupTitleText(e,d);return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,h,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,e)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[i],0,["danger"],[b("bs_curry")._1(c[0],f)],[0],0,0,[]))]))]))};return e}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return i(+a.isViewerAdmin,a.onLeave,a.thread,[])});f.component=g;f.handleToggle=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerThreadlistRowContainer.react",["fbt","IgnoreMessagesTypedLogger","ImmutableObject","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryMessages","MercuryParticipants","MessengerReadReceipt.bs","MercuryThreadActions","MercuryThreadInfo","MercuryThreadlistRowContainer.react","MercuryTriodeSourceUtil","MessagingSourceEnum","MessengerActions","MessengerDialogs.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerConfirmBlockThreadDialogReact.bs","MessengerBlockDialogReact.bs","MessageRequestUtils","MessengerAdminGroupUtils","MessengerMessageRequestsTypedLogger","MessengerThreadlistRow.react","MessagingTag","MNPlatformTagsDataManager","ReactComponentWithPureRenderMixin","React","ReactDOM","StoreAndPropBasedStateMixin","CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,i=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,j=b("MessengerBlockDialogReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadlistRowContainer",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MercuryMessages"))],propTypes:{blockedIds:a.instanceOf(Set).isRequired,isActive:a.bool.isRequired,isTabbable:a.bool,folder:a.string,onOverrideSelect:a.func,showAggregation:a.bool,showActions:a.bool,readReceipts:a.object,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired},statics:{calculateState:function(a){var c=b("MercuryMessages").getForFBID(a.viewer);a=a.thread.thread_id;c=c.getThreadMessagesRangeNow(a,0,1)[0];return{lastMessage:c||null}},getDerivedStateFromProps:function(a){return a.readReceipts?{readReceipts:b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.thread.thread_id)}:null}},componentDidUpdate:function(a){this.props.isActive&&!a.isActive&&this.props.onScrollIntoView(b("ReactDOM").findDOMNode(this))},render:function(){return b("React").createElement(b("MercuryThreadlistRowContainer.react"),babelHelpers["extends"]({},this.props,{ChildClass:b("MessengerThreadlistRow.react"),isMuted:b("MercuryThreadInfo").isMuted(this.props.thread),lastMessage:this.state.lastMessage,onArchive:this._handleArchive,onArchiveSetting:this._handleArchiveFromSetting,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlockFromSettingOrDecline,onUnblock:this._handleUnblock,readReceipts:this.state.readReceipts,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}))},_handleArchiveFromSetting:function(){var a=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleArchive:function(){this._handleBlockFromSettingOrDecline()},_handleDelete:function(){var a=this.props.isActive;this._getThreadActions()["delete"](this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function(){var a=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handleSelect:function(){__p&&__p();var a=b("CurrentUser").getID();a=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,a);if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return}b("MessengerActions").selectThread(this.props.thread.thread_id);var c=b("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id),d=void 0;switch(this.props.folder){case"inbox":d="inbox";break;case"pending":d="pending";break;case"other":d="other";break}this.props.thread.folder!==b("MessagingTag").INBOX&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_thread_open").setThreadID(c).setSurface(d).setFolderType(this.props.thread.folder).setThreadKey(a).log();b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(b("MessagingSourceEnum").MESSENGER_WEB_SEARCH,c)},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleLeaveGroup:function(){var a=this;this.props.viewer&&(function(){var c=b("MessengerAdminGroupUtils").isAdmin(a.props.thread.admin_ids,a.props.viewer);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:c,thread:this.props.thread})}.bind(a))})()},_handleIgnore:function(){var a=this.props.isActive;this._getThreadActions().changeFolder(this.props.thread.thread_id,"other");a&&b("MessengerActions").selectThread(null);new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlockFromSettingOrDecline:function(){__p&&__p();var a=this.props.thread.thread_id;a=b("MercuryIDs").isGroupChat(a);if(a){this._handleIgnore();return}var c=b("MercuryParticipants").getNow(b("MercuryIDs").getParticipantIDFromUserID(this.props.thread.other_user_fbid)),d=c&&c.short_name||g._("exp\u00e9diteur");b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onBlock:function(){this._handleConfirmBlock(d)}.bind(this),contact:c,onToggle:this._handleBlockDialogToggle})}.bind(this))},_handleBlockDialogToggle:function(){b("MessengerDialogs.bs").removeDialog()},_handleConfirmBlock:function(a){var b=this.props.thread.thread_id;b&&this._getThreadActions().blockIgnoreOnMessengerDotCom(this.props.isActive,b,function(){this._handleAfterBlock(a)}.bind(this))},_handleAfterBlock:function(a){var c=this.props.thread;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{participantName:a})});var d=b("MercuryIDs").getThreadKeyfromThreadIDUserID(c.thread_id,b("CurrentUser").getID()),e=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(c.thread_id)).setSurface("thread").setFolderType(e?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(d).setEntryPoint(null).log()},_handleUnblock:function(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_onLeaveGroupConfirm:function(){if(!b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){var a=this._getMessageObject().constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.thread.thread_id,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(a)}},_getThreadActions:function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function(){return b("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function(){return b("MercuryMessageObject").getForFBID(this.props.viewer)}});e.exports=c}),null);
__d("AbstractCheckboxInputReact.bs",["bs_js_boolean","ReasonReact.bs","AbstractCheckboxInput.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("AbstractCheckboxInput.react"),{className:a,checked:b("bs_js_boolean").to_js_boolean(c),onChange:d},e)}f.make=a}),null);
__d("AbstractPopoverButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","AbstractPopoverButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("AbstractPopoverButton.react"),{config:b("bs_js_null_undefined").from_opt(a),haschevron:b("bs_js_null_undefined").from_opt(c),image:b("bs_js_null_undefined").from_opt(d),label:b("bs_js_null_undefined").from_opt(e),maxwidth:b("bs_js_null_undefined").from_opt(f)},g)}f.make=a}),null);
__d("ArchiveWarningReact.bs",["cx","React","ReasonReact.bs","TooltipData","bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("ArchiveWarningReact");function i(a,c){c=h.slice();c[9]=function(){var c=b("TooltipData").propsFor("All employee-to-employee conversations will be archived","above");if(a!==0){var d=b("React").createElement("i",{className:"_3olv _14lt"});return b("React").cloneElement(b("React").createElement("div",{className:"_3a61"},d),{"data-tooltip-content":b("bs_js_null_undefined").from_opt(b("bs_js_primitive").undefined_to_opt(c["data-tooltip-content"])),"data-hover":b("bs_js_null_undefined").from_opt(b("bs_js_primitive").undefined_to_opt(c["data-hover"])),"data-tooltip-position":b("bs_js_null_undefined").from_opt(b("bs_js_primitive").undefined_to_opt(c["data-tooltip-position"]))})}else return null};return c}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(+a.shown,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("Bootload.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=function(c){return b("bs_curry")._1(a[0],function(a){return b("bs_curry")._1(c,a.bootloadable)})};return[c]}f.Create=a}),null);
__d("ChatEmojiSkinTonePreferencePickerReact.bs",["ReasonReact.bs","ChatEmojiSkinTonePreferencePicker.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ChatEmojiSkinTonePreferencePicker.react"),{currentPreference:a,onSelect:c},d)}f.make=a}),null);
__d("ChatSidebarSheetChatOffline.react",["fbt","Link.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",null,g._("{=Go online} pour voir qui est disponible.",[g._param("=Go online",b("React").createElement(b("Link.react"),{className:"fbChatGoOnlineLink",onClick:this.props.onGoOnlineClick},g._("Activer la discussion instantan\u00e9e")))]))};function a(){h.apply(this,arguments)}a.propTypes={onGoOnlineClick:c.func.isRequired};e.exports=a}),null);
__d("ChatSidebarSheetChatReconnectMsg.react",["fbt","ChannelConstants","Link.react","MessengerSpinner.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isMessenger;a=a.msecs;var d=b("React").createElement(b("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},g._("Aucune connexion Internet"));if(a==null||!1===navigator.onLine)return c?d:b("React").createElement("div",null,g._("Impossible de se connecter \u00e0 la discussion instantan\u00e9e. V\u00e9rifiez votre connexion Internet."));else if(a>b("ChannelConstants").WARNING_COUNTDOWN_THRESHOLD_MSEC)return c?d:b("React").createElement("div",null,g._("Impossible de se connecter \u00e0 la discussion instantan\u00e9e. {try-again-link}",[g._param("try-again-link",b("React").createElement(b("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},g._("Veuillez r\u00e9essayer")))]));else if(a>1e3)return c?d:b("React").createElement("div",null,g._("Impossible de se connecter \u00e0 la discussion instantan\u00e9e. Reconnexion dans {seconds}",[g._param("seconds",Math.floor(a/1e3))]));else return c?b("React").createElement("div",null,b("React").createElement(b("MessengerSpinner.react"),{color:"grey"}),g._("Connexion...")):b("React").createElement("div",null,g._("Impossible de se connecter \u00e0 la discussion instantan\u00e9e. Reconnexion..."))};function a(){h.apply(this,arguments)}a.propTypes={isMessenger:c.bool,msecs:c.number,onManuallyConnectClick:c.func};e.exports=a}),null);
__d("ChatSidebarSheetChatShutdownMsg.react",["fbt","ChannelConstants","CurrentUser","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.hint;a=a.isMessenger;switch(c){case b("ChannelConstants").HINT_AUTH:return b("React").createElement("div",null,g._("Votre session a expir\u00e9. Veuillez vous reconnecter."));case b("ChannelConstants").HINT_MAINT:return a?b("React").createElement("div",null,g._("Messenger est en cours de maintenance.")):b("React").createElement("div",null,g._("{Chat} est en cours de maintenance.",[g._param("Chat",g._("Discussion instantan\u00e9e"))]));case b("ChannelConstants").HINT_CONN:default:if(!a)return b("React").createElement("div",null,g._("{Chat} n\u2019est pas disponible actuellement.",[g._param("Chat",g._("Discussion instantan\u00e9e"))]));else if(b("CurrentUser").isWorkUser())return b("React").createElement("div",null,g._("Workplace Chat n\u2019est pas disponible pour le moment."));else return b("React").createElement("div",null,g._("Messenger est actuellement indisponible."))}};function a(){h.apply(this,arguments)}a.propTypes={hint:c.string,isMessenger:c.bool};e.exports=a}),null);
__d("ChatSidebarSheet.react",["fbt","Arbiter","ChannelConnection","ChatBehavior","ChatSidebarSheetChatOffline.react","ChatSidebarSheetChatReconnectMsg.react","ChatSidebarSheetChatShutdownMsg.react","ChatVisibility","MercuryConfig","MessengerEnvironment","CSS","JSLogger","LogHistory","MercurySyncConstants","PresencePrivacy","React","SubscriptionsHandler","clearTimeout","emptyFunction","joinClasses","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("JSLogger").create("sidebar_sheet"),j=b("LogHistory").getInstance("sidebar_sheet");b("React").PropTypes;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$3=function(a,b){this.setState({channelStatus:a,channelData:b}),this.$4()}.bind(this),this.$4=function(){this.setState({isConnected:!b("ChannelConnection").disconnected(),isOnline:b("ChatVisibility").isOnline(),notifiesUserMessages:b("ChatBehavior").notifiesUserMessages()})}.bind(this),this.state={channelStatus:null,channelData:null,isConnected:!b("ChannelConnection").disconnected(),isOnline:b("ChatVisibility").isOnline(),notifiesUserMessages:b("ChatBehavior").notifiesUserMessages(),syncStateInvalid:!1,syncStateReconnecting:!1}}a.prototype.componentDidMount=function(){this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("ChannelConnection").subscribe([b("ChannelConnection").CONNECTED,b("ChannelConnection").SHUTDOWN,b("ChannelConnection").RECONNECTING],this.$3),b("ChannelConnection").subscribe([b("ChannelConnection").MUTE_WARNING,b("ChannelConnection").UNMUTE_WARNING],this.$4),b("PresencePrivacy").subscribe("privacy-user-presence-changed",this.$4),b("ChatBehavior").subscribe(b("ChatBehavior").ON_CHANGED,this.$4),b("Arbiter").subscribe(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE,function(){j.log("invalid state fatal","{}"),this.setState({syncStateInvalid:!0,syncStateReconnecting:!1})}.bind(this)),b("Arbiter").subscribe(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY,function(){j.log("retry from invalid state","{}"),this.$5()}.bind(this)),b("Arbiter").subscribe(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER,function(){j.log("recover from invalid state","{}"),this.$6()}.bind(this)))};a.prototype.UNSAFE_componentWillUpdate=function(){this.$2&&(b("clearTimeout")(this.$2),this.$2=null)};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.release()};a.prototype.render=function(){var a=b("MessengerEnvironment").messengerui,c=void 0,d=void 0;!this.state.isOnline&&!a?(c="offline",d=this.$7()):!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting?(c="error",d=this.$8(a)):!this.state.notifiesUserMessages&&!a&&(c="notice",d=this.$9());(this.state.channelStatus===b("ChannelConnection").RECONNECTING&&this.state.channelData<1e3||this.state.syncStateReconnecting)&&(c=b("joinClasses")(c,"reconnecting"));return b("React").createElement("div",{className:b("joinClasses")(this.props.className,c)},a?null:b("React").createElement("div",{className:"img"}),b("React").createElement("div",{className:"message"},d))};a.prototype.$8=function(a){if(this.state.channelStatus===b("ChannelConnection").SHUTDOWN||this.state.syncStateInvalid)return b("React").createElement(b("ChatSidebarSheetChatShutdownMsg.react"),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:a});else if(this.state.channelStatus===b("ChannelConnection").RECONNECTING||this.state.syncStateReconnecting){var c=this.state.syncStateReconnecting?1:this.state.channelData;c>1e3&&(this.$2=b("setTimeoutAcrossTransitions")(this.$3.bind(this,b("ChannelConnection").RECONNECTING,c-1e3),1e3));return b("React").createElement(b("ChatSidebarSheetChatReconnectMsg.react"),{isMessenger:a,msecs:c,onManuallyConnectClick:function(){this.state.syncStateReconnecting||b("ChannelConnection").reconnect()}.bind(this)})}return null};a.prototype.$7=function(){return b("React").createElement(b("ChatSidebarSheetChatOffline.react"),{onGoOnlineClick:function(a){i.log("sidebar_go_online"),b("ChatVisibility").goOnline()}})};a.prototype.$9=function(){return b("React").createElement("div",null,g._("Les alertes sont d\u00e9sactiv\u00e9es lorsque vous utilisez un autre client de discussion instantan\u00e9e."))};a.prototype.$5=function(){this.setState({syncStateReconnecting:!0})};a.prototype.$6=function(){this.setState({syncStateInvalid:!1,syncStateReconnecting:!1})};e.exports=a}),null);
__d("ChatSidebarSheetReact.bs",["ReasonReact.bs","ChatSidebarSheet.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("ChatSidebarSheet.react"),{className:a},c)}f.make=a}),null);
__d("CustomColorHighlightingReact.bs",["ReasonReact.bs","bs_js_null_undefined","CustomColorHighlighting.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("CustomColorHighlighting.react"),{customColor:b("bs_js_null_undefined").from_opt(a)},c)}f.make=a}),null);
__d("LinkWithHiddenURLBarReact.bs",["ReasonReact.bs","bs_js_null_undefined","LinkWithHiddenURLBar.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return b("ReasonReact.bs").wrapJsForReason(b("LinkWithHiddenURLBar.react"),{"aria-label":b("bs_js_null_undefined").from_opt(a),"data-hover":b("bs_js_null_undefined").from_opt(d),"data-tooltip-content":b("bs_js_null_undefined").from_opt(e),"data-tooltip-alignh":b("bs_js_null_undefined").from_opt(f),"data-tooltip-position":b("bs_js_null_undefined").from_opt(g),className:b("bs_js_null_undefined").from_opt(c),href:b("bs_js_null_undefined").from_opt(h),linkRef:b("bs_js_null_undefined").from_opt(i),onClick:b("bs_js_null_undefined").from_opt(j),onAllClicks:b("bs_js_null_undefined").from_opt(k),onMouseDown:b("bs_js_null_undefined").from_opt(l),onMouseEnter:b("bs_js_null_undefined").from_opt(m),role:b("bs_js_null_undefined").from_opt(n),style:b("bs_js_null_undefined").from_opt(o),tabIndex:b("bs_js_null_undefined").from_opt(p),target:b("bs_js_null_undefined").from_opt(q),title:b("bs_js_null_undefined").from_opt(r)},s)}f.make=a}),null);
__d("MercuryThreadTitleReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MercuryThreadTitle.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MercuryThreadTitle.react"),{className:b("bs_js_null_undefined").from_opt(a),maxTitle:b("bs_js_null_undefined").from_opt(c),thread:d,viewer:e,isNewThread:b("Utils.bs").optionBoolToNullUndefinedBoolean(f),showUnreadCount:b("Utils.bs").optionBoolToNullUndefinedBoolean(g),useShortName:b("Utils.bs").optionBoolToNullUndefinedBoolean(h),useAndSeparator:b("Utils.bs").optionBoolToNullUndefinedBoolean(i)},j)}f.make=a}),null);
__d("MessageRequestLogger.bs",["MessengerMessageRequestsTypedLogger"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){new(b("MessengerMessageRequestsTypedLogger"))().setSurface("inbox").setFolderType(d).setAction("message_requests_thread_impression").addToExtraData("threads",a).setThreadKeyList(c).log();return 0}f.logItemImpression=a}),null);
__d("MessengerChatOnOffToggleReact.bs",["cx","fbt","bs_curry","React","LinkReact.bs","bs_js_boolean","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerChatOnOffToggleReact");function a(a,c,d){var e=function(d,e){if(c)return b("bs_curry")._1(c[0],b("bs_js_boolean").to_js_boolean(1-a));else return 0};d=i.slice();d[9]=function(c){var d=a!==0?h._("Passer hors ligne"):h._("Passer en ligne");return b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make([d],0,["tooltip"],[d],["center"],["above"],0,0,[b("bs_curry")._1(c[0],e)],0,0,0,0,0,0,0,b("React").createElement("div",{className:"_3dwl"+(a?" _337l":"")},b("React").createElement("div",{className:"_3dwf"+(a?" _3dwk":"")}))))};return d}f.component=i;f.make=a}),null);
__d("MessengerCheckboxInputReact.bs",["cx","ReasonReact.bs","AbstractCheckboxInputReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MessengerCheckboxInputReact");function a(a,c,d){d=h.slice();d[9]=function(){return b("ReasonReact.bs").element(0,0,b("AbstractCheckboxInputReact.bs").make("_55sg _4ng2",a,c,[]))};return d}f.component=h;f.make=a}),null);
__d("MessengerCustomColorUtils.bs",["cssVar","CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){a=a.custom_color;var c=+b("CurrentUser").isWorkUser();if(a==null)if(c!==0)return"#373e4c";else return"#0084ff";else return a}f.customColorOrBlue=a}),null);
__d("MessengerDeleteAllMenuBootloaderReact.bs",["ReasonReact.bs","MessengerDeleteAllMenuBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDeleteAllMenuBootloader.react"),{filter:a,folder:c,viewer:d,threadIDs:e,aggregationView:f},g)}f.make=a}),null);
__d("MessengerInfoPanelButtonReact.bs",["ix","cx","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={height:"32px",width:"32px"};function j(a){return b("React").createElement("svg",{viewBox:"0 0 64 64"},b("React").createElement("g",undefined,b("React").createElement("g",undefined,b("React").createElement("path",{style:{fill:a},d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z"}))))}function k(a){var c={fill:a};return b("React").createElement("svg",{style:{stroke:a},viewBox:"0 0 64 64"},b("React").createElement("g",undefined,b("React").createElement("polygon",{style:c,points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44"}),b("React").createElement("circle",{style:c,cx:"32",cy:"22",r:"3"})),b("React").createElement("path",{style:{fill:"none",stroke:a,strokeMiterlimit:"10",strokeWidth:"2"},d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z"}))}function a(a,c){var d=+b("CurrentUser").isWorkUser();if(d!==0)return b("React").createElement("div",{className:"_2phz"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,[c!==0?g("413962"):g("413953")],0,0,0,0,[])));else return b("React").createElement("div",{style:i},c!==0?k(a):j(a))}f.svgWrapperStyle=i;f.selected=j;f.notSelected=k;f.make=a}),null);
__d("MessengerPresenceStatusReact.bs",["fbt","React","ReasonReact.bs","bs_js_primitive"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerPresenceStatusReact");function i(a,c,d,e,f){f=h.slice();f[9]=function(){var f,h=0;c!==0&&e?f=g._("Actif sur {platform}",[g._param("platform",e[0])]):h=1;h===1&&(f=d?g._("Actif il y a {time}",[g._param("time",d[0])]):null);h={};a&&(h.className=a[0]);return b("React").createElement("span",h,f)};return f}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(b("bs_js_primitive").null_undefined_to_opt(a.className),+a.isUserActive,b("bs_js_primitive").null_undefined_to_opt(a.lastActive),b("bs_js_primitive").null_undefined_to_opt(a.platform),[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerRTCCallButtonReact.bs",["bs_js_boolean","ReasonReact.bs","MessengerRTCCallButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MessengerRTCCallButton.react"),{className:a,customColor:c,isVideo:b("bs_js_boolean").to_js_boolean(d),participants:e,thread:f,threadID:g,viewer:h,calleeName:i},j)}f.make=a}),null);
__d("MontageThreadViewContainerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MontageThreadViewContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MontageThreadViewContainer.react"),{threadID:a,onResize:b("bs_js_null_undefined").from_opt(c)},d)}f.make=a}),null);
__d("messengerCalculateTruncationState",["Style"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();if(!e||!c)return;f=f?f.offsetWidth:0;e=Math.ceil(.5*(a.offsetWidth+e.offsetWidth));var g=a.offsetWidth-d.offsetWidth-12;if(e<=g)b("Style").set(a,"text-align","center"),b("Style").set(c,"width","auto"),b("Style").set(c,"margin-left","auto");else{document.body.dir==="rtl"?b("Style").set(a,"text-align","right"):(b("Style").set(a,"text-align","left"),b("Style").set(c,"margin-left",f+"px"));e=Math.max(a.offsetWidth-f-d.offsetWidth-11,0);b("Style").set(c,"width",e+"px")}}e.exports=a}),null);
__d("MessengerDetailViewHeaderReact.bs",["cx","fbt","FBID.bs","bs_curry","Event","React","Utils.bs","gkx","Bootload.bs","ReactDOM","debounce","LinkReact.bs","QE2Logger","RTCConfig","Bootloader","bs_js_boolean","CurrentUser","ReasonReact.bs","FBRTCSupport","bs_js_primitive","MercuryConfig","MessengerDomIDs.bs","bs_js_null_undefined","MercuryThreadInfo","ArchiveWarningReact.bs","MessageRequestUtils","MercuryParticipantTypes","MercuryThreadTitleReact.bs","MessengerLocalTimeReact.bs","WorkFocusModeController","MessengerCustomColorUtils.bs","MessengerJoinableModeType","MessengerWebDriverTestIDs","MessengerRTCCallButtonReact.bs","MessengerPresenceStatusReact.bs","MessengerInfoPanelButtonReact.bs","MontageThreadViewContainerReact.bs","messengerCalculateTruncationState","MessengerPlatformUserControlConfig"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("WorkFocusModeController").MessengerWorkAvailabilityStatus;function a(a){b("Bootloader").loadModules(["BootloadableMessengerUserControlsButtonReact.bs"],a,"MessengerDetailViewHeaderReact.bs");return 0}c=[a];var j=b("Bootload.bs").Create(c);function k(a){var c=b("bs_js_null_undefined").from_opt(a[0][0]),d=b("bs_js_null_undefined").from_opt(a[1][0]),e=b("bs_js_null_undefined").from_opt(a[2][0]),f=b("bs_js_null_undefined").from_opt(a[3][0]);a=b("bs_js_null_undefined").from_opt(a[4][0]);return b("messengerCalculateTruncationState")(c,d,e,f,a)}function l(a,c){c[1][3][0]=a==null?0:[b("ReactDOM").findDOMNode(a)];return 0}function m(a,b){b[1][1][0]=a==null?0:[a];return 0}function n(a,b){b[1][0][0]=a==null?0:[a];return 0}function o(a,b){b[1][2][0]=a==null?0:[a];return 0}function p(a,b){b[1][4][0]=a==null?0:[a];return 0}function q(a,c){if(a.has_montage&&b("MercuryConfig").MontageThreadViewer)return b("React").createElement("div",{ref:b("bs_curry")._1(c[0],p),className:"_1cwz"},b("ReasonReact.bs").element(0,0,b("MontageThreadViewContainerReact.bs").make(a.thread_id,0,[])));else return null}function r(a,c,d,e){__p&&__p();if(b("CurrentUser").isWorkUser())return null;else if(a){a=a[0];var f=+(a.contact.type===b("MercuryParticipantTypes").PAGE);if(f&&b("gkx")("AT6mUVDD74IWOTG0apJZF1LePh7SrhTQTrb19q8AoflSv5-DHG9ZPR3YfgtHmrA5yQIw4oTG7io_Cp0zzeQ4tvCvUxrq6ExcZIsaJQRg7A8JWA")){b("QE2Logger").logExposureForUser("messenger_platform_user_controls_v2_www",b("CurrentUser").getID());if(b("MessengerPlatformUserControlConfig").v2_enabled){f=e[1][5][0];if(f){e=a.contact.is_messenger_blocked;a=a.contact.fbid;f=b("ReasonReact.bs").element(0,0,b("bs_curry")._7(f[0][8],"_3xb9 _30yy",+b("MercuryThreadInfo").isMuted(c),e,a,c.thread_id,d,[]))}else f=null;return b("React").createElement("li",undefined,f)}else return null}else return null}else return null}function s(a,c){__p&&__p();c=c.filter(function(c,d,e){if(c==null)return!1;else{d=c.fbid;if(d==null)return!1;else return b("bs_js_boolean").to_js_boolean(+(d!==a))}});var d=c.count();c=c.first();if(d!==1||c==null)return null;else return b("ReasonReact.bs").element(0,0,b("MessengerLocalTimeReact.bs").make("_5eu7",b("bs_js_primitive").null_undefined_to_opt(c.timezone),[]))}function t(a,c){__p&&__p();var d=+((b("RTCConfig").ShowRTCButtonsOnAllBrowsers||b("FBRTCSupport").isWebrtcSupported())&&b("FBRTCSupport").isOSSupported());a=a?+(a[0].contact.type===b("MercuryParticipantTypes").PAGE):0;var e=c?+(c[0].joinable_mode===b("MessengerJoinableModeType").JOINABLE):0;if(c){c=c[0];c=+(c.participants.length>1)&&+b("MercuryThreadInfo").canReply(c)&&1-+b("MessageRequestUtils").isMessageRequest(c)}else c=0;if(d&&!a&&!e)return c;else return 0}var u=b("ReasonReact.bs").reducerComponent("MessengerDetailViewHeaderReact");function v(a,c,d,e,f,g,p,v){__p&&__p();var w=function(c){if(t(a,g))if(g){var d=g[0],e=d.thread_id;return b("React").createElement("li",undefined,b("ReasonReact.bs").element(0,0,b("MessengerRTCCallButtonReact.bs").make("_30yy",b("MessengerCustomColorUtils.bs").customColorOrBlue(d),0,f,d,e,c,a?a[0].contact.name:"",[])))}else return null;else return null},x=function(c){__p&&__p();if(t(a,g))if(g){var d=g[0],e=d.thread_id;if(a){var h=+a[0].isUserActive;h=h!==0?"_3qfl":""}else h="";return b("React").createElement("li",undefined,b("ReasonReact.bs").element(0,0,b("MessengerRTCCallButtonReact.bs").make("_30yy",b("MessengerCustomColorUtils.bs").customColorOrBlue(d),1,f,d,e,c,a?a[0].contact.name:"",[])),b("React").createElement("div",{className:h}))}else return null;else return null},y=function(c){__p&&__p();var d;if(i==null)d=0;else{var e=+i.displayFocusBanner(c,f);d=e!==0?[i]:0}if(d)return[0,b("React").createElement(d[0],{className:"_2v6o",viewer:c,thread:b("bs_js_null_undefined").from_opt(g),participants:f})];else if(a){e=a[0];return[0,b("ReasonReact.bs").element(0,0,b("MessengerPresenceStatusReact.bs").make(["_2v6o"],+e.isUserActive,b("bs_js_primitive").null_undefined_to_opt(e.lastActive),[e.platform],[]))]}else return[1,null]};v=u.slice();v[4]=function(a){__p&&__p();var c=b("Event").listen(window,"resize",b("debounce")(function(){return k(a[1])},20));b("bs_curry")._1(a[4],function(){return c.remove()});b("bs_curry")._1(j[0],function(b){var c=a;b=b;c[1][5][0]=[b];return 0});return 0};v[5]=function(a){return k(a[1][1])};v[9]=function(i){__p&&__p();if(p)if(g){var j=g[0],k=p[0],t=1-+f.isEmpty()&&+f.every(function(b,a,c){if(b==null)return!1;else return b.employee}),u=h._("Informations sur la conversation"),v=y(k);return b("React").createElement("div",{ref:b("bs_curry")._1(i[0],n),className:"_673w"+(b("bs_js_boolean").to_js_boolean(v[0])?" _1_fz":"")},q(j,i),b("React").createElement("div",{key:"threadTitle",ref:b("bs_curry")._1(i[0],m),className:"_5743"},b("React").createElement("h2",{className:"_17w2",id:b("MessengerDomIDs.bs").ids.THREAD_TITLE},b("ReasonReact.bs").element(0,[b("bs_curry")._1(i[0],l)],b("MercuryThreadTitleReact.bs").make(["_3oh-"],[b("Utils.bs").$pipe$unknown(d,0)],j,k,0,0,0,0,[]))),v[1],s(k,f)),b("React").createElement("ul",{key:"buttonsContainer",ref:b("bs_curry")._1(i[0],o),className:"_fl2"},b("React").createElement("li",undefined,b("ReasonReact.bs").element(0,0,b("ArchiveWarningReact.bs").make(t,[]))),r(a,j,k,i),w(k),x(k),b("React").createElement("li",undefined,b("React").cloneElement(b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,["_30yy"],0,0,0,0,0,0,[e],0,0,["button"],0,0,0,[u],[])),{"aria-expanded":c!==0?!1:!0,"aria-label":u,"data-testid":b("MessengerWebDriverTestIDs").INFO_PANEL_BUTTON},b("MessengerInfoPanelButtonReact.bs").make(b("MessengerCustomColorUtils.bs").customColorOrBlue(j),c)),b("React").cloneElement(b("React").createElement("div",undefined),{"aria-owns":b("MessengerDomIDs.bs").ids.THREAD_INFO_PANEL}))))}else return null;else return null};v[10]=function(){return[[0],[0],[0],[0],[0],[0]]};v[12]=function(a,b){return 0};return v}d=b("ReasonReact.bs").wrapReasonForJs(u,function(a){return v(b("bs_js_primitive").null_undefined_to_opt(a.contactData),+a.infoPanelCollapsed,b("bs_js_primitive").null_undefined_to_opt(a.maxTitle),a.onInfoPanelToggle,a.participants,b("bs_js_primitive").null_undefined_to_opt(a.thread),b("FBID.bs").ofString(a.viewer),[])});f.messengerWorkAvailabilityStatus_=i;f.BootloadableMessengerUserControlsButtonReact=c;f.LoadableMessengerUserControlsButtonReact=j;f.calculateTruncationState=k;f.findMercuryTitle=l;f.findTitle=m;f.findRoot=n;f.findButtons=o;f.findMontage=p;f.renderMontageThread=q;f.renderUserControls=r;f.renderLocalTime=s;f.shouldShowCallButton=t;f.component=u;f.make=v;f.jsComponent=d}),null);
__d("MessengerFlexScrollableAreaReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerFlexScrollableArea.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerFlexScrollableArea.react"),{onScroll:b("bs_js_null_undefined").from_opt(a)},c)}f.make=a}),null);
__d("MessengerGraphQLSearchTypeaheadReact.bs",["Utils.bs","bs_js_boolean","ReasonReact.bs","bs_js_null_undefined","MessengerGraphQLSearchTypeahead.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return b("ReasonReact.bs").wrapJsForReason(b("MessengerGraphQLSearchTypeahead.react"),{className:a,enableMessageSearch:b("bs_js_boolean").to_js_boolean(c),excludeGroups:b("bs_js_boolean").to_js_boolean(d),excludePages:b("bs_js_boolean").to_js_boolean(e),hasHoverState:b("bs_js_boolean").to_js_boolean(f),hideClearButton:b("Utils.bs").optionBoolToNullUndefinedBoolean(g),hideResults:b("Utils.bs").optionBoolToNullUndefinedBoolean(h),isFocused:b("Utils.bs").optionBoolToNullUndefinedBoolean(i),onBlur:j,onChange:k,onClear:l,onFocus:m,onScrollIntoView:n,onSelect:o,placeholder:p,queryString:b("bs_js_null_undefined").from_opt(q),shouldQueryInternalBot:b("bs_js_boolean").to_js_boolean(r),shouldQueryVCEndpoint:b("bs_js_boolean").to_js_boolean(s),typeaheadViewClassName:t,viewer:u},v)}f.make=a}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerSettingsActions","MessengerStore","MessengerDotComSettingsInitialData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new(b("CacheStorage"))("localstorage"),i="desktopNotifsEnabled";c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$MessengerSettingsStore1=babelHelpers["extends"]({},b("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:this.$MessengerSettingsStore2()})}a.prototype.getSettings=function(){return this.$MessengerSettingsStore1};a.prototype.$MessengerSettingsStore2=function(){return h.get(i,!1)};a.prototype.$MessengerSettingsStore3=function(a){h.set(i,a)};a.prototype.__onDispatch=function(a){switch(a.type){case b("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,a.newSettings);this.emitChange();break;case b("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:a.desktopNotifsEnabled});this.$MessengerSettingsStore3(a.desktopNotifsEnabled);this.emitChange();break}};e.exports=new a()}),null);
__d("MessengerViewerCardReact.bs",["cx","React","ReasonReact.bs","joinClasses","ImageBlockReact.bs","MessengerContactImageReact.bs","MessengerChatOnOffToggleReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerViewerCardReact");function a(a,c,d,e,f){var g=a?a[0]:"";f=h.slice();f[9]=function(){if(e){var a=e[0];return b("ReasonReact.bs").element(0,0,b("ImageBlockReact.bs").make([b("joinClasses")(g,"_1u5d")],0,0,["medium"],[b("ReasonReact.bs").element(0,0,b("MessengerContactImageReact.bs").StraightJSComponent[0](["_1u5h"],0,[1],0,34,[a.image_src],0,[])),b("React").createElement("div",{className:"_1u5i"},b("React").createElement("div",{className:"_364g"},a.name)),b("ReasonReact.bs").element(0,0,b("MessengerChatOnOffToggleReact.bs").make(c,d,[]))]))}else return b("React").createElement("div",undefined)};return f}c=34;f.imageSize=c;f.component=h;f.make=a}),null);
__d("MessengerSettingsDialogReact.bs",["cx","fbt","bs_array","bs_block","bs_curry","React","LinkReact.bs","bs_js_boolean","MercuryIDs","CurrentUser","ReasonReact.bs","EmojiActions","bs_js_primitive","EmojiStateStore","PresencePrivacy","MessengerDialogs.bs","MercuryParticipants","MessengerDialogReact.bs","SubscriptionsHandler","MessengerSpinnerReact.bs","MessengerSettingsStore","MessengerSettingsActions","MessengerViewerCardReact.bs","MessengerCheckboxInputReact.bs","MessengerDesktopNotifications","ChatEmojiSkinTonePreferencePickerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerSettingsDialogReact");function j(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function k(){return b("MessengerDialogs.bs").removeDialog(0)}function l(a,c){a=c[1][1];b("PresencePrivacy").setVisibility(a!==0?b("PresencePrivacy").OFFLINE:b("PresencePrivacy").ONLINE);return 0}function m(a,c){var d=a[2];if(d)return b("ReasonReact.bs").element(0,0,b("MessengerViewerCardReact.bs").make(["_3xld"],a[1],[b("bs_curry")._1(c,l)],[d[0]],[]));else return b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[]))}function n(a,c){var d=c[3];b("MessengerSettingsActions").changeDesktopNotifs(b("bs_js_boolean").to_js_boolean(1-+c[1][3].desktopNotifsEnabled),function(){return b("bs_curry")._1(d,1)});return 0}function o(a){var c=a[1];if(c[4])return h._("Vous pouvez autoriser Messenger \u00e0 vous envoyer des notifications sur le bureau \u00e0 partir des pr\u00e9f\u00e9rences de votre navigateur.");else return b("bs_array").of_list([b("ReasonReact.bs").element(["notifications-checkox"],0,b("MessengerCheckboxInputReact.bs").make(+c[3].desktopNotifsEnabled&&c[5],b("bs_curry")._1(a[0],n),[])),[b("React").createElement("span",{key:"notifications-checkbox-label",className:"_1pr_"},h._("Notifications de bureau activ\u00e9es")),0]])}function p(a){if(b("MessengerDesktopNotifications").isSupported())return b("React").createElement("div",{className:"_374b"+(a[1][4]?" _2bd0":"")},b("React").createElement("div",{className:"_374c"},h._("Notifications")),b("React").createElement("div",{className:"_374d"},o(a)));else return null}function q(){if(b("CurrentUser").isWorkUser()||b("CurrentUser").isMessengerOnlyUser())return null;else return b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Paiements")),b("React").createElement("div",{className:"_374d"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,["https://secure.facebook.com/settings?tab=payments&ref=messengerdotcom_settings"],0,0,0,0,0,0,0,["_blank"],0,[h._("G\u00e9rer sur Facebook")]))))}function r(){if(b("CurrentUser").isWorkUser()||b("CurrentUser").isMessengerOnlyUser())return null;else return b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Blocage")),b("React").createElement("div",{className:"_374d"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,["https://www.facebook.com/settings?tab=blocking"],0,0,0,0,0,0,0,["_blank"],0,[h._("G\u00e9rer sur Facebook")]))))}function s(a,c){c=c[1][0];if(c&&a===c[0])return 0;else{b("EmojiActions").changeEmojiColor(a);return 0}}function t(a){var c=a[1][0];if(c)return b("ReasonReact.bs").element(0,0,b("ChatEmojiSkinTonePreferencePickerReact.bs").make(c[0],b("bs_curry")._1(a[0],s),[]));else return b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[]))}function u(a){a=a.target;b("MessengerSettingsActions").changeSettings({sound_enabled:a.checked});return 0}function v(a,c){__p&&__p();c=i.slice();c[4]=function(a){__p&&__p();var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("PresencePrivacy").subscribe("privacy-changed",function(){return b("bs_curry")._1(a[3],0)}),b("PresencePrivacy").subscribe("privacy-user-presence-changed",function(){return b("bs_curry")._1(a[3],0)}),b("MessengerSettingsStore").addListener("change",function(){return b("bs_curry")._1(a[3],0)}),b("EmojiStateStore").addListener(function(){return b("bs_curry")._1(a[3],0)}),b("MercuryParticipants").addListener("change",function(){return b("bs_curry")._1(a[3],0)}));b("bs_curry")._1(a[4],function(){c.release();return 0});return 0};c[9]=function(a){var c=a[1];return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,j,0,0,0,["default"],[544],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,[h._("Param\u00e8tres")])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Termin\u00e9")],0,0,[k],[0],0,0,[]))])),b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Compte")),b("React").createElement("div",{className:"_374d"},m(c,a[0]))),b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Sons")),b("React").createElement("div",{className:"_374d"},b("ReasonReact.bs").element(0,0,b("MessengerCheckboxInputReact.bs").make(+c[3].sound_enabled,u,[])),b("React").createElement("span",{className:"_1pr_"},h._("Activ\u00e9")))),p(a),q(0),r(0),b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Emojis")),b("React").createElement("div",{className:"_374d _5jb0"},t(a)))]))};c[10]=function(){return[[b("EmojiStateStore").getState().emojiColor],+(b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE),b("bs_js_primitive").null_undefined_to_opt(b("MercuryParticipants").getOrFetch(b("MercuryIDs").getParticipantIDFromUserID(a))),b("MessengerSettingsStore").getSettings(),+b("MessengerDesktopNotifications").isDenied(),+b("MessengerDesktopNotifications").isGranted()]};c[12]=function(c,d){if(c!==0){c=d.slice();return b("bs_block").__(0,[(c[4]=1,c)])}else return b("bs_block").__(0,[[[b("EmojiStateStore").getState().emojiColor],+(b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE),b("bs_js_primitive").null_undefined_to_opt(b("MercuryParticipants").getOrFetch(b("MercuryIDs").getParticipantIDFromUserID(a))),b("MessengerSettingsStore").getSettings(),+b("MessengerDesktopNotifications").isDenied(),+b("MessengerDesktopNotifications").isGranted()]])};return c}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return v(a.viewer,a.children)});f.component=i;f.handleToggle=j;f.handleDone=k;f.handleTogglePresence=l;f.renderAccountSection=m;f.handleNotificationsChange=n;f.renderNotificationsContent=o;f.renderNotificationsSection=p;f.renderPaymentsSection=q;f.renderBlockingSection=r;f.handleChooseEmojiColor=s;f.renderEmojiColorSection=t;f.handleSoundChange=u;f.make=v;f.jsComponent=a}),null);
__d("MessengerRadioList.bs",["bs_js_boolean","ReasonReact.bs","bs_js_null_undefined","MessengerRadioList.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerRadioList.react"),{name:b("bs_js_null_undefined").from_opt(a),onValueChange:c,selectedValue:d},e)}d=[a];function c(a,c,d,e,f,g,h){a=a?a[0]:0;return b("ReasonReact.bs").wrapJsForReason(b("MessengerRadioList.react").Item,{disabled:b("bs_js_boolean").to_js_boolean(a),className:b("bs_js_null_undefined").from_opt(c),name:b("bs_js_null_undefined").from_opt(d),onSelect:b("bs_js_null_undefined").from_opt(e),selectedValue:b("bs_js_null_undefined").from_opt(f),value:g},h)}e=[c];f.List=d;f.Item=e}),null);
__d("WorkChatDoNotDisturbOnOffToggleReact.bs",["cx","fbt","bs_curry","React","LinkReact.bs","bs_js_boolean","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("WorkChatDoNotDisturbOnOffToggleReact.re");function j(a,c,d){var e=function(d,e){b("bs_curry")._1(c,b("bs_js_boolean").to_js_boolean(1-a));return 0};d=i.slice();d[9]=function(c){var d=a!==0?h._("D\u00e9sactiver Ne pas d\u00e9ranger"):h._("Turn on Do Not Disturb");return b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make([d],0,["tooltip"],[d],["center"],["above"],0,0,[b("bs_curry")._1(c[0],e)],0,0,0,0,0,0,0,b("React").createElement("div",{className:"_3dwl"+(a?" _337l":"")},b("React").createElement("div",{className:"_3dwf"+(a?" _3dwk":"")}))))};return d}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){var b=+(a.isDoNotDisturbEnabled===!0);return j(b!==0?1:0,a.onStatusChange,[])});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("WorkAvailabilityStatusWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1737751812956354"};c.getQueryID=function(){"use strict";return"1917619098271188"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("WorkUserAvailabilityStatusFetcher.bs",["Promise","WebGraphQL","WorkAvailabilityStatusWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";function a(a){a=new(b("WorkAvailabilityStatusWebGraphQLQuery"))(a);return b("WebGraphQL").exec(a,{actorID:null,batchName:"WorkUserAvailabilityStatusFetcher"}).then(function(a){return b("Promise").resolve(a)})}f.fetch=a}),null);
__d("WorkUserAvailabilityStatusMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1612555362125648"};c.getQueryID=function(){"use strict";return"185697945567435"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("WorkUserDoNotDisturbSettingsOption",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ONE_HOUR:"one_hour",ONE_WEEK:"one_week",TWO_HOURS:"two_hours",UNTIL_EIGHT_AM:"until_eight_am"})}),null);
__d("WorkplaceDoNotDisturbUtils",["DateConsts","WorkUserDoNotDisturbSettingsOption"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={getEndTimeFromDoNotDisturbOption:function(a,c){__p&&__p();var d=Date.now();if(!a)return d;if(c==null)return d;switch(c){case b("WorkUserDoNotDisturbSettingsOption").ONE_HOUR:return d+b("DateConsts").MS_PER_HOUR;case b("WorkUserDoNotDisturbSettingsOption").TWO_HOURS:return d+2*b("DateConsts").MS_PER_HOUR;case b("WorkUserDoNotDisturbSettingsOption").UNTIL_EIGHT_AM:a=new Date();c=a.getHours()>=8;c&&a.setDate(a.getDate()+1);return a.setHours(8,0,0,0);case b("WorkUserDoNotDisturbSettingsOption").ONE_WEEK:return d+b("DateConsts").MS_PER_WEEK;default:return d}},getEndTimeFromDoNotDisturbOptionInt:function(a,c){return Math.floor(this.getEndTimeFromDoNotDisturbOption(a,c)/b("DateConsts").MS_PER_SEC)}}}),null);
__d("WorkChatDoNotDisturbDialogReact.bs",["cx","fbt","Promise","bs_block","bs_curry","React","bs_js_boolean","formatDate","ReasonReact.bs","AsyncRequest","MessengerDialogs.bs","MessengerRadioList.bs","MessengerDialogReact.bs","MessengerSpinnerReact.bs","WorkplaceDoNotDisturbUtils","WorkUserAvailabilityStatusFetcher.bs","WorkChatDoNotDisturbOnOffToggleReact.bs","WorkUserAvailabilityStatusMutationWebGraphQLMutation"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){switch(a){case 0:return"NONE";case 1:return"AVAILABLE";case 2:return"SPORADIC";case 3:return"TENTATIVE";case 4:return"BUSY";case 5:return"DO_NOT_DISTURB";case 6:return"FOCUS"}}var i=b("ReasonReact.bs").reducerComponent("WorkChatDoNotDisturbDialogReact");function j(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function k(a){switch(a){case 0:return"one_hour";case 1:return"one_week";case 2:return"two_hours";case 3:return"until_eight_am"}}function l(){return b("MessengerDialogs.bs").removeDialog(0)}function m(a,c){__p&&__p();a=c[1];if(a[4])return 0;else{var d=c[3];c=b("WorkplaceDoNotDisturbUtils").getEndTimeFromDoNotDisturbOptionInt(b("bs_js_boolean").to_js_boolean(1-a[3]),k(a[6]));var e=a[3];e=e!==0?"AVAILABLE":"DO_NOT_DISTURB";e=new(b("AsyncRequest"))(b("WorkUserAvailabilityStatusMutationWebGraphQLMutation").getURI({status:String(e),end_date:c})).setMethod("POST").setHandler(function(){return b("bs_curry")._1(d,1)}).setErrorHandler(function(){return b("bs_curry")._1(d,2)});e.send();return b("bs_curry")._1(d,b("bs_block").__(2,[1-a[3],c,e]))}}function n(){return b("React").createElement("div",{className:"_681j"},h._("Let your colleagues know that you are unavailable. Do Not Disturb will appear on your profile and you won't receive notifications."))}function o(a,c){var d;if(a[4])d=b("React").createElement("div",{className:"_681k"},b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,["gray"],0,[])));else{var e=a[5]?h._("Une erreur s\u2019est produite. Veuillez r\u00e9essayer."):a[3]&&a[2]>0?h._("Enabled until {The exact time the Do not Disturb status ends}",[h._param("The exact time the Do not Disturb status ends",b("formatDate")(a[2],"M d, Y g:ia"))]):null;d=b("React").createElement("div",{className:"_681k"},e)}return b("React").createElement("div",{className:"_681l _1u5d clearfix"},b("React").createElement("div",{className:"_ohe"},b("ReasonReact.bs").element(0,0,b("WorkChatDoNotDisturbOnOffToggleReact.bs").make(a[3],b("bs_curry")._1(c,m),[]))),d)}function p(a){var c=a[1];if(c[3])return null;else{var d=a[3];return b("React").createElement("div",{className:"_3-9b _2pio"},b("ReasonReact.bs").element(0,0,b("MessengerRadioList.bs").List[0](["doNotDisturbOptionsList"],function(a){return b("bs_curry")._1(d,b("bs_block").__(1,[a]))},c[6],[b("ReasonReact.bs").element(0,0,b("MessengerRadioList.bs").Item[0](0,0,0,0,0,0,[h._("Pendant 1 heure")])),b("ReasonReact.bs").element(0,0,b("MessengerRadioList.bs").Item[0](0,0,0,0,0,2,[h._("Pendant 2 heures")])),b("ReasonReact.bs").element(0,0,b("MessengerRadioList.bs").Item[0](0,0,0,0,0,3,[h._("Jusqu\u2019\u00e0 8 heures")])),b("ReasonReact.bs").element(0,0,b("MessengerRadioList.bs").Item[0](0,0,0,0,0,1,[h._("Pendant 1 semaine")]))])))}}function c(a,c){__p&&__p();c=i.slice();c[4]=function(c){__p&&__p();var d=c[3];b("WorkUserAvailabilityStatusFetcher.bs").fetch({id:a}).then(function(a){__p&&__p();var c=a.user;if(c==null)b("bs_curry")._1(d,0);else{c=c.work_info;if(c==null)b("bs_curry")._1(d,0);else{var e=+(c.availability_status.status==="DO_NOT_DISTURB");b("bs_curry")._1(d,b("bs_block").__(0,[e,c.availability_status.end_date]))}}return b("Promise").resolve(a)});return 0};c[6]=function(a){a=a[1][7];if(a){a[0].setHandler(function(){return 0}).setErrorHandler(function(){return 0});return 0}else return 0};c[9]=function(a){var c=a[1],d=c[0],e=c[1];return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,j,0,0,0,["default"],[544],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,[h._("Do Not Disturb & Working Hours")])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Termin\u00e9")],0,0,[l],[0],0,0,[]))])),d!==0?b("React").createElement("div",{className:"_3c4c"},b("React").createElement("div",{className:"_2ph-"},b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,[32],[])))):e!==0?b("React").createElement("div",{className:"_681j"},h._("Une erreur s\u2019est produite. Veuillez r\u00e9essayer.")):[n(0),o(c,a[0]),p(a)]]))};c[10]=function(){return[1,0,0,0,0,0,0,0]};c[12]=function(a,c){__p&&__p();if(typeof a==="number")switch(a){case 0:var d=c.slice();return b("bs_block").__(0,[(d[0]=0,d[1]=1,d)]);case 1:d=c.slice();return b("bs_block").__(0,[(d[4]=0,d[7]=0,d)]);case 2:return b("bs_block").__(0,[[c[0],c[1],c[2],c[3],0,1,c[6],0]])}else switch(a.tag|0){case 0:return b("bs_block").__(0,[[0,0,a[1],a[0],c[4],c[5],c[6],c[7]]]);case 1:d=c.slice();return b("bs_block").__(0,[(d[6]=a[0],d)]);case 2:return b("bs_block").__(0,[[c[0],c[1],a[1],a[0],1,0,c[6],[a[2]]]])}};return c}f.status_to_string=a;f.component=i;f.handleToggle=j;f.doNotDisturbOptionToString=k;f.handleDone=l;f.handleChangeStatus=m;f.renderDescription=n;f.renderToggleSection=o;f.renderDoNotDisturbOptions=p;f.make=c}),null);
__d("XMessengerDotComDYIController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/dyi/",{__asyncDialog:{type:"Int"}})}),null);
__d("XMessengerDotComLogoutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logout/",{next:{type:"String"}})}),null);
__d("XWorkLogoutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/logout/",{next:{type:"String"}})}),null);
__d("MessengerSettingsMenuReact.bs",["cx","fbt","Run","Form","Utils.bs","goURI","gkx","LinkReact.bs","AsyncDialog","CurrentUser","ReasonReact.bs","AsyncRequest","MessagingTag","MercuryConfig","MessengerView","MercuryFilters","MessengerSpoof","MessengerConfig","MessengerActions","MessengerDialogs.bs","WebStorageMonster","MessengerMenuReact.bs","MessengerEnvironment","XWorkLogoutController","MessengerPopoverMenuReact.bs","AbstractPopoverButtonReact.bs","ServiceWorkerLoginAndLogout","MessengerSettingsDialogReact.bs","XMessengerDotComDYIController","WorkChatDoNotDisturbDialogReact.bs","XMessengerDotComLogoutController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){a.preventDefault();return 0}function i(){var a=+b("CurrentUser").isWorkUser();return b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0]([a!==0?"https://www.facebook.com/workplace":"https://www.messenger.com/about"],h._("\u00c0 propos"),0,["_blank"],[]))}function j(){var a=b("Utils.bs").$pipe$unknown(b("MercuryConfig").WorkTermsURI==null?0:[b("MercuryConfig").WorkTermsURI],"https://www.facebook.com/policies");return b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0]([a],h._("Conditions"),0,["_blank"],[]))}function k(){var a=b("Utils.bs").$pipe$unknown(b("MercuryConfig").WorkPrivacyURI==null?0:[b("MercuryConfig").WorkPrivacyURI],"https://www.facebook.com/privacy/explanation");return b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0]([a],h._("Politique de confidentialit\u00e9"),0,["_blank"],[]))}function l(){var a=b("Utils.bs").$pipe$unknown(b("MercuryConfig").WorkCookiesURI==null?0:[b("MercuryConfig").WorkCookiesURI],"https://www.facebook.com/help/cookies");return b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0]([a],h._("Politique d\u2019utilisation des cookies"),0,["_blank"],[]))}var m=b("ReasonReact.bs").statelessComponent("MessengerSettingsMenuReact");function c(a,c,d,e,f){__p&&__p();var g=function(a){a.preventDefault();return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerSettingsDialogReact.bs").make(e,[]))})},n=function(a){a.preventDefault();return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("WorkChatDoNotDisturbDialogReact.bs").make(e,[]))})},o=function(a){a.preventDefault();a=+(d===b("MessengerView").MASTER.RECENT);b("MessengerActions").changeMasterView(a!==0?b("MessengerView").MASTER.PEOPLE:b("MessengerView").MASTER.RECENT);return 0},p=function(a){a.preventDefault();a=+(c===b("MessagingTag").PENDING);b("MessengerActions").changeFolder(a!==0?b("MessagingTag").INBOX:b("MessagingTag").PENDING);return 0},q=function(a){a.preventDefault();a=+(c===b("MessagingTag").ACTION_ARCHIVED);b("MessengerActions").changeFolder(a!==0?b("MessagingTag").INBOX:b("MessagingTag").ACTION_ARCHIVED);return 0},r=function(a){a.preventDefault();b("MessengerSpoof").init(function(){b("goURI")(window.location.href,!0,undefined);return 0});return 0},s=function(){b("Run").onUnload(function(){b("WebStorageMonster").cleanOnLogout(0);b("ServiceWorkerLoginAndLogout").logout();return 0});var a=+b("CurrentUser").isWorkUser();b("Form").post((a!==0?b("XWorkLogoutController"):b("XMessengerDotComLogoutController")).getURIBuilder().getURI(),{});return 0},t=function(a){a.preventDefault();b("AsyncDialog").send(new(b("AsyncRequest"))("/ajax/bugs/report"));return 0},u=function(c){c.preventDefault();c=+(a===b("MercuryFilters").UNREAD);b("MessengerActions").changeFilter(c!==0?b("MercuryFilters").ALL:b("MercuryFilters").UNREAD);return 0},v=function(a){var c=b("XMessengerDotComDYIController").getURIBuilder().getURI();a.preventDefault();new(b("AsyncRequest"))(c).send();return 0},w=function(){return b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Download Your Information"),[v],0,[]))},x=function(){return b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("D\u00e9connexion"),[s],0,[]))},y=function(){var a=+b("MercuryConfig").RTCR;return b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,a!==0?h._("Demandes de contact"):h._("Invitations par message"),[p],0,[]))},z=function(){return b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Conversations archiv\u00e9es"),[q],0,[]))};f=+b("CurrentUser").isWorkUser();var A=f!==0?"/help/work/682468881954082":"https://www.facebook.com/help/735006619902401",B=function(){return b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,"[FB-Only] Copy Spoofs",[r],0,[]))};f=m.slice();f[9]=function(){__p&&__p();var e=+(b("CurrentUser").isWorkUser()&&b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")),f=+(d===b("MessengerView").MASTER.RECENT);if(f!==0){f=+b("CurrentUser").isWorkUser();f=f!==0?h._("Personnes"):h._("Contacts actifs")}else f=h._("Messages r\u00e9cents");var m=+(d===b("MessengerView").MASTER.RECENT),p=+(d===b("MessengerView").MASTER.RECENT&&c===b("MessagingTag").INBOX),q=+(a===b("MercuryFilters").UNREAD),r=+(b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()),s=+(b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()),v=+(b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()&&(b("MercuryConfig").WorkTermsURI==null?0:[b("MercuryConfig").WorkTermsURI])!==0),C=+(b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()&&(b("MercuryConfig").WorkPrivacyURI==null?0:[b("MercuryConfig").WorkPrivacyURI])!==0),D=+(b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()&&(b("MercuryConfig").WorkCookiesURI==null?0:[b("MercuryConfig").WorkCookiesURI])!==0),E=+(b("gkx")("AT5Zc6wkJa2X436OfpnfW0nVUslQcHz-DvI97W0kc5d4yo3kmawY8Ezfar8s8ZhvhsEPhT0sBvC585ry6dCa-rJ9")&&b("CurrentUser").isMessengerOnlyUser()),F=+b("MessengerConfig").GKSpoof,G=+(b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()),H=+(b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser());e=b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").Menu[0]([e!==0?[b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Ne pas d\u00e9ranger"),[n],0,[])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([]))]:null,b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Param\u00e8tres"),[g],0,[])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,f,[o],0,[])),m!==0?y(0):null,p!==0?z(0):null,b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,q!==0?h._("Toutes les conversations"):h._("Conversations non lues"),[u],0,[])),r!==0?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,s!==0?i(0):null,v!==0?j(0):null,C!==0?k(0):null,D!==0?l(0):null,E!==0?w(0):null,b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0]([A],h._("Aide"),0,["_blank"],[])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Signaler un probl\u00e8me"),[t],0,[])),F!==0?B(0):null,G!==0?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,H!==0?x(0):null]));f=h._("Param\u00e8tres, aide et autres");m={button:b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make([f],["_30yy _2fug"],0,0,0,0,0,0,0,0,0,["button"],0,0,0,[f],[])),defaultMaxWidth:200};return b("ReasonReact.bs").element(0,0,b("MessengerPopoverMenuReact.bs").make(0,0,0,e,0,0,[b("ReasonReact.bs").element(0,0,b("AbstractPopoverButtonReact.bs").make([m],[!1],0,0,[200],[]))]))};return f}d=b("Utils.bs").$pipe$unknown;f.preventDefault=a;f.$pipe$unknown=d;f.renderAbout=i;f.renderPolicies=j;f.renderPrivacy=k;f.renderCookies=l;f.component=m;f.make=c}),null);
__d("WorkchatNotificationsJewelBootloaderReact.bs",["ReasonReact.bs","WorkchatNotificationsJewelBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("WorkchatNotificationsJewelBootloader.react"),{},a)}f.make=a}),null);
__d("WorkplaceLogoReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("WorkplaceLogoReact");function a(){var a=i.slice();a[9]=function(){var a=h._("Acc\u00e9der au fil d\u2019actualit\u00e9 Workplace");return b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make([a],["_2z9u"],0,0,0,0,["/feed"],0,0,0,0,["button"],0,0,["_blank"],[a],[b("React").createElement("span",{className:"_2z9t"},a)]))};return a}f.component=i;f.make=a}),null);
__d("MessengerMasterViewHeaderReact.bs",["cx","fbt","bs_curry","React","gkx","CurrentUser","ReasonReact.bs","MessagingTag","MercuryConfig","MessengerView","MessengerActions","WorkplaceLogoReact.bs","MessengerURIConstants","LinkWithHiddenURLBarReact.bs","MessengerSettingsMenuReact.bs","MessengerDeleteAllMenuBootloaderReact.bs","WorkchatNotificationsJewelBootloaderReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerMasterViewHeaderReact");function j(a){a.preventDefault();b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MessengerActions").changeQuery(null);return 0}function k(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").PENDING);return 0}function l(a,c,d,e,f,g,l,m){__p&&__p();m=+b("MercuryConfig").RTCR;var n=m!==0?h._("Revenir aux demandes de contact"):h._("Revenir aux invitations par message"),o=function(a){a.preventDefault();d!==b("MessengerView").MASTER.RECENT&&b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT);f&&b("bs_curry")._1(g,0);b("MessengerActions").changeFolder(b("MessagingTag").INBOX);return 0},p=function(){var a=f||+(c===b("MessagingTag").PENDING||c===b("MessagingTag").ACTION_ARCHIVED||d!==b("MessengerView").MASTER.RECENT),e=a!==0?o:k;a=a!==0?h._("Retour aux messages r\u00e9cents"):n;return b("ReasonReact.bs").element(0,0,b("LinkWithHiddenURLBarReact.bs").make([a],["_30yy _2oc9"],0,0,0,0,0,0,[e],0,0,0,["button"],0,0,0,[a],[]))},q=function(){__p&&__p();if(c===b("MessagingTag").PENDING||f){var a=+b("MercuryConfig").RTCR;if(a!==0)return h._("Demandes de contact");else return h._("Invitations par message")}else if(c===b("MessagingTag").OTHER)return h._("Invitations filtr\u00e9es");else if(d===b("MessengerView").MASTER.PEOPLE){a=+b("CurrentUser").isWorkUser();if(a!==0)return h._("Contacts");else return h._("Actifs")}else if(b("CurrentUser").isWorkUser())return h._("Discussion");else return h._("Messenger")},r=function(){return b("React").createElement("div",{className:"_4kzu"},b("ReasonReact.bs").element(0,0,b("MessengerSettingsMenuReact.bs").make(a,c,d,e,[])))},s=function(){return b("React").createElement("div",{className:"_4kzu"},b("ReasonReact.bs").element(0,0,b("MessengerDeleteAllMenuBootloaderReact.bs").make(a,c,e,l,f,[])))},t=function(){return b("ReasonReact.bs").element(0,0,b("WorkchatNotificationsJewelBootloaderReact.bs").make([]))},u=function(){var a=h._("Nouveau message");return b("ReasonReact.bs").element(0,0,b("LinkWithHiddenURLBarReact.bs").make([a],["_30yy _2oc8"],0,0,0,0,[b("MessengerURIConstants").COMPOSE_SUBPATH],0,[j],0,0,0,["button"],0,0,0,[a],[]))},v=function(){if(b("CurrentUser").isWorkUser())return+b("gkx")("AT5ad75lfUu_LEQloT_GHl5l4DgqBru4g1KtvnZgqgchaE21iYmpzSvKrpk6THSFyobb17PT_X_4ySOjfDebuqUc");else return 0};m=i.slice();m[9]=function(){__p&&__p();var a=f||+(c!==b("MessagingTag").INBOX||d!==b("MessengerView").MASTER.RECENT);if(a!==0)a=p(0);else{var e=v(0);a=e!==0?t(0):r(0)}e=(f||+(c===b("MessagingTag").PENDING||c===b("MessagingTag").OTHER))&&+b("MercuryConfig").MessengerInboxRequests;e=e!==0?s(0):u(0);var g=v(0);return b("React").createElement("div",{className:"_36ic _5l-3",role:"banner"},g!==0?b("ReasonReact.bs").element(0,0,b("WorkplaceLogoReact.bs").make([])):null,a,b("React").createElement("div",{className:"_1tqi"},q(0)),e)};return m}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return l(a.filter,a.folder,a.view,a.viewer,+a.aggregationView,a.onBackToRecent,a.threadIDs,[])});f.component=i;f.handleAddClick=j;f.handleFilteredRequestsBackArrowClick=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerMessageRequestsInfoReact.bs",["ReasonReact.bs","MessengerMessageRequestsInfo.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMessageRequestsInfo.react"),{},a)}f.make=a}),null);
__d("MessengerScrollableAreaReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerScrollableArea.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerScrollableArea.react"),{height:b("bs_js_null_undefined").from_opt(a)},c)}f.make=a}),null);
__d("MessengerThreadListGridWrapperReact.bs",["ReasonReact.bs","MessengerThreadListGridWrapper.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadListGridWrapper.react"),{label:a},c)}f.make=a}),null);
__d("MessengerThreadlistLinkRowReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){return b("React").createElement("li",{className:"_5l-3 _1ht1 _2ogr"},b("React").createElement("div",{className:"_2ogs"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,["_2ogt"],0,0,0,0,0,0,[a],0,0,0,0,0,0,0,h._("Voir les invitations filtr\u00e9es")))))}f.make=a}),null);
__d("MessengerThreadlistMessageRequestsRowReact.bs",["ReasonReact.bs","MessengerThreadlistMessageRequestsRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadlistMessageRequestsRow.react"),{onAggregationClick:a,isFocused:c,onFocus:d,pendingFolderUnseenCount:f,newMessageRequestThreads:e,aggregatedThreads:g,viewer:h},i)}f.make=a}),null);
__d("MessengerThreadlistNewMessageRowReact.bs",["bs_js_boolean","ReasonReact.bs","MessengerThreadlistNewMessageRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadlistNewMessageRow.react"),{isActive:b("bs_js_boolean").to_js_boolean(a),onClose:c},d)}f.make=a}),null);
__d("MessengerThreadlistRowContainerReact.bs",["Utils.bs","bs_js_boolean","ReasonReact.bs","bs_js_null_undefined","MessengerThreadlistRowContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadlistRowContainer.react"),{folder:b("bs_js_null_undefined").from_opt(a),blockedIds:m,isActive:b("Utils.bs").optionBoolToBoolean(c),isFocused:b("Utils.bs").optionBoolToBoolean(d),isActionsFocused:b("Utils.bs").optionBoolToBoolean(e),isTabbable:b("Utils.bs").optionBoolToBoolean(f),onFocus:g,onScrollIntoView:h,thread:i,viewer:j,readReceipts:k,showAggregation:b("bs_js_boolean").to_js_boolean(l)},n)}f.make=a}),null);
__d("WorkChatThreadlistNewsfeedActionReact.bs",["cx","fbt","bs_block","bs_curry","React","gkx","bs_js_boolean","bs_pervasives","ReasonReact.bs","AsyncRequest","XUIButtonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("WorkChatThreadlistNewsfeedActionReact");function a(){__p&&__p();var a=i.slice();a[4]=function(a){var c=setInterval(function(){return b("bs_curry")._1(a[3],1)},6e4);b("bs_curry")._1(a[4],function(){clearInterval(c);return 0});return 0};a[9]=function(a){var c=a[1];c=c!==0?h._({"*":"{post count} publications non lues","_1":"{post count} publication non lue"},[h._param("post count",b("bs_pervasives").string_of_int(c)),h._plural(c)]):h._("Acc\u00e9der au fil d\u2019actualit\u00e9");var d=a[1];d=d!==0?2:0;var e=+b("gkx")("AT5bsDZiHMWtE2UowLAt2aHF1xqlqGKl8yICLll1Wu-J_t74abq6btJr92TeaiK_cpisH5W4HQQB08thCKN0MwcDBLaAz1ePIpoBNZzuZ0lxOg");if(e!==0)return b("React").createElement("div",{className:"_25ar"+(b("bs_js_boolean").to_js_boolean(+(d===0))?" _1ngy":"")},b("ReasonReact.bs").element(0,0,b("XUIButtonReact.bs").make(0,[function(){return b("bs_curry")._1(a[3],0)}],[c],[d],0,0,0,["/feed?ref=chat_threadlist"],["_blank"],0,0,[])));else return null};a[10]=function(){return 0};a[12]=function(a,c){if(typeof a==="number")if(a!==0)return b("bs_block").__(1,[function(a){new(b("AsyncRequest"))("/ajax/litestand/newsfeed_count").setHandler(function(c){return b("bs_curry")._1(a[3],[c.payload])}).send();return 0}]);else return b("bs_block").__(0,[0]);else return b("bs_block").__(0,[a[0]])};return a}c=6e4;f.component=i;f.updateInterval=c;f.make=a}),null);
__d("WorkChatActivityTypedLogger.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 0:return"notifs_jewel_links_click";case 1:return"nav_tab_click";case 2:return"info_panel_profile_link_click";case 3:return"notifs_jewel_click"}}f.string_of_event=a}),null);
__d("WorkChatThreadlistTabsReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs","MessagingTag","MessengerView","MercuryFilters","MessengerActions","MessengerSettingsMenuReact.bs","WorkChatActivityTypedLogger.bs","WorkChatActivityTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("WorkChatThreadlistTabsReact");function a(a,c,d,e,f){__p&&__p();var g=a?a[0]:b("MercuryFilters").ALL,j=c?c[0]:"",k=function(a){j!==b("MessagingTag").INBOX&&b("MessengerActions").changeFolder(b("MessagingTag").INBOX);var c=+(a===b("MessengerView").MASTER.RECENT);new(b("WorkChatActivityTypedLogger"))().setEvent(b("WorkChatActivityTypedLogger.bs").string_of_event(1)).addToExtraData("data",[c!==0?"recent":"people"]).log();b("MessengerActions").changeMasterView(a);return 0};f=i.slice();f[9]=function(){var a=h._("Accueil"),c=h._("Personnes"),f=+(d===b("MessengerView").MASTER.RECENT&&j===b("MessagingTag").INBOX);return b("React").createElement("div",{className:"_65ty"},b("React").createElement("div",{className:"_65tz"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make([a],["_65t-"+(1-f?" _65t_":"")+(f?" _65u0":"")],0,0,0,0,0,0,[function(){return k(b("MessengerView").MASTER.RECENT)}],0,0,["button"],0,0,0,[a],[]))),b("React").createElement("div",{className:"_65tz"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make([c],["_65t-"+(+(d!==b("MessengerView").MASTER.PEOPLE)?" _65u1":"")+(+(d===b("MessengerView").MASTER.PEOPLE)?" _65u2":"")],0,0,0,0,0,0,[function(){return k(b("MessengerView").MASTER.PEOPLE)}],0,0,["button"],0,0,0,[c],[]))),b("React").createElement("div",{className:"_65tz"},b("ReasonReact.bs").element(0,0,b("MessengerSettingsMenuReact.bs").make(g,j,d,e,[]))))};return f}f.component=i;f.make=a}),null);
__d("WorkGalahadNavMenu",["cx","ReactXUIMenu","joinClasses"],(function(a,b,c,d,e,f,g){var h;c=babelHelpers.inherits(a,b("ReactXUIMenu"));h=c&&c.prototype;function a(a){"use strict";var c=b("joinClasses")(a.className,"_4ue0");h.constructor.call(this,babelHelpers["extends"]({className:c},a))}e.exports=a}),null);
__d("WorkGalahadNavMenuItem",["cx","MenuItem","joinClasses"],(function(a,b,c,d,e,f,g){var h;c=babelHelpers.inherits(a,b("MenuItem"));h=c&&c.prototype;function a(a){"use strict";var c=b("joinClasses")(a.className,"_13vw");h.constructor.call(this,babelHelpers["extends"]({className:c},a))}e.exports=a}),null);
__d("WorkGalahadNavMenuItemContent.react",["cx","FlexLayout.react","Image.react","React","XUIText.react"],(function(a,b,c,d,e,f,g){function a(a){var c=a.icon;a=a.text;if(c)return b("React").createElement(b("FlexLayout.react"),{align:"start",direction:"horizontal"},b("React").createElement(b("Image.react"),{className:"_3-90",src:c}),b("React").createElement(b("XUIText.react"),{size:"body2"},a));else return b("React").createElement(b("XUIText.react"),{size:"body2"},a)}e.exports=a}),null);
__d("WorkGalahadNavMenuSelectableItem",["cx","MenuSelectableItem","joinClasses"],(function(a,b,c,d,e,f,g){var h;c=babelHelpers.inherits(a,b("MenuSelectableItem"));h=c&&c.prototype;function a(a){"use strict";var c=b("joinClasses")(a.className,"_13vw _2r9d");h.constructor.call(this,babelHelpers["extends"]({className:c},a))}e.exports=a}),null);
__d("WorkGalahadNavMenuTitle",["cx","MenuStaticItem","joinClasses"],(function(a,b,c,d,e,f,g){var h;c=babelHelpers.inherits(a,b("MenuStaticItem"));h=c&&c.prototype;function a(a){"use strict";var c=b("joinClasses")(a.className,"_13vw _2_h5");h.constructor.call(this,babelHelpers["extends"]({className:c},a))}e.exports=a}),null);
__d("WorkGalahadChatsThreadlistMenu",["ix","fbt","MenuSeparator.react","MercuryFilters","MessagingTag","MessengerActions","MessengerDialogs.bs","MessengerSettingsDialogReact.bs","React","WorkGalahadNavMenu","WorkGalahadNavMenuItem","WorkGalahadNavMenuItemContent.react","WorkGalahadNavMenuTitle","WorkGalahadNavMenuSelectableItem","XUIText.react","asset"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("MessengerSettingsDialogReact.bs").jsComponent;function j(){b("MessengerActions").changeFilter(b("MercuryFilters").UNREAD)}function k(){b("MessengerActions").changeFilter(b("MercuryFilters").ALL)}function l(){b("MessengerActions").changeFolder(b("MessagingTag").INBOX)}function m(){b("MessengerActions").changeFolder(b("MessagingTag").ACTION_ARCHIVED)}function n(){b("MessengerActions").changeFolder(b("MessagingTag").PENDING)}function o(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{viewer:a})})}function a(a,c,d){return b("React").createElement(b("WorkGalahadNavMenu"),null,b("React").createElement(b("WorkGalahadNavMenuTitle"),null,b("React").createElement(b("XUIText.react"),{size:"header3",weight:"bold"},h._("Chats"))),b("React").createElement(b("WorkGalahadNavMenuSelectableItem"),{onClick:k,selected:a===b("MercuryFilters").ALL},b("React").createElement(b("WorkGalahadNavMenuItemContent.react"),{text:h._("All")})),b("React").createElement(b("WorkGalahadNavMenuSelectableItem"),{onClick:j,selected:a===b("MercuryFilters").UNREAD},b("React").createElement(b("WorkGalahadNavMenuItemContent.react"),{text:h._("Unread")})),b("React").createElement(b("MenuSeparator.react"),null),b("React").createElement(b("WorkGalahadNavMenuSelectableItem"),{onClick:l,selected:c===b("MessagingTag").INBOX},b("React").createElement(b("WorkGalahadNavMenuItemContent.react"),{text:h._("Messages")})),b("React").createElement(b("WorkGalahadNavMenuSelectableItem"),{onClick:n,selected:c===b("MessagingTag").PENDING},b("React").createElement(b("WorkGalahadNavMenuItemContent.react"),{text:h._("Message Requests")})),b("React").createElement(b("WorkGalahadNavMenuSelectableItem"),{onClick:m,selected:c===b("MessagingTag").ACTION_ARCHIVED},b("React").createElement(b("WorkGalahadNavMenuItemContent.react"),{text:h._("Archived Threads")})),b("React").createElement(b("MenuSeparator.react"),null),b("React").createElement(b("WorkGalahadNavMenuItem"),{onClick:function(){return o(d)}},b("React").createElement(b("WorkGalahadNavMenuItemContent.react"),{icon:g("499562"),text:h._("Settings")})))}e.exports=a}),null);
__d("WorkGalahadNavHeader.react",["cx","FbtResultBase","FlexLayout.react","Image.react","Link.react","PopoverMenu.react","React","XUIText.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.action;a=a.title;var d=c?b("React").createElement(b("Link.react"),{className:"_67k6",href:c.href,onClick:c.onClick},b("React").createElement(b("FlexLayout.react"),{align:"center",direction:"horizontal"},b("React").createElement(b("XUIText.react"),{display:"block"},c.title),c.icon?b("React").createElement(b("Image.react"),{className:"_3-9a",src:c.icon}):null)):null;c&&c.menu&&(d=b("React").createElement(b("PopoverMenu.react"),{menu:c.menu,alignh:"right"},d));return b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_3-8m _3-9a",direction:"horizontal",justify:"all"},b("React").createElement(b("XUIText.react"),{className:"_4es7",display:"block",weight:"bold"},a),d)}e.exports=a}),null);
__d("WorkGalahadChatsThreadlistHeader.react",["ix","fbt","MercuryFilters","MessagingTag","WorkGalahadNavHeader.react","WorkGalahadChatsThreadlistMenu","React","asset"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(a,c){a=a===b("MercuryFilters").UNREAD;switch(c){case b("MessagingTag").INBOX:return a?h._("Unread Messages"):h._("Messages");case b("MessagingTag").ACTION_ARCHIVED:return a?h._("Unread Archived Threads"):h._("Archived Threads");case b("MessagingTag").PENDING:return a?h._("Unread Message Requests"):h._("Message Requests")}return null}function a(a){var c=a.filter,d=a.folder;a=a.viewer;return b("React").createElement(b("WorkGalahadNavHeader.react"),{title:i(c,d),action:{menu:b("WorkGalahadChatsThreadlistMenu")(c,d,a),title:h._("Filter"),icon:g("507990")}})}e.exports=a}),null);
__d("WorkGalahadChatsThreadlistHeaderReact.bs",["ReasonReact.bs","WorkGalahadChatsThreadlistHeader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("WorkGalahadChatsThreadlistHeader.react"),{filter:c,folder:a,viewer:d},e)}f.make=a}),null);
__d("WorkchatThreadListInviteRow.react",["cssVar","cx","fbt","Link.react","MercuryConfig","MessengerAddIconSVG.react","React","WorkInviteSource","XWorkInviteCoworkersDialogController"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j;c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(){j.constructor.call(this),this.state={inviteURI:b("XWorkInviteCoworkersDialogController").getURIBuilder().setEnum("source",b("WorkInviteSource").WWW_CHAT_THREAD_LIST).getURI()}}a.prototype.render=function(){return!b("MercuryConfig").ShowInviteSurface?null:b("React").createElement("li",{className:"_5l-3 _1q5x",role:"row",tabIndex:0},b("React").createElement("div",{className:"_5l-3 _1q5y",id:"work_thread_list_invite_row",role:"gridcell",tabIndex:-1},b("React").createElement(b("Link.react"),{href:"#",ajaxify:this.state.inviteURI,rel:"dialog",className:"_1q5y _1q61 _5l-3",s:"true",ref:"link",role:"link",tabIndex:-1},b("React").createElement("div",{className:"_5l-3 _1q60"},b("React").createElement("div",{"aria-hidden":!0,className:"_1qt3 _5l-3"},b("React").createElement(b("MessengerAddIconSVG.react"),{className:"_1q5z",customColor:"#0084ff"})),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6"},i._("Inviter des coll\u00e8gues"))))))))};e.exports=a}),null);
__d("WorkchatThreadListInviteRowReact.bs",["ReasonReact.bs","WorkchatThreadListInviteRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("WorkchatThreadListInviteRow.react"),{},a)}f.make=a}),null);
__d("WorkTopGroupThreadsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1509086069220516"};c.getQueryID=function(){"use strict";return"155350775131910"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MercuryWorkTopGroupThreads",["EmitterSubscription","EventEmitter","ImmutableObject","KeyedCallbackManager","MercuryDispatcher","MercuryServerPayloadPreprocessor","MessengerServerPayloadTransformer.bs","MercurySingletonProvider","WorkTopGroupThreadsWebGraphQLQuery","WebGraphQL"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("EventEmitter"))();function a(a){this.$5=function(a){if(a&&a.viewer&&a.viewer.message_threads){a=(a.viewer.message_threads.nodes||[]).map(function(a){return b("MessengerServerPayloadTransformer.bs").transformThread(this.$1,a,!1)}.bind(this));if(a.length>0){var c=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);c.handleUpdate({work_top_named_threads:a})}}}.bind(this),this.$1=a,this.$2=b("MercuryDispatcher").getForFBID(this.$1),this.$3=new(b("KeyedCallbackManager"))(),this.$4()}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};a.prototype.getTopThreads=function(){return this.$3.getAllResources()};a.prototype.requestPull=function(){b("WebGraphQL").exec(new(b("WorkTopGroupThreadsWebGraphQLQuery"))({limit:20})).done(this.$5)};a.prototype.$4=function(){__p&&__p();this.$2.subscribe("update-work-group-threads",function(a,c){a=c.work_top_named_threads;if(!a||!a.length)return;this.$3.reset();var d={};a.forEach(function(a){return d[a.thread_id]=new(b("ImmutableObject"))(a)});this.$3.addResourcesAndExecute(d);g.emit("change")}.bind(this))};a.addListener=function(a,b){return g.addListener(a,b)};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("WorkchatThreadlistGroupCarouselContainer.react",["MercuryWorkTopGroupThreads","React","SubscriptionsHandler","WorkchatThreadlistGroupCarousel"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=b("WorkchatThreadlistGroupCarousel").module,i=1e3*60*60;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(a){g.constructor.call(this,a),this.$2=null,this.state={threads:null},this.$1=new(b("SubscriptionsHandler"))()}a.prototype.componentDidMount=function(){h&&(this.pullThreads(),this.$1.addSubscriptions(b("MercuryWorkTopGroupThreads").addListener("change",function(){return this.pullThreads()}.bind(this))),this.$2=setInterval(function(){return b("MercuryWorkTopGroupThreads").get().requestPull()},i))};a.prototype.componentWillUnmount=function(){this.$1.release(),this.$2!==null&&clearInterval(this.$2)};a.prototype.pullThreads=function(){var a=Object.values(b("MercuryWorkTopGroupThreads").get().getTopThreads());this.setState({threads:a})};a.prototype.render=function(){var a=this.state.threads;return!h||!a||a.length===0?null:b("React").createElement(h,{threads:a,viewerID:this.props.viewerID})};a.propTypes={viewerID:c.string.isRequired};e.exports=a}),null);
__d("workchatThreadlistGroupCarouselContainerReact.bs",["ReasonReact.bs","WorkchatThreadlistGroupCarouselContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("WorkchatThreadlistGroupCarouselContainer.react"),{viewerID:a},c)}f.make=a}),null);
__d("MessengerThreadlistReact.bs",["cx","csx","fbt","bs_array","bs_block","bs_curry","React","Utils.bs","Parent","gkx","ReactDOM","debounce","LinkReact.bs","UserAgent","bs_caml_array","MercuryIDs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessagingTag","MercuryConfig","MessengerView","bs_caml_primitive","MercuryFilters","MessengerActions","MercuryThreadInfo","KeyEventController","MessageRequestLogger.bs","SubscriptionsHandler","ChatSidebarSheetReact.bs","MessengerSpinnerReact.bs","MessengerTypeaheadUtils","MessengerComposerActions","MercuryTypeaheadConstants","MessengerSearchFunnelLogger","WorkChatThreadlistTabsReact.bs","MessengerNewMessagesNoticeReact.bs","MessengerThreadlistLinkRowReact.bs","MessengerFlexScrollableAreaReact.bs","WorkchatThreadListInviteRowReact.bs","MessengerMessageRequestsInfoReact.bs","MessengerThreadListGridWrapperReact.bs","MessengerGraphQLSearchTypeaheadReact.bs","MessengerSearchFunnelLoggerConstants","MessengerThreadlistRowContainerReact.bs","MessengerThreadlistNewMessageRowReact.bs","WorkChatThreadlistNewsfeedActionReact.bs","WorkGalahadChatsThreadlistHeaderReact.bs","MessengerThreadlistMessageRequestsRowReact.bs","workchatThreadlistGroupCarouselContainerReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c,d){__p&&__p();if(d)if(a.length>0&&c.length>0){a=b("bs_caml_array").caml_array_get(b("bs_caml_array").caml_array_get(a,0),0);c=b("bs_caml_array").caml_array_get(b("bs_caml_array").caml_array_get(c,0),0);if(a.unread_count>0&&a.thread_id!==d[0]&&a!==c)return+b("MercuryThreadInfo").isMuted(a);else return 0}else return 0;else return 0}function k(a,c){var d=+a.ctrlKey,e=+a.metaKey,f=+a.shiftKey,g=+b("KeyEventController").filterEventTypes(a,c);c=+b("KeyEventController").filterEventTargets(a,c);a=b("Parent").bySelector(a.target,"._150g");if(d!==0||e!==0||f!==0||!(g!==0&&c!==0&&a==null))return 0;else return 1}function l(a,c){__p&&__p();var d=+a.ctrlKey,e=+a.metaKey,f=+b("UserAgent").isPlatform("Mac OS X"),g=+b("UserAgent").isPlatform("iOS");c=+b("KeyEventController").filterEventTypes(a,c);a=b("Parent").bySelector(a.target,"._150g");if(d!==0)if(e!==0||f!==0||g!==0||!(c!==0&&a==null))return 0;else return 1;else if(e!==0)if(f!==0)if(g!==0||!(c!==0&&a==null))return 0;else return 1;else if(g!==0&&c!==0&&a==null)return 1;else return 0;else return 0}a=b("UserAgent").isPlatform("Mac OS X")||b("UserAgent").isPlatform("iOS")?"Cmd":"Ctrl";var m="K",n=a+" + K";function o(a,b){b[1][6][0]=a==null?0:[a];return 0}function p(a,c,d){__p&&__p();var e=d.findIndex(function(c){__p&&__p();var d=c.length;if(d!==1)if(d!==0&&a&&b("bs_caml_array").caml_array_get(c,0).thread_id===a[0])return 1;else return 0;else{d=c[0];if(a&&d.thread_id===a[0])return 1;else return 0}});e=b("bs_caml_primitive").caml_int_min(b("bs_caml_primitive").caml_int_max(e+c|0,0),d.length-1|0);return b("bs_caml_array").caml_array_get(b("bs_caml_array").caml_array_get(d,e),0).thread_id}function q(a,b){a.preventDefault();a=b[1][4][0];if(a)return a[0].focusInput();else return 0}function r(a,b){b[1][4][0]=a==null?0:[a];return 0}function s(a,c){var d=c[1];setTimeout(function(){var c=d[6][0];if(c){b("MessengerTypeaheadUtils").scrollEntryIntoView(a,c[0]);return 0}else return 0},0);return 0}function t(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").OTHER);return 0}function u(a){a.preventDefault();b("MessengerActions").changeFilter(b("MercuryFilters").ALL);b("MessengerActions").changeFolder(b("MessagingTag").INBOX);return 0}function v(a,c,d,e){__p&&__p();var f=[];b("bs_array").iter(function(d){__p&&__p();d=c[d];if(d!==undefined){var e=d[1];d=d[0];if(d==null)return 0;else{d=b("ReactDOM").findDOMNode(d).getBoundingClientRect();if(d.top>a.top-10&&d.bottom<a.bottom+10){f.push({threadID:e.thread_id,unread:+(e.unread_count>0)});return 0}else return 0}}else return 0},Object.keys(c));if(f.length){var g=b("bs_array").map(function(a){return b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.threadID,e)},f);g=g.join(",");return b("MessageRequestLogger.bs").logItemImpression(f,g,d)}else return 0}var w=b("debounce")(function(a){__p&&__p();var c=a[1];a=a[0];var d=a[6][0];if(d){d=d[0].getArea();if(d==null)return 0;else{d=d.getElement().getBoundingClientRect();v(d,a[7],b("MessagingTag").PENDING,c);return v(d,a[8],b("MessagingTag").OTHER,c)}}else return 0},500);function x(a,c,d,e,f){var g=c[1];g=g[0];g=g&&g[0]===b("bs_caml_array").caml_array_get(f,0).thread_id?!0:!1;return b("ReasonReact.bs").element([b("bs_caml_array").caml_array_get(f,0).thread_id],0,b("MessengerThreadlistMessageRequestsRowReact.bs").make(d,g,function(a){return b("bs_curry")._1(c[3],b("bs_block").__(2,[a]))},[],e,f,a,[]))}function y(a,c,d){__p&&__p();d=d[1];if(a.folder===b("MessagingTag").PENDING){d[7][a.thread_id]=[c,a];return 0}else if(a.folder===b("MessagingTag").OTHER){d[8][a.thread_id]=[c,a];return 0}else return 0}function z(a,c,d,e,f,g,h,i){__p&&__p();var j=d[1];a=a&&a[0]===i.thread_id?1:0;var k=j[0];k=k?1:0;var l=j[0];l=l&&l[0]===i.thread_id?1:0;k=a!==0?k!==0&&l===0?0:1:l!==0?1:0;var m=+(i.folder===b("MessagingTag").PENDING||i.folder===b("MessagingTag").OTHER);return b("ReasonReact.bs").element([i.thread_id],[m!==0?b("bs_curry")._1(d[0],function(a,b){return y(i,a,b)}):function(){return 0}],b("MessengerThreadlistRowContainerReact.bs").make([e],[a],[l],[j[2]],[k],function(a){return b("bs_curry")._1(d[3],b("bs_block").__(2,[a]))},b("bs_curry")._1(d[0],s),i,c,h,f,g,[]))}function A(a,c){var d=a[1];a=a[0];var e=d==null?b("MessengerSearchFunnelLoggerConstants").OTHER:d===b("MercuryTypeaheadConstants").FRIEND_TYPE?b("MessengerSearchFunnelLoggerConstants").USER_CONTACT:d===b("MercuryTypeaheadConstants").NON_FRIEND_TYPE?b("MessengerSearchFunnelLoggerConstants").USER_NON_CONTACT:d===b("MercuryTypeaheadConstants").FB4C_TYPE?b("MessengerSearchFunnelLoggerConstants").COWORKER:d===b("MercuryTypeaheadConstants").GAME_TYPE?b("MessengerSearchFunnelLoggerConstants").GAME:d===b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE||d===b("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||d===b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE||d===b("MercuryTypeaheadConstants").PAGE_TYPE?b("MessengerSearchFunnelLoggerConstants").PAGE:d===b("MercuryTypeaheadConstants").THREAD_TYPE?b("MessengerSearchFunnelLoggerConstants").GROUP:b("MessengerSearchFunnelLoggerConstants").OTHER;b("MessengerActions").selectThread(a,d);b("MessengerSearchFunnelLogger").logResultSelection("WWW_MESSENGER_SEARCH_SESSION_FUNNEL",c[1][3],a,e);return 0}var B=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerThreadlistReact");function C(a,c,d,e,f,g,h,v,y,C,D,E,F,G,H,I,J,K,L,M){__p&&__p();var N=function(c,d,e){__p&&__p();var f=e[2],a=f[0];c=typeof c==="number"?c!==0?a.length-1|0:(-a.length|0)-1|0:c[0];var g=+d.altKey,h=b("Parent").bySelector(d.target,"._4rv3"),i=e[1][0],j=b("Parent").bySelector(d.target,"._1ht1");if(g!==0)if(h==null)g=1;else{h=f[4];if(h!==0)if(c===1&&a.length>0){b("MessengerActions").selectThread(b("bs_caml_array").caml_array_get(b("bs_caml_array").caml_array_get(a,0),0).thread_id,null);return 0}else return 0;else{h=a.findIndex(function(b){if(b.length!==1)return 0;else{b=b[0];var a=f[2];if(a&&a[0]===b.thread_id)return 1;else return 0}});if(h!==-1){var k=b("bs_caml_array").caml_array_get(a,h+c|0);b("MessengerActions").selectThread(b("bs_caml_array").caml_array_get(k,0).thread_id);f[1]&&h===0&&c===-1&&b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);if(h===(a.length-1|0))return b("bs_curry")._1(f[3],0);else return 0}else return 0}}else g=1;if(g===1)if(i&&!(j==null)){d.preventDefault();return b("bs_curry")._1(e[3],b("bs_block").__(3,[c]))}else return 0},O=function(c,a){__p&&__p();c.stopPropagation();b("MessengerComposerActions").exitComposeState();if(y){a=H.find(function(a){var c=a.length;if(c!==1)if(c!==0)return+(b("bs_js_primitive").undefined_to_opt(a.find(function(a){return+(a.unread_count===0)}))===0);else return 0;else{c=a[0];return+(c.unread_count===0)}});b("MessengerActions").selectThread(a!==undefined?b("bs_caml_array").caml_array_get(a,0).thread_id:null,null);return 0}else return 0},P=function(c,a){c.preventDefault();return b("bs_curry")._1(D,0)},Q=function(a,c,d,e){__p&&__p();var f=0;if(d!==0)return null;else if(a)if(a[0]!==0)return null;else d=2;else d=2;if(d===2)if(c)if(c[0]!==0)return b("React").createElement("div",{className:"_19hf"},b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[])));else f=1;else f=1;if(f===1)return b("React").createElement("div",{className:"_19hf"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,["#"],0,[b("bs_curry")._1(e[0],P)],0,0,0,0,[-1],0,0,[i._("Voir la suite")])))},R=function(d){__p&&__p();if(H.length)return b("ReasonReact.bs").element(0,0,b("MessengerThreadListGridWrapperReact.bs").make(i._("Liste de conversations"),[b("bs_array").map(function(b){if(b.length!==1)return x(I,d,J,E,b);else{b=b[0];return z(a,I,d,f,L,c,K,b)}},H)]));else{if(f===b("MessagingTag").INBOX){var g=+(e===b("MercuryFilters").UNREAD);g=g!==0?i._("Aucun message non lu trouv\u00e9."):i._("Aucun message trouv\u00e9.")}else if(f===b("MessagingTag").PENDING){var h=+b("MercuryConfig").RTCR;g=h!==0?i._("Aucune demande de contact trouv\u00e9e."):i._("Aucune invitation par message trouv\u00e9e.")}else g=i._("Aucune invitation filtr\u00e9e trouv\u00e9e.");h=+(f!==b("MessagingTag").INBOX||e!==b("MercuryFilters").ALL);h=h!==0?b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,0,0,[u],0,0,0,0,0,0,0,[i._("Revenez \u00e0 la bo\u00eete de r\u00e9ception.")])):null;return b("React").createElement("div",{className:"_3blk"},g,b("React").createElement("div",{className:"_3bll"},h))}};return[B[0],B[1],B[2],function(b){__p&&__p();var c=b[2];b=b[1];(c[5]!==f||L!==c[6])&&w([b,I]);var d=b[6][0];d=d?+d[0].isScrolledToTop():0;c=j(H,c[0],a);var e;if(d!==0)e=1;else if(c!==0)if(F){c=F[0];var g=b.slice(),h=+(c.length===0);g[3]=h!==0?c:b[3];g[5]=1;return g}else return b;else e=1;if(e===1)if(F){h=F[0];c=b.slice();g=+(h.length===0);c[3]=g!==0?h:b[3];c[5]=b[5]&&1-d;return c}else return b},function(a){__p&&__p();var c=function(c,d){var e=b("Parent").bySelector(d.target,"._1ht1");if(e==null)return 0;else{d.preventDefault();return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))}},d=new(b("SubscriptionsHandler"))(),e=[-1],f=[1],g=[-5],h=[5];d.addSubscriptions(b("KeyEventController").registerKey("UP",b("bs_curry")._1(a[0],function(a,b){return N(e,a,b)}),k),b("KeyEventController").registerKey("DOWN",b("bs_curry")._1(a[0],function(a,b){return N(f,a,b)}),k),b("KeyEventController").registerKey("PAGE_UP",b("bs_curry")._1(a[0],function(a,b){return N(g,a,b)})),b("KeyEventController").registerKey("PAGE_DOWN",b("bs_curry")._1(a[0],function(a,b){return N(h,a,b)})),b("KeyEventController").registerKey("HOME",b("bs_curry")._1(a[0],function(a,b){return N(0,a,b)})),b("KeyEventController").registerKey("END",b("bs_curry")._1(a[0],function(a,b){return N(1,a,b)})),b("KeyEventController").registerKey("LEFT",function(a){return c(0,a)}),b("KeyEventController").registerKey("RIGHT",function(a){return c(1,a)}),b("KeyEventController").registerKey(m,b("bs_curry")._1(a[0],q),l));b("bs_curry")._1(a[4],function(){d.release();return 0});w([a[1],I]);return 0},function(a){__p&&__p();var b=a[1];a=a[0];var c=+(b[1][1]!==a[1][1]);a=g&&1-a[2][1];b=b[1][6][0];if(c!==0&&a!==0&&b){b[0].scrollToTop();return 0}else return 0},B[6],B[7],B[8],function(a){__p&&__p();var c=a[1],j=c[5]&&1-c[1],k=+b("gkx")("AT54UChk2NoqJXFF1MV8aQRxUoOW3ZErAtJcgLTvrnCV9rvMkUPp0medMsVOVunTnRfJjVXDEMxLY3wQwE_72fY7"),l=+b("CurrentUser").isWorkUser()&&1-c[1]&&+(b("gkx")("AT58O0ueTgrNywfhkMH9fYHs8_paoL8Uj3nAzEseDtJbi75rIYW1Jld0CDq2Sj1iPDsNcWsScyu5Jv7kTxxdRT_i")&&f===b("MessagingTag").INBOX),m=i._("Conversations"),p=F?1:0,q=+(f===b("MessagingTag").INBOX);if(q!==0){q=+b("CurrentUser").isWorkUser();if(q!==0){q=c[1];q=i._("Rechercher dans conversations {keyboard shortcut help}",[i._param("keyboard shortcut help",q!==0?"":" ("+(n+")"))])}else q=i._("Rechercher dans Messenger");q=b("ReasonReact.bs").element(0,[b("bs_curry")._1(a[0],r)],b("MessengerGraphQLSearchTypeaheadReact.bs").make("_5iwm"+(c[1]||+(c[3].length>0)?" _5iwn":"")+" _150g",1,0,0,0,[+(c[3]==="")&&1-p],[p],[c[1]],function(){b("MessengerSearchFunnelLogger").endFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");return b("bs_curry")._1(a[3],1)},function(c){return b("bs_curry")._1(a[3],b("bs_block").__(0,[c.target.value]))},function(){b("MessengerSearchFunnelLogger").logClearQuery("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");d&&b("bs_curry")._1(d[0],0);return b("bs_curry")._1(a[3],2)},function(){b("MessengerSearchFunnelLogger").startFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL",b("MessengerSearchFunnelLoggerConstants").MESSENGER_DOT_COM,b("MessengerSearchFunnelLoggerConstants").UNIVERSAL_SEARCH);return b("bs_curry")._1(a[3],0)},b("bs_curry")._1(a[0],s),function(c,d){return b("bs_curry")._2(a[0],A,[c,d])},q,[c[3]],1,1,"_11_d",I,[]))}else q=null;var u=+b("CurrentUser").isWorkUser()&&1-c[1],w=+(f===b("MessagingTag").PENDING),x=+(f===b("MessagingTag").INBOX&&C.length>0),z=+(f===b("MessagingTag").PENDING),B=+b("CurrentUser").isWorkUser()&&1-k;if(B!==0){B=+b("gkx")("AT5ad75lfUu_LEQloT_GHl5l4DgqBru4g1KtvnZgqgchaE21iYmpzSvKrpk6THSFyobb17PT_X_4ySOjfDebuqUc");B=B!==0?b("ReasonReact.bs").element(0,0,b("WorkChatThreadlistTabsReact.bs").make([e],[f],b("MessengerView").MASTER.RECENT,I,[])):b("ReasonReact.bs").element(0,0,b("WorkChatThreadlistNewsfeedActionReact.bs").make([]))}else B=null;return b("React").createElement("div",{className:"_2xhi"},b("ReasonReact.bs").element(0,0,b("ChatSidebarSheetReact.bs").make("_p0g",[])),b("ReasonReact.bs").element(0,0,b("MessengerNewMessagesNoticeReact.bs").make(j,function(c){c.preventDefault();return b("bs_curry")._1(a[3],4)},0,[])),b("ReasonReact.bs").element(0,[b("bs_curry")._1(a[0],o)],b("MessengerFlexScrollableAreaReact.bs").make([function(){return b("bs_curry")._1(a[3],3)}],[q,u!==0?b("ReasonReact.bs").element(0,0,b("WorkchatThreadListInviteRowReact.bs").make([])):null,l!==0?b("ReasonReact.bs").element(0,0,b("workchatThreadlistGroupCarouselContainerReact.bs").make(I,[])):null,k!==0?b("ReasonReact.bs").element(0,0,b("WorkGalahadChatsThreadlistHeaderReact.bs").make(f,e,I,[])):l!==0?b("React").createElement("div",undefined,b("React").createElement("span",{className:"_1p5i"},i._("R\u00e9centes"))):null,w!==0?b("ReasonReact.bs").element(0,0,b("MessengerMessageRequestsInfoReact.bs").make([])):null,b("React").cloneElement(b("React").createElement("div",{className:c[1]&&1-p?"accessible_elem":"",role:"navigation"}),{"aria-label":m},x!==0?b("ReasonReact.bs").element(0,0,b("MessengerThreadlistMessageRequestsRowReact.bs").make(J,!1,function(c){return b("bs_curry")._1(a[3],b("bs_block").__(2,[c]))},C,E,[],I,[])):null,g!==0?b("ReasonReact.bs").element(0,0,b("MessengerThreadlistNewMessageRowReact.bs").make(y,b("bs_curry")._1(a[0],O),[])):null,R(a),z!==0?b("MessengerThreadlistLinkRowReact.bs").make(t):null,G?b("bs_curry")._1(G[0],0):Q(h,v,L,a))])),B)},function(){return[0,0,0,"",[0],0,[0],{},{}]},[H,g,a,D,y,f,L],function(a,c){__p&&__p();if(typeof a==="number")switch(a){case 0:var d=c.slice();return b("bs_block").__(0,[(d[1]=1,d)]);case 1:d=c.slice();return b("bs_block").__(0,[(d[1]=0,d[3]="",d)]);case 2:d=c.slice();return b("bs_block").__(0,[(d[3]="",d)]);case 3:if(c[1])return 0;else{d=c[6][0];if(d){d=d[0];var e=+d.isScrolledToBottom();d=+d.isScrolledToTop();var f=c[5];if(e!==0){if(d!==0)if(f!==0){e=c.slice();return b("bs_block").__(2,[(e[5]=0,e),function(a){b("bs_curry")._1(D,0);return w([a[1],I])}])}else e=1;else e=1;if(e===1)return b("bs_block").__(1,[function(a){b("bs_curry")._1(D,0);return w([a[1],I])}])}else{if(d!==0)if(f!==0){e=c.slice();return b("bs_block").__(2,[(e[5]=0,e),function(a){return w([a[1],I])}])}else d=1;else d=1;if(d===1)return b("bs_block").__(1,[function(a){return w([a[1],I])}])}}else return 0}break;case 4:f=c.slice();return b("bs_block").__(2,[(f[5]=0,f),function(a){a=a[1][6][0];if(a){a[0].scrollToTop();return 0}else return 0}])}else switch(a.tag|0){case 0:e=c.slice();return b("bs_block").__(0,[(e[3]=a[0],e)]);case 1:d=c.slice();return b("bs_block").__(0,[(d[2]=a[0],d)]);case 2:f=c.slice();return b("bs_block").__(0,[(f[0]=[a[0]],f)]);case 3:e=c.slice();return b("bs_block").__(0,[(e[0]=[p(c[0],a[0],H)],e)])}},B[13]]}c=b("ReasonReact.bs").wrapReasonForJs(B,function(a){var c=b("Utils.bs").nullUndefinedBooleanToOptionBool(a.isComposing);return C(b("bs_js_primitive").null_undefined_to_opt(a.activeThreadID),a.blockedIds,b("bs_js_primitive").null_undefined_to_opt(a.clearQuery),a.filter,a.folder,c?c[0]:0,b("Utils.bs").nullUndefinedBooleanToOptionBool(a.isLoaded),b("Utils.bs").nullUndefinedBooleanToOptionBool(a.isLoading),+a.isNewMessageActive,a.newMessageRequestThreads,a.onLoadMoreRequest,a.pendingFolderUnseenCount,b("bs_js_primitive").null_undefined_to_opt(a.queryString),b("bs_js_primitive").null_undefined_to_opt(a.renderLoadMore),b("bs_array").map(function(a){return[].concat(a)},a.threads),a.viewer,a.onAggregationClick,a.readReceipts,+a.showAggregation,[])});d=10;f.hasNewUnreadMessages=j;f.filterKeyEvent=k;f.filterPlatformSpecificModifierKey=l;f.platformSpecificModiferKeyLabel=a;f.searchKeyboardMainKey=m;f.searchKeyboardShortcut=n;f.setScrollable=o;f.getFocusedThreadId=p;f.handleFocusSearchBar=q;f.setSearchInputNode=r;f.handleScrollIntoView=s;f.handleFilteredRequestsClick=t;f.handleReturnToInboxClick=u;f.impressionOffset=d;f.logNodeImpressions=v;f.checkAndUpdateMessageRequestImpressions=w;f.renderAggregatedRequests=x;f.setter=y;f.renderThread=z;f.handleSelect=A;f.component=B;f.make=C;f.jsComponent=c}),null);
__d("P2PBannerStore",["invariant","EventEmitter","P2PActionConstants","P2PAPI","P2PDispatcher"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;void 0;var i={},j=!1,k=!1;c=babelHelpers.inherits(a,b("EventEmitter"));h=c&&c.prototype;function a(){h.constructor.call(this),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.type;a=a.data;switch(c){case b("P2PActionConstants").BANNER_STATES_UPDATED:this.handleBannerStatesUpdated(a);this.emit("change");break;case b("P2PActionConstants").BANNER_DISMISSED:this.handleBannerDismissed(a);this.emit("change");break;case b("P2PActionConstants").BANNER_COMPLETED:this.handleBannerCompleted(a);this.emit("change");break}};a.prototype.handleBannerStatesUpdated=function(a){j=!0,i=a};a.prototype.handleBannerDismissed=function(a){a=this.getBannerState(a);a.hasBeenDismissed=!0};a.prototype.shouldShowBanner=function(a){__p&&__p();void 0;if(!k){b("P2PAPI").getBannerStates();k=!0;return!1}if(!j)return!1;a=this.getBannerState(a);return a.eligible&&!a.hasBeenDismissed};a.prototype.handleBannerCompleted=function(a){a=this.getBannerState(a);a.eligible=!1};a.prototype.getBannerState=function(a){a=i[a];a||g(0);return a};e.exports=new a()}),null);
__d("P2PPaymentRequest",["P2PPaymentRequestStatus","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c=Math.round(Date.now()/1e3);g=babelHelpers.inherits(a,b("immutable").Record({amount:"",amountWithSymbol:"",creationTime:c,currency:"",currentStatus:b("P2PPaymentRequestStatus").INITED,groupThreadFBID:"",id:"",individualRequests:[],memoText:"",requestee:{},requester:{},statusDescription:"",transfer:{},transferID:"",updatedTime:c}));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("P2PPaymentRequestsStore",["P2PActionConstants","Arbiter","ChannelConstants","CurrentUser","EventEmitter","immutable","ImmutableObject","P2PActions","P2PAPI","P2PChannelType","P2PDispatcher","P2PPaymentRequest","P2PPaymentRequestStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").List,i=null,j=!1,k=null,l=!1,m=null,n=h(),o=!1,p=!1;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType(b("P2PChannelType").PAYMENT_REQUEST_STATUS_CHANGED),this.handleChannelPaymentRequestStatusChanged.bind(this)),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").PAYMENT_REQUEST_INITIATED:o=!0;m=null;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_INITIATED_COMPLETE:o=!1;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CREATED:this.handlePaymentRequestCreated(c);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CREATED_ERROR:m=new(b("ImmutableObject"))(c.error);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_UPDATED:this.handlePaymentRequestUpdated(c);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_DECLINE_INITIATED:l=!0;k=null;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_DECLINED:l=!1;k=null;this.handlePaymentRequestDeclined(c);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_DECLINE_ERROR:l=!1;k=new(b("ImmutableObject"))(c.error);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CANCEL_INITIATED:j=!0;i=null;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CANCELED:j=!1;i=null;this.handlePaymentRequestCanceled(c);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CANCEL_ERROR:j=!1;i=new(b("ImmutableObject"))(c.error);this.emit("change");break;case b("P2PActionConstants").DIALOG_CLOSED:k=null;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUESTS_FETCHED:this.handlePaymentRequestsFetched(c);this.emit("change");break}};a.prototype.handlePaymentRequestCreated=function(a){var c=n.toArray();c.push(new(b("P2PPaymentRequest"))(a));c.sort(function(a,b){return a.creationTime-b.creationTime});n=h(c)};a.prototype.handlePaymentRequestUpdated=function(a){a.groupRequestID&&this.updateIndividualRequest(a),delete a.groupRequestID,this.updateRequest(a.id,a)};a.prototype.handlePaymentRequestDeclined=function(a){this.updateRequest(a,{currentStatus:b("P2PPaymentRequestStatus").DECLINED})};a.prototype.handlePaymentRequestCanceled=function(a){this.updateRequest(a,{currentStatus:b("P2PPaymentRequestStatus").CANCELED})};a.prototype.handleChannelPaymentRequestStatusChanged=function(a,c){a=c.obj;b("P2PActions").paymentRequestUpdated({id:a.id,currentStatus:a.current_status,groupRequestID:a.group_request_id,transfer:a.transfer})};a.prototype.handlePaymentRequestsFetched=function(a){this.$P2PPaymentRequestsStore1(a)};a.prototype.$P2PPaymentRequestsStore1=function(a){a=a.sort(function(a,b){return a.creationTime-b.creationTime});a.forEach(function(a,c){this.getPaymentRequestByID(a.id)||(n=n.push(new(b("P2PPaymentRequest"))(a)))}.bind(this));a=n.toArray();a.sort(function(a,b){return a.creationTime-b.creationTime});n=h(a)};a.prototype.isPaymentRequestInitiated=function(){return o};a.prototype.isPaymentRequestDeclining=function(){return l};a.prototype.isPaymentRequestCanceling=function(){return j};a.prototype.getPaymentRequestByID=function(a){return n.find(function(b){return a===b.id})};a.prototype.getPaymentRequestError=function(){return m};a.prototype.getPaymentRequestDeclineError=function(){return k};a.prototype.getPaymentRequestCancelError=function(){return i};a.prototype.getPendingPaymentRequest=function(){p||(p=!0,b("P2PAPI").getPendingPaymentRequests());return n.filter(function(a){return a.requestee.id===b("CurrentUser").getID()&&a.currentStatus===b("P2PPaymentRequestStatus").INITED}).last()};a.prototype.updateRequest=function(a,b){n.forEach(function(c,d){a===c.id&&(n=n.set(d,c.merge(c,b)))})};a.prototype.updateIndividualRequest=function(a){var b=a.id,c=a.groupRequestID,d=n.findIndex(function(a){return c===a.id}),e=n.get(d),f=e.individualRequests.findIndex(function(a){return b===a.id}),g=e.individualRequests.slice(0),h=g[f];h=babelHelpers["extends"]({},h,a);g[f]=h;e=e.set("individualRequests",g);n=n.set(d,e)};a.prototype.getPaymentRequests=function(){return n};e.exports=new a()}),null);
__d("P2PJewelBanner.react",["cx","fbt","ix","Image.react","Layout.react","P2PButton.react","React","TooltipLink.react","URI","XUIGrayText.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("Layout.react").FillColumn,l=b("Layout.react").Column;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.handleCloseClick=function(a){a.stopPropagation(),this.props.onClose&&this.props.onClose()}.bind(this),this.handleClick=function(){this.execPrimaryClick()}.bind(this),this.handlePrimaryClick=function(a){a.stopPropagation(),this.execPrimaryClick()}.bind(this),this.execPrimaryClick=function(){this.props.primaryActionConfig.uri&&new(b("URI"))(this.props.primaryActionConfig.uri).go(),this.props.primaryActionConfig.onClick&&this.props.primaryActionConfig.onClick()}.bind(this),this.handleSecondaryActionClick=function(a){a.stopPropagation(),this.props.secondaryActionConfig&&this.props.secondaryActionConfig.onClick&&this.props.secondaryActionConfig.onClick()}.bind(this),this.renderCloseButton=function(){return b("React").createElement(b("TooltipLink.react"),{alignH:"center",className:"_47d8",href:"#",onClick:this.handleCloseClick,position:"above",tooltip:h._("Annuler")},b("React").createElement(b("Image.react"),{className:"_47dg",height:7,src:i("94375"),width:7}))}.bind(this),this.renderActions=function(){var a=this.props.primaryActionConfig,c=void 0,d=this.props.secondaryActionConfig;d&&(c=b("React").createElement(b("P2PButton.react"),{className:"_5d0t",href:"#",label:d.text,onClick:this.handleSecondaryActionClick,size:"large",target:"_blank",type:"primary"}));return b("React").createElement("div",null,c,b("React").createElement(b("P2PButton.react"),{className:"_5d0t",href:a.uri||"#",label:a.text,onClick:this.handlePrimaryClick,size:"large",target:"_blank",type:"primary",use:"confirm"}))}.bind(this),c}a.prototype.render=function(){var a=void 0;this.props.isDismissable&&(a=this.renderCloseButton());return b("React").createElement("div",{className:"_5d0n",onClick:this.handleClick,role:"presentation"},a,b("React").createElement(b("Layout.react"),null,b("React").createElement(l,{className:"_400i"},b("React").createElement("div",{className:"_400j"},b("React").createElement(b("Image.react"),{className:"_5d0q",height:50,src:i("94376"),width:50}))),b("React").createElement(k,{className:"_47di"},b("React").createElement("div",{className:"_400j"},b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark",weight:"bold"},this.props.titleText),b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"light"},this.props.bodyText))),b("React").createElement(l,{className:"_400k"},b("React").createElement("div",{className:"_400j"},this.renderActions()))))};a.propTypes={bodyText:c.node,isDismissable:c.bool,onClose:c.func,primaryActionConfig:c.shape({onClick:c.func,text:c.node.isRequired,uri:c.oneOfType([c.string,c.object])}).isRequired,secondaryActionConfig:c.shape({onClick:c.func.isRequired,text:c.node.isRequired}),titleText:c.node.isRequired};a.defaultProps={isDismissable:!1};e.exports=a}),null);
__d("P2PSimpleDialog.react",["fbt","FBPaymentsErrorNotice_DEPRECATED.react","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLoadingMask.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.handleToggle=function(a){a||this.props.onCancel()}.bind(this),b}a.prototype.render=function(){var a=void 0;this.props.error&&(a=b("React").createElement(b("FBPaymentsErrorNotice_DEPRECATED.react"),{error:this.props.error}));return b("React").createElement(b("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:!1,onToggle:this.handleToggle,repositionOnUpdate:!0,shown:!0,width:this.props.width},b("React").createElement(b("P2PDialogTitle.react"),null,this.props.title),b("React").createElement(b("P2PDialogBody.react"),null,a,this.props.bodyText,b("React").createElement(b("P2PLoadingMask.react"),{visible:this.props.loading})),b("React").createElement(b("P2PDialogFooter.react"),null,b("React").createElement(b("P2PButton.react"),{disabled:this.props.loading,label:this.props.cancelButtonText,onClick:this.props.onCancel,size:"medium"}),b("React").createElement(b("P2PButton.react"),{disabled:this.props.loading,label:this.props.confirmButtonText,onClick:this.props.onConfirm,size:"medium",use:"confirm"})))};a.propTypes={bodyText:c.string.isRequired,cancelButtonText:c.string,confirmButtonText:c.string,error:c.object,loading:c.bool,onCancel:c.func.isRequired,onConfirm:c.func.isRequired,title:c.string.isRequired,width:c.number};a.defaultProps={cancelButtonText:g._("Annuler"),confirmButtonText:g._("Confirmer"),width:300};e.exports=a}),null);
__d("P2PPaymentRequestCancelDialogContainer.react",["fbt","P2PActions","P2PAPI","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPaymentRequest","P2PPaymentRequestsStore","P2PSimpleDialog.react","React","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PPaymentRequestCancelDialogContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("P2PPaymentRequestsStore"))],propTypes:{paymentRequest:a.instanceOf(b("P2PPaymentRequest")).isRequired},statics:{calculateState:function(a){return{error:b("P2PPaymentRequestsStore").getPaymentRequestCancelError(),loading:b("P2PPaymentRequestsStore").isPaymentRequestCanceling()}}},log:function(a,c){b("P2PLogger").log(a,{www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_REQUEST,request_id:this.props.paymentRequest.id})},componentDidMount:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_CANCEL_REQUEST)},handleCancel:function(){b("P2PActions").hideDialog()},handleConfirm:function(){b("P2PAPI").cancelPaymentRequest({error:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_REQUEST_FAIL)}.bind(this),paymentRequestID:this.props.paymentRequest.id,success:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_REQUEST_SUCCESS)}.bind(this)}),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_CANCEL_REQUEST)},renderBodyText:function(){var a=this.props.paymentRequest.requestee.name;return g._("{Name of requestee} sera averti(e) que la demande a \u00e9t\u00e9 annul\u00e9e.",[g._param("Name of requestee",a)])},render:function(){return b("React").createElement(b("P2PSimpleDialog.react"),{bodyText:this.renderBodyText(),error:this.state.error,loading:this.state.loading,cancelButtonText:g._("Retour"),confirmButtonText:g._("Annuler"),onCancel:this.handleCancel,onConfirm:this.handleConfirm,title:g._("Annuler la demande\u00a0?")})}});e.exports=c}),null);
__d("P2PPaymentRequestDeclineDialogContainer.react",["fbt","P2PActions","P2PAPI","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPaymentRequest","P2PPaymentRequestsStore","P2PSimpleDialog.react","React","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PPaymentRequestDeclineDialogContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("P2PPaymentRequestsStore"))],propTypes:{paymentRequest:a.instanceOf(b("P2PPaymentRequest")).isRequired},statics:{calculateState:function(a){return{error:b("P2PPaymentRequestsStore").getPaymentRequestDeclineError(),loading:b("P2PPaymentRequestsStore").isPaymentRequestDeclining()}}},log:function(a,c){b("P2PLogger").log(a,{www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_REQUEST,request_id:this.props.paymentRequest.id})},componentDidMount:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_DECLINE_REQUEST)},handleCancel:function(){b("P2PActions").hideDialog()},handleConfirm:function(){b("P2PAPI").declinePaymentRequest({error:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_DECLINE_REQUEST_FAIL)}.bind(this),paymentRequestID:this.props.paymentRequest.id,success:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_DECLINE_REQUEST_SUCCESS)}.bind(this)}),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_DECLINE_REQUEST)},renderBodyText:function(){var a=this.props.paymentRequest.requester.name;return g._("{Name of requester} sera averti(e) du refus de la demande.",[g._param("Name of requester",a)])},render:function(){return b("React").createElement(b("P2PSimpleDialog.react"),{bodyText:this.renderBodyText(),error:this.state.error,loading:this.state.loading,cancelButtonText:g._("Retour"),confirmButtonText:g._("Refuser"),onCancel:this.handleCancel,onConfirm:this.handleConfirm,title:g._("Refuser la demande\u00a0?")})}});e.exports=c}),null);
__d("P2PPaymentRequestActionHelper",["fbt","MercuryIDs","P2PActions","P2PPaymentRequest","P2PPaymentRequestCancelDialogContainer.react","P2PPaymentRequestStatus","P2PPaymentRequestDeclineDialogContainer.react","P2PTransferParam","P2PTransferStatus"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=function(a){switch(a){case b("P2PTransferStatus").CANCELED_DECLINED:return b("P2PPaymentRequestStatus").DECLINED;case b("P2PTransferStatus").CANCELED_EXPIRED:return b("P2PPaymentRequestStatus").EXPIRED;case b("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case b("P2PTransferStatus").CANCELED_SAME_CARD:case b("P2PTransferStatus").CANCELED_SENDER_RISK:case b("P2PTransferStatus").CANCELED_SYSTEM_FAIL:return b("P2PPaymentRequestStatus").CANCELED;case b("P2PTransferStatus").COMPLETED:return b("P2PPaymentRequestStatus").TRANSFER_COMPLETED;case b("P2PTransferStatus").INTERMEDIATE_PROCESSING:case b("P2PTransferStatus").PENDING_PUSH_FAIL:case b("P2PTransferStatus").PENDING_SENDER_INITED:case b("P2PTransferStatus").PENDING_RECIPIENT_NUX:case b("P2PTransferStatus").PENDING_SENDER_VERIFICATION:case b("P2PTransferStatus").PENDING_SENDER_MANUAL_REVIEW:case b("P2PTransferStatus").PENDING_RECIPIENT_PROCESSING:case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:case b("P2PTransferStatus").PENDING_RECIPIENT_MANUAL_REVIEW:case b("P2PTransferStatus").PENDING_SENDER_VERIFICATION_PROCESSING:case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION_PROCESSING:default:return b("P2PPaymentRequestStatus").TRANSFER_INITED}};a={initDeclinePaymentRequestFlow:function(a){b("P2PActions").showDialog(b("P2PPaymentRequestDeclineDialogContainer.react"),{paymentRequest:a})},initPayForPaymentRequestFlow:function(a,c){var d=[],e=a.groupThreadFBID,f=void 0;e?(d.push(a.requester.id),f=b("MercuryIDs").getThreadIDFromThreadFBID(e)):f=b("MercuryIDs").getThreadIDFromUserID(a.requester.id);b("P2PActions").chatSendViewOpened({amount:a.amount,memoText:a.memoText,paymentRequestID:a.id,threadID:f,useModal:!0,referrer:c,groupSendRecipientUserIDs:d,groupThreadFBID:e})},initCancelPaymentRequestFlow:function(a){b("P2PActions").showDialog(b("P2PPaymentRequestCancelDialogContainer.react"),{paymentRequest:a})},getPaymentRequest:function(a){return new(b("P2PPaymentRequest"))({amount:a.amount,amountWithSymbol:a.amountWithSymbol,creationTime:a.creationTime,currency:a.currency,currentStatus:h(a[b("P2PTransferParam").STATUS]),groupThreadFBID:a.groupThreadFBID,individualRequests:[],memoText:a.memoText,requestee:a.sender,requester:a.receiver,statusDescription:a.statusDescription,trnasfer:a,transferID:a[b("P2PTransferParam").TRANSFER_ID],updatedTime:a.updatedTime})},getStatusText:function(a){__p&&__p();a=a.currentStatus;var c=g._("Annul\u00e9"),d=g._("Pay\u00e9"),e=g._("Refus\u00e9"),f=g._("En attente"),h=void 0;switch(a){case b("P2PPaymentRequestStatus").DECLINED:h=e;break;case b("P2PPaymentRequestStatus").CANCELED:case b("P2PPaymentRequestStatus").TRANSFER_FAILED:h=c;break;case b("P2PPaymentRequestStatus").TRANSFER_COMPLETED:h=d;break;default:h=f;break}return h}};e.exports=a}),null);
__d("P2PPendingPaymentRequestJewelBanner.react",["fbt","P2PJewelBanner.react","P2PPaymentRequest","P2PPaymentRequestActionHelper","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.handleDeclineClick=function(){b("P2PPaymentRequestActionHelper").initDeclinePaymentRequestFlow(this.props.paymentRequest)}.bind(this),this.handlePayClick=function(){b("P2PPaymentRequestActionHelper").initPayForPaymentRequestFlow(this.props.paymentRequest,"banner")}.bind(this),this.renderBodyText=function(){var a=this.props.paymentRequest;a=a.memoText;return!a?null:g._("Pour {What the user paid for}",[g._param("What the user paid for",a)])}.bind(this),c}a.prototype.render=function(){var a=this.props.paymentRequest;return b("React").createElement(b("P2PJewelBanner.react"),{bodyText:this.renderBodyText(),primaryActionConfig:{onClick:this.handlePayClick,text:g._("Payer")},secondaryActionConfig:{onClick:this.handleDeclineClick,text:g._("Refuser")},titleText:g._("{requester_name} a demand\u00e9 {amount}",[g._param("requester_name",a.requester.name),g._param("amount",a.amountWithSymbol)])})};a.propTypes={paymentRequest:c.instanceOf(b("P2PPaymentRequest")).isRequired};e.exports=a}),null);
__d("P2PPendingPushFailJewelBanner.react",["fbt","P2PJewelBanner.react","P2PLinkConstants","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.getActionText=function(){return g._("En savoir plus")},this.getBodyText=function(){var a=this.props.transfer;return g._("Impossible de d\u00e9poser le montant de {amount} {currency} de {sender_name} \u00e0 l\u2019aide de votre carte de d\u00e9bit.",[g._param("currency",a.currency),g._param("amount",a.amount),g._param("sender_name",a.sender.name)])}.bind(this),b}a.prototype.render=function(){return b("React").createElement(b("P2PJewelBanner.react"),{bodyText:this.getBodyText(),primaryActionConfig:{text:this.getActionText(),uri:b("P2PLinkConstants").helpTransferPushFailURI},titleText:g._("Mettez votre carte \u00e0 jour")})};a.propTypes={transfer:c.object.isRequired};e.exports=a}),null);
__d("P2PAcceptMoneyDialog.react",["cx","BootloadedComponent.react","Bootloader","MessengerEnvironment","P2PDialog.react","P2PLoadingMask.react","JSResource","React","Run"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=b("MessengerEnvironment").messengerui;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){return b("React").createElement(b("P2PDialog.react"),{className:"_309"+(i?" _5ktw":""),layerHideOnBlur:!1,repositionOnUpdate:!0,shown:!0,width:i?400:350},b("React").createElement("div",{className:"_3w2b"},b("React").createElement(b("P2PLoadingMask.react"),{visible:!0})))},c}a.preload=function(){b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["P2PAcceptMoneyDialogImpl.react"],function(){},"P2PAcceptMoneyDialog.react")})};a.prototype.render=function(){return b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadLoader:b("JSResource")("P2PAcceptMoneyDialogImpl.react").__setRef("P2PAcceptMoneyDialog.react"),bootloadPlaceholder:this.$1()},this.props))};a.propTypes={creditCards:c.array.isRequired,useRedesignForm:c.bool,onClose:c.func,transfer:c.object};e.exports=a}),null);
__d("MessengerPaymentProductType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({P2P:"p2p",PAGES_COMMERCE:"pages_commerce",NMOR_PAGES_COMMERCE:"nmor_pages_commerce",MESSENGER_COMMERCE:"messenger_commerce"})}),null);
__d("P2PCreditCardStore",["P2PActionConstants","Arbiter","CreditCardFormParam","ChannelConstants","EventEmitter","ImmutableObject","MessengerPaymentProductType","P2PActions","P2PAPI","P2PChannelType","P2PCreditCard","P2PDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=null,o=!1,p=!1;function q(a,c){a&&(m[a]=new(b("ImmutableObject"))(c))}function r(a,b){n=b,a&&(m[a]={error:b})}c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),j=!1,k=!1,h=[],l=!0,m={},i=b("P2PDispatcher").register(this.onEventDispatched.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType(b("P2PChannelType").CREDIT_CARD_CHANGED),this.handleChannelCreditCardChanged.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType(b("P2PChannelType").CREDIT_CARD_DELETED),this.handleChannelCreditCardDeleted.bind(this))}a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").CREDIT_CARD_SAVING:this.handleCreditCardSaving();this.emit("change");break;case b("P2PActionConstants").CREDIT_CARDS_UPDATED:this.handleCreditCardsUpdated(c);this.emit("change");break;case b("P2PActionConstants").CREDIT_CARDS_UPDATED_ERROR:this.handleCreditCardsUpdatedError();this.emit("change");break;case b("P2PActionConstants").CHANNEL_EVENTS_ALLOWED:this.handleChannelEventsAllowed();break;case b("P2PActionConstants").CHANNEL_EVENTS_IGNORED:this.handleChannelEventsIgnored();break;case b("P2PActionConstants").CREDIT_CARD_ADDED:this.handleCreditCardAdded(c);this.emit("change");break;case b("P2PActionConstants").CREDIT_CARD_ADDED_ERROR:this.handleCreditCardAddedError(c);this.emit("change");break;case b("P2PActionConstants").CREDIT_CARD_ADDED_ERROR_CLEARED:this.handleCreditCardAddedErrorCleared();this.emit("change");break;case b("P2PActionConstants").CREDIT_CARD_DELETED:this.handleCreditCardDeleted(c);this.emit("change");break;case b("P2PActionConstants").CREDIT_CARD_DELETED_ERROR:this.handleCreditCardDeletedError(c);this.emit("change");break;case b("P2PActionConstants").CREDIT_CARD_UPDATED:this.handleCreditCardUpdated(c);this.emit("change");break;case b("P2PActionConstants").CREDIT_CARD_UPDATED_ERROR:this.handleCreditCardUpdatedError(c);this.emit("change");break;case b("P2PActionConstants").PRESET_CREDIT_CARD_UPDATED:this.handlePresetCreditCardUpdated(c);this.emit("change");break;case b("P2PActionConstants").PRESET_CREDIT_CARD_UPDATED_ERROR:this.handlePresetCreditCardUpdatedError(c);this.emit("change");break;case b("P2PActionConstants").CREDIT_CARD_VERIFIED:this.handleCreditCardVerified(c);this.emit("change");break;case b("P2PActionConstants").CREDIT_CARD_VERIFIED_ERROR:this.handleCreditCardVerifiedError(c);this.emit("change");break;case b("P2PActionConstants").BIN_NUMBER_VALIDATED:this.handleBINNumberValidated(c);this.emit("change");break;case b("P2PActionConstants").BIN_NUMBER_VALIDATED_ERROR:this.handleBINNumberValidatedError(c);this.emit("change");break}};a.prototype.handleCreditCardSaving=function(){o=!0,n=null};a.prototype.getAsyncRequestState=function(){return m};a.prototype.isCreditCardsFetchComplete=function(){return j};a.prototype.handleCreditCardsUpdated=function(a){j=!0,p=!1,h=a.map(function(a){return new(b("P2PCreditCard"))(a)})};a.prototype.handleCreditCardsUpdatedError=function(){j=!0,p=!0};a.prototype.handleCreditCardAdded=function(a){o=!1,q(a.requestID,a),this.getCreditCardByCredentialID(a[b("CreditCardFormParam").CREDENTIAL_ID])||h.push(new(b("P2PCreditCard"))(a))};a.prototype.handleChannelEventsIgnored=function(){l=!1};a.prototype.handleChannelEventsAllowed=function(){l=!0};a.prototype.handleChannelCreditCardChanged=function(a,c){l&&!this.getCreditCardByCredentialID(c[b("CreditCardFormParam").CREDENTIAL_ID])&&b("P2PAPI").getAllCreditCards()};a.prototype.handleCreditCardAddedError=function(a){o=!1,r(a.requestID,a.errors)};a.prototype.handleCreditCardAddedErrorCleared=function(){n=null};a.prototype.handleCreditCardDeleted=function(a){var c=a[b("CreditCardFormParam").CREDENTIAL_ID];q(a.requestID,a);h=h.filter(function(a){return a.getCredentialId()!==c})};a.prototype.handleChannelCreditCardDeleted=function(a,c){c=c.obj,b("P2PActions").deleteCreditCard(c)};a.prototype.handleCreditCardDeletedError=function(a){r(a.requestID,a.error)};a.prototype.handleCreditCardUpdated=function(a){q(a.requestID,a);var c=this.getCreditCardByCredentialID(a[b("CreditCardFormParam").CREDENTIAL_ID]);c&&(c.setExp(a[b("CreditCardFormParam").CARD_EXPIRATION]),c.setZipCode(a[b("CreditCardFormParam").ZIP]))};a.prototype.handleCreditCardUpdatedError=function(a){r(a.requestID,a.errors)};a.prototype.handlePresetCreditCardUpdated=function(a){var c=a[b("CreditCardFormParam").CREDENTIAL_ID];q(a.requestID,a);a=h.filter(function(a){return a.getIsPreset()})[0];a&&a.setIsPreset(!1);a=this.getCreditCardByCredentialID(c);a&&a.setIsPreset(!0)};a.prototype.handlePresetCreditCardUpdatedError=function(a){r(a.requestID,a.error)};a.prototype.handleCreditCardVerified=function(a){q(a.requestID,a);a=this.getCreditCardByCredentialID(a[b("CreditCardFormParam").CREDENTIAL_ID]);a&&a.setIsVerified(!0)};a.prototype.handleCreditCardVerifiedError=function(a){r(a.requestID,a.error)};a.prototype.handleBINNumberValidated=function(a){q(a.requestID,a)};a.prototype.handleBINNumberValidatedError=function(a){r(a.requestID,a.error)};a.prototype.getAll=function(a){a=a===undefined?b("MessengerPaymentProductType").P2P:a;k||(k=!0,b("P2PAPI").getAllCreditCards());return h.filter(function(c){return a===b("MessengerPaymentProductType").P2P?c.getIsPersonalTransferEligible():c})};a.prototype.getCreditCardByCredentialID=function(a){return h.filter(function(b){return b.getCredentialId()===a})[0]};a.prototype.getDispatchToken=function(){return i};a.prototype.getSaveErrors=function(){return n};a.prototype.isSaving=function(){return o};a.prototype.failedCreditCardFetch=function(){return p};e.exports=new a()}),null);
__d("P2PTimeBasedAcceptMessage.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.transfer,c=a.creationTime*1e3,d=1e3*60*60*24,e=Date.now();c=(e-c)/d;e=a.expirationTimestamp*1e3-e;e=Math.round(Math.max(e/d,1));d=void 0;c<=2?d=g._("Ajoutez une carte de d\u00e9bit pour que l\u2019argent aille directement \u00e0 votre banque."):c<=4?d=g._("Cet argent sera renvoy\u00e9 dans {days left} jours. Ajoutez une carte de d\u00e9bit pour l\u2019accepter.",[g._param("days left",e)]):c<=5?d=g._({"day":"Vous avez encore {days left} jour pour ajouter une carte de d\u00e9bit avant que l\u2019argent ne soit renvoy\u00e9 \u00e0 {sender_name}.","days":"Vous avez {days left} jours pour ajouter une carte de d\u00e9bit avant que l\u2019argent ne soit renvoy\u00e9 \u00e0 {sender_name}."},[g._param("days left",e),g._enum(e===1?"day":"days",{day:"day",days:"days"}),g._param("sender_name",a.sender.name)]):d=g._("Vous avez 24 heures pour ajouter une carte de d\u00e9bit avant que l\u2019argent ne soit renvoy\u00e9 \u00e0 {sender_name}.",[g._param("sender_name",a.sender.name)]);return b("React").createElement("div",null,d)};function a(){h.apply(this,arguments)}a.propTypes={transfer:c.object.isRequired};e.exports=a}),null);
__d("P2PPendingRecipientNUXJewelBanner.react",["fbt","P2PAcceptMoneyDialog.react","P2PActions","P2PCreditCardStore","P2PJewelBanner.react","P2PTimeBasedAcceptMessage.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PPendingRecipientNUXJewelBanner",propTypes:{transfer:a.object.isRequired},getInitialState:function(){return{creditCards:b("P2PCreditCardStore").getAll()}},creditCardStoreSub:null,componentDidMount:function(){this.creditCardStoreSub=b("P2PCreditCardStore").addListener("change",this.onCreditCardStoreChange)},componentWillUnmount:function(){this.creditCardStoreSub&&(this.creditCardStoreSub.remove(),this.creditCardStoreSub=null)},onCreditCardStoreChange:function(){var a={creditCards:b("P2PCreditCardStore").getAll()};this.isMounted()&&this.setState(a)},handleClick:function(){this.showAcceptMoneyDialog()},showAcceptMoneyDialog:function(){b("P2PActions").showDialog(b("P2PAcceptMoneyDialog.react"),{creditCards:this.state.creditCards,onClose:b("P2PActions").hideDialog,transfer:this.props.transfer})},renderTimeBasedMessage:function(){return b("React").createElement(b("P2PTimeBasedAcceptMessage.react"),{transfer:this.props.transfer})},render:function(){var a=this.props.transfer;return!b("P2PCreditCardStore").isCreditCardsFetchComplete()?null:b("React").createElement(b("P2PJewelBanner.react"),{bodyText:this.renderTimeBasedMessage(),primaryActionConfig:{onClick:this.handleClick,text:g._("Ajouter une carte")},titleText:g._("Accepter {amount} {currency} de {sender_name}.",[g._param("currency",a.currency),g._param("amount",a.amount),g._param("sender_name",a.sender.name)])})}});e.exports=c}),null);
__d("P2PVerificationFlowHelper",["AsyncDialog","AsyncRequest","P2PAPI","P2PTransferParam","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=null,i=null;a={startVerificationFlow:function(a,c,d){g=a,h=c,i=d||b("emptyFunction"),b("AsyncDialog").send(new(b("AsyncRequest"))("/p2p/verify/dialog/?id="+a))},setupFlowExitHandler:function(a,c,d,e){__p&&__p();var f=function(b){i(b),g=null,h=null,i=null,a.destroy(),c.destroy()};if(d)a.subscribe("hide",function(){f(e)});else{var j=!1,k=!1;a.subscribe("confirm",function(){j=!0});a.subscribe("hide",function(){j?(a.destroy(),c.destroy()):h?c.show():f(!1)});c.subscribe("confirm",function(){k=!0;var a={};a[b("P2PTransferParam").TRANSFER_ID]=g;b("P2PAPI").cancelTransaction({formData:a});f(!1)});c.subscribe("hide",function(){k||a.show()})}}};e.exports=a}),null);
__d("P2PPendingRecipientVerificationJewelBanner.react",["fbt","P2PJewelBanner.react","P2PTransferParam","P2PVerificationFlowHelper","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.handleClick=function(){b("P2PVerificationFlowHelper").startVerificationFlow(this.props.transfer[b("P2PTransferParam").TRANSFER_ID],!1)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("P2PJewelBanner.react"),{bodyText:g._("Pour accepter l\u2019argent que {sender_name} vous a envoy\u00e9, veuillez confirmer vos informations.",[g._param("sender_name",this.props.transfer.sender.name)]),primaryActionConfig:{onClick:this.handleClick,text:g._("Confirmer les informations")},titleText:g._("Veuillez confirmer vos infos")})};a.propTypes={transfer:c.object.isRequired};e.exports=a}),null);
__d("P2PJewelBannerContainer.react",["cx","CurrentUser","P2PBannerStore","P2PPaymentRequestsStore","P2PPendingPaymentRequestJewelBanner.react","P2PPendingPushFailJewelBanner.react","P2PPendingRecipientNUXJewelBanner.react","P2PPendingRecipientVerificationJewelBanner.react","P2PTransferParam","P2PTransferStatus","P2PTransferStore","PureStoreBasedStateMixin","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").createClass({displayName:"P2PJewelBannerContainer",mixins:[b("PureStoreBasedStateMixin")(b("P2PBannerStore"),b("P2PPaymentRequestsStore"),b("P2PTransferStore"))],statics:{calculateState:function(){var a=b("P2PTransferStore").getNUXTransfer(),c=b("P2PPaymentRequestsStore").getPendingPaymentRequest(),d=b("gkx")("AT7KSMdBbHFSBSJn1JWZUBa76yZr8D9pobYWWvzliNi0RZQsDI29awNxAAPfpbtiIQHouKzRc3uiaxxHhFXpGQGFiE6SMOOJwNKziF0lagOtKg");return{paymentRequest:c,paymentRequestBannerShown:!!c,transfer:a,transferBannerShown:d&&a&&a.receiver.id===b("CurrentUser").getID()}}},renderTransferBanner:function(){var a=this.state.transfer,c=a[b("P2PTransferParam").STATUS];switch(c){case b("P2PTransferStatus").PENDING_RECIPIENT_NUX:return b("React").createElement(b("P2PPendingRecipientNUXJewelBanner.react"),{transfer:a});case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:return b("React").createElement(b("P2PPendingRecipientVerificationJewelBanner.react"),{transfer:a});case b("P2PTransferStatus").PENDING_PUSH_FAIL:return b("React").createElement(b("P2PPendingPushFailJewelBanner.react"),{transfer:a})}},renderPaymentRequestBanner:function(){return b("React").createElement(b("P2PPendingPaymentRequestJewelBanner.react"),{paymentRequest:this.state.paymentRequest})},render:function(){var a=void 0;this.state.transferBannerShown?a=this.renderTransferBanner():this.state.paymentRequestBannerShown&&(a=this.renderPaymentRequestBanner());return b("React").createElement("div",{className:"_1xfk"},a)}});e.exports=a}),null);
__d("MercuryThreadlistContainer.react",["Bootloader","immutable","MercuryAPIArgsSource","MercuryConfig","MercuryFilters","MercuryIDs","MercuryThreadlistConstants","MessagingTag","MessengerURIStore","MessengerMessageRequestsTypedLogger","P2PJewelBannerContainer.react","QE2Logger","React","SubscriptionsHandler","emptyFunction","gkx","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h="search";d=3;var i=5e3,j=b("MercuryThreadlistConstants").JEWEL_THREAD_COUNT+d;f=babelHelpers.inherits(a,b("React").Component);g=f&&f.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={aggregatedThreads:null,showAggregation:!1,isLoading:!0,isSearching:!1,unreadMessageRequestThreads:[],threads:b("immutable").Map()},this.threadListReqsInFlight=0,this.$13=function(){var a=function(){this.setState({suspended:!1}),this.handleThreadListUpdate()}.bind(this);b("gkx")("AT5Q5FCBY57gPdOe4Xo96r5zTgZZh87GRY--ncB3hM3Ra_B90Pc8SDhcEc8FXtQOATf6BwBTiNdA_hZCDlaZ5sW0DhwFxWZa8AHAo9f71cU_8w")&&(this.setState({suspended:!0}),setTimeout(a,i))}.bind(this),this.$14=function(){this.props.folder!==b("MessagingTag").MESSAGE_REQUEST_AGGREGATION_UNIT&&!this.state.isSearching&&!this.state.isLoading&&!this.$1.hasLoadedThreadlist(this.props.folder,this.props.filter)&&this.$7(this.props.folder,this.props.filter,this.$8(this.props.folder)+b("MercuryThreadlistConstants").JEWEL_MORE_COUNT+1)}.bind(this),this.$21=function(){if(!this.$1||!this.$2)return;var a=this.$1.getAvailableThreadlistNow(b("MessagingTag").PENDING,b("MercuryFilters").UNREAD);this.$2.getMultiThreadMeta(a,function(b){this.setState({unreadMessageRequestThreads:a.map(function(a){return b[a]})})}.bind(this))}.bind(this),this.$16=function(a,c){this.setState({isLoading:c,searchThreads:[]},function(){return this.$12(h,b("MercuryFilters").ALL,a)}.bind(this))}.bind(this),this.$15=function(a){this.setState({isSearching:!!a})}.bind(this),this.$17=function(a,c){this.setState({showAggregation:!0,aggregatedThreads:c});var d=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),e=[];c=c.map(function(a){e.push(b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.thread_id,b("MercuryIDs").tokenize(d).value));return a.thread_id});this.props.onAggregationClick&&this.props.onAggregationClick(a,c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("aggregation_entrypoint_tap").setEntryPoint("inbox_aggregation").setSurface("inbox").setFolderType("pending").setThreadKeyList(e.filter(function(a){return a}).join(", ")).log()}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){this.setState({showAggregation:b("MessengerURIStore").getState()&&b("MessengerURIStore").getState().threadIDs!==null})};a.prototype.componentDidMount=function(){__p&&__p();b("Bootloader").loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(a,c,d){__p&&__p();this.props.resetAggregatedThreads&&this.setState({showAggregation:!1,aggregatedThreads:null}),this.$1=a.getForFBID(this.props.viewer),this.$2=d.getForFBID(this.props.viewer),this.$3=function(a){__p&&__p();var c=this.$1.getAvailableThreadlistNow(b("MessagingTag").INBOX,a);if(c.length===0)return c;var d=this.$2.getThreadMetaNow(c[c.length-1]);if(!d)return c;d=d.timestamp;d=this.$1.getThreadlistUntilTimestamp(d,b("MessagingTag").PENDING,a);d.sort(function(a,b){a=this.$2.getThreadMetaNow(a);b=this.$2.getThreadMetaNow(b);return(b&&b.timestamp)-(a&&a.timestamp)}.bind(this));a=b("MercuryConfig").MCMA?this.$4(d):d;return c.concat(a).sort(function(a,b){a=typeof a==="string"?this.$2.getThreadMetaNow(a):this.$2.getThreadMetaNow(a[0]);b=typeof b==="string"?this.$2.getThreadMetaNow(b):this.$2.getThreadMetaNow(b[0]);return(b&&b.timestamp)-(a&&a.timestamp)}.bind(this))}.bind(this),this.$5=c.getForFBID(this.props.viewer),this.$6=new(b("SubscriptionsHandler"))(),this.$6.addSubscriptions(this.$5.subscribe("threadlist-updated",function(a,b){this.state.suspended||this.handleThreadListUpdate()}.bind(this))),b("QE2Logger").logExposureForUser("www_messenger_connections_inbox"),b("MercuryConfig").MessengerInboxRequests&&this.$7(b("MessagingTag").PENDING,this.props.filter,this.$8(b("MessagingTag").PENDING)+b("MercuryThreadlistConstants").CONNECTION_REQUEST),this.$9(this.props.folder,this.props.filter)}.bind(this),"MercuryThreadlistContainer.react")};a.prototype.UNSAFE_componentWillReceiveProps=function(a){(a.resetAggregatedThreads!==this.props.resetAggregatedThreads||a.folder!==this.props.folder||a.filter!==this.props.filter||a.folder===b("MessagingTag").INBOX&&this.state.showAggregation==!0)&&this.$9(a.folder,a.filter)};a.prototype.componentDidUpdate=function(){this.props.resetAggregatedThreads&&this.state.showAggregation&&this.setState({showAggregation:!1,aggregatedThreads:null})};a.prototype.componentWillUnmount=function(){this.$10(),this.$11(),this.$6&&this.$6.release()};a.prototype.handleThreadListUpdate=function(){this.$12(this.props.folder,this.props.filter),b("QE2Logger").logExposureForUser("www_messenger_connections_inbox"),b("MercuryConfig").MessengerInboxRequests&&(this.props.folder===b("MessagingTag").INBOX&&this.$12(b("MessagingTag").PENDING,this.props.filter),this.props.folder===b("MessagingTag").PENDING&&this.$12(b("MessagingTag").INBOX,this.props.filter))};a.prototype.render=function(){var a=this.props,c=a.ChildClass,d=a.folder,e=a.filter;a=babelHelpers.objectWithoutProperties(a,["ChildClass","folder","filter"]);var f=this.state.isSearching?this.state.threads.get(h)||[]:this.state.threads.get(d)||[];return b("React").createElement(c,babelHelpers["extends"]({},a,{filter:e,folder:d,isLoaded:d===b("MessagingTag").MESSAGE_REQUEST_AGGREGATION_UNIT||!!this.$1&&this.$1.hasLoadedThreadlist(d,e),isLoading:this.state.isLoading,isSearching:this.state.isSearching,newMessageRequestThreads:this.state.unreadMessageRequestThreads,onRenderThreads:this.props.onRenderThreads,onMessageRequestsClick:this.props.onMessageRequestsClick,pendingFolderUnseenCount:this.props.pendingFolderUnseenCount,showAggregation:this.state.showAggregation,threads:this.state.aggregatedThreads||f,onLoadMoreRequest:this.$14,onQuery:this.$15,onSearchResults:this.$16,onAggregationClick:this.$17,p2pJewelBannerContainer:this.$18(),maxInitialThreadCount:j,handleChatTabOpen:this.props.source==="jewel"&&b("gkx")("AT5Q5FCBY57gPdOe4Xo96r5zTgZZh87GRY--ncB3hM3Ra_B90Pc8SDhcEc8FXtQOATf6BwBTiNdA_hZCDlaZ5sW0DhwFxWZa8AHAo9f71cU_8w")?this.$13:b("emptyFunction")}))};a.prototype.$4=function(a){__p&&__p();var c=b("MercuryConfig").Unit||3,d=(b("MercuryConfig").Duration||3)*1e3*60*60*24,e=a.map(function(a){return this.$2.getThreadMetaNow(a).timestamp}.bind(this)),f=[];for(var g=0;g<e.length;g++){var h=e[g],i=e[g+c-1];if(i&&h-i<d){i=[a[g]];for(var j=g+1;j<e.length;j++){var k=e[j];if(k&&h-k<d)i.push(a[j]),g++;else break}f.push(i)}else f.push(a[g])}return f};a.prototype.$18=function(){return b("gkx")("AT7KSMdBbHFSBSJn1JWZUBa76yZr8D9pobYWWvzliNi0RZQsDI29awNxAAPfpbtiIQHouKzRc3uiaxxHhFXpGQGFiE6SMOOJwNKziF0lagOtKg")?b("React").createElement(b("P2PJewelBannerContainer.react"),null):null};a.prototype.$9=function(a,c){if(a===b("MessagingTag").MESSAGE_REQUEST_AGGREGATION_UNIT)return;var d=b("MessengerURIStore").getState()&&b("MessengerURIStore").getState().threadIDs||this.props.threadIDs;d||this.setState({showAggregation:!1,aggregatedThreads:null});a===b("MessagingTag").INBOX&&(b("gkx")("AT6h5--3KUdxbat1rL4n2mVcPcg9eZ8bwokXjpPZS-_sSShoFlPyHXdioNqIwODAz2vH7270MK0r4x8XFkaYt6-h")||this.props.source!==b("MercuryAPIArgsSource").JEWEL)&&(b("QE2Logger").logExposureForUser("www_messenger_connections_inbox"),b("MercuryConfig").MessengerInboxRequests||this.$19());!this.$20(a,c)?this.$7(a,c,j):this.state.isLoading?this.setState({isLoading:!1},function(){this.$12(a,c)}.bind(this)):this.$12(a,c)};a.prototype.$19=function(){this.$1.getFilteredThreadlist(b("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,b("MercuryThreadlistConstants").MAX_UNREAD_COUNT,b("MessagingTag").PENDING,b("MercuryFilters").UNREAD,this.$21,!0,this.props.source)};a.prototype.$7=function(a,c,d){if(!this.$1)return;this.$11();this.threadListReqsInFlight++;var e=function(){var e=this.$1.getFilteredThreadlist(b("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,d,a,c||b("MercuryFilters").ALL,function(a){this.threadListReqsInFlight--,this.threadListReqsInFlight===0&&this.setState({isLoading:!1})}.bind(this),!0,this.props.source);this.$22={subscriberID:e,folder:a,filter:c}}.bind(this);this.state.isLoading?b("setImmediate")(e):this.setState({isLoading:!0},e)};a.prototype.$12=function(a,c,d){if(!this.$1||!this.$2)return;this.$10();var e=void 0;a===b("MessagingTag").INBOX&&b("QE2Logger").logExposureForUser("www_messenger_connections_inbox");b("MercuryConfig").MessengerInboxRequests&&a===b("MessagingTag").INBOX?e=this.$3(c):a===b("MessagingTag").MESSAGE_REQUEST_AGGREGATION_UNIT||this.state.showAggregation?(e=b("MessengerURIStore").getState()&&b("MessengerURIStore").getState().threadIDs||this.props.threadIDs,this.$23(e)):e=d||this.$1.getAvailableThreadlistNow(a,c);d=[].concat.apply([],e);this.$24=this.$2.getMultiThreadMeta(d,function(b){this.setState({threads:this.state.threads.set(a,this.$25(e,b))})}.bind(this))};a.prototype.$23=function(a){var c=this.$1.getAvailableThreadlistNow(b("MessagingTag").PENDING,this.props.filter);if(a&&a.length>0){a=a.filter(function(a){return c.indexOf(a)!==-1});this.$2.getMultiThreadMeta(a,function(a){Array.isArray(a)||(a=Object.values(a)),this.setState({aggregatedThreads:a})}.bind(this))}else this.setState({aggregatedThreads:null})};a.prototype.$25=function(a,b){return a.map(function(a){if(Array.isArray(a))return a.map(function(a){return b[a]});else return b[a]})};a.prototype.$20=function(a,b){var c=j;return!!(this.$1&&(this.$1.getThreadCount(a,b)>=c||this.$1.hasLoadedThreadlist(a,b)))};a.prototype.$8=function(a){a=this.state.threads.get(a);return a?a.length:0};a.prototype.$10=function(){this.$2&&this.$24&&this.$2.unsubscribe(this.$24)};a.prototype.$11=function(){this.$1&&this.$22&&this.$1.unsubscribe(this.$22.subscriberID,this.$22.folder,this.$22.filter)};a.propTypes={blockedIds:c.instanceOf(Set),ChildClass:c.func.isRequired,filter:c.string.isRequired,folder:c.string.isRequired,onMessageRequestsClick:c.func,onRenderThreads:c.func,onAggregationClick:c.func,pendingFolderUnseenCount:c.number,showCount:c.bool,showPresence:c.bool,source:c.string,threadCount:c.number,threadIDs:c.array,viewer:c.string.isRequired,onRenderBackArrow:c.func,resetAggregatedThreads:c.bool};a.defaultProps={source:b("MercuryAPIArgsSource").JEWEL};e.exports=a}),null);
__d("MercuryMessageList",["immutable","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=b("immutable").List(a||[]),this.$2()}a.prototype.append=function(a){var b;this.$1=(b=this.$1).push.apply(b,a);this.$2()};a.prototype.prepend=function(a){var b;this.$1=(b=this.$1).unshift.apply(b,a);this.$2()};a.prototype.update=function(a){var b=a.filter(function(a){return this.contains(a)}.bind(this));if(b.length===0)return;this.$1=this.$1.withMutations(function(a){b.forEach(function(b){var c=this.$3.get(b.message_id);c!==undefined&&a.set(c,b)}.bind(this))}.bind(this))};a.prototype.reorder=function(a){this.$1=b("immutable").List(a.filter(Boolean)),this.$2()};a.prototype.at=function(a){return this.$1.get(a)};a.prototype.contains=function(a){return this.$3.has(a.message_id)};a.prototype.toArray=function(){return this.$1.toArray()};a.prototype.toMap=function(){return new Map(b("immutable").Seq(this.$1).map(function(a){return[a.message_id,a]}))};a.prototype.$2=function(){this.$3=new Map(b("immutable").Seq(this.$1).map(function(a,b){return[a.message_id,b]}))};e.exports=a}),null);
__d("MercuryMessageStore",["MercuryAPIArgsSource","LogHistory","MercuryMessages","MercuryViewer","MercuryMessageList","SubscriptionsHandler","MercuryThreadInformer","MercuryThreadlistConstants","MercuryThreads","mixInEventEmitter","setImmediate","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreads").get(),h=b("LogHistory").getInstance("mercury_message_store");function i(a,c,d){this.$9=a,this.$6=new(b("MercuryMessageList"))(),this.$4=d?b("MercuryMessages").getForFBID(d):b("MercuryMessages").get(),this.$2=1,this.$1=null,this.$5=0,this.$3=c||b("MercuryThreadlistConstants").RECENT_MESSAGES_LIMIT,this.$10=d?b("MercuryThreadInformer").getForFBID(d):b("MercuryThreadInformer").get(),this.$8=new(b("SubscriptionsHandler"))(),this.$8.addSubscriptions(this.$10.subscribe("messages-received",function(a,b){return this.$11(b)}.bind(this)),this.$10.subscribe("messages-updated",function(a,b){return b[this.$9]&&this.$12(b[this.$9])}.bind(this)),this.$10.subscribe("messages-reordered",function(a,b){return b[this.$9]&&this.$13()}.bind(this)),this.$10.subscribe("thread-invalidated",function(a,b){return b[this.$9]&&this.$14()}.bind(this))),h.debug("constructed",JSON.stringify({threadID:this.$9})),this.$15()}i.prototype.setNewThreadID=function(a){this.$7=a};i.prototype.destroy=function(){this.$8&&this.$8.release(),h.debug("destroyed",JSON.stringify({threadID:this.$9}))};i.prototype.subscribe=function(a){return this.addRetroactiveListener("updated",a)};i.prototype.fetchMoreMessages=function(){if(this.hasFetchedAll())return!1;this.$15();return!0};i.prototype.hasFetchedAll=function(){return this.$4.hasLoadedExactlyNMessages(this.$9,this.$5)&&this.$4.hasLoadedAllMessages(this.$9)?!0:g.isNewEmptyLocalThread(this.$9)};i.prototype.$15=function(){var a=this.$5+this.$3*this.$2;this.$4.getThreadMessagesRange(this.$9,0,a,this.$16.bind(this),null,b("MercuryAPIArgsSource").MERCURY);this.$2<10&&(this.$2+=1);this.$4.hasLoadedNMessages(this.$9,a)&&b("setImmediate")(function(){this.$13()}.bind(this))};i.prototype.$16=function(a){a&&a.length?(this.$1=a[0].timestamp,this.$5=a.length):a&&!a.length&&!this.$5&&this.$17(i.THREAD_IS_EMPTY)};i.prototype.$11=function(a){__p&&__p();var c=[],d=a[this.$9];d&&d.length&&(c=c.concat(d.filter(function(a){return!!a})));if(this.$7){d=a[this.$7];d&&d.length&&(c=c.concat(d.filter(function(a){return!!a})),this.$7=null)}if(c.length){this.$6.append(c);this.$5+=c.length;a=c.every(function(a){return a.author!=b("MercuryViewer").getID()});this.$17(i.MESSAGES_RECEIVED,{allFromOthers:a})}};i.prototype.$12=function(a){this.$6.update(this.$4.getMessagesFromIDs(Object.keys(a))),this.$18(),this.$17(i.MESSAGES_CHANGED)};i.prototype.$13=function(){if(!this.$1)return;this.$6.reorder(this.$4.getThreadMessagesSinceTimestamp(this.$9,this.$1));this.$18();this.$17(i.MESSAGES_REORDERED)};i.prototype.$14=function(){this.$6=new(b("MercuryMessageList"))(),this.$2=1,this.$1=null,this.$5=0,this.$15()};i.prototype.$17=function(a,b){var c=this.$6.toArray();this.releaseHeldEventType("updated");this.emitAndHold("updated",babelHelpers["extends"]({messages:c,eventType:a},b))};i.prototype.$18=function(){var a=this.$6.at(0);a&&(this.$1=a.timestamp)};Object.assign(i,{MESSAGES_FETCHED:"fetched",MESSAGES_CHANGED:"changed",MESSAGES_RECEIVED:"received",MESSAGES_REORDERED:"reordered",THREAD_IS_EMPTY:"thread-is-empty"});b("mixInEventEmitter")(i,{updated:!0});e.exports=i}),null);
__d("PageMessageEnumTag",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FLAG:"flag",IMPORTANT:"important",LOW_VALUE:"low_value",SPAM_SPOOFING:"spam_spoofing",JOB_APPLICATION:"job_application",CONFIRMED_APPOINTMENT:"confirmed_appointment",PENDING_APPOINTMENT:"pending_appointment",REQUESTED_APPOINTMENT:"requested_appointment",MESSENGER_ADS:"messenger_ads"})}),null);
__d("MercuryOrderedThreadlist",["invariant","LogHistory","MercuryActionType","MercuryAPIArgsSource","MercuryDispatcher","MercuryFilters","MercuryFolders","MercuryPayloadSource","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MessagingTag","PageMessageEnumTag","RangedCallbackManager","MercuryThreadInformer","MercuryThreads"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("ordered_threadlist_model"),i=b("MercuryFilters").getSupportedFilters().concat([b("MercuryFilters").ALL,b("MessagingTag").GROUPS]),j=b("MercuryFolders").getSupportedFolders().concat([b("MessagingTag").SPAM,b("MessagingTag").PAGE_BACKGROUND]);a.getForFBID=function(a){return l.getForFBID(a)};a.get=function(){return l.get()};function a(a){__p&&__p();this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercuryThreadInformer").getForFBID(this.$1),this.$4=b("MercuryThreads").getForFBID(this.$1),this.$5=b("MercuryDispatcher").getForFBID(this.$1),this.$6={},this.$7(),this.$5.subscribe("update-threadlist",function(a,b){__p&&__p();if(!k(b))return;a=b.ordered_threadlists;if(a&&a.length)this.$8(a);else{a=(b.actions||[]).filter(function(a){return a.thread_id});this.$9(b.threads||[]);this.$10(a)}this.$3.updatedThreadlist()}.bind(this)),this.$5.subscribe("invalidate-global-state",function(){return this.$11()}.bind(this))}a.prototype.getThreadlistOrderMap=function(a,c){this.$6[a][c]||(i=i.concat([c]),j.forEach(function(a){this.$6[a][c]=new(b("RangedCallbackManager"))(function(a){a=this.$4.getThreadMetaNow(a);return a&&a.timestamp}.bind(this),function(a,b){return b-a},this.$2.canLinkExternally.bind(this.$2))}.bind(this)));return this.$6[a][c]};a.prototype.getThreadlist=function(a,c,d,e,f,g){return this.getFilteredThreadlist(a,c,d,b("MercuryFilters").ALL,e,f,g)};a.prototype.getFilteredThreadlist=function(a,c,d,e,f,g,i){__p&&__p();var j=this.getThreadlistOrderMap(d,e);f=j.executeOrEnqueue(a,c,f,g);var k=j.getUnavailableResources(f);g=j.getError(a,c,g);if(k.length||g){if(j.getCurrentArraySize()<a){g={start:a,limit:c,filter:e,resources_size:j.getCurrentArraySize()};h.warn("range_with_gap",JSON.stringify(g))}j.setError(!1);this.getServerRequests().fetchThreadlistInfo(j.getCurrentArraySize(),k.length,d,e==b("MercuryFilters").ALL?null:e,i,this.$12(j.getAllResources()))}return f};a.prototype.getServerRequests=function(){return b("MercuryServerRequests").getForFBID(this.$1)};a.prototype.getThreadlistUntilTimestamp=function(a,c,d){d=d||b("MercuryFilters").ALL;return this.getThreadlistOrderMap(c,d).getElementsUntil(a)};a.prototype.getAvailableThreadlistNow=function(a,c){c=c||b("MercuryFilters").ALL;return this.getThreadlistOrderMap(a,c).getAllResources()};a.prototype.getThreadCount=function(a,c){c=c||b("MercuryFilters").ALL;return this.getThreadlistOrderMap(a,c).getCurrentArraySize()};a.prototype.hasLoadedThreadlist=function(a,c){c=c||b("MercuryFilters").ALL;return this.getThreadlistOrderMap(a,c).hasReachedEndOfArray()};a.prototype.unsubscribe=function(a,c,d){d=d||b("MercuryFilters").ALL,this.getThreadlistOrderMap(c,d).unsubscribe(a)};a.prototype.$11=function(){this.$6={},this.$7()};a.prototype.$7=function(){j.forEach(function(a){this.$6[a]={},i.forEach(function(c){this.$6[a][c]=new(b("RangedCallbackManager"))(function(a){a=this.$4.getThreadMetaNow(a);return a&&a.timestamp}.bind(this),function(a,b){return b-a},this.$2.canLinkExternally.bind(this.$2))}.bind(this))}.bind(this))};a.prototype.$13=function(a,b,c){var d=this.$4.getThreadMetaNow(a);return!!(d&&d.timestamp&&c&&b&&this.$14(a)==b&&this.$15(a).includes(c))};a.prototype.$16=function(a,c,d){__p&&__p();var e=this,f=[],g=!1,i=!1;a=(a||[]).filter(function(a){var e=a.filter||b("MercuryFilters").ALL;return(a.folder==c||!a.folder&&c==b("MessagingTag").INBOX)&&e==d});var j=this.$6[c][d].getAllResources(),k=void 0;a.forEach(function(a){f=f.concat(a.thread_ids);if(a.error)a.end>j.length&&(i=a.error);else{var b=a.end-a.start;a.thread_ids.length<b&&(g=!0)}(!k||a.end>k)&&(k=a.end)});this.$17(f,c,d);if(g)this.$6[c][d].setReachedEndOfArray();else if(i)this.$6[c][d].setError(i);else{var l=this.$6[c][d].getCurrentArraySize();k&&l<k&&(function(){var a={},g=j.concat(f);g=g.filter(function(b){var c=a[b];a[b]=!0;return c});g.length&&(h.warn("duplicate_threads",JSON.stringify({folder:c,expected_final_size:k,actual_final_size:l,duplicate_thread_ids:g})),e.getServerRequests().fetchThreadlistInfo(k,g.length,c,d==b("MercuryFilters").ALL?null:d,b("MercuryAPIArgsSource").MERCURY,e.$12(e.$6[c][d].getAllResources())))})()}};a.prototype.$8=function(a){j.forEach(function(b){i.forEach(function(c){this.$16(a,b,c)}.bind(this))}.bind(this))};a.prototype.$10=function(a){__p&&__p();var c={};this.$4;j.forEach(function(a){c[a]={},i.forEach(function(b){c[a][b]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}}})});a.forEach(function(a){__p&&__p();var d=a.thread_id;this.$18(d,function(e){__p&&__p();this.$19(d,function(f){__p&&__p();var h=function(){f.forEach(function(a){if(!i.includes(a))return;!e&&g(0);c[e][a].to_add.push(d);!this.$6[e][a].hasReachedEndOfArray()&&!this.$6[e][a].hasResource(d)&&(c[e][a].to_remove_if_last_after_add[d]=!0)}.bind(this))}.bind(this);function k(a){!e&&g(0),i.includes(a)&&(f.includes(a)?c[e][a].to_add.push(d):c[e][a].to_remove.push(d))}if(!e){(a.action_type===b("MercuryActionType").CHANGE_FOLDER||a.action_type===b("MercuryActionType").CHANGE_ARCHIVED_STATUS)&&j.forEach(function(a){a!==e&&i.forEach(function(b){this.$6[a][b].removeResources([d])}.bind(this))}.bind(this));return}!e&&g(0);switch(a.action_type){case b("MercuryActionType").DELETE_THREAD:f.forEach(function(a){if(!i.includes(a))return;c[e][a].to_remove.push(d)});break;case b("MercuryActionType").CHANGE_ARCHIVED_STATUS:case b("MercuryActionType").CHANGE_FOLDER:h();break;case b("MercuryActionType").CHANGE_READ_STATUS:k(b("MessagingTag").UNREAD);break;case b("MercuryActionType").USER_GENERATED_MESSAGE:case b("MercuryActionType").LOG_MESSAGE:f.forEach(function(a){if(!i.includes(a))return;this.$13(d,e,a)&&c[e][a].to_add.push(d)}.bind(this));break;case b("MercuryActionType").CHANGE_FLAG:k(b("PageMessageEnumTag").FLAG);break}}.bind(this))}.bind(this))}.bind(this));j.forEach(function(a){__p&&__p();i.forEach(function(b){var d=this.$6[a][b];this.$17(c[a][b].to_add,a,b);for(var e=d.getCurrentArraySize()-1;e>=0;e--){var f=d.getResourceAtIndex(e);if(!c[a][b].to_remove_if_last_after_add[f])break;c[a][b].to_remove.push(f)}d.removeResources(c[a][b].to_remove)}.bind(this))}.bind(this))};a.prototype.$9=function(a){__p&&__p();var b={};j.forEach(function(a){b[a]={},i.forEach(function(c){b[a][c]=[]})});a.forEach(function(a){this.$18(a.thread_id,function(c){this.$19(a.thread_id,function(d){c&&d.forEach(function(d){this.$13(a.thread_id,c,d)&&b[c][d].push(a.thread_id)}.bind(this))}.bind(this))}.bind(this))}.bind(this));j.forEach(function(a){i.forEach(function(c){b[a][c].length>0&&this.$17(b[a][c],a,c)}.bind(this))}.bind(this))};a.prototype.$17=function(a,c,d){d=d||b("MercuryFilters").ALL,this.$6[c][d].addResources(a),j.forEach(function(b){b!=c&&this.$6[b][d].removeResources(a)}.bind(this))};a.prototype.$18=function(a,b){this.$4.getThreadMeta(a,function(c){b(this.$14(a,c))}.bind(this))};a.prototype.$14=function(a,c){__p&&__p();c=c||this.$4.getThreadMetaNow(a);var d=null;!c?d="No thread metadata":c.folder||(d="No thread folder");if(d){d={error:d,tid:a};h.warn("no_thread_folder",JSON.stringify(d));return null}!c&&g(0);a=c.folder;c.is_archived&&(a=b("MessagingTag").ACTION_ARCHIVED);if(this.$6[a])return a;else return null};a.prototype.$19=function(a,b){this.$4.getThreadMeta(a,function(c){b(this.$15(a,c))}.bind(this))};a.prototype.$15=function(a,c){__p&&__p();c=c||this.$4.getThreadMetaNow(a);var d=[b("MercuryFilters").ALL];if(!c){a={error:"no_thread_metadata",tid:a};h.warn("no_thread_metadata",JSON.stringify(a));return[]}c.unread_count&&d.push(b("MessagingTag").UNREAD);c.is_canonical||d.push(b("MessagingTag").GROUPS);a=c.page_thread_info;a&&a.flagged&&d.push(b("PageMessageEnumTag").FLAG);return d};a.prototype.$12=function(a){var b=null;if(a.length>0){a=this.$4.getThreadMetaNow(a[a.length-1]);b=a?a.timestamp:null}return b};function k(a){switch(a.payload_source){case b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS:case b("MercuryPayloadSource").CLIENT_CHANGE_PAGE_FOLLOW_UP_STATUS:case b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS:case b("MercuryPayloadSource").CLIENT_CHANGE_FOLDER:case b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE:case b("MercuryPayloadSource").CLIENT_DELETE_MESSAGES:case b("MercuryPayloadSource").CLIENT_DELETE_THREAD:case b("MercuryPayloadSource").CLIENT_SEND_MESSAGE:case b("MercuryPayloadSource").SERVER_SEND_MESSAGE:case b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO:case b("MercuryPayloadSource").SERVER_THREAD_SYNC:case b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE:case b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS:return!0;case b("MercuryPayloadSource").SERVER_INITIAL_DATA:return!!a.ordered_threadlists;default:return!1}}var l=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySearchSnippetResults",["MercuryAPIArgsSource","MercuryIDs","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonMixin","MercuryThreadlistConstants","MercuryThreadIDMap","MessengerEnvironment","MessengerServerPayloadTransformer.bs","RangedCallbackManager","MercuryServerDispatcher"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MessengerEnvironment").messengerui?b("MercuryAPIArgsSource").MESSENGER:b("MercuryAPIArgsSource").WEBMESSENGER,h={},i={},j=null,k=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_LIMIT,m=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_MORE;function a(a){"use strict";this.$1=a,this.$2=b("MercuryServerPayloadPreprocessor").getForFBID(a),b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_snippets.php":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){this.handleUpdate(a)}.bind(this)}}),this.$3=b("MercuryThreadIDMap").getForFBID(a)}a.prototype.getFBID=function(){"use strict";return this.$1};a.prototype.getThreadIDMap=function(){"use strict";return this.$3};a.prototype.getAllThreadSearchResults=function(a,b){"use strict";a&&n(this.$1,a,l,0,b)};a.prototype.getAllLocalThreadSearchResults=function(a,b){"use strict";if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,0,c,b)}}};a.prototype.getAllThreadSearchMoreResults=function(a,b){"use strict";if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,m,c,b)}}};a.prototype.getSingleThreadSearchResults=function(a,b,c){"use strict";if(!a||!b)return;o.call(this,a,b,k,0,c)};a.prototype.getSingleThreadSearchMoreResults=function(a,b,c){"use strict";__p&&__p();if(!a||!b)return;if(!i[b])return;var d=i[b][a];if(d){var e=d.num_total_snippets;d=d.snippets_cbm.getCurrentArraySize();e=e-d;if(e>0){e=e>m?m:e;o.call(this,a,b,e,d,c)}}};a.prototype.countSnippetsMatchingQueryInThread=function(a,b){"use strict";b=i[b][a];if(b)return b.num_total_snippets};a.prototype.findIndexOfSnippet=function(a,b,c,d){"use strict";d=t(a,b);a=d.getAllResources();for(var b=0;b<a.length;b++)if(c===a[b].message_id)return b};a.prototype.findSnippetAtIndex=function(a,b,c,d){"use strict";q(a,b,c),r.call(this,a,b,c,d)};a.prototype.handleUpdate=function(a){"use strict";__p&&__p();if(a.graphql_payload){var c=(a.graphql_payload.message_threads||[]).map(function(c){return b("MessengerServerPayloadTransformer.bs").transformThread(this.$1,c,a.is_page)}.bind(this));this.$2.handleUpdate({threads:c,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}else a.mercury_payload&&this.$2.handleUpdate(a.mercury_payload);var d=a.search_snippets||{};Object.keys(d).filter(function(a){return!!d[a]}).forEach(function(a){Object.keys(d[a]).forEach(function(b){if(!d[a][b].snippets)return;d[a][b].snippets.forEach(function(a){a.matched_keywords=p(a.matched_keywords)})})});c=a.offset;var e=[];for(var f in d){var g=d[f];for(var h in g){var j=g[h],k=a.other_user_fbid||a.thread_fbid,l=this.$3.getClientIDFromServerIDNow(h),m=j.snippets,n=t(f,l),o=n.getCurrentArraySize();if(!k){e.push(l);if(o)continue}else if(c!=o)continue;l=i[l][f];l.num_total_snippets=j.num_total_snippets;j=m?m.length:0;j>0&&n.addResourcesWithoutSorting(m,o);(!k||a.limit>j)&&(n.getCurrentArraySize()==l.num_total_snippets&&n.setReachedEndOfArray())}if(!k){m=s(f);o=m.getCurrentArraySize();c==o&&(m.addResourcesWithoutSorting(e,o),a.limit>e.length&&m.setReachedEndOfArray())}}};function n(a,b,c,d,e){__p&&__p();if(j&&!j.thread_id){var f=s(j.query);f.unsubscribe(j.subscriber_id);j=null}var f=s(b),g=d+c;g=f.executeOrEnqueue(0,g,function(a){var c={};for(var d=0;d<a.length;d++){var g=a[d],h=i[g][b];c[g]={num_total_snippets:h.num_total_snippets,snippets:h.snippets_cbm.getAllResources()}}g=f.hasReachedEndOfArray();e(c,g)});var h=f.getUnavailableResources(g);if(h.length){j={query:b,thread_id:null,subscriber_id:g};h={query:b,offset:d,limit:c+1,snippetLimit:k};h.identifier="thread_fbid";u(h,a)}}function o(a,c,d,e,f){__p&&__p();if(j&&j.thread_id){var g=t(j.query,j.thread_id);g.unsubscribe(j.subscriber_id);j=null}var g=t(a,c),h=e+d;h=g.executeOrEnqueue(0,h,function(){var d=g.getAllResources(),b=i[c][a].num_total_snippets;f(d,b)});var k=g.getUnavailableResources(h);if(k.length){j={query:a,thread_id:c,subscriber_id:h};k={query:a,snippetOffset:e,snippetLimit:d};h=this.getThreadIDMap().getServerIDFromClientIDNow(c);e=b("MercuryIDs").tokenize(c);d=e.type;d=="user"?k.other_user_fbid=h:k.thread_fbid=h;k.identifier="thread_fbid";u(k,this.getFBID())}}function p(a){if(a instanceof Array){var b={};for(var c=0;c<a.length;c++)b[c.toString()]=a[c];return b}else return a}function q(a,b,c){}function r(a,b,c,d){__p&&__p();var e=i[b][a],f=e.snippets_cbm.getAllResources();e=e.num_total_snippets;var g=f.length;if(c<g){d(f[c].message_id);return}f=e-g;e=f>m?m:f;o.call(this,a,b,e,g,function(e,f){r.call(this,a,b,c,d)})}function s(a){h[a]||(h[a]=new(b("RangedCallbackManager"))());return h[a]}function t(a,c){i[c]||(i[c]={});var d=i[c][a];d||(d={num_total_snippets:-1,snippets_cbm:new(b("RangedCallbackManager"))()},i[c][a]=d);return d.snippets_cbm}function u(a,c){a.client=g,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_snippets.php",a,null,c)}Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("bs_marshal",["bs_caml_string","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.to_buffer: substring out of bounds"];else return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_buffer not implemented by bucklescript yet\n")}function g(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.data_size"];else return b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n")}function c(a,b){return 20+g(a,b)|0}function h(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else{var d=b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n");if(c>(a.length-(20+d|0)|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else return b("bs_caml_missing_polyfill").not_implemented("caml_input_value_from_string not implemented by bucklescript yet\n")}}function d(a,c){return h(b("bs_caml_string").bytes_of_string(a),c)}function e(a,c,d){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value not implemented by bucklescript yet\n")}function i(){return b("bs_caml_missing_polyfill").not_implemented("caml_input_value not implemented by bucklescript yet\n")}var j=20;f.to_channel=e;f.to_buffer=a;f.from_channel=i;f.from_bytes=h;f.from_string=d;f.header_size=j;f.data_size=g;f.total_size=c}),null);
__d("bs_obj",["bs_marshal","bs_caml_array","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_array").caml_array_get,h=b("bs_caml_array").caml_array_set;function a(){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_string not implemented by bucklescript yet\n")}function c(a,c){return[b("bs_marshal").from_bytes(a,c),c+b("bs_marshal").total_size(a,c)|0]}function i(a){a=a.length!==undefined&&(a.tag|0)!==248&&a.length>=1?a[0]:a;var c;if(a.length!==undefined&&a.tag===248)c=a[0];else throw b("bs_caml_builtin_exceptions").not_found;if(c.tag===252)return a;else throw b("bs_caml_builtin_exceptions").not_found}function d(a){try{a=i(a);return a[0]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_name"];else throw a}}function e(a){try{a=i(a);return a[1]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_id"];else throw a}}function j(a){try{return i(a)}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_slot"];else throw a}}var k=0,l=245,m=246,n=247,o=248,p=249,q=250,r=251,s=251,t=252,u=253,v=254,w=255,x=255,y=1e3,z=1001,A=1002;f.double_field=g;f.set_double_field=h;f.first_non_constant_constructor_tag=k;f.last_non_constant_constructor_tag=l;f.lazy_tag=m;f.closure_tag=n;f.object_tag=o;f.infix_tag=p;f.forward_tag=q;f.no_scan_tag=r;f.abstract_tag=s;f.string_tag=t;f.double_tag=u;f.double_array_tag=v;f.custom_tag=w;f.final_tag=x;f.int_tag=y;f.out_of_heap_tag=z;f.unaligned_tag=A;f.extension_name=d;f.extension_id=e;f.extension_slot=j;f.marshal=a;f.unmarshal=c}),null);
__d("bs_camlinternalLazy",["bs_obj","bs_curry","bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_exceptions").create("CamlinternalLazy.Undefined");function h(){throw g}function i(a){__p&&__p();var c=a[0];a[0]=h;try{c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}catch(b){a[0]=function(){throw b};throw b}}function j(a){var c=a[0];a[0]=h;c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}function a(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return i(a)}function c(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return j(a)}f.Undefined=g;f.force_lazy_block=i;f.force_val_lazy_block=j;f.force=a;f.force_val=c}),null);